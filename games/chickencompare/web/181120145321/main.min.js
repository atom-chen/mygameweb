function md5(n){var r,d,e,t,o,a,i,H,F,G=Array(),I=7,g=12,u=17,f=22,s=5,c=9,U=14,C=20,h=4,v=11,T=16,m=23,x=6,S=10,w=15,A=21;for(n=uTF8Encode(n),G=convertToWordArray(n),a=1732584193,i=4023233417,H=2562383102,F=271733878,r=0;r<G.length;r+=16)d=a,e=i,t=H,o=F,a=FF(a,i,H,F,G[r+0],I,3614090360),F=FF(F,a,i,H,G[r+1],g,3905402710),H=FF(H,F,a,i,G[r+2],u,606105819),i=FF(i,H,F,a,G[r+3],f,3250441966),a=FF(a,i,H,F,G[r+4],I,4118548399),F=FF(F,a,i,H,G[r+5],g,1200080426),H=FF(H,F,a,i,G[r+6],u,2821735955),i=FF(i,H,F,a,G[r+7],f,4249261313),a=FF(a,i,H,F,G[r+8],I,1770035416),F=FF(F,a,i,H,G[r+9],g,2336552879),H=FF(H,F,a,i,G[r+10],u,4294925233),i=FF(i,H,F,a,G[r+11],f,2304563134),a=FF(a,i,H,F,G[r+12],I,1804603682),F=FF(F,a,i,H,G[r+13],g,4254626195),H=FF(H,F,a,i,G[r+14],u,2792965006),i=FF(i,H,F,a,G[r+15],f,1236535329),a=GG(a,i,H,F,G[r+1],s,4129170786),F=GG(F,a,i,H,G[r+6],c,3225465664),H=GG(H,F,a,i,G[r+11],U,643717713),i=GG(i,H,F,a,G[r+0],C,3921069994),a=GG(a,i,H,F,G[r+5],s,3593408605),F=GG(F,a,i,H,G[r+10],c,38016083),H=GG(H,F,a,i,G[r+15],U,3634488961),i=GG(i,H,F,a,G[r+4],C,3889429448),a=GG(a,i,H,F,G[r+9],s,568446438),F=GG(F,a,i,H,G[r+14],c,3275163606),H=GG(H,F,a,i,G[r+3],U,4107603335),i=GG(i,H,F,a,G[r+8],C,1163531501),a=GG(a,i,H,F,G[r+13],s,2850285829),F=GG(F,a,i,H,G[r+2],c,4243563512),H=GG(H,F,a,i,G[r+7],U,1735328473),i=GG(i,H,F,a,G[r+12],C,2368359562),a=HH(a,i,H,F,G[r+5],h,4294588738),F=HH(F,a,i,H,G[r+8],v,2272392833),H=HH(H,F,a,i,G[r+11],T,1839030562),i=HH(i,H,F,a,G[r+14],m,4259657740),a=HH(a,i,H,F,G[r+1],h,2763975236),F=HH(F,a,i,H,G[r+4],v,1272893353),H=HH(H,F,a,i,G[r+7],T,4139469664),i=HH(i,H,F,a,G[r+10],m,3200236656),a=HH(a,i,H,F,G[r+13],h,681279174),F=HH(F,a,i,H,G[r+0],v,3936430074),H=HH(H,F,a,i,G[r+3],T,3572445317),i=HH(i,H,F,a,G[r+6],m,76029189),a=HH(a,i,H,F,G[r+9],h,3654602809),F=HH(F,a,i,H,G[r+12],v,3873151461),H=HH(H,F,a,i,G[r+15],T,530742520),i=HH(i,H,F,a,G[r+2],m,3299628645),a=II(a,i,H,F,G[r+0],x,4096336452),F=II(F,a,i,H,G[r+7],S,1126891415),H=II(H,F,a,i,G[r+14],w,2878612391),i=II(i,H,F,a,G[r+5],A,4237533241),a=II(a,i,H,F,G[r+12],x,1700485571),F=II(F,a,i,H,G[r+3],S,2399980690),H=II(H,F,a,i,G[r+10],w,4293915773),i=II(i,H,F,a,G[r+1],A,2240044497),a=II(a,i,H,F,G[r+8],x,1873313359),F=II(F,a,i,H,G[r+15],S,4264355552),H=II(H,F,a,i,G[r+6],w,2734768916),i=II(i,H,F,a,G[r+13],A,1309151649),a=II(a,i,H,F,G[r+4],x,4149444226),F=II(F,a,i,H,G[r+11],S,3174756917),H=II(H,F,a,i,G[r+2],w,718787259),i=II(i,H,F,a,G[r+9],A,3951481745),a=addUnsigned(a,d),i=addUnsigned(i,e),H=addUnsigned(H,t),F=addUnsigned(F,o);var L=wordToHex(a)+wordToHex(i)+wordToHex(H)+wordToHex(F);return L.toLowerCase()}var rotateLeft=function(n,r){return n<<r|n>>>32-r},addUnsigned=function(n,r){var d,e,t,o,a;return t=2147483648&n,o=2147483648&r,d=1073741824&n,e=1073741824&r,a=(1073741823&n)+(1073741823&r),d&e?2147483648^a^t^o:d|e?1073741824&a?3221225472^a^t^o:1073741824^a^t^o:a^t^o},F=function(n,r,d){return n&r|~n&d},G=function(n,r,d){return n&d|r&~d},H=function(n,r,d){return n^r^d},I=function(n,r,d){return r^(n|~d)},FF=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(F(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},GG=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(G(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},HH=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(H(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},II=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(I(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},convertToWordArray=function(n){for(var r,d=n.length,e=d+8,t=(e-e%64)/64,o=16*(t+1),a=Array(o-1),i=0,H=0;d>H;)r=(H-H%4)/4,i=H%4*8,a[r]=a[r]|n.charCodeAt(H)<<i,H++;return r=(H-H%4)/4,i=H%4*8,a[r]=a[r]|128<<i,a[o-2]=d<<3,a[o-1]=d>>>29,a},wordToHex=function(n){var r,d,e="",t="";for(d=0;3>=d;d++)r=n>>>8*d&255,t="0"+r.toString(16),e+=t.substr(t.length-2,2);return e},uTF8Encode=function(n){n=n.replace(/\x0d\x0a/g,"\n");for(var r="",d=0;d<n.length;d++){var e=n.charCodeAt(d);128>e?r+=String.fromCharCode(e):e>127&&2048>e?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128))}return r};function customClickEvent(){var e;return window.CustomEvent?e=new window.CustomEvent("click",{canBubble:!0,cancelable:!0}):(e=document.createEvent("Event"),e.initEvent("click",!0,!0)),e}var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),CCalien;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._needActive=!0,e.init(),e}return __extends(i,t),i.prototype.init=function(){this._pageStack=[],this._pageCache={}},i.prototype.push=function(t,n,o,a){var r=this;if(void 0===n&&(n=!0),void 0===o&&(o=null),void 0===a&&(a=!0),t&&!this.playing){var s=t.defName,c=this._pageCache[s];c||(this._pageCache[s]=c=new t,c.navigation=this),this._currentPage=c;var h="push";if(this.addChild(c),this._pageStack.length>0&&c.beforeShow(h,o),a&&this.dispatchEventWith(i.NAVIGATE,!1,{action:h,page:c}),this._pageStack.length>0){var l=e.CCDDZStageProxy.width,u=this._pageStack[this._pageStack.length-1];this._pageStack.push(c);var p=function(){u.onHide(h,o),r.removeChild(u)},C=function(){u.onShow(h,o),r._tween=null};c.x=l,u.beforeHide(h,o),n?egret.Tween.get(u).to({x:-l},i.duration,egret.Ease.quartInOut).call(p,this):(u.x=-l,p.call(this)),n?this._tween=egret.Tween.get(c).to({x:0},i.duration,egret.Ease.quartInOut).call(C,this):(c.x=0,C.call(this))}else this._pageStack.push(c),c.onShow(h,o)}},i.prototype.pop=function(t,n,o){var a=this;if(void 0===t&&(t=!0),void 0===n&&(n=null),void 0===o&&(o=!0),!this.playing&&this._pageStack.length>1){var r="pop",s=e.CCDDZStageProxy.width,c=this._pageStack.pop(),h=this._currentPage=this._pageStack[this._pageStack.length-1];this.addChild(h),o&&this.dispatchEventWith(i.NAVIGATE,!1,{action:r,page:h});var l=function(){c.onHide(r,n),a.removeChild(c),a._tween=null},u=function(){h.onShow(r,n)};h.beforeShow(r,n),t?egret.Tween.get(h).to({x:0},i.duration,egret.Ease.quartInOut).call(u,this):(h.x=0,u.call(this)),c.beforeHide(r,n),t?this._tween=egret.Tween.get(c).to({x:s},i.duration,egret.Ease.quartInOut).call(l,this):(c.x=s,l.call(this))}},i.prototype.popAll=function(t,n,o){var a=this;if(void 0===t&&(t=!0),void 0===n&&(n=null),void 0===o&&(o=!0),!this.playing)if(this._pageStack.length>1){var r="pop",s=e.CCDDZStageProxy.width,c=this._pageStack.pop();this._pageStack.splice(1);var h=this._currentPage=this._pageStack[this._pageStack.length-1];this.addChild(h),o&&this.dispatchEventWith(i.NAVIGATE,!1,{action:r,page:h}),h.beforeShow(r,n),c.beforeHide(r,n),t?(egret.Tween.get(h).to({x:0},i.duration,egret.Ease.quartInOut).call(function(){h.onShow(r,n)}),this._tween=egret.Tween.get(c).to({x:s},i.duration,egret.Ease.quartInOut).call(function(){c.onHide(r,n),a.removeChild(c),a._tween=null})):(h.x=0,c.x=s,h.onShow(r,n),c.onHide(r,n),this.removeChild(c))}else this._needActive=!0,this.active(o)},i.prototype.active=function(e){void 0===e&&(e=!0),this._needActive&&(this._needActive=!1,e&&(this._currentPage.beforeShow("active"),this.dispatchEventWith(i.NAVIGATE,!1,{action:"pop",page:this._currentPage})))},i.prototype.deactive=function(){this._needActive=!0,this._currentPage.beforeHide("deactive")},Object.defineProperty(i.prototype,"size",{get:function(){return this._pageStack.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return!!this._tween},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPage",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),i.NAVIGATE="navigate",i.duration=500,i}(eui.Group);e.CCDDZNavigator=t,__reflect(t.prototype,"CCalien.CCDDZNavigator");var i=function(e){function t(){var t=e.call(this)||this;return t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.beforeShow=function(e,t){void 0===t&&(t=null)},t.prototype.beforeHide=function(e,t){void 0===t&&(t=null)},t.prototype.onShow=function(e,t){void 0===t&&(t=null)},t.prototype.onHide=function(e,t){void 0===t&&(t=null)},t}(eui.Component);e.NavigationPage=i,__reflect(i.prototype,"CCalien.NavigationPage")}(CCalien||(CCalien={}));var CCDDZSeat=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.setUserOffline=function(e){this.offline_img.visible=e},t.prototype._onTouchHead=function(){if(this._userInfoData){var e=(100*this._userInfoData.getWinRate()).toFixed(0)+"%",t=this._userInfoData.redcoingot,i=this._userInfoData.nickname,n=this._userInfoData.gold,o=this._userInfoData.imageid,a=this._userInfoData.totalwincnt+this._userInfoData.totallosecnt+this._userInfoData.totaldrawcnt,r=this._userInfoData.seatid,s=this._userInfoData.uid,c=this._userInfoData.praise,h={nick:i,gold:n,head:o,winRate:e,game:a,redBeg:t,seatId:r,uid:s,praise:c};CCDDZPanelPlayerInfo.getInstance().show(h)}},t.prototype.setHeadTouch=function(e){this.userInfoView.avatar.setHeadTouch(e),this.userInfoView.avatar.setHeadTouchFunc(this._onTouchHead.bind(this))},t.prototype.reset=function(e){return void 0===e&&(e=!1),this.labChange.visible=!1,this.setUserOffline(!1),this.stopCD(),e||(this.cleanHand(),this.cleanDesk()),this},t.prototype.clean=function(e,t){return this.reset(e),t&&this.userInfoView.clean(),this},t.prototype.addCards=function(e,t){void 0===t&&(t=!0)},t.prototype.useCards=function(e){},t.prototype.startCD=function(e){},t.prototype.stopCD=function(){},t.prototype.cleanDesk=function(){this.deskCardGroup.clean()},t.prototype.cleanHand=function(){this.handCardGroup.clean()},t.prototype.playChat=function(e){},t.prototype.playChangeEffect=function(e,t){void 0===t&&(t=0);var i=this.labChange;i.font=RES.getRes(e>0?"cc_font_num_1":"cc_font_num_2");var n=CCDDZUtils.currencyRatio(Math.abs(e));i.text=e>0?"+"+n:"-"+n,i.y+=50,i.alpha=0,i.visible=!0,egret.Tween.get(i).wait(t).to({y:i.y-50,alpha:1},1e3,egret.Ease.cubicOut)},Object.defineProperty(t.prototype,"userInfoData",{get:function(){return this._userInfoData},set:function(e){this._setUserInfoData(e)},enumerable:!0,configurable:!0}),t.prototype._setUserInfoData=function(e){this._userInfoData=e,this._userInfoData||this.userInfoView.clean()},t.prototype.updateUserInfoData=function(e){this._userInfoData.initData(e),this.userInfoView.update(this._userInfoData)},t.prototype.setQuitFlagVisible=function(e){this.userInfoView.avatar.setQuitFlagVisible(e)},t.prototype.setOwnerFlagVisible=function(e){this.userInfoView.avatar.setOwnerFlagVisible(e)},t.prototype.playWinGoldAnimate=function(){this.userInfoView.playWinGoldAnimate()},t.prototype.getHeadCenterPos=function(){return this.userInfoView.avatar.getHeadCenGlobalPos()},t.prototype.getAvatarPos=function(){return this._avatarglobalPos||(this._avatarglobalPos=this.userInfoView.localToGlobal(this.userInfoView.avatar.x,this.userInfoView.avatar.y),this._avatarglobalPos.x+=.65*this.userInfoView.avatar.width/2,this._avatarglobalPos.y+=.65*this.userInfoView.avatar.height/2),this._avatarglobalPos},t}(eui.Component);__reflect(CCDDZSeat.prototype,"CCDDZSeat");var CCCardGroupBase=function(e){function t(){var t=e.call(this)||this;return t.scale=1,t.align=.5,t.warpCount=100,t._showordercardsAniItval=0,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.initData=function(e){void 0===e&&(e=null),this.clean()},t.prototype.clean=function(){CCDDZUtils.recycleCards(this),this.cardCount=0},t.prototype.addCards=function(e,t,i){var n=this;if(void 0===t&&(t=!0),void 0===i&&(i=!1),i){if(0!=this._showordercardsAniItval)return;var o=0,a=e.length;this._clearAnimationInterval(),CCDDZSoundManager.instance.playEffect(CCResNames.cc_special_dispatch),e.forEach(function(e,t){var i=CCCard.create({pid:e});i.visible=!1,n.addCard(i,t)}),this.adjustCards(!1);var r=function(){o>this.numChildren-1&&this._clearAnimationInterval();var e=this.getChildAt(o);e&&(e.visible=!0),o++,o>a-1&&this._clearAnimationInterval()}.bind(this);this._showordercardsAniItval=egret.setInterval(function(){r()},this,200),r()}else CCDDZSoundManager.instance.playEffect(CCResNames.cc_send_hintcard),e.forEach(function(e,t){var i=CCCard.create({pid:e});n.addCard(i,t)}),this.adjustCards(t);return this.numChildren},t.prototype._clearAnimationInterval=function(){0!=this._showordercardsAniItval&&egret.clearInterval(this._showordercardsAniItval),this._showordercardsAniItval=0},t.prototype.sortCards=function(e){return console.log("sortCards--------",e),CCalien.CCDDZUtils.enumChildren(this,function(t,i){var n={pid:e[i]};t.initData(n)}),this.numChildren},t.prototype.addCard=function(e,t){var i=this;void 0===t&&(t=0),e.scaleX=e.scaleY=this.scale,CCalien.CCDDZUtils.enumChildren(this,function(t,n){if(CCGlobalGameConfig.currentSortType==SORT_TYPE_VALUE){if(e.pokerId>t.pokerId)return i.addChildAt(e,n),!0}else if(140==e.pokerId||150==e.pokerId||140==t.pokerId||150==t.pokerId){if(e.pokerId>t.pokerId)return i.addChildAt(e,n),!0}else if(e.pokerId%10!=t.pokerId%10){if(e.pokerId%10>t.pokerId%10)return i.addChildAt(e,n),!0}else if(Math.floor(e.pokerId/10)!=Math.floor(t.pokerId/10)){if(Math.floor(e.pokerId/10)>Math.floor(t.pokerId/10))return i.addChildAt(e,n),!0}else if(e.pokerId>t.pokerId)return i.addChildAt(e,n),!0}),e.parent||this.addChild(e),this.cardCount++,e.addPlaying=!0},t.prototype.removeHandCardsByNum=function(e){for(var t,i=this,n=e;n>0;)t=i.getChildAt(0),t&&i.removeChild(t),n--},t.prototype.removeHandCardsToDeskCardsGrp=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),e.receiveCardsFromGroup.call(e,this,t);var o=t.length;i&&(this.cardCount-=o),"right_2"==this.currentState&&ccserver.isCoupleGame&&0==n&&this.removeHandCardsByNum(o),this.adjustCards(!0)},t.prototype.getCardGapH=function(e){return e&&CCGlobalGameConfig.CARD_GAP_H*(e-1)+CCGlobalGameConfig.CARD_WIDTH*CCGlobalGameConfig.CARD_SCALE>CCalien.CCDDZStageProxy.stage.stageWidth?(CCalien.CCDDZStageProxy.stage.stageWidth-CCGlobalGameConfig.CARD_WIDTH*CCGlobalGameConfig.CARD_SCALE)/(e-1):CCGlobalGameConfig.CARD_GAP_H},t.prototype.receiveCardsFromGroup=function(e,t){var i=this,n=this.scale;t.sort(function(e,t){return t.pokerId-e.pokerId});var o=t.length,a=0,r=this.getCardGapH(o),s=(this.width-(r*Math.min(o,this.warpCount)+CCGlobalGameConfig.CARD_OFFSET)*n)*this.align;if(-1!=this.name.indexOf("DeskGroup")&&"handCardGroup"==e.name){r=55;var c=CCGlobalGameConfig.CARD_WIDTH-r;s=(this.width-(r*Math.min(o,this.warpCount)+c)*n)*this.align}if(ccserver.isCoupleGame){var h=CCGlobalGameConfig.CARD_WIDTH*this.scale;if(s=.5*(this.width-(r*this.cardCount+CCGlobalGameConfig.CARD_OFFSET)*this.scale),"left"==this.currentState)return;"right_2"==this.currentState&&(r=.5*h,s=.5*(this.width-(r*(o-1)+h)))}var l=this.localToGlobal(s,0),u=e.globalToLocal(l.x,l.y);t.forEach(function(e,t){e.select=!1,e.sending=!0;var c=Math.floor(t/i.warpCount),h=0;h=u.x+t%i.warpCount*r*n,ccserver.isCoupleGame&&"right_2"==i.currentState&&(h=u.x+t%i.warpCount*r);var l=u.y+c*CCGlobalGameConfig.CARD_GAP_V*n;e.animate({x:h,y:l,scaleX:n,scaleY:n},0,null,200).call(function(t){e.sending=!1,e.parent&&e.parent.removeChild(e),i.addChildAt(e,0);var h=0;h=s+t%i.warpCount*r*n,ccserver.isCoupleGame&&"right_2"==i.currentState&&(h=s+t%i.warpCount*r),e.x=h,e.y=c*CCGlobalGameConfig.CARD_GAP_V*n,a++,a==o&&i.adjustCardsEnd()},i,[t])})},Object.defineProperty(t.prototype,"stageCenterPos",{get:function(){if(!this._stageCenterPos){var e=this.globalToLocal(CCalien.CCDDZStageProxy.width/2-CCGlobalGameConfig.CARD_WIDTH/2,CCalien.CCDDZStageProxy.height/2-CCGlobalGameConfig.CARD_HEIGHT/2);this._stageCenterPos={x:e.x,y:e.y}}return this._stageCenterPos},enumerable:!0,configurable:!0}),t.prototype.adjustCards=function(e){var t=this;void 0===e&&(e=!0);var i,n,o=0,a=0,r=0,s=CCGlobalGameConfig.CARD_WIDTH*this.scale;if(i=this.getCardGapH(this.cardCount),n=this.width-(i*this.cardCount+CCGlobalGameConfig.CARD_OFFSET)*this.scale>>1,ccserver.isCoupleGame){if("left"==this.currentState)return;"right_2"==this.currentState&&(i=.5*s,n=.5*(this.width-(i*(this.cardCount-1)+s)))}CCalien.CCDDZUtils.enumChildren(this,function(e){e.sending||r++}),CCalien.CCDDZUtils.enumChildren(this,function(s){if(!s.sending){var c=0;c=n+a*i*t.scale,ccserver.isCoupleGame&&"right_2"==t.currentState&&(c=n+a*i);var h=0;if(e){var l=void 0;s.addPlaying?(CCalien.CCDDZUtils.injectProp(s,{alpha:0,scaleX:.2,scaleY:.2}),l=s.animate({alpha:1,scaleX:t.scale,scaleY:t.scale,x:c,y:h},20*o,t.stageCenterPos),l.call(function(){s.addPlaying=!1,t.onCardAdded&&t.onCardAdded(s)})):l=s.animate({x:c,y:h,alpha:1}),l.call(function(){o++,o>=r&&t.adjustCardsEnd()})}else s.x=c,s.y=h,s.addPlaying=!1;a++}}),e||this.adjustCardsEnd()},t.prototype.adjustCardsEnd=function(){},t.prototype.destroyCard=function(e){var t=this;egret.Tween.get(e).to({alpha:0},100).call(function(e){t.removeChild(e),CCCard.recycle(e)},this,[e])},t}(eui.Group);__reflect(CCCardGroupBase.prototype,"CCCardGroupBase");var CCalien;!function(e){var t=function(t){function i(i,n,o,a,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!1);var s=t.call(this)||this;return s._excludeActionsClose=[],s.showEffect=i||e.CCDDZpopupEffect.None,s.showEffectParams=n,s.closeEffect=o||e.CCDDZpopupEffect.None,s.closeEffectParams=a,s.popupShowBanner=r,s._excludeActionsClose=[],s.init(),s}return __extends(i,t),i.prototype.init=function(){},i.prototype.addExcludeForClose=function(e){this._excludeActionsClose=this._excludeActionsClose.concat(e)},i.prototype.dealAction=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var i=this._callback;this._excludeActionsClose.indexOf(e)<0&&this.close(),i&&i(e||"close",t)},i.prototype.popup=function(t,i,n){void 0===t&&(t=null),void 0===i&&(i=!0),void 0===n&&(n=null),e.CCDDZPopUpManager.addPopUp(this,this.showEffect,this.showEffectParams,t,i,n)},i.prototype.close=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=null),e.CCDDZPopUpManager.removePopUp(this,this.closeEffect,this.closeEffectParams,t,i)},i}(eui.Component);e.CCDDZPanelBase=t,__reflect(t.prototype,"CCalien.CCDDZPanelBase")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.onStageResize(),i.touchChildren=!0,i.touchEnabled=!1,e.CCDDZStageProxy.stage.addEventListener(egret.Event.RESIZE,i.onStageResize,i),i}return __extends(i,t),i.prototype.onStageResize=function(t){void 0===t&&(t=null),this.width=e.CCDDZStageProxy.stage.stageWidth,this.height=e.CCDDZStageProxy.stage.stageHeight},i.prototype._beforeShow=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.beforeShow(e,t)},i.prototype._beforeHide=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.beforeHide(e,t)},i.prototype._onShow=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.onShow(e,t)},i.prototype._onHide=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.onHide(e,t)},i.prototype.beforeShow=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1)},i.prototype.beforeHide=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1)},i.prototype.onShow=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1)},i.prototype.onHide=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1)},i}(eui.Component);e.CCDDZSceneBase=t,__reflect(t.prototype,"CCalien.CCDDZSceneBase")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){this.mapSceneDef=new e.HashMap,this.mapScene=new e.HashMap,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.init=function(e,i){void 0===i&&(i="loading"),t.instance.init(e,i)},t.addMostTopScene=function(e,i){t.instance.addMostTopScene(e,i)},t.addTopScene=function(e,i){t.instance.addTopScene(e,i)},t.addEffectScene=function(e,i){t.instance.addEffectScene(e,i)},t.addBottomScene=function(e,i){t.instance.addBottomScene(e,i)},t.register=function(e,i,n){void 0===n&&(n=null),t.instance.register(e,i,n)},t.show=function(e,i,n,o,a,r,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!1),void 0===s&&(s=null),t.instance.show(e,i,n,o,a,r,s)},t.back=function(e,i,n,o){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),t.instance.back(e,i,n,o)},t.addOtherContainer=function(e){e&&t.instance.topLayer.addChild(e)},t.removeOtherContainer=function(e){e&&t.instance.topLayer.removeChild(e)},t.removeDDZContainer=function(){var i,n=t.instance,o=n.middleLayer;o.$children.forEach(function(t){i=t,i instanceof CCDDZSceneLoading||(n.mapScene.remove(i.name),e.CCDDZEventManager.instance.disableOnObject(i),n.middleLayer.removeChild(i))}),n.currentScene=null,n.currentSceneName=null},t.prototype.init=function(t,i){void 0===i&&(i="loading"),this.root=t,this.loadingSceneName=i,this.root.addChild(this.background=new egret.Shape),this.root.addChild(this.bottomLayer=new eui.Group),this.root.addChild(this.middleLayer=new eui.Group),this.root.addChild(this.topLayer=new eui.Group),this.root.addChild(this.popLayer=new eui.Group),this.root.addChild(this.effectLayer=new eui.Group),this.root.addChild(this.mostTopLayer=new eui.Group),this.bottomLayer.touchEnabled=!1,this.middleLayer.touchEnabled=!1,this.topLayer.touchEnabled=!1,this.popLayer.touchEnabled=!1,this.effectLayer.touchEnabled=!1,this.mostTopLayer.touchEnabled=!1,this.backgroundColor=16777215,e.CCDDZStageProxy.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)},t.prototype.onStageResize=function(t){void 0===t&&(t=null),e.CCDDZUtils.enumChildren(this.root,function(t){t.width=e.CCDDZStageProxy.stage.stageWidth,t.height=e.CCDDZStageProxy.stage.stageHeight}),this.reDrawBG()},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this.reDrawBG()},enumerable:!0,configurable:!0}),t.prototype.reDrawBG=function(){var t=this.background.graphics;t.beginFill(this._backgroundColor),t.drawRect(0,0,e.CCDDZStageProxy.width,e.CCDDZStageProxy.height),t.endFill()},t.prototype.onResourceLoadComplete=function(e){console.log("111RES LOAD COMPLETE:"+e.groupName),e.groupName==this.currentLoadGroup&&this.nextShowEntity&&(this.show(this.nextShowEntity.name,this.nextShowEntity.params,this.nextShowEntity.effectDef,this.nextShowEntity.effectParams,this.nextShowEntity.callback,this.nextShowEntity.back),this.currentLoadGroup=null,this.nextShowEntity=null)},t.prototype.onResourceProgress=function(t){t.groupName==this.currentLoadGroup&&e.CCDDZDispatcher.dispatch("loadingProgress",{itemsLoaded:t.itemsLoaded,itemsTotal:t.itemsTotal})},t.prototype.onResourceLoadError=function(e){ccddzwebService.postError(CCGlobalErrorConfig.RESOURCE_LOAD_ERROR,e.groupName)},t.prototype.addMostTopScene=function(e,t){var i=new t;this.mostTopLayer.addChild(i),i._beforeShow(null)},t.prototype.addTopScene=function(e,t){var i=new t;this.topLayer.addChild(i),i._beforeShow(null)},t.prototype.addEffectScene=function(e,t){var i=new t;this.effectLayer.addChild(i),i._beforeShow(null)},t.prototype.addBottomScene=function(e,t){var i=new t;this.bottomLayer.addChild(i),i._beforeShow(null)},t.prototype.register=function(e,t,n){void 0===n&&(n=null),this.mapSceneDef.put(e,new i(t,n))},t.prototype.show=function(t,i,o,a,r,s,c){if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=!1),void 0===c&&(c=null),this.currentSceneName==t)this.currentScene._beforeShow(i,!1),this.currentScene._onShow(i,!1);else{var h=void 0,l=void 0,u=this.mapSceneDef.get(t);if(u.resGroup&&!RES.isGroupLoaded(u.resGroup))this.nextShowEntity=new n(t,i,o,a,r,s),this.currentLoadGroup=u.resGroup,egret.setTimeout(function(){RES.loadGroup(u.resGroup)},this,100),t=this.loadingSceneName,l=this.mapScene.get(t),l.resetDesc(),o=null;else if(this.mapScene.containsKey(t))l=this.mapScene.get(t);else{var p=u.sceneDef;l=new p,l.name=t,this.mapScene.put(t,l)}!h&&this.currentSceneName?(h=o?new o:new e.CCDDZsceneEffect.None,this.currentScene._beforeHide(i,s)):h=new e.CCDDZsceneEffect.None,this.currentScene&&(egret.Tween.removeTweens(this.currentScene),this.currentScene.touchChildren=!1),egret.Tween.removeTweens(l),h.handover(this.currentScene,l,this.middleLayer,a,function(e,t){e&&e._onHide(i,s),t.touchChildren=!0,t._onShow(i,s),r&&r()}.bind(this,this.currentScene,l)),this.currentScene=l,this.currentSceneName=t,s?this.lastSceneName=t:t!=this.loadingSceneName&&(this.currentScene.lastSceneName=null!=c?c:this.lastSceneName,this.lastSceneName=t),this.currentScene._beforeShow(i,s)}},t.prototype.back=function(e,t,i,n){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),this.currentScene.lastSceneName&&""!=this.currentScene.lastSceneName?(this.show(this.currentScene.lastSceneName,e,t,i,n,!0),!0):!1},t}();e.CCDDZSceneManager=t,__reflect(t.prototype,"CCalien.CCDDZSceneManager");var i=function(){function e(e,t){void 0===t&&(t=null),this.sceneDef=e,this.resGroup=t}return e}();e.SceneConfig=i,__reflect(i.prototype,"CCalien.SceneConfig");var n=function(){function e(e,t,i,n,o,a){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.params=null,this.effectDef=null,this.effectParams=null,this.callback=null,this.back=null,this.name=e,this.params=t,this.effectDef=i,this.callback=o,this.back=a}return e}();e.ShowEntity=n,__reflect(n.prototype,"CCalien.ShowEntity")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){this._groups={}}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t,n,o,a,r,s){void 0===s&&(s=0);var c=new i;e.CCDDZUtils.injectProp(c,{target:n,eventName:o,callback:a,thisObj:r,priority:s},null,!1);var h=this._groups[t];h||(h=this._groups[t]={enable:!1,items:[]}),h.items.push(c)},t.prototype.registerOnObject=function(e,t,i,n,o,a){void 0===a&&(a=0),this.register(e.__class__,t,i,n,o,a)},t.prototype.enable=function(e){var t=this._groups[e];t&&!t.enable&&(t.enable=!0,t.items.forEach(function(e){e.target.addEventListener(e.eventName,e.callback,e.thisObj,!1,e.priority)}))},t.prototype.enableOnObject=function(e){this.enable(e.__class__)},t.prototype.disable=function(e){var t=this._groups[e];t&&t.enable&&(t.enable=!1,t.items.forEach(function(e){e.target.removeEventListener(e.eventName,e.callback,e.thisObj)}))},t.prototype.disableOnObject=function(e){this.disable(e.__class__)},t.prototype.dump=function(e){void 0===e&&(e=null);for(var t in this._groups){var i=this._groups[t];console.log(t+"["+i.items.length+"]: "+(i.enable?"● enable":"○ disable")),console.log(i.items.map(function(e){return e.eventName}).join(","))}},t}();e.CCDDZEventManager=t,__reflect(t.prototype,"CCalien.CCDDZEventManager");var i=function(){function e(){}return e}();e.RegisterItem=i,__reflect(i.prototype,"CCalien.RegisterItem")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){this._enablePlay=!0,this._hasTap=!1}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.enablePlayMusic=function(e){this._enablePlay=e},t.prototype.loadMusic=function(e){e&&RES.getResAsync(e,this.onMusicLoadOver,this)},t.prototype.onMusicLoadOver=function(t){return ccserver._isInDDZ?(console.log("onMusicLoadOver-------------->"),void ccserver.ddzDispatchEvent(4,"",{type:4,soundType:1,soundRes:"pdk_bgm"})):(t&&(t.type=egret.Sound.MUSIC),e.Native.instance.isNative?void this.playMusic(this.musicRes):void(this._hasTap?this.playMusic(this.musicRes):this._addH5ClickPlay()))},t.prototype._addH5ClickPlay=function(){var t=this;if(!e.Native.instance.isNative&&!this._hasTap)if("iOS"!=egret.Capabilities.os){var i=document.getElementById("ddzCopyBtn");i.onclick=function(){t._hasTap=!0,t.playMusic(t.musicRes)};var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),i.dispatchEvent(n)}else e.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},t.prototype.onStageTap=function(){this._hasTap=!0,e.Native.instance.isNative||"iOS"==egret.Capabilities.os&&this.playMusic(this.musicRes),e.CCDDZStageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},t.prototype.onMusicLoadError=function(){ccddzwebService.postError(CCGlobalErrorConfig.BMG_LOAD_ERROR,""),e.CCDDZStageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},t.prototype.onPause=function(){this.stopMusic(),this.stopEffect()},t.prototype.onResume=function(){this.playMusic(this.musicRes)},t.prototype.playMusic=function(t){var i=this.musicMute,n=e.CCDDZStageProxy.isPause();if(this.musicRes=t,ccserver._isInDDZ)return console.log("playMusic----inddz------->"),this.musicRes="cc_bg_mp3",void(""==t||1==i?ccserver.ddzDispatchEvent(4,"",{type:4,soundType:1,soundRes:""}):ccserver.ddzDispatchEvent(4,"",{type:4,soundType:1,soundRes:"cc_bg_mp3"}));if(!i&&this._enablePlay&&!n){this.stopMusic();var o=RES.getRes(t);if(!o)return void this.loadMusic(t);this._addH5ClickPlay(),o.type=egret.Sound.MUSIC,this.musicChannel=o.play(),this.musicChannel.volume=1,this.musicPlaying=!0}},t.prototype.stopMusic=function(t){void 0===t&&(t=!1),console.log("stopMusic ---->mute:",this.musicMute,ccserver._isInDDZ),ccserver._isInDDZ&&e.CCDDZSoundManager.instance.playMusic(""),this.musicChannel&&(this.musicChannel.stop(),this.musicChannel=null),this.musicPlaying=!1},t.prototype.switchMusic=function(){this.musicMute=!this.musicMute,CCDDZOtherGameManager.instance.onMusicEnableChange(),this.musicRes&&(this.musicMute?this.stopMusic(!0):this.playMusic(this.musicRes))},Object.defineProperty(t.prototype,"musicMute",{get:function(){var t=e.CCDDZlocalStorage.getItem("musicMute");return t?"1"==t:!1},set:function(t){e.CCDDZlocalStorage.setItem("musicMute",t?"1":"0")},enumerable:!0,configurable:!0}),t.prototype.playEffect=function(t,i,n){var o=this;void 0===t&&(t=null),void 0===i&&(i=1),void 0===n&&(n=!1),t&&(this.effectRes=t);var a=e.CCDDZStageProxy.isPause();return this.effectMute||a?void 0:ccserver._isInDDZ?(console.log("playMusic----inddz------->"),void ccserver.ddzDispatchEvent(4,"",{type:4,soundType:2,soundRes:t})):void RES.getResAsync(this.effectRes,function(e){e?(e.type=egret.Sound.EFFECT,o.effectChannel=e.play(0,i)):console.log(">>>>>>>>>>"+t+" can't loaded")},this)},t.prototype.stopEffect=function(){this.effectChannel&&this.effectChannel.stop()},t.prototype.onSoundComplete=function(e){if(this.musicChannel){egret.Tween.get(this.musicChannel,null,null,!0).to({volume:1},500);var t=e.target;t.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)}},t.prototype.switchEffect=function(){this.effectMute=!this.effectMute,CCDDZOtherGameManager.instance.onEffectEnableChange()},Object.defineProperty(t.prototype,"effectMute",{get:function(){var t=e.CCDDZlocalStorage.getItem("effectMute");return t?"1"==t:!1},set:function(t){e.CCDDZlocalStorage.setItem("effectMute",t?"1":"0")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allMute",{get:function(){return this.musicMute},enumerable:!0,configurable:!0}),t.prototype.switchAll=function(){this.switchEffect(),this.switchMusic()},t.prototype.vibrate=function(){this.vibrateMute||e.Native.instance.vibrate()},Object.defineProperty(t.prototype,"vibrateMute",{get:function(){var t=e.CCDDZlocalStorage.getItem("vibrateMute");return t?"1"==t:!1},set:function(t){e.CCDDZlocalStorage.setItem("vibrateMute",t?"1":"0")},enumerable:!0,configurable:!0}),t.prototype.switchVibrate=function(){this.vibrateMute=!this.vibrateMute,CCDDZOtherGameManager.instance.onVibrateEnableChange()},t}();e.CCDDZSoundManager=t,__reflect(t.prototype,"CCalien.CCDDZSoundManager")}(CCalien||(CCalien={}));var ccddz_phoneLen=11,ccddz_codeLen=4,ccddz_exCodeLen=20,ccddz_nameLen=6,ccddz_idLen=18,ccddz_phonePrompt="请输入"+ccddz_phoneLen+"位手机号码",ccddz_codePrompt="请输入"+ccddz_codeLen+"位数字验证码",ccddz_namePrompt="请输入姓名",ccddz_idPrompt="请输入18位身份证号码",ccddz_exCodePrompt="请输入兑换码",CCalien;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.isMiniApp=!1,e._dicCall={},e._channelId=null,e._urlParams={},e._initDefaultWX(),e._initData(),e}return __extends(i,t),Object.defineProperty(i,"instance",{get:function(){return void 0==this._instance&&(this._instance=new i),this._instance},enumerable:!0,configurable:!0}),i.prototype.onWXReadyCallInit=function(){var t=e.Native.instance;t.isWXMP&&(t.initWXFunc(),t.wxConfig())},i.prototype._initData=function(){if(this._isAli=!1,this._isWXMP=!1,this.isMiniApp=!1,this._channel="self",this._urlParams=e.CCDDZUtils.getUrlParams(),this.isAndroidWebView()){var t=this._urlParams.showLog;t&&1==t?this.callAndroidFunc("enableLog",!0):this.callAndroidFunc("enableLog",!1)}},i.prototype.callAndroidFunc=function(e,t){var i=window.javaBridge[e].bind(window.javaBridge);null!=t?(console.log("callAndroidFunc----1",e,t),i(t)):(console.log("callAndroidFunc----2",e,t),i())},i.prototype.getUrlArg=function(){return this._urlParams},i.prototype.setInMiniApp=function(e){(this.isNative||e)&&egret.ExternalInterface.addCallback("nativeCall",this.nativeCall.bind(this)),this.isMiniApp=e||!1},i.prototype.isInMiniApp=function(){return this.isMiniApp},i.prototype._initDefaultWX=function(){this._wxApi={initBridge:function(e){},config:function(e){},share:function(e,t){},recharge:function(e,t){},getLocation:function(e){}}},i.prototype.initWXFunc=function(){this.isNative||(window.top&&window.top.wxApi?this._wxApi=window.top.wxApi:ccddzwebService.postError(CCGlobalErrorConfig.REPORT_ERROR,"Native _initWXFunc=>"+ccddz_version+"|uuid"+ccddzwebService.uuid+"wxApi error"))},i.call=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.instance.call(e,t,i)},Object.defineProperty(i.prototype,"platform",{get:function(){var e;return e=this.isNative?egret.Capabilities.os:"web"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"platformId",{get:function(){return e.Native.instance.isNative?"iOS"==egret.Capabilities.os?2:3:4},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE||this.isMiniApp},enumerable:!0,configurable:!0}),i.prototype.isLoginByWXQr=function(){var t="1"==e.CCDDZlocalStorage.getItem("wxqr");return t},i.prototype.isLoginByAliQr=function(){var t="1"==e.CCDDZlocalStorage.getItem("aliqr");return t},i.prototype.setChannelName=function(t){console.log("setChannelName===>",t),this._channel=t,this._isWXMP=!1,this._isAli=!1,this._isWxQr=!1,this._isAliQr=!1,"wxmp"==t?this._isWXMP=!0:"ali"==t?(this._isAli=!0,e.CCDDZlocalStorage.setItem("aliqr","1"),e.CCDDZlocalStorage.setItem("wxqr","0")):"wxqr"==t?(this._isWxQr=!0,e.CCDDZlocalStorage.setItem("wxqr","1"),e.CCDDZlocalStorage.setItem("aliqr","0")):"aliqr"==t&&(this._isAliQr=!0)},i.prototype.getChannelName=function(){return this._channel},i.prototype.isAli=function(){return this._isAli},i.prototype.isWxQr=function(){return this._isWxQr},i.prototype.isAliQr=function(){return this._isAliQr},Object.defineProperty(i.prototype,"isWXMP",{get:function(){return this._isWXMP},enumerable:!0,configurable:!0}),i.prototype.nativeCall=function(e){console.log("nativeCall:",e);var t=JSON.parse(e),i=t.id,n=t.method;n&&n.length>1&&this.dispatchEventWith(n,!1,t);var o=this._dicCall[i];o&&(delete this._dicCall[i],o(t.args))},i.prototype.call=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null),i=i||{};
var o={id:e.StringUtils.makeRandomIntString(10),method:t,args:i};n&&(this._dicCall[o.id]=n),egret.ExternalInterface.call("egretCall",JSON.stringify(o))},i.prototype.getDeviceUUID=function(t,i,n){void 0===n&&(n=!1);var o=e.CCDDZlocalStorage.getItem("uuid",i);(n||!o)&&(o=e.StringUtils.makeRandomString(32),e.CCDDZlocalStorage.setItem("uuid",o,i)),t({uuid:o})},i.prototype.closeStartImg=function(){this.call("closeStartImg")},i.prototype.openUrlByWebview=function(t){this.call("openUrlByWebView",{url:t,left:10,top:10,maxWidth:e.CCDDZStageProxy.width-20,maxHeight:e.CCDDZStageProxy.height-20},null)},i.prototype.openUrlBySys=function(e){this.call("openUrlBySys",{url:e},null)},i.prototype.fileExist=function(e,t){var i=this;i.call("fileExist",null,function(e){var t=JSON.parse(e);return t.exist||!1})},i.prototype.checkMd5=function(e,t){var i=this;i.call("getMd5",{path:e},function(e){var i=JSON.parse(e);t(i.md5)})},i.prototype.clearAndroidDown=function(e,t){var i=this;"Android"==i.platform&&(i.setAndroidLocalVercode(0),i.setAndroidDownState(0),i.call("deleteFile",{path:e+"|"+t}))},i.prototype.getAndroidLocalVercode=function(){return Number(e.CCDDZlocalStorage.getItem("apkDownVerCode"))},i.prototype.setAndroidLocalVercode=function(t){e.CCDDZlocalStorage.setItem("apkDownVerCode",""+t)},i.prototype.getAndroidDownState=function(){return Number(e.CCDDZlocalStorage.getItem("apkDownState"))},i.prototype.setAndroidDownState=function(t){e.CCDDZlocalStorage.setItem("apkDownState",""+t)},i.prototype.getAndroidExtPath=function(e){var t=this;t.call("getExternalDir",null,function(t){var i=JSON.parse(t);e(i.path)})},i.prototype.downApk=function(e,t,i,n,o,a,r){var s=this,c=i,h=n,l=function(e){var t=JSON.parse(e);a(t)},u=function(e){s.setAndroidDownState(2),r(JSON.parse(e))};egret.ExternalInterface.addCallback("downProgressFunc",l.bind(s)),egret.ExternalInterface.addCallback("downFinishFunc",u.bind(s)),s.call("downLoadApk",{url:t,tmp:c,name:h,cleanTmp:o,progress:"downProgressFunc",finish:"downFinishFunc"},function(){s.setAndroidDownState(1),s.setAndroidLocalVercode(e)})},i.prototype.installApk=function(e){var t=this;t.call("installApk",{path:e,closeSelf:!0})},i.prototype.getAppChannelId=function(e){var t=this;return null!=t._channelId?void e(t._channelId):void this.call("getChannelId",null,function(i){if(i){var n=JSON.parse(i);console.log("getAppChannelId=>",n.channelId),t._channelId=n.channelId,e(n.channelId)}})},i.prototype.getAppVerCode=function(e){this.call("getVerCode",null,function(t){if(t){var i=JSON.parse(t);console.log("getAppVerCode=>",i.versionCode),e(i.versionCode)}})},i.prototype.closeApp=function(){return this.isAndroidWebView()?void this.callAndroidFunc("closeApp",null):void this.call("closeApp")},i.prototype.vibrate=function(){this.isNative&&this.call("vibrate",{seconds:.6})},i.prototype.toClipboard=function(e){this.isNative?this.call("toClipboard",{text:e}):console.log("toClipboard not endable!")},i.prototype.share=function(e,t){void 0===t&&(t=null),this.isNative?(e.shareImagePath=e.shareImagePath||"",e.shareThumbPath=e.shareThumbPath||"",this.call("shareByWechat",e,t)):this._wxApi.share(e,t)},i.prototype.alert=function(e,t,i,n){void 0===n&&(n=null),this.isNative?this.call("alert",{title:e,message:t,buttons:i},n):(alert(t),n({index:0}))},i.prototype.isAndroidWebView=function(){var e=window.javaBridge||!1;return console.log("isAndroidWebView====>",e),e?!0:!1},i.prototype.rechargeWXH5=function(e,t){void 0===t&&(t=null);var i=this.isAndroidWebView(),n=egret.Capabilities.os;if(console.log("rechargeWXH5====>",n,i,e.url),"Android"==n&&i){var o=e.url+"&Referer="+e.Referer;window.open(o)}else{var a=window.top.payWXH5;a?a.call(window.top,e.url):window.top.location.href=e.url}},i.prototype.rechageWXApp=function(e,t){void 0===t&&(t=null),this.call("payByWechat",e,function(e){JSON.parse(e);console.log("rechageWXApp=============>",e.code),0==e.code&&(ccserver.userInfoRequest(ccserver.uid),CCDDZBagService.instance.refreshBagInfo(!0))})},i.prototype.rechargeInWXMP=function(e,t){var i=this;void 0===t&&(t=null),window.top.isWXReady()?this._wxApi.recharge(e,function(e){console.log("rechargeInWXMP=============>",e.code)}):window.top.onWXReadyFunc(function(){i.onWXReadyCallInit(),i._wxApi.recharge(e,function(e){console.log("rechargeInWXMP=============>",e.code)})})},i.prototype.rechargeInWXQr=function(e,t){void 0===t&&(t=null);var i=e.code_url;i&&(i=decodeURIComponent(i),window.top.payByWXQRCode(i))},i.prototype.rechargeAliH5=function(t,i){void 0===i&&(i=null);var n=t.alipay;if(n)if(e.Native.instance.isNative){var o=CCGlobalGameConfig.getCfgByField("custom.payUrl");if(o){var a=o+"?ali=1&info="+n+"&time="+(new Date).getTime();CCGlobalGameConfig.toUrl(a)}}else{var r=CCDDZBase64.decode(n),s=window.top.payAliH5;if(s)s.call(window.top,r);else{var c=window.top.document.getElementById("payDiv");c||(c=window.top.document.createElement("a"),c.id="payDiv",window.top.document.body.appendChild(c)),c.innerHTML=r,window.top.document.forms.alipaysubmit.submit()}}},i.prototype.rechargeAliApp=function(e,t){void 0===t&&(t=null),this.call("payByAliApp",{orderInfo:e})},i.prototype.wxConfig=function(){var e=this;ccddzwebService.getWxConfig(function(t){e._wxApi.config(t)})},i.prototype.loadJs=function(e,t){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,n.async=!1,i.appendChild(n),n.addEventListener("load",function(){n.parentNode.removeChild(n),n.removeEventListener("load",null,!1),n.removeEventListener("error",null,!1),t(!0)},!1),n.addEventListener("error",function(){t(!1)},!1)},i.prototype.getWXLocation=function(t){e.Native.instance.isNative||this._wxApi.getLocation(t)},i.prototype.setKeepScreenOn=function(e){var t=this;t.call("setKeepScreenOn",{keepOn:e})},i.prototype.makeVersionString=function(t){var i=t;return e.Native.instance.isNative&&(i+="iOS"==egret.Capabilities.os?"i":"Android"==egret.Capabilities.os?"a":"n"),i},i.prototype.checkAppUpdate=function(t){var i=egret.Capabilities.os,n=this,o=e.Native.instance,a=1,r=3,s="",c="",h="",l=!1;"Android"==i&&(l=!0,o.getAndroidExtPath(function(e){var t="tmp.apk",i="hsqddz.apk";h=e+"/.hsq/",s=h+t,c=h+i})),ccddzwebService.checkAppUpdate(function(e,i){if(e){if(!l)return void("20000"==n._channelId&&o.openUrlBySys(i.url));var h=function(e){console.log("download progress======>",e.recv,e.recvTot,e.tot);var t=Math.floor(e.recvTot/e.tot*100);CCDDZSceneLoading.setLoadingText("下载更新中。。。"+t+"/100")},u=function(e){CCDDZSceneLoading.setLoadingText("下载更新完成,请稍候。。。"),o.checkMd5(c,function(e){return console.log("downFinish======>",e,i.md5,a,r),a>=r?void CCDDZAlert.show("您的网络不稳定,请切换网络环境重试",0,function(e){"confirm"==e?(a=1,o.downApk(i.version,i.url,s,c,i.cleanTmp,h,u)):o.closeApp()}):void(i.md5!=e?(a+=1,o.downApk(i.version,i.url,s,c,i.cleanTmp,h,u)):o.installApk(c))})};i.shouldInstall?u(null):o.downApk(i.version,i.url,s,c,i.cleanTmp,h,u)}else l&&o.clearAndroidDown(s,c),t()})},i}(egret.EventDispatcher);e.Native=t,__reflect(t.prototype,"CCalien.Native")}(CCalien||(CCalien={})),window.onAndroidKeyBack=function(){CCalien.Native.instance.dispatchEventWith("back",!1,null)},window.onAndroidPause=function(){console.log("onAndroidPause===============>");var e=CCalien.CCDDZSoundManager.instance;e.stopMusic(),e.stopEffect()},window.onAndroidResume=function(){console.log("onAndroidResume===============>"),CCalien.CCDDZSoundManager.instance.playMusic(CCGlobalResNames.bgm)};var CCalien;!function(e){var t="ddz",i=function(){function e(){}return e.encryptStr=function(e){for(var i,n,o,a=0,r=e.length,s="",c=0;r>c;++c)a>=t.length&&(a=0),i=e.charCodeAt(c),n=t.charCodeAt(a),o=i^n,s+=String.fromCharCode(o),a++;return s},e.decryptStr=function(e){var t=this.encryptStr(e);return t},e}();e.Encrypt=i,__reflect(i.prototype,"CCalien.Encrypt")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function e(e){this._target=e}return e.prototype.fadeIn=function(e){void 0===e&&(e=200),this._duration=e,this._targetAlpha=1,this._target.alpha=0,this._target.visible=!0,this.play()},e.prototype.fadeOut=function(e){void 0===e&&(e=200),this._duration=e,this._targetAlpha=0,this._target.alpha=1,this.play()},e.prototype.play=function(){this._tween=egret.Tween.get(this._target).to({alpha:this._targetAlpha},this._duration).set({visible:this._targetAlpha>0})},e.prototype.stop=function(){this._tween&&egret.Tween.removeTweens(this._target)},e}();e.CCDDFade=t,__reflect(t.prototype,"CCalien.CCDDFade",["CCalien.CCDDZIAnimation"])}(CCalien||(CCalien={}));var SORT_TYPE_VALUE=0,SORT_TYPE_COLOR=1,CCChooseCard=function(e){function t(){var t=e.call(this)||this;return t._canUseBestData=!1,t._choosedIndex=0,t._isChoosed=!1,t._isClickConfirm=!1,t._cardTypeNames=(i={},i[6]="三条",i[5]="同花顺",i[4]="同花",i[3]="顺子",i[2]="对子",i[1]="单张",i[0]="未知",i),t;var i}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.resetBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this),this.comparisonBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this),this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTap,this),this.firGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpDeskTap,this),this.secGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpDeskTap,this),this.thrGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpDeskTap,this),this.grpDesk.visible=!1,this.refreshBtnStatus()},t.prototype.onBtnTap=function(e){var i={},n=e.target.name;switch(i.action=n,console.log("onBtnTap---------->",n),n){case"resetBtn":this.resetSelected(),this.refreshBtnStatus(),t._isSending=!1,this._isChoosed=!1,this._choosedIndex=0;break;case"comparisonBtn":this.startComparison();break;case"helpBtn":this.sendHelpCards()}},t.prototype.onGrpDeskTap=function(e){var i=e.target.name;if(console.log("onGrpDeskTap----------->",i),console.log("selected pokers id",this.handCardGroup.getSelectedCards()),t._isSending=!1,this._choosedIndex=0,1!=t._selfSelected){switch(t._selfSelected=!0,egret.setTimeout(function(){t._selfSelected=!1},this,200),i){case"firGrp":this.handCardGroup.getSelectedCards().length<4&&3==this.firGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.addCards(this.firGrpDeskCards.getPorkersId()),this.firGrpDeskCards.cleanPokersId(),this.firGrpDeskCards.clean()):3==this.handCardGroup.getSelectedCards().length&&0==this.firGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.useCards(this.handCardGroup.getSelectedCards(),this.firGrpDeskCards),this.handCardGroup.cancelSelect()):this.handCardGroup.cancelSelect();break;case"secGrp":this.handCardGroup.getSelectedCards().length<3&&3==this.secGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.addCards(this.secGrpDeskCards.getPorkersId()),this.secGrpDeskCards.cleanPokersId(),this.secGrpDeskCards.clean()):3==this.handCardGroup.getSelectedCards().length&&0==this.secGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.useCards(this.handCardGroup.getSelectedCards(),this.secGrpDeskCards),this.handCardGroup.cancelSelect()):this.handCardGroup.cancelSelect();break;case"thrGrp":this.handCardGroup.getSelectedCards().length<3&&3==this.thrGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.addCards(this.thrGrpDeskCards.getPorkersId()),this.thrGrpDeskCards.cleanPokersId(),this.thrGrpDeskCards.clean()):3==this.handCardGroup.getSelectedCards().length&&0==this.thrGrpDeskCards.getPorkersId().length?(CCDDZSoundManager.instance.playEffect(CCResNames.cc_snd_throw),this.handCardGroup.useCards(this.handCardGroup.getSelectedCards(),this.thrGrpDeskCards),this.handCardGroup.cancelSelect()):this.handCardGroup.cancelSelect()}this.refreshBtnStatus()}},t.prototype.refreshBtnStatus=function(){console.log("refreshBtnStatus--------->",this.firGrpDeskCards.getPorkersId(),this.secGrpDeskCards.getPorkersId(),this.thrGrpDeskCards.getPorkersId()),this._isChoosed=!0,3==this.firGrpDeskCards.getPorkersId().length&&3==this.secGrpDeskCards.getPorkersId().length&&3==this.thrGrpDeskCards.getPorkersId().length?(this.imgComparison.source="cc_play_btn_yellow",this.comparisonBtn.touchEnabled=!0):(this.imgComparison.source="cc_play_btn_gray",this.comparisonBtn.touchEnabled=!1,0==this.firGrpDeskCards.getPorkersId().length&&0==this.secGrpDeskCards.getPorkersId().length&&0==this.thrGrpDeskCards.getPorkersId().length&&(this._isChoosed=!1))},t.prototype.checkCanUseType=function(e){var t=CCCardsType.checkThree(e),i=CCCardsType.checkStrFlush(e),n=CCCardsType.checkFlush(e),o=CCCardsType.checkStraight(e),a=CCCardsType.checkDouble(e),r=CCCardsType.checkSingle(e);return{canUseThree:t,canUseStrFlush:i,canUseFlush:n,canUseStright:o,canUseDouble:a,canUseSingle:r}},t.prototype.getChooseCard=function(e,t){return e.canUseThree?CCCardsType.getThree(t):e.canUseStrFlush?CCCardsType.getStrFlush(t):e.canUseFlush?CCCardsType.getFlush(t):e.canUseStright?CCCardsType.getStraight(t):e.canUseDouble?CCCardsType.getDouble(t):e.canUseSingle?CCCardsType.getSingle(t):void 0},t.prototype.resetSelected=function(){this.handCardGroup.addCards(this.firGrpDeskCards.getPorkersId()),this.firGrpDeskCards.cleanPokersId(),this.firGrpDeskCards.clean(),this.handCardGroup.addCards(this.secGrpDeskCards.getPorkersId()),this.secGrpDeskCards.cleanPokersId(),this.secGrpDeskCards.clean(),this.handCardGroup.addCards(this.thrGrpDeskCards.getPorkersId()),this.thrGrpDeskCards.cleanPokersId(),this.thrGrpDeskCards.clean()},t.prototype.startComparison=function(){if(0!=this.comparisonBtn.touchEnabled){var e=this.thrGrpDeskCards.getPorkersId(),t=this.secGrpDeskCards.getPorkersId(),i=this.firGrpDeskCards.getPorkersId(),n=[{cardids:e,cardsType:CCCardsType.checkType(e)},{cardids:t,cardsType:CCCardsType.checkType(t)},{cardids:i,cardsType:CCCardsType.checkType(i)}],o=n,a=o.sort(function(e,t){return t.cardsType.ct-e.cardsType.ct});console.log("startComparison----sortedData-11--->",a[0].cardsType,a[1].cardsType,a[2].cardsType);for(var r=0;r<a.length-1;r++){var s=a[r],c=a[r+1],h=Math.floor(s.cardsType.kv/10),l=Math.floor(s.cardsType.kv2/10),u=Math.floor(s.cardsType.kv3/10),p=Math.floor(c.cardsType.kv/10),C=Math.floor(c.cardsType.kv2/10),d=Math.floor(c.cardsType.kv3/10);if(console.log("startComparison----sortedData-22--->",r,s.cardsType.ct,h,l,u,c.cardsType.ct,p,C,d),s.cardsType.ct==c.cardsType.ct)if(h==p&&l==C&&u==d){if(s.cardsType.kv==c.cardsType.kv){if(s.cardsType.kv2==c.cardsType.kv2){if(s.cardsType.kv3==c.cardsType.kv3);else if(s.cardsType.kv3<c.cardsType.kv3){var _=s;s=c,c=_,console.log("swap----111-----",s,c)}}else if(s.cardsType.kv2<c.cardsType.kv2){var _=s;s=c,c=_,console.log("swap----222-----",s,c)}}else if(s.cardsType.kv<c.cardsType.kv){var _=s;s=c,c=_,console.log("swap----333-----",s,c)}}else if(h==p){if(s.cardsType.kv==c.cardsType.kv){if(l==C){if(s.cardsType.kv2==c.cardsType.kv2){if(u==d){if(s.cardsType.kv3==c.cardsType.kv3);else if(s.cardsType.kv3<c.cardsType.kv3){var _=s;s=c,c=_,console.log("swap----444-----",s,c)}}else if(d>u){var _=s;s=c,c=_,console.log("swap----555-----",s,c)}}else if(s.cardsType.kv2<c.cardsType.kv2){var _=s;s=c,c=_,console.log("swap----666-----",s,c)}}else if(C>l){var _=s;s=c,c=_,console.log("swap----777-----",s,c)}}else if(s.cardsType.kv<c.cardsType.kv){var _=s;s=c,c=_,console.log("swap----888-----",s,c)}}else if(p>h){var _=s;s=c,c=_,console.log("swap----999-----",s,c)}a[r]=s,a[r+1]=c}var g=!1;(0==this.arraysEqual(a[0].cardids,e)||0==this.arraysEqual(a[1].cardids,t)||0==this.arraysEqual(a[2].cardids,i))&&(g=!0),console.log("startComparison-----111----->",this._choosedIndex,g,a[0].cardids,a[1].cardids,a[2].cardids),0!=this._choosedIndex&&1==g&&(g=!1,a[0].cardids=e,a[1].cardids=t,a[2].cardids=i,console.log("startComparison-----222----->",g,a[0].cardids,a[1].cardids,a[2].cardids));var f={cardsid:a[0].cardids.concat(a[1].cardids,a[2].cardids),hassorted:g};this.cleanAllCardGrps(),this._isClickConfirm=!0,CCalien.CCDDZDispatcher.dispatch(CCEventNames.STRART_COMPARISON,f)}},t.prototype.arraysEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;var i=[].concat(e),n=[].concat(t);i.sort(function(e,t){return t-e}),n.sort(function(e,t){return t-e});for(var o=0;o<i.length;++o)if(i[o]!==n[o])return!1;return!0},t.prototype.sendHelpCards=function(){var e=this;if(!t._isSending&&!this._isClickConfirm){var i=300;0==this._isChoosed&&(i=50,this._isChoosed=!0),this._choosedIndex=1,t._isSending=!0,this.resetSelected(),egret.setTimeout(function(){if(e._cardids2&&9==e._cardids2.length){var i=[e._cardids2[0],e._cardids2[1],e._cardids2[2]],n=[e._cardids2[3],e._cardids2[4],e._cardids2[5]],o=[e._cardids2[6],e._cardids2[7],e._cardids2[8]];[{cardids:i,cardsType:CCCardsType.checkType(i)},{cardids:n,cardsType:CCCardsType.checkType(n)},{cardids:o,cardsType:CCCardsType.checkType(o)}];e.handCardGroup.useCards(i,e.thrGrpDeskCards),e.handCardGroup.useCards(n,e.secGrpDeskCards),e.handCardGroup.useCards(o,e.firGrpDeskCards)}t._isSending=!1,e.refreshBtnStatus()},this,i)}},t.prototype.cleanAllCardGrps=function(){this.firGrpDeskCards.clean(),this.firGrpDeskCards.cleanPokersId(),this.secGrpDeskCards.clean(),this.secGrpDeskCards.cleanPokersId(),this.thrGrpDeskCards.clean(),this.thrGrpDeskCards.cleanPokersId(),this.handCardGroup.clean(),this.handCardGroup.cleanPokersId(),this.grpDesk.alpha=0,this.handCardGroup.initListeners(!1)},t.prototype.sortPokersIdByType=function(e){CCGlobalGameConfig.currentSortType=e,this.handCardGroup.sortPokersIdByType(e)},t.prototype.showBtns=function(e){this.resetBtn.visible=e,this.comparisonBtn.visible=e,this.helpBtn.visible=e},t.prototype.enableHandCardGroup=function(e){this.handCardGroup.initListeners(e)},t.prototype.addCards=function(e,i,n,o,a){var r=this;void 0===i&&(i=!0),void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===a&&(a=[]),n&&this.handCardGroup.clean(),this.handCardGroup.addCards(e,i,o);var s=500;1==o&&(s=1800),this._cardids=[],e&&(this._cardids=e),this._cardids2=[],a&&9==a.length&&(this._cardids2=a),t._isSending=!1,t._selfSelected=!1,this._isChoosed=!1,this._isClickConfirm=!1,this.giveupBtn.visible=!1,this.enableHandCardGroup(!1),this.showBtns(!1),this.refreshBtnStatus(),egret.setTimeout(function(){var e=r.grpDesk;e.alpha=0,egret.Tween.get(e).to({visible:!0,alpha:1},200),r.enableHandCardGroup(!0),r.showBtns(!0)},this,s)},t._isSending=!1,t._selfSelected=!1,t}(eui.Component);__reflect(CCChooseCard.prototype,"CCChooseCard"),window.CCChooseCard=CCChooseCard;var CCDDZCardGroup=function(e){function t(){var t=e.call(this)||this;return t.scale=1,t.align=.5,t.warpCount=100,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.initData=function(e){void 0===e&&(e=null),this.clean()},t.prototype.clean=function(){CCDDZUtils.recycleCards(this),this.cardCount=0},t.prototype.addCards=function(e,t){var i=this;return void 0===t&&(t=!0),e.forEach(function(e,t){var n=CCDDZCard.create({pid:e});i.addCard(n,t)}),this.adjustCards(t),this.numChildren},t.prototype.addCard=function(e,t){var i=this;void 0===t&&(t=0),e.scaleX=e.scaleY=this.scale,CCalien.CCDDZUtils.enumChildren(this,function(t,n){return e.pokerId>t.pokerId?(i.addChildAt(e,n),!0):void 0}),e.parent||this.addChild(e),this.cardCount++,e.addPlaying=!0},t.prototype.removeHandCardsByNum=function(e){for(var t,i=this,n=e;n>0;)t=i.getChildAt(0),t&&i.removeChild(t),n--},t.prototype.removeHandCardsToDeskCardsGrp=function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),e.receiveCardsFromGroup.call(e,this,t);var o=t.length;i&&(this.cardCount-=o),"right_2"==this.currentState&&ccserver.isCoupleGame&&0==n&&this.removeHandCardsByNum(o),this.adjustCards(!0)},t.prototype.getCardGapH=function(e){return e&&CCGlobalGameConfig.CARD_GAP_H*(e-1)+CCGlobalGameConfig.CARD_WIDTH*CCGlobalGameConfig.CARD_SCALE>CCalien.CCDDZStageProxy.stage.stageWidth?(CCalien.CCDDZStageProxy.stage.stageWidth-CCGlobalGameConfig.CARD_WIDTH*CCGlobalGameConfig.CARD_SCALE)/(e-1):CCGlobalGameConfig.CARD_GAP_H},t.prototype.receiveCardsFromGroup=function(e,t){var i=this,n=this.scale;t.sort(function(e,t){return t.pokerId-e.pokerId});var o=t.length,a=0,r=this.getCardGapH(o),s=(this.width-(r*Math.min(o,this.warpCount)+CCGlobalGameConfig.CARD_OFFSET)*n)*this.align;if(ccserver.isCoupleGame){var c=CCGlobalGameConfig.CARD_WIDTH*this.scale;if(s=.5*(this.width-(r*this.cardCount+CCGlobalGameConfig.CARD_OFFSET)*this.scale),"left"==this.currentState)return;"right_2"==this.currentState&&(r=.5*c,s=.5*(this.width-(r*(o-1)+c)))}var h=this.localToGlobal(s,0),l=e.globalToLocal(h.x,h.y);t.forEach(function(e,t){e.select=!1,e.sending=!0;var c=Math.floor(t/i.warpCount),h=0;h=l.x+t%i.warpCount*r*n,ccserver.isCoupleGame&&"right_2"==i.currentState&&(h=l.x+t%i.warpCount*r);var u=l.y+c*CCGlobalGameConfig.CARD_GAP_V*n;e.animate({x:h,y:u,scaleX:n,scaleY:n},0,null,200).call(function(t){e.sending=!1,e.parent&&e.parent.removeChild(e),i.addChildAt(e,0);var h=0;h=s+t%i.warpCount*r*n,ccserver.isCoupleGame&&"right_2"==i.currentState&&(h=s+t%i.warpCount*r),e.x=h,e.y=c*CCGlobalGameConfig.CARD_GAP_V*n,a++,a==o&&i.adjustCardsEnd()},i,[t])})},Object.defineProperty(t.prototype,"stageCenterPos",{get:function(){if(!this._stageCenterPos){var e=this.globalToLocal(CCalien.CCDDZStageProxy.width/2-CCGlobalGameConfig.CARD_WIDTH/2,CCalien.CCDDZStageProxy.height/2-CCGlobalGameConfig.CARD_HEIGHT/2);this._stageCenterPos={x:e.x,y:e.y}}return this._stageCenterPos},enumerable:!0,configurable:!0}),t.prototype.adjustCards=function(e){var t=this;void 0===e&&(e=!0);var i,n,o=0,a=0,r=0,s=CCGlobalGameConfig.CARD_WIDTH*this.scale;if(i=this.getCardGapH(this.cardCount),n=this.width-(i*this.cardCount+CCGlobalGameConfig.CARD_OFFSET)*this.scale>>1,ccserver.isCoupleGame){if("left"==this.currentState)return;"right_2"==this.currentState&&(i=.5*s,n=.5*(this.width-(i*(this.cardCount-1)+s)))}CCalien.CCDDZUtils.enumChildren(this,function(e){e.sending||r++}),CCalien.CCDDZUtils.enumChildren(this,function(s){if(!s.sending){var c=0;c=n+a*i*t.scale,ccserver.isCoupleGame&&"right_2"==t.currentState&&(c=n+a*i);var h=0;if(e){var l=void 0;s.addPlaying?(CCalien.CCDDZUtils.injectProp(s,{alpha:0,scaleX:.2,scaleY:.2}),l=s.animate({alpha:1,scaleX:t.scale,scaleY:t.scale,x:c,y:h},20*o,t.stageCenterPos),l.call(function(){s.addPlaying=!1,t.onCardAdded&&t.onCardAdded(s)})):l=s.animate({x:c,y:h,alpha:1}),l.call(function(){o++,o>=r&&t.adjustCardsEnd()})}else s.x=c,s.y=h,s.addPlaying=!1;a++}}),e||this.adjustCardsEnd()},t.prototype.adjustCardsEnd=function(){},t.prototype.destroyCard=function(e){var t=this;egret.Tween.get(e).to({alpha:0},100).call(function(e){t.removeChild(e),CCDDZCard.recycle(e)},this,[e])},t}(eui.Group);__reflect(CCDDZCardGroup.prototype,"CCDDZCardGroup");var CCDDZPageChannelBase=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.dataProvider=this._dataProvide=new eui.ArrayCollection},t.prototype.addListeners=function(){this.list.addEventListener(egret.Event.CHANGE,this.selectRoom,this)},t.prototype.removeListeners=function(){this.list.removeEventListener(egret.Event.CHANGE,this.selectRoom,this)},t.prototype.getRoomById=function(e){var t=null;return this._roomList.some(function(i){return i.roomID==e?(t=i,!0):void 0}),t},t.prototype.selectRoom=function(e){var t=this;this.selectedRoom=this.list.selectedItem,console.log("selectRoom-------------->",this.selectedRoom),egret.callLater(function(){t.list.selectedIndex=-1},this)},t.prototype.setRoomType=function(e){var t=CCGlobalGameConfig.roomList.filter(function(t){return t.roomType==e});t.sort(function(e,t){return e.roomID-t.roomID}),this._roomList=t,this.dealRoomList(),this._dataProvide.source=this._roomList},t.prototype.setRoomList=function(e){this._roomList=e,this._dataProvide.source=this._roomList},t.prototype.dealRoomList=function(){},t.prototype.beforeShow=function(e,t){this.selectedRoom={},this.addListeners()},t.prototype.beforeHide=function(e,t){void 0===t&&(t=null),this.removeListeners()},t}(CCalien.NavigationPage);__reflect(CCDDZPageChannelBase.prototype,"CCDDZPageChannelBase");var ProtoBuf=dcodeIO.ProtoBuf,ByteArray=egret.ByteArray,Endian=egret.Endian,CCServer=function(e){function t(){var t=e.call(this)||this;if(t._sid=0,t.frozen=!1,t._clientId=1,t._session=0,t._isInDDZ=!1,t._isFirstFromDDZ=!1,t.showLogs=!1,t._mustSolve=[],t.logList=[/.*?/],t._callId=1e3,t._callbackMap=[],t.cacheList=[],t._heartCount=0,t._lastHeart=0,t._ddzDispatcher=null,CCalien.Native.instance.isNative)t._showLogToScreen=!1,t._noConsole();else{var i=CCalien.Native.instance.getUrlArg();t._showLogToScreen="1"==i.showLog,t.showLogs=t._showLogToScreen||!1,t.showLogs||t._noConsole()}return t}return __extends(t,e),t.prototype.setMustSolveList=function(e){e=e||[],this._mustSolve=e},t.prototype._noConsole=function(){console.log=function(){},console.warn=function(){},console.error=function(){}},t.prototype.ready=function(){this._protoBuilderMap={user:ProtoBuf.loadProto(RES.getRes("ccuser_proto")),game:ProtoBuf.loadProto(RES.getRes("ccgame_proto"))},this._otherIns=CCDDZOtherGameManager.instance,this._protoIDs=CCDDZProtoIDs.getMap(),this._initSendHeartTimer(),this._initRecvHeartTimeOut(),CCalien.Native.instance.addEventListener("HEART_BEAT",this.onHeartBeat,this)},t.prototype.prepareSocket=function(){var e=this._socket;return this._socket&&this.close(!1),e=this._socket=new egret.WebSocket,e.type=egret.WebSocket.TYPE_BINARY,e},t.prototype.onHeartBeat=function(e){this.showLogs&&console.log("on HEART_BEAT"),this.sendHeartPackage()},t.prototype._removeAllSocketListener=function(){this._socket&&(this._socket.removeEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onClose,this),this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this))},Object.defineProperty(t.prototype,"connected",{get:function(){return this._socket&&this._socket.connected},enumerable:!0,configurable:!0}),t.prototype.tryConnect=function(e,t,i){var n=this;void 0===t&&(t=null),void 0===i&&(i=null),CCGlobalGameConfig.getServerUrl(e,function(e){0==e.code?egret.setTimeout(n.connect,n,200):CCDDZToast.show(lang.loginError[501]),t&&t(e.code)},i)},t.prototype.connect=function(){this.prepareSocket(),this._socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.connectByUrl(CCGlobalGameConfig.SERVER_URL)},t.prototype.close=function(e){void 0===e&&(e=!0),this._socket&&(this._removeTimersAndEvents(),this._socket.readBytes(new ByteArray),this._socket.close(),this._socket=null,this.afterClose())},t.prototype._stopSendHeartTimer=function(){this._sendHeartTimer&&this._sendHeartTimer.stop()},t.prototype._clearRecvHeartTimeout=function(){this._recvHeartTimeout&&this._recvHeartTimeout.stop()},t.prototype.onConnect=function(e){var t=e.target;this.showLogs&&console.log("CCServer onConnect=============>"),this._connected=!0,t.removeEventListener(egret.Event.CONNECT,this.onConnect,this),t.addEventListener(egret.Event.CLOSE,this.onClose,this),t.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this._kickOut=!1,this.dispatchEventWith(CCGlobalEventNames.CONNECT_SERVER)},t.prototype._removeTimersAndEvents=function(){this._removeAllSocketListener(),this._stopSendHeartTimer(),this._clearRecvHeartTimeout()},t.prototype.onError=function(e){e.target;this.showLogs&&console.log("CCServer onError=============>"),this._removeTimersAndEvents(),this.dispatchEventWith(CCGlobalEventNames.SERVER_ERROR),CCDDZMainLogic.instance.onSocketClose()},t.prototype.onClose=function(e){var t=e.target;console.log("CCServer onClose=============>"),t.removeEventListener(egret.Event.CLOSE,this.onClose,this),this._removeTimersAndEvents(),this.afterClose(),CCDDZMainLogic.instance.stop(),CCDDZMainLogic.instance.onSocketClose()},Object.defineProperty(t.prototype,"kickOut",{get:function(){return this._kickOut},enumerable:!0,configurable:!0}),t.prototype.afterClose=function(){this._connected=!1},t.prototype.send=function(e,t,i){void 0===i&&(i=null);var n=e.substring(0,e.indexOf(".")),o=this._protoBuilderMap[n].build(e),a=new o(t);this.showLogs&&console.log("send:"+a+" "+JSON.stringify(a));var r=new egret.ByteArray(a.encodeAB());return this._showLogToScreen&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.LOG,"send: "+e+" "+JSON.stringify(t)),this._isInDDZ?void this.ddzDispatchEvent(0,this._protoIDs[e],r):void this.sendDataByProtoId(this._protoIDs[e],r)},t.prototype.sendDataByProtoId=function(e,t){if(t&&this.connected){this.showLogs&&console.log("sendData:"+e);var i=new egret.ByteArray;i.writeUnsignedShort(t.length+2),i.writeUnsignedShort(e),i.writeBytes(t),this._socket.writeBytes(i),this._socket.flush()}},t.prototype.addCallback=function(e){var t=this._callId++;if(e){var i=this.tsServer;this._callbackMap[t]={id:t,cb:e,time:i},console.log("addCallback:",t,i)}return t},t.prototype.onSocketData=function(e){var t=(e.target,new egret.ByteArray);if(this._socket.readBytes(t),!(t.length<4)){if(this._isInDDZ){var i=new egret.ByteArray;this._socket.readBytes(i);var n=i.readUnsignedShort(),o=i.readUnsignedShort();return void this._parseBytes(o,n,i)}var a=t.readUnsignedShort(),r=t.readUnsignedShort();switch(10>r&&2!=r&&(this.showLogs&&console.log("get:["+a+"] "+r),this._showLogToScreen&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.LOG,"get: "+r)),0!=Number(r)&&1!=Number(r)&&2!=Number(r)&&console.log("onSocketData--------->",r),Number(r)){case 0:this.onLoginSucc();break;case 1:var s=parseInt(t.readUTFBytes(t.bytesAvailable));this.showLogs&&console.log("login failed. errorId:",s),this.dispatchEventWith(CCGlobalEventNames.USER_LOGIN_RESPONSE,!1,{code:1,errorId:s});break;case 2:this._recvHeartTimeout.stop(),this._lastHeart=this.tsLocal;var c=t.position,h=t.readInt();t.position=c,this.tsServerOffset=this.tsLocal-h,this.checkDate(!0),this._otherIns.onSocketData(r,a,t);break;default:var l=this._protoIDs[r];if(!l){console.log("ddz没有ID为"+r+"的协议!");new egret.ByteArray(t.buffer);return void this._otherIns.onSocketData(r,a,t)}var u=l.indexOf("."),p=l.substring(0,u),C=l.substring(u+1),d=new egret.ByteArray,_=t.position;t.readBytes(d),t.position=_;var g=null;this._otherIns.isRunOtherGame()&&(g=t);var f=this._protoBuilderMap[p].build(l),m=f.decode(d.buffer);this.showLogs&&console.log("recv:"+m+" "+JSON.stringify(m));var v=!0;if("game"==p&&"SetSession"!=C?v=this._session==m.session:"game"==p&&"SetSession"==C&&(this._session=m.session),this._showLogToScreen&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.LOG,"get: "+l),!this.frozen&&v){var D=!0,y=!1;if(this.needCache){if(!(this.exception&&this.exception.indexOf(l)>-1))return void this.cacheList.push([l,m]);this.beforeDispatchMessage(l,m),this.dispatchEventWith(l,!1,m)}else this._otherIns.isRunOtherGame()&&(this._otherIns.isInOtherProtoListen(r)||this._otherIns.isListenAllProto()||"game"==p)&&(D=!1,y=!0),"user"==p&&this._mustSolve.indexOf(l)>=0&&(D=!0),D&&(this.beforeDispatchMessage(l,m),this.dispatchEventWith(l,!1,m)),y&&this._otherIns.onSocketData(r,a,g)}}}},t.prototype.startCache=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=-1),void 0===i&&(i=""),console.log("cache start=>",i),e?this.exception=e.concat():this.exception=[],this.needCache=!0,this.cacheTime=t,this.timer||(this.timer=new egret.Timer(1e3)),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.start()},t.prototype.stopCache=function(e){for(void 0===e&&(e=""),console.log("cache end=>",e),this.needCache=!1,this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this));this.cacheList.length>0;){var t=this.cacheList.shift();
if(console.log("will dispatch---->",t[0]),this.beforeDispatchMessage(t[0],t[1]),this.dispatchEventWith(t[0],!1,t[1]),this.needCache)break}},t.prototype.onTimer=function(e){if(-1!=this.cacheTime)for(var t=0;t<this.cacheList.length;t++)"object"==typeof this.cacheList[t][1]&&(this.cacheList[t][1].hasOwnProperty("time")?(this.cacheList[t][1].time-=this.cacheTime,this.cacheList[t][1].time<0&&(this.cacheList[t][1].time=0)):this.cacheList[t][1].hasOwnProperty("timeout")&&(this.cacheList[t][1].timeout-=this.cacheTime,this.cacheList[t][1].timeout<0&&(this.cacheList[t][1].timeout=0)))},t.prototype.checkCallback=function(e,t){if(e>0){var i=this._callbackMap[e];console.log("checkCallback:",e,!!i),i&&(this._callbackMap.splice(e,1),i.cb(t))}},t.prototype.onLoginSucc=function(){this.sendHeartPackage(),this._sendHeartTimer.start(),this.dispatchEventWith(CCGlobalEventNames.USER_LOGIN_RESPONSE,!1,{code:0})},t.prototype.inShowList=function(e){var t=!1;return this.logList.forEach(function(i){"string"==typeof i?i==e&&(t=!0):e.match(i)&&(t=!0)}),t},t.prototype.beforeDispatchMessage=function(e,t){switch(e){case CCGlobalEventNames.GAME_SET_SESSION:this._session=t.session;break;case CCGlobalEventNames.USER_CHECK_RECONNECT_REP:t.roomid>0&&(this._session=t.session,this.roomInfo=CCGlobalGameConfig.getRoomConfig(t.roomid));break;case CCGlobalEventNames.GAME_USER_ONLINE:this._uid==t.uid&&(this.seatid=t.seatid);break;case CCGlobalEventNames.USER_NOTIFY_KICK_OUT:3!=t.reason&&(this._kickOut=!0),CCDDZMainLogic.instance.onKickOut(t.reason);break;case CCGlobalEventNames.GAME_GAME_END:break;case CCGlobalEventNames.USER_OPERATE_REP:CCDDZShareImageManager.instance.onUserOperateRep(t)}},t.prototype.onServerTimer=function(e){void 0===e&&(e=null),this.checkDate()},t.prototype.checkDate=function(e){void 0===e&&(e=!0);var t=CCalien.TimeUtils.tsToDate(this.tsServer),i=t.getDate();this._today!=i&&(this._today=i,e&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.CLOCK_0))},Object.defineProperty(t.prototype,"tsLocal",{get:function(){return Math.floor((new Date).valueOf()/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tsServer",{get:function(){return this.tsLocal-this.tsServerOffset},enumerable:!0,configurable:!0}),t.prototype.getServerStamp=function(){return 1e3*this.tsServer},Object.defineProperty(t.prototype,"serverDate",{get:function(){return CCalien.TimeUtils.tsToDate(this.tsServer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tsToday",{get:function(){var e=this.serverDate;return new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()).valueOf()/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tsNow",{get:function(){return this.tsServer-this.tsToday},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),t.prototype.onHeartTimer=function(e){void 0===e&&(e=null),this.sendHeartPackage()},t.prototype._initRecvHeartTimeOut=function(){this._recvHeartTimeout||(this._recvHeartTimeout=new egret.Timer(5e3),this._recvHeartTimeout.addEventListener(egret.TimerEvent.TIMER,this.onRecvHeartTimeOut,this)),this._recvHeartTimeout.stop()},t.prototype._initSendHeartTimer=function(){this._sendHeartTimer||(this._sendHeartTimer=new egret.Timer(2e3),this._sendHeartTimer.addEventListener(egret.TimerEvent.TIMER,this.sendHeartPackage,this))},t.prototype.sendHeartPackage=function(){if(this.connected){var e=new egret.ByteArray;e.writeShort(2),e.writeShort(2),this._socket.writeBytes(e),this._socket.flush(),this._heartCount++,this._recvHeartTimeout.reset()}},t.prototype.onRecvHeartTimeOut=function(){this.showLogs&&console.log("心跳接收超时,主动关闭连接."),CCDDZMainLogic.instance.stop(),CCDDZMainLogic.instance.onSocketClose()},t.prototype.checkEnterForegroundTimeOut=function(){return this._lastHeart>0&&this.tsLocal-this._lastHeart>5?(console.log("checkEnterForegroundTimeOut======>",!0),!0):!1},t.prototype.checkEnterForegroundTimeLong=function(){return this._lastHeart>0&&this.tsLocal-this._lastHeart>20?(console.log("checkEnterForegroundTimeLong======>",!0,this.tsLocal,this._lastHeart),!0):!1},t.prototype.login=function(e,t){this._token=t;var i=1,n=egret.Capabilities.os;CCalien.Native.instance.isNative?"Android"==n?i=2:"iOS"==n&&(i=3):"iOS"!=n||CCalien.Native.instance.isAli()||CCalien.Native.instance.isWXMP||(i=3),this._uid=parseInt(e);var o=[this._uid,1,t,ccddzwebService.uuid,CCDDZEnvironment.channel_id,i].join(":"),a=new egret.ByteArray;a.writeUnsignedShort(0),a.writeUTFBytes(o),this._socket.writeBytes(a),this._socket.flush(),this.showLogs&&console.log("CCServer login===============>",o)},t.prototype.checkReconnect=function(){this.send(CCGlobalEventNames.USER_CHECK_RECONNECT_REQ,{})},t.prototype.reconnect=function(e){this.showLogs&&console.log("CCServer: reconnect===============>",e),this.send(CCGlobalEventNames.USER_RECONNECT_TABLE_REQ,{result:e,index:0,session:this._session})},t.prototype.resetSession=function(){this._session=0},t.prototype.getRoomId=function(){return this.roomInfo&&this.roomInfo.roomID?this.roomInfo.roomID:null},t.prototype.getTableId=function(){return this.roomInfo&&this.roomInfo.tableId?this.roomInfo.tableId:null},t.prototype.initFromParams=function(e){if(e){if(e.data){var t=e.data;t.action||(this._isFirstFromDDZ=!0)}else this._isFirstFromDDZ=!0;this._isInDDZ=!0,this._uid=e.serverUid,this._ddzDispatcher=e.dispatcher,this._ddzDispatcher.addEventListener("RECV_SOCKET_DATA",ccserver.onDDZSocketData,ccserver),ccserver.ddzDispatchEvent(1,"",{type:6,protoIDS:(i={},i["user.LotteryRedcoinRep"]={just:!0},i)});var i}},t.prototype.onDDZSocketData=function(e){var t=e.data;t&&t.byteArray&&t.nameId&&this._parseBytes(t.nameId,t.len,t.byteArray)},t.prototype._parseBytes=function(e,t,i){if(this._protoIDs&&i)switch(10>e&&2!=e&&(this.showLogs&&(CCalien.Native.instance.isNative?console.log("222get:["+t+"] "+e):console.log("222get:[%d] %d",t,e)),this._showLogToScreen&&CCalien.CCDDZDispatcher.dispatch(CCEventNames.LOG,"get: "+e)),e){case 0:this.dispatchEventWith(CCEventNames.USER_LOGIN_RESPONSE,!1,{code:0});break;case 1:this.showLogs&&console.log("222login failed.");var n=parseInt(i.readUTFBytes(i.bytesAvailable));this.dispatchEventWith(CCEventNames.USER_LOGIN_RESPONSE,!1,{code:1,errorId:n});break;case 2:this._lastHeart=this.tsLocal;var o=i.position,a=i.readInt();i.position=o,this.tsServerOffset=this.tsLocal-a,this._otherIns.onSocketData(e,t,i);break;default:var r=this._protoIDs[e];if(!r){console.log("222没有ID为"+e+"的协议!");break}var s=r.indexOf("."),c=r.substring(0,s),h=(r.substring(s+1),new egret.ByteArray);i.readBytes(h);var l=this._protoBuilderMap[c].build(r);if(!l)return;var u=l.decode(h.buffer),p=!0;!this.frozen&&p?"#d0c400":"#BBBBBB";if(console.log("name="+r+" msg="+JSON.stringify(u)),this.showLogs&&!this.frozen&&this.inShowList(r)&&CCalien.Native.instance.isNative,this._showLogToScreen&&CCalien.CCDDZDispatcher.dispatch(CCEventNames.LOG,"get: "+r),!this.frozen&&p)if(this.needCache){if(!(this.exception&&this.exception.indexOf(r)>-1))return void this.cacheList.push([r,u]);this.beforeDispatchMessage(r,u),this.dispatchEventWith(r,!1,u)}else this.beforeDispatchMessage(r,u),this.dispatchEventWith(r,!1,u)}},t.prototype.ddzDispatchEvent=function(e,t,i){if(this._ddzDispatcher)if(0==e){var n={type:e,protoID:t,byteArray:i};console.log("==================>>>>>>>> ddzDispatchEvent type:"+e+", data:"+n),this._ddzDispatcher.dispatchEventWith("CCMain",!1,n)}else this._ddzDispatcher.dispatchEventWith("CCMain",!1,i)},t}(egret.EventDispatcher);__reflect(CCServer.prototype,"CCServer");var CCService=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.initData=function(){},t.prototype.start=function(e){e()},t.prototype.stop=function(){},t}(egret.EventDispatcher);__reflect(CCService.prototype,"CCService");var CCDDZDDZSeat=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.ddzHandCardGroup=this.handCardGroup,this.ddzDeskCardGroup=this.deskCardGroup,this.ddzHandCardGroup.onCardAdded=this.onCardAdded.bind(this),this.btnCancleTrust.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTrust,this)},t.prototype.onCancelTrust=function(e){ccserver.hang(!1)},t.prototype.reset=function(t){return void 0===t&&(t=!1),this.cdClock.visible=this.imgStatus.visible=!1,this.labCardCount.text="0",this.hideJingDeng(),this.showDoubleFlag(!1),this.setMaster(!1,!1),this.setHang(!1),this.ddzHandCardGroup.initData(),e.prototype.reset.call(this,t)},t.prototype.clean=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!0),this.cleanPlayer(i),e.prototype.clean.call(this,t,i)},t.prototype.cleanPlayer=function(e){void 0===e&&(e=!0),this.cdClock.stop(),this.robot.visible=!1,this.labCardCount.text="0",this.hideJingDeng(),this.showDoubleFlag(!1),this.imgMaster.visible=!1,this.imgStatus.visible=!1,this.imgReady.visible=!1,e&&(this.userInfoData=null)},t.prototype.initData=function(e){var t=e.cleanUserInfo;this.clean(!1,t),6==e.matchType?this.userInfoView.gold.visible=!1:(this.userInfoView.gold.visible=!0,this.userInfoView.gold.setType(e.isMatch,e.matchType),2==e.roomFlag&&(e.isSelf||this.userInfoView.gold.showDiamond()))},t.prototype.cleanDesk=function(){e.prototype.cleanDesk.call(this),this.setStatus()},t.prototype.setGrayCardsNum=function(e){this.ddzHandCardGroup.setGrayCardsNum(e)},t.prototype.addCards=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),n&&this.setStatus(),e.prototype.addCards.call(this,t)},t.prototype.onCardAdded=function(e){},t.prototype.showHandCards=function(e){if(1==ccserver.isCoupleGame){e.sort(function(e,t){return t-e});for(var t=e.length,i=this.handCardGroup.$children.slice(0),n=void 0,o=0,a=0;t>a;++a){o=i.length;for(var r=0;o>r;++r)if(n=i[r],n&&!n.sending){n.pokerId=e[a],i.splice(r,1),n.showFront();break}}}},t.prototype.setCardsShadowSize=function(e){this.cardShadow&&(this.cardShadow.width=CCGlobalGameConfig.CARD_WIDTH+(e-1)*CCGlobalGameConfig.CARD_GAP_H)},t.prototype.useCard=function(e,t,i,n){void 0===e&&(e=null),void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===n&&(n=!1);var o=0;if(!t&&i){var a=CCDDZCardsType.GetType(e);o=a.ct;var r=CCDDZUtils.pid2poker(e[0]);CCDDZGameSoundManager.playCardType(this._sexVoice,o,r.num),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_GAME_EFFECT,{cardType:o,state:this.currentState})}if(0==e.length)this.stopCD(),t?this.setStatus():this.setStatus(CCGlobalResNames.cc_play_word_4);else{this.cleanDesk();var s=this.ddzHandCardGroup.useCards(e,this.ddzDeskCardGroup,i,n);!t&&i&&this.updateCardCount(s),this.setStatus(),this.setCardsShadowSize(this.handCardGroup.cardCount)}return o},t.prototype.setStatus=function(e){void 0===e&&(e=null),e&&(this.imgStatus.source=e),this.imgStatus.visible=!!e},t.prototype.setShowCardShadow=function(e){this.cardShadow&&(this.cardShadow.visible=e,this.setCardsShadowSize(this.handCardGroup.cardCount))},t.prototype.setHang=function(e){this.robot.visible=e,this.btnCancleTrust&&(this.btnCancleTrust.visible=e),this.setShowCardShadow(e)},t.prototype.startCD=function(e,t){void 0===t&&(t=null),this.cdClock.visible=!0,this.cdClock.start(e,t)},t.prototype.stopCD=function(){this.cdClock.visible=!1,this.cdClock.stop()},t.prototype.showScore=function(e){0==e?this.setStatus(CCGlobalResNames.cc_play_word_5):0>e||this.setStatus("cc_play_word_"+e),CCDDZGameSoundManager.playScore(this._sexVoice,e)},t.prototype.showGrab=function(e){0==e?this.setStatus("cc_play_word_not_grab"):this.setStatus("cc_play_word_grab"),CCDDZGameSoundManager.playScore(this._sexVoice,e)},t.prototype.hideScore=function(){this.setStatus()},t.prototype.showDoubleFlag=function(e){this.doubleFlag_img.visible=e},t.prototype.showDoubleTip=function(e,t){var i=this;void 0===t&&(t=!1);var n="cc_noDouble2";t&&(n="cc_double2"),this.setStatus(n),egret.setTimeout(function(){("cc_noDouble2"==i.imgStatus.source||"cc_double2"==i.imgStatus.source)&&i.setStatus()},this,3e3),CCDDZGameSoundManager.playDouble(this._sexVoice,t)},t.prototype.updateCardCount=function(e){3>=e?this.showJingDeng():this.hideJingDeng()},t.prototype.showJingDeng=function(){this.jingdeng||(this.jingdeng=new CCDDZDragonJingDeng),this.jingdeng.parent||this.jingdengGroup.addChild(this.jingdeng)},t.prototype.hideJingDeng=function(){this.jingdeng&&this.jingdeng.parent&&this.jingdeng.parent.removeChild(this.jingdeng)},t.prototype.setMaster=function(e,t){if(this.imgMaster.visible=!1,this._isMaster=e,this.ddzHandCardGroup.isMaster=e,this.ddzDeskCardGroup.isMaster=e,e){var i=this.globalToLocal(CCalien.CCDDZStageProxy.width/2-this.imgMaster.width/2,CCalien.CCDDZStageProxy.height/2-this.imgMaster.height/2);i={x:i.x,y:i.y,visible:!0};var n={x:this.imgMaster.x,y:this.imgMaster.y},o=egret.Tween.get(this.imgMaster).set({visible:!0}).to(i);t?o.wait(1e3).to(n,500,egret.Ease.cubicIn):o.to(n)}},Object.defineProperty(t.prototype,"isMaster",{get:function(){return this._isMaster},enumerable:!0,configurable:!0}),t.prototype._setUserInfoData=function(t){e.prototype._setUserInfoData.call(this,t),this.userInfoData&&(this._sexVoice=t.sexVoiceStr)},t.prototype.updateUserInfoData=function(t){e.prototype.updateUserInfoData.call(this,t),this.userInfoData&&(this._sexVoice=this._userInfoData.sexVoiceStr)},t.prototype.updateGold=function(e,t){if(void 0===t&&(t=!1),this.userInfoData){var i=this.userInfoData.gold+=e;!t&&0>i&&(i=0),this.userInfoView.updateGold(i)}},t.prototype.updateRednormalGold=function(e,t){void 0===t&&(t=!1);var i=this.userInfoView.gold.nGold;t&&(i=this.userInfoView.diamond.nGold);var n=Number(i)+e;0>n&&(n=0),t?this.userInfoView.updateDiamond(n):this.userInfoView.updateGold(n)},t.prototype.updateDiamond=function(e){0>e||this.userInfoView.updateDiamond(e)},t.prototype.showDiamond=function(e){this.userInfoView.diamond.visible=e},t.prototype.setReady=function(e){this.imgReady.visible=e&&!ccserver.isMatch},t}(CCDDZSeat);__reflect(CCDDZDDZSeat.prototype,"CCDDZDDZSeat");var CCGlobalDataStorage=function(){function e(){this.name="save"}return e.prototype.loadData=function(){this.save=CCalien.CCDDZlocalStorage.getItemObj(this.name,{},this.prefix)},e.prototype.clearData=function(e){if(void 0===e&&(e=null),e)for(var t in this.save)e.indexOf(t)<0&&delete this.save[t];else this.save={};this.saveData()},e.prototype.saveData=function(){CCalien.CCDDZlocalStorage.setItemObj(this.name,this.save,this.prefix)},e.prototype.getItem=function(e,t){void 0===t&&(t=null);var i=this.save[e];return null===i&&(i=t),i},e.prototype.setItem=function(e,t,i){void 0===i&&(i=!1);var n=this.save[e];return this.save[e]=t,i&&this.saveData(),n},e.prototype.changeItem=function(e,t,i){void 0===i&&(i=!1);var n=this.save[e];return this.save[e]=n+t,i&&this.saveData(),n},e}();__reflect(CCGlobalDataStorage.prototype,"CCGlobalDataStorage");var CCGlobalLanguagePack=function(){function e(){}return e}();__reflect(CCGlobalLanguagePack.prototype,"CCGlobalLanguagePack");var LanguageIds=function(){function e(){this.loading="loading",this.config_url="config_url",this.config_url_1="config_url_1",this.first_alert_title="first_alert_title",this.first_alert_buttons="first_alert_buttons",this.service_provision_url="service_provision_url",this.service_provision="service_provision",this.health_game_advise="health_game_advise",this.loginError="loginError",this.login_waiting="login_waiting",this.disconnect_kick_out="disconnect_kick_out",this.disconnect_server="disconnect_server",this.auto_reconnect="auto_reconnect",this.waiting_for_getting_information="waiting_for_getting_information",this.backAlert="backAlert",this.roomLimit1="roomLimit1",this.roomLimit2="roomLimit2",this.roomAmount="roomAmount",this.quick_join_error="quick_join_error",this.upload_avatar="upload_avatar",this.no_more_desk="no_more_desk",this.noMoreGold="noMoreGold",this.noMoreGold2="noMoreGold2",this.noMoreGold3="noMoreGold3",this.browNoGold="browNoGold",this.reportSucc="reportSucc",this.repeatReport="repeatReport",this.gameResult="gameResult",this.sex="sex",this.sexVoice="sexVoice",this.people="people",this.second="second",this.gold="gold",this.score="score",this.year="year",this.month="month",this.day="day",this.sky="sky",this.format_y_m_d="format_y_m_d",this.format_m_d="format_m_d",this.currency="currency",this.play_turn="play_turn",this.no_ranking="no_ranking",this.confirm="confirm",this.reconnect="reconnect",this.history="history",this.chatList="chatList",this.free_pay="free_pay",this.match_sign_up_result="match_sign_up_result",this.match_jikai_limit="match_jikai_limit",this.match_jikai_reward="match_jikai_reward",this.match_title_reward_intro="match_title_reward_intro",this.match_title_match_intro="match_title_match_intro",this.match_play_info="match_play_info",this.match_result_match_name="match_result_match_name",this.match_waiting_other_desk_1="match_waiting_other_desk_1",this.match_waiting_other_desk_2="match_waiting_other_desk_2",this.match_get_in="match_get_in",this.match_result_praise="match_result_praise",this.match_cancel_alert="match_cancel_alert",this.match_turn_name="match_turn_name",this.match_top_info_1="match_top_info_1",this.match_top_info_2="match_top_info_2",this.match_top_info_3="match_top_info_3",this.match_top_notify="match_top_notify",this.match_notice_alert="match_notice_alert",this.modify_profile_success="modify_profile_success",this.modify_profile_failed="modify_profile_failed",this.modify_profile_err="modify_profile_err",this.set_password_error="set_password_error",this.bank_operate="bank_operate",this.bank_operate_error="bank_operate_error",this.bind_phone_notice="bind_phone_notice",this.download_client_notice="download_client_notice",this.alms_success="alms_success",this.alms_success_continue="alms_success_continue",this.alms_success_exit="alms_success_exit",this.version_content="version_content",this.version_content_notice="version_content_notice",this.recharge_scale="recharge_scale",this.recharge_addition="recharge_addition",this.recharge_waiting="recharge_waiting",this.recharge_failed="recharge_failed",this.recharge_cancel="recharge_cancel",this.recharge_success_simple="recharge_success_simple",this.recharge_success="recharge_success",this.get_code_error="get_code_error",this.bind_phone_error="bind_phone_error",this.bind_third_part="bind_third_part",this.exchange_redcoin="exchange_redcoin",this.exchange_roomid="exchange_roomid",this.kickback_str="kickback_str",this.dayTaskOne="dayTaskOne",this.dayTaskTwo="dayTaskTwo",this.recordCardHour="recordCardHour",this.recordCardDay="recordCardDay",this.redCoin="redCoin",this.taskNotExist="taskNotExist",this.taskNotOver="taskNotOver",this.taskHasGetRew="taskHasGetRew"}return e}();__reflect(LanguageIds.prototype,"LanguageIds");var CCDDZDragonBase=function(e){function t(t){var i=e.call(this)||this;i.addEventListener(egret.Event.ADDED_TO_STAGE,i.addToStage,i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.removeFromStage,i);var n=RES.getRes(t),o=RES.getRes(t+"_texture_json"),a=RES.getRes(t+"_texture_png");return CCDDZDragonManager.getInstance().addDragon(n,a,o),i}return __extends(t,e),t.prototype.addToStage=function(e){CCalien.CCDDZStageProxy.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.removeFromStage=function(e){CCalien.CCDDZStageProxy.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onResize=function(e){},t.prototype.addArmature=function(e){var t=CCDDZDragonManager.getInstance().getDragon(e);return this.addChild(t.display),dragonBones.WorldClock.clock.add(t),t},t}(egret.Sprite);__reflect(CCDDZDragonBase.prototype,"CCDDZDragonBase");var CCDDZFlyGold=function(e){function t(){var t=e.call(this)||this;return t.skinName=components.CCDDZFlyGoldSkin,t}return __extends(t,e),t.prototype.initData=function(e){var t=1;this.alpha=1,this.touchEnabled=this.touchChildren=!1;var i=this.img;e.img?i.source=e.img:i.source="cc_icon_gold2",e.scale&&(t=e.scale),this.scaleX=this.scaleY=t,this.commitProperties(),i.x=i.anchorOffsetX=i.width*i.scaleX*.5,i.y=i.anchorOffsetY=i.height*i.scaleY*.5,e.cb?this.flyOverCb=e.cb:this.flyOverCb=null},t.prototype.fly=function(e,t,i,n,o){void 0===o&&(o=1e3),this.visible=!0,this.rotation=360*Math.random();var a=o,r=this.getBezier(e,t,i,n);egret.Tween.get(this,null,null,null).to({x:i,y:n,rotation:this.rotation+180,_bezier:r},a).call(this.flyEnd,this)},t.prototype.flyEnd=function(){this.visible=!1,this.flyOverCb&&this.flyOverCb(this)},t.create=function(e){return CCalien.ObjectPool.getObject("CCDDZFlyGold",e)},t.recycle=function(e){CCalien.ObjectPool.recycleObject("CCDDZFlyGold",e)},t.prototype.getBezier=function(e,t,i,n){var o,a,r,s=15,c=i-e,h=n-t,l=Math.random(),u=[];r=Math.abs(c)<Math.abs(h)?.5>l?1:2:.5>l?3:4;for(var p,C=2,d=1;C>d;d++)p=0+50*Math.random(),1==r||2==r?(a=t+(n-t)/C*d,o=1==r?e+(i-e)/C*d-s-p:e+(i-e)/C*d+s+p):(o=e+(i-e)/C*d,a=3==r?t+(n-t)/C*d+s+p:t+(n-t)/C*d-s-p),u.push({x:o,y:a});return u},t}(eui.Component);__reflect(CCDDZFlyGold.prototype,"CCDDZFlyGold"),window.CCDDZFlyGold=CCDDZFlyGold;var CCalien;!function(e){var t=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.setXY(e,t)}return e.prototype.setXY=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.zero=function(){return this.x=0,this.y=0,this},Object.defineProperty(e.prototype,"isZero",{get:function(){return 0==this.x&&0==this.y},enumerable:!0,configurable:!0}),e.prototype.normalize=function(){var e=this.length;return 0==e?(this.x=1,this):(this.x/=e,this.y/=e,this)},Object.defineProperty(e.prototype,"isNormalized",{get:function(){return 1==this.length},enumerable:!0,configurable:!0}),e.prototype.truncate=function(e){return this.length=Math.min(e,this.length),this},e.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.dotProd=function(e){return this.x*e.x+this.y*e.y},e.prototype.crossProd=function(e){return this.x*e.y-this.y*e.x},e.prototype.distSQ=function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},e.prototype.distance=function(e){return Math.sqrt(this.distSQ(e))},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.multiply=function(e){return this.x*=e,this.y*=e,this},e.prototype.divide=function(e){return this.x/=e,this.y/=e,this},Object.defineProperty(e.prototype,"angle",{get:function(){return 180*this.radian/Math.PI},set:function(e){this.radian=e*Math.PI/180},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return Math.atan2(this.y,this.x)},set:function(e){var t=this.length;this.setXY(Math.cos(e)*t,Math.sin(e)*t)},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(e){var t=this.radian;this.setXY(Math.cos(t)*e,Math.sin(t)*e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengthSQ",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"[CCDDZVector2D (x:"+this.x+", y:"+this.y+")]"},e}();e.CCDDZVector2D=t,__reflect(t.prototype,"CCalien.CCDDZVector2D")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){}return t.callNet=function(t,i,n,o,a,r,s,c){void 0===i&&(i=null),void 0===n&&(n=egret.HttpMethod.GET),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=null),void 0===c&&(c=null);var h=s?s():t;console.log("callNet===1==>",h);var l=new egret.HttpRequest;l.addEventListener(egret.Event.COMPLETE,function(e){a&&a(l.response)},this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){r&&r(l.response)},this),l.open(h,n),l.responseType=egret.HttpResponseType.TEXT;for(var u in o)l.setRequestHeader(u,o[u]);var p=null;c?p=c():(l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p=e.CCDDZUtils.obj2query(i),console.log("callNet===2==>",p)),p?l.send(p):l.send()},t.GET=function(t,i,n,o,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),this.callNet(t,i,egret.HttpMethod.GET,a,n,o,function(){if(i){var n=e.CCDDZUtils.obj2query(i);t+=(t.indexOf("?")<0?"?":"")+n}return t},function(){return null})},t.POST=function(e,t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this.callNet(e,t,egret.HttpMethod.POST,o,i,n)},t.POSTDirectory=function(e,t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),this.callNet(e,t,egret.HttpMethod.POST,o,i,n,null,function(){return t})},t}();e.Ajax=t,__reflect(t.prototype,"CCalien.Ajax")}(CCalien||(CCalien={}));var _base64key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",CCDDZBase64=function(){function e(){}return e.encode=function(e){if(!e)return"";var t,i,n,o,a,r,s,c="",h=0;for(e=this._utf8_encode(e);h<e.length;)t=e.charCodeAt(h++),i=e.charCodeAt(h++),n=e.charCodeAt(h++),o=t>>2,a=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,s=63&n,isNaN(i)?r=s=64:isNaN(n)&&(s=64),c=c+_base64key.charAt(o)+_base64key.charAt(a)+_base64key.charAt(r)+_base64key.charAt(s);return c},e.decode=function(e){if(!e)return"";var t,i,n,o,a,r,s,c="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)o=_base64key.indexOf(e.charAt(h++)),a=_base64key.indexOf(e.charAt(h++)),r=_base64key.indexOf(e.charAt(h++)),s=_base64key.indexOf(e.charAt(h++)),t=o<<2|a>>4,i=(15&a)<<4|r>>2,n=(3&r)<<6|s,c+=String.fromCharCode(t),64!=r&&(c+=String.fromCharCode(i)),64!=s&&(c+=String.fromCharCode(n));return c=this._utf8_decode(c)},e._utf8_encode=function(e){return window.unescape(encodeURIComponent(e))},e._utf8_decode=function(e){return decodeURIComponent(window.escape(e))},e}();__reflect(CCDDZBase64.prototype,"CCDDZBase64");var CCalien;!function(e){var t=function(){function t(){this._pupUpStack=[],this._popLayer=e.CCDDZSceneManager.instance.popLayer,this._popLayer.width=e.CCDDZStageProxy.width,this._popLayer.height=e.CCDDZStageProxy.height,e.CCDDZStageProxy.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)}return Object.defineProperty(t,"instance",{get:function(){return void 0==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.addPopUp=function(e,i,n,o,a,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=!0),void 0===r&&(r=null),t.instance.addPopUp(e,i,n,o,a,r)},t.removePopUp=function(e,i,n,o,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===a&&(a=null),t.instance.removePopUp(e,i,n,o,a)},t.removeTopPupUp=function(){return t.instance.removeTopPupUp()},t.removeAllPupUp=function(){t.instance.removeAllPupUp()},t.prototype.onStageResize=function(t){void 0===t&&(t=null),this._modalMask&&(this._modalMask.width=e.CCDDZStageProxy.stage.stageWidth,this._modalMask.height=e.CCDDZStageProxy.stage.stageHeight)},t.prototype.addPopUp=function(i,n,o,a,r,s){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!0),void 0===s&&(s=null),!i.parent){this.modalConfig=e.CCDDZUtils.combineProp([s,t.defaultModalConfig]),this._pupUpStack.unshift({target:i,modalTouchFun:a,modal:r}),this.updateModalMask(this._pupUpStack[0]);var c=this.createEffectInstance(n);c.show(i,this._popLayer,function(){},this,o)}},t.prototype.removePopUp=function(e,t,i,n,o){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),e.parent&&this.getInStack(e,!0)){var a;if(this._pupUpStack.some(function(e){return e.modal?(a=e,!0):void 0}),a?this.updateModalMask(a):this.setModalMaskVisible(!1),n)this._popLayer.removeChild(e),o&&o();else{var r=this.createEffectInstance(t);r.hide(e,this._popLayer,function(){o&&o()},this,i)}}},t.prototype.removeTopPupUp=function(){if(this._popLayer.numChildren>0){var e=this._popLayer.getChildAt(this._popLayer.numChildren-1);return e.close(),!0}return!1},t.prototype.removeAllPupUp=function(){var t=this;e.CCDDZUtils.enumChildren(this._popLayer,function(e){e!=t._modalMask&&e&&e.close&&e.close()})},t.prototype.getInStack=function(e,t){void 0===t&&(t=!1);var i;return this._pupUpStack.some(function(t,n){return t.target==e?(i={item:t,index:n},!0):void 0}),i&&t&&this._pupUpStack.splice(i.index,1),i},t.prototype.createEffectInstance=function(t){void 0===t&&(t=null);var i;return i=t?new t:new e.CCDDZpopupEffect.None},t.prototype.onModalMaskTap=function(e){var t=this._pupUpStack[0];t&&t.modal&&t.modalTouchFun&&t.modalTouchFun()},t.prototype.updateModalMask=function(e){var t=this._popLayer.getChildIndex(this._modalMask),i=this._popLayer.getChildIndex(e.target);t!=i-1&&this.setModalMaskVisible(e.modal,i)},t.prototype.setModalMaskVisible=function(e,t){void 0===t&&(t=-1),e?(this.modalMask.fillColor=this.modalConfig.color,this.modalMask.fillAlpha=this.modalConfig.alpha,t>=0?(this.setModalMaskVisible(!0),this._popLayer.addChildAt(this.modalMask,t)):this._popLayer.addChild(this.modalMask),egret.Tween.get(this.modalMask,null,null,!0).to({alpha:1},this.modalConfig.duration)):this.modalMask.parent&&egret.Tween.get(this.modalMask,null,null,!0).to({alpha:0},this.modalConfig.duration).call(function(e){this._popLayer.removeChild(e)},this,[this.modalMask])},Object.defineProperty(t.prototype,"modalMask",{get:function(){return this._modalMask||(this._modalMask=new eui.Rect,this._modalMask.width=e.CCDDZStageProxy.width,this._modalMask.height=e.CCDDZStageProxy.height,this._modalMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onModalMaskTap,this)),this._modalMask},enumerable:!0,configurable:!0}),t.defaultModalConfig={color:0,alpha:.5,duration:200},t}();e.CCDDZPopUpManager=t,__reflect(t.prototype,"CCalien.CCDDZPopUpManager")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function e(){this.clear()}return e.prototype.containsKey=function(e){return e in this.obj},e.prototype.containsValue=function(e){for(var t in this.obj)if(this.obj[t]==e)return!0;return!1},e.prototype.put=function(e,t){this.containsKey(e)||(this.obj[e]=t,this._length++)},e.prototype.get=function(e){return this.containsKey(e)?this.obj[e]:null},e.prototype.remove=function(e){if(this.containsKey(e)){var t=this.obj;return delete this.obj[e],this._length--,t}return null},e.prototype.foreach=function(e,t){for(var i in this.obj)if(!e.call(t,i,this.obj[i]))break},e.prototype.randomGet=function(){var e=this.valueSet;return e[Math.floor(Math.random()*e.length)]},Object.defineProperty(e.prototype,"keySet",{get:function(){var e=[];for(var t in this.obj)e.push(t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueSet",{get:function(){var e=[];for(var t in this.obj)e.push(this.obj[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._length=0,this.obj={}},e}();e.HashMap=t,__reflect(t.prototype,"CCalien.HashMap")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function e(){}return e.distancePoint=function(e,t){return this.distance(e.x,e.y,t.x,t.y)},e.distance=function(e,t,i,n){return Math.sqrt((e-i)*(e-i)+(t-n)*(t-n))},e.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},e.makeRandomInt=function(e,t){return void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},e.makeRandomFloat=function(e,t){return void 0===t&&(t=0),Math.random()*(e-t)+t},e.makeRandomByRange=function(e,t){return e+(Math.random()*t*2-t)},e.makeRandomIntArr=function(e,t,i){void 0===i&&(i=0);for(var n=[],o=0;e>o;o++)n.push(this.makeRandomInt(t));return n},e.makeOrderIntArray=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=1);for(var n=[],o=t;e>=o;o+=i)n.push(o);
return n},e.mixArray=function(e){for(var t=0,i=Math.round(e.length/2);i>t;t++){var n=this.makeRandomInt(e.length),o=this.makeRandomInt(e.length),a=e[n];e[n]=e[o],e[o]=a}return e},e.mixArray2=function(e){for(var t,i,n=e[0].length,o=e.length,a=0,r=Math.round(n*o/2);r>a;a++){t=[this.makeRandomInt(n),this.makeRandomInt(o)],i=[this.makeRandomInt(n),this.makeRandomInt(o)];var s=e[t[0]][t[1]];e[t[0]][t[1]]=e[i[0]][i[1]],e[i[0]][i[1]]=s}return e},e.getRandomFromArray=function(e){return e[this.makeRandomInt(e.length)]},e.fixRange=function(e,t,i){return t>e?e=t:e>i&&(e=i),e},e.roundFix=function(e,t,i){return void 0===i&&(i=0),i>e?e+=t-i:e>=t&&(e-=t-i),e},e.radiusToAngle=function(e){return 180*e/Math.PI},e.angleToRadius=function(e){return e*Math.PI/180},e.turnRight=function(e){for(var t=[],i=0,n=e.length;n>i;i++)t.push([]);for(var o=0,a=e.length;a>o;o++)for(var r=0,s=e[o].length;s>r;r++)t[o][r]=e[s-r-1][o];return t},e.turnLeft=function(e){for(var t=[],i=0,n=e.length;n>i;i++)t.push([]);for(var o=0,a=e.length;a>o;o++)for(var r=0,s=e[o].length;s>r;r++)t[o][r]=e[r][s-o-1];return t},e.calDir=function(e,t,i,n){if(e==i&&t==n)return-1;var o,a=Math.atan2(n-t,i-e);return o=Math.abs(a)<Math.PI/4?0:Math.abs(a)>Math.PI/4*3?2:a>0?1:3},e.sign=function(e){return 0==e?0:e>0?1:-1},e.split=function(e,t){for(var i=[],n=0;t>n;n++)i[n]=0;for(var n=0;e>n;n++)i[this.makeRandomInt(t)]++;return i},e.bezierPoints=function(e,t){function i(e,t,i){return{x:(t.x-e.x)*i+e.x,y:(t.y-e.y)*i+e.y}}for(var n,o=[],a=0,r=1/(t-1),s=0;t>s;s++){for(var c=e.concat(),h=c.length-1;h>0;h--){n=[];for(var l=0,u=c.length;u-1>l;l++)n.push(i(c[l],c[l+1],a));c=n}o.push(c[0]),a+=r}return o},e}();e.MathUtils=t,__reflect(t.prototype,"CCalien.MathUtils")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function e(){}return e.registerPool=function(e,t,i){void 0===i&&(i=null),this.createMethods[e]=t,this.initMethods[e]=i,this.pools[e]=[]},e.getObject=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.pools[e];if(!n)return console.warn(e+"没有注册在对象池中。"),null;var o;if(n.length>0)o=n.shift();else{var a=this.createMethods[e];o=a.apply(null,t)}var r=this.initMethods[e];return r&&(t.unshift(o),r.apply(null,t)),this.debug(),o},e.recycleObject=function(e,t){if(t){var i=this.pools[e];if(!i)return void console.warn(e+"没有注册在对象池中。");i.indexOf(t)<0&&i.length<=this.MAX&&i.push(t),this.debug()}},e.debug=function(){var e="";for(var t in this.pools){var i=this.pools[t];e+=t+":"+i.length+"\n"}},e.MAX=20,e.createMethods={},e.initMethods={},e.pools={},e}();e.ObjectPool=t,__reflect(t.prototype,"CCalien.ObjectPool")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){}return t.makeRandomString=function(t){for(var i="",n=this.chars.length,o=0;t>o;o++)i+=this.chars.charAt(e.MathUtils.makeRandomInt(n));return i},t.makeRandomIntString=function(t){for(var i="",n=0;t>n;n++)i+=e.MathUtils.makeRandomInt(10);return i},t.stringCut=function(e,t,i){void 0===i&&(i="...");var n=e;return e.length>t&&(n=e.substr(0,t)+i),n},t.supplement=function(e,t){var i=t-e.toString().length-1;return 0>i?e.toString():this.zeros[i]+e},t.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return this.formatApply(e,t)},t.formatApply=function(e,t){for(var i=e,n=0,o=t.length;o>n;n++)i=i.replace("{"+n+"}",t[n]);return i},t.getStrFromObj=function(e,t){void 0===t&&(t="&");var i="";for(var n in e)""!=i&&(i+=t),i+=n+"="+e[n];return i},t.getColor=function(e,t,i){return void 0===i&&(i=0),0==i?"<font color='#"+t.toString(16)+"'>"+e+"</font>":"<font size="+i+" color='#"+t.toString(16)+"'>"+e+"</font>"},t.chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t.zeros=["0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000"],t}();e.StringUtils=t,__reflect(t.prototype,"CCalien.StringUtils")}(CCalien||(CCalien={}));var CCalien;!function(e){function t(e,t,i,n,o){void 0===i&&(i=-1),void 0===n&&(n=null),void 0===o&&(o=!1);for(var a=[],r=5;r<arguments.length;r++)a[r-5]=arguments[r];var s=0;o&&(s++,e.apply(null,a));var c=egret.setInterval(function(){return i>0&&s>=i?(egret.clearInterval(c),void(n&&n())):(e.apply(null,a),void s++)},this,t);return c}e.repeat=t;var i=function(){function t(){}return t.timeFormat=function(t,i,n,o){var a=this;void 0===i&&(i="{1}:{0}"),void 0===n&&(n=!0),void 0===o&&(o=!1);var r=t%60,s=Math.floor(t/60)%60,c=Math.floor(t/3600)%24,h=Math.floor(t/3600/24);if(n&&(r=e.StringUtils.supplement(r,2),s=e.StringUtils.supplement(s,2),c=e.StringUtils.supplement(c,2),h=e.StringUtils.supplement(h,2)),o){var l="";return[h,c,s,r].forEach(function(e,t){e>0&&(l+=e+lang[a.timeLang[t]])}),l}return e.StringUtils.format(i,r,s,c,h)},t.timeFormatForEx=function(t,i,n,o,a,r){void 0===i&&(i="年"),void 0===n&&(n="月"),void 0===o&&(o="日"),void 0===a&&(a=!0),void 0===r&&(r=!1);var s=t.getFullYear(),c=t.getMonth()+1,h=t.getDate(),l=s+i+c+n+h+o;if(a){var u=e.StringUtils.supplement(t.getHours(),2),p=e.StringUtils.supplement(t.getMinutes(),2);return r?l+" "+u+":"+p+":"+t.getSeconds():l+" "+u+":"+p}return l},t.parseFromString=function(e){return new Date(e.replace("T"," ").replace(/-/g,"/"))},t.parseFromStringScope=function(e){var t=this;return e.map(function(e){return t.parseFromString(e)})},t.dateTimeToString=function(e){return this.dateToString(e,lang.format_y_m_d)+" "+this.dateToTimeString(e,"{2}:{1}")},t.tsToDate=function(e){var t=new Date;return t.setTime(1e3*e),t},t.parseTime=function(e){var t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2])},t.tsToDateString=function(e,t){return void 0===t&&(t="{0}/{1}/{2}"),this.dateToString(this.tsToDate(e))},t.dateToString=function(t,i){return void 0===i&&(i="{0}/{1}/{2}"),e.StringUtils.format(i,t.getFullYear(),e.StringUtils.supplement(t.getMonth()+1,2),e.StringUtils.supplement(t.getDate(),2))},t.dateToTimeString=function(t,i){return void 0===i&&(i="{2}:{1}:{0}"),e.StringUtils.format(i,e.StringUtils.supplement(t.getSeconds(),2),e.StringUtils.supplement(t.getMinutes(),2),e.StringUtils.supplement(t.getHours(),2))},t.dateToTs=function(e){return Math.floor(e.valueOf()/1e3)},t.dateCut=function(e){var t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return this.tsToDate(this.dateToTs(e)-3600*t-60*i-n)},t.tsToMonthDayString=function(t){var i=this.tsToDate(t);return e.StringUtils.format("{0}"+lang.month+"{1}"+lang.day,e.StringUtils.supplement(i.getMonth()+1,2),e.StringUtils.supplement(i.getDate(),2))},t.scopeToDateString=function(e,t){return this.dateToString(e[0],t)+"-"+this.dateToString(e[1],t)},t.scopeToTimeString=function(e,t){var i=this.dateToTimeString(e[0],t),n=this.dateToTimeString(e[1],t);return i+"-"+n},t.scopeToDateTimeString=function(e,t,i,n){void 0===n&&(n=!1);var o=e[0],a=e[1];return n&&o.getDate()==a.getDate()?this.dateToString(o,t)+" "+this.dateToTimeString(o,i)+"-"+this.dateToTimeString(a,i):this.dateTimeToString(o)+" - "+this.dateTimeToString(a)},t.remainDays=function(e,t,i){return void 0===i&&(i=!1),0},t.compareScope=function(e,t){var i=this.dateToTs(e[0]),n=this.dateToTs(e[1]);return i>t?t-i:t>=i&&n>=t?0:t-n},t.getWeekIndex=function(e){var t=this.tsToDate(e),i=this.getFirstWeekBegDay(t.getFullYear());i>t&&(i=this.getFirstWeekBegDay(t.getFullYear()-1));var n=Math.floor((t.valueOf()-i.valueOf())/864e5);return Math.floor(n/7)+1},t.getFirstWeekBegDay=function(e){var t=new Date(e,0,1),i=t.getDay();if(1==i)return t;i=0==i?7:i;var n=t.setDate(t.getDate()+(8-i));return new Date(n)},t.timeLang=["sky","hour","minutes","second"],t}();e.TimeUtils=i,__reflect(i.prototype,"CCalien.TimeUtils")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.dicTweenCount={},t.dicTweenParams={},t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.start=function(e,t){void 0===t&&(t=null),this.dicTweenCount[e]=0,this.dicTweenParams[e]=t},t.prototype.registerTween=function(e,t){this.setTweenStart(e),t.call(this.onTweenEnd,this,[e])},t.prototype.setTweenStart=function(e){this.dicTweenCount[e]++},t.prototype.setTweenEnd=function(e){this.onTweenEnd(e)},t.prototype.onTweenEnd=function(e){this.dicTweenCount[e]--,this.dicTweenCount[e]<=0&&this.dispatchEventWith(t.ALL_TWEEN_COMPLETE,!1,{name:e,params:this.dicTweenParams[e]})},t.ALL_TWEEN_COMPLETE="allTweenComplete",t}(egret.EventDispatcher);e.TweenWatcher=t,__reflect(t.prototype,"CCalien.TweenWatcher")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(){function t(){}return t.injectProp=function(e,t,i,n,o){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!0),void 0===o&&(o=!0),!t)return!1;var a=!0;for(var r in t){var s=t[r];n&&"function"==typeof s||o&&null==s||(i?i(e,r,s):e[r]=s)}return a},t.getDirtyData=function(e,t){var i;for(var n in t)e[n]!=t[n]&&(i||(i={}),i[n]=t[n]);return i},t.combineProp=function(e){var t={};return e.forEach(function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t},t.enumChildren=function(e,t){for(var i=0,n=e.numChildren;n>i&&!t(e.getChildAt(i),i);i++);},t.removeChildren=function(e,t){for(var i=0;e.numChildren>0;)t(e.removeChildAt(0),i),i++},t.clone=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var n=t?new t:{};return this.injectProp(n,e,null,i),n},t.arrToIntArr=function(e){for(var t=0,i=e.length;i>t;t++)e[t]=parseInt(e[t]);return e},t.getUrlParams=function(){var e={},t=window.location.href,i=t.indexOf("?");if(0>i)return e;for(var n=t.substr(i+1).split("&"),o=0;o<n.length;o++){var a=n[o].split("=");e[a[0]]=a[1]}return e},t.getUrlBase=function(){var e=window.location.href,t=e.indexOf("?");return e.substring(0,0>t?e.length:t)},t.anchorCenter=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.anchorRate(e,.5,.5,t,i)},t.anchorRate=function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0),0==n&&(n=e.width),0==o&&(o=e.height),e.x+=e.anchorOffsetX=n*t,e.y+=e.anchorOffsetY=o*i},t.obj2query=function(e){if(!e)return"";var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")},t.parseColorTextFlow=function(e){for(var t,i=e.split(/\[.*?\]/g),n=e.match(/\[.*?\]/g),o=[],a=0,r=i.length-1;r>a;a++){t=i[a],t&&o.push({text:t});var s=n[a];s=s.substr(1,s.length-2);var c={},h=s.split("|");1==h.length?c.style={textColor:parseInt(h[0],16)}:(c.text=h[0],c.style={textColor:parseInt(h[1],16)}),o.push(c)}return t=i[a],t&&o.push({text:t}),o},t.parseHtmlText=function(e){return this.parser.parser(e)},t.scrollTo=function(e,t,i){return void 0===i&&(i=0),(t+i)*e},t.getByteLen=function(e){return e.replace(/[^\x00-\xff]/g,"__").length},t.checkTwoTimestampIsOtherDay=function(e,t){var i=new Date(e).getDate(),n=new Date(t).getDate();return i!=n&&t>e?!0:!1},t.checkCurHourisInHourRange=function(e,t){var i=ccserver.getServerStamp(),n=new Date(i).getHours();return n>=e&&t>n?!0:!1},t.getCurTimeStamp=function(){var t=e.Native.instance.getUrlArg();return"1"==t.showLog?(new Date).getTime():ccserver.getServerStamp()},t.flatToString=function(e,t){var i=""+e,n=i.split("."),o="";if(n.length<=1){if(o=i,t>0){for(var a="",r=0;t>r;++r)a+="0";o+="."+a}}else o=n[0]+"."+n[1].substr(0,t);return o},t.parser=new egret.HtmlTextParser,t}();e.CCDDZUtils=t,__reflect(t.prototype,"CCalien.CCDDZUtils")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpPanel.visible=!1,this.grpPanel.alpha=0,this.grpPanel.y=0,this._index=-1,this.list.itemRenderer=i,this.list.dataProvider=this._items=new eui.ArrayCollection,this.list.addEventListener(egret.Event.CHANGE,this.onItemSelect,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},n.prototype.onTap=function(e){var t=this;!this.grpPanel.visible&&this._items&&0!=this._items.length&&egret.setTimeout(function(){t.show()},this,1)},n.prototype.onItemSelect=function(e){this.index=this.list.selectedIndex,this.list.selectedIndex=-1},n.prototype.onStageTap=function(e){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this),this.hide()},n.prototype.show=function(){this._items.length>1&&(e.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this),egret.Tween.get(this.grpPanel,null,null,!0).set({visible:!0}).to({y:this.imgBg.height,alpha:1},100))},n.prototype.hide=function(){this.btn.selected=!1,egret.Tween.get(this.grpPanel,null,null,!0).to({y:0,alpha:0},100).set({visible:!1}).call(this.onResult.bind(this))},n.prototype.onResult=function(){this.dispatchEventWith(egret.Event.CHANGE,!1,{index:this._index})},Object.defineProperty(n.prototype,"items",{get:function(){return this._items?this._items.source:null},set:function(e){this._items.source=e,this.index=0,this.btn.visible=this._items.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e;var t=this._items.getItemAt(this._index);this.lab.text="string"==typeof t?t:t.text,this.lab.textColor=t.disable?13421772:16641454},enumerable:!0,configurable:!0}),n}(eui.Component);e.DropDown=t,__reflect(t.prototype,"CCalien.DropDown");var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.lab.text="string"==typeof t?t:t.text,this.lab.textColor=t.disable?13421772:16641454},t}(eui.ItemRenderer);e.CCDDZIRDropDownItem=i,__reflect(i.prototype,"CCalien.CCDDZIRDropDownItem")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.createChildren=function(){var i=this;t.prototype.createChildren.call(this),this.parts=[],e.CCDDZUtils.enumChildren(this,function(e){i.parts.push(e)}),this.removeChildren(),this.switchTo(0,0)},i.prototype.switchTo=function(e,t,i){var n=this;if(void 0===t&&(t=300),void 0===i&&(i=null),this._index!=e){this._index=e,this._old&&(this.removeChild(this._old),this._old=null);var o=this.parts[e],a=this._old=0==this.numChildren?null:this.getChildAt(0);o&&(o.alpha=0,o.visible=!0,this.addChild(o),egret.Tween.get(o,null,null,!0).to({alpha:1},t).call(function(){i&&i()})),a&&egret.Tween.get(a,null,null,!0).to({alpha:0},t).call(function(){n._old=null,a.alpha=1,n.removeChild(a)})}},i}(eui.Group);e.FadeSwitch=t,__reflect(t.prototype,"CCalien.FadeSwitch")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},Object.defineProperty(t.prototype,"anchorX",{get:function(){return this._anchorX},set:function(e){this._anchorX!=e&&(this._anchorX=e,this.anchorOffsetX=this.width*this._anchorX)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchorY",{get:function(){return this._anchorY},set:function(e){this._anchorY!=e&&(this._anchorY=e,this.anchorOffsetY=this.height*this._anchorY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this._animation},set:function(e){this._animation!=e&&(this._animation=e,this._animation&&this.playAnimation(this._animation))},enumerable:!0,configurable:!0}),t.prototype.playAnimation=function(e){if(e){var t=egret.Tween.get(this,null,null,!0),i=e.split("|");i.forEach(function(e,i){var n=e.split(";"),o=n[0].replace("[",'{"').replace(":",'":').replace("]","}"),a=parseFloat(n[1])||0;if(o.length>2){var r=JSON.parse(o),s=void 0;n[2]&&(s=egret.Ease[n[2]]),t.to(r,a,s)}else t.wait(a)})}},t}(eui.Image);e.Image=t,__reflect(t.prototype,"CCalien.Image")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._index=-1;var t=this.grpPoints.removeChildAt(0);this.pointRes=t.source,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.renderPoints(),this.index=0},t.prototype.onTap=function(e){switch(e.target.name){case"reduce":this._setIndex(this._index-1);break;case"increase":this._setIndex(this._index+1)}},t.prototype.renderPoints=function(){this.grpPoints.removeChildren();for(var e=0;e<this.total;e++){var t=new eui.Image(this.pointRes);t.scaleX=t.scaleY=t.alpha=.7,this.grpPoints.addChild(t)}},Object.defineProperty(t.prototype,"total",{get:function(){return this._total},set:function(e){this._total=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){this._setIndex(e,!1)},enumerable:!0,configurable:!0}),t.prototype._setIndex=function(e,t){void 0===t&&(t=!0);var i=e;0>i?i=this._total-1:i>this._total-1&&(i=0),this.updateIndex(this._index,this._index=i,t)},t.prototype.updateIndex=function(e,t,i){if(void 0===i&&(i=!0),e>=0){var n=this.grpPoints.getChildAt(e);egret.Tween.get(n,null,null,!0).to({scaleX:.7,scaleY:.7,alpha:.7},200)}var o=this.grpPoints.getChildAt(t);egret.Tween.get(o,null,null,!0).to({scaleX:1,scaleY:1,alpha:1},200),i&&this.dispatchEventWith(egret.Event.CHANGE)},t}(eui.Component);e.PageProgressBar=t,__reflect(t.prototype,"CCalien.PageProgressBar")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.speedX=-.5,e.speedY=0,e.init(),e}return __extends(i,t),i.prototype.init=function(){this._imgs=[],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedToStage,this)},i.prototype.onAddedToStage=function(t){this._playing&&e.CCDDZTickerManager.register(this)},i.prototype.onRemovedToStage=function(t){e.CCDDZTickerManager.unregister(this)},i.prototype.createChildren=function(){var i=this;t.prototype.createChildren.call(this),this._imgs=[],this._widthMax=0,e.CCDDZUtils.enumChildren(this,function(e){i._imgs.push(e),i._widthMax+=e.width}),this.play()},i.prototype.play=function(){this._playing=!0,e.CCDDZTickerManager.register(this)},i.prototype.stop=function(){this._playing=!1,e.CCDDZTickerManager.unregister(this)},i.prototype.update=function(){var e=this;this._imgs.forEach(function(t){t.x+=e.speedX,t.y+=e.speedY,e.speedX<0&&t.x<-t.width&&(t.x=e._widthMax-t.width)})},i}(eui.Component);e.ScrollImage=t,__reflect(t.prototype,"CCalien.ScrollImage",["CCalien.ITicker"])}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._contentPoint={},e._dragOffset={},e._selectedIndex=-1,e._totalPage=0,e._points=[],e._dragThreshold=10,e}return __extends(i,t),Object.defineProperty(i.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(e){this._dragThreshold=e},enumerable:!0,configurable:!0}),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.callLater(this.setup,this)},i.prototype.setup=function(){var t=this;this.scrollEnabled=!0,e.CCDDZUtils.enumChildren(this,function(e,i){e.x=i*t.width,e.y=0}),this._totalPage=this.numChildren,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,!0),e.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this,!0),e.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this,!0)},i.prototype.onTouchBegin=function(e){this._touchBeginPoint={x:e.stageX,y:e.stageY},this._contentPoint.x=this.scrollH,this._contentPoint.y=this.scrollV,this._touchedTarget=e.target,this._touchCancel=!1,this._points.splice(0),egret.Tween.removeTweens(this),this._touchMoved=!1},i.prototype.dispatchCancelEvent=function(e){var t=new egret.TouchEvent(egret.TouchEvent.TOUCH_CANCEL,e.bubbles,e.cancelable),i=this._touchedTarget;i.dispatchEvent(t);for(var n=this.$getPropagationList(i),o=n.length,a=.5*n.length,r=-1,s=0;o>s;s++)if(n[s]===this){r=s;break}n.splice(0,r+1),a-=r+1,this.$dispatchPropagationEvent(t,n,a),egret.Event.release(t)},i.prototype.onTouchMove=function(e){if(this._touchBeginPoint){var t=e.stageX-this._touchBeginPoint.x;Math.abs(t)>this._dragThreshold&&(this.dispatchCancelEvent(e),this._dragOffset.x=t,this._points.push({t:(new Date).valueOf(),x:e.stageX,y:e.stageY}),this.scrollH=this._contentPoint.x-this._dragOffset.x,this._touchCancel=!0,this._touchMoved=!0)}},i.prototype.onTouchEnd=function(t){if(this._touchBeginPoint){var i=-1,n=this._points.length;if(Math.abs(this._dragOffset.x)>this.width/3)i=this.switchPage(e.MathUtils.sign(-this._dragOffset.x));else if(n>0){var o=this._points[1==n?1:n-2];if(o){var a=(o.x-t.stageX)/((new Date).valueOf()-o.t);Math.abs(a)>1&&(i=this.switchPage(e.MathUtils.sign(a)))}}this._touchMoved&&this.showPage(0>i?this._selectedIndex:i)}this._touchBeginPoint=null,this._dragOffset={}},i.prototype.switchPage=function(e){var t=this._selectedIndex+e;return 0>t?t=0:t>this._totalPage-1&&(t=this._totalPage-1),t},i.prototype.onTouchTap=function(e){this._touchCancel&&e.stopPropagation()},i.prototype.removeListeners=function(){},i.prototype.showPage=function(e,t,i){var n=this;void 0===t&&(t=!0),void 0===i&&(i=!0),egret.callLater(function(){n._callPageOut();var o=!1;n._selectedIndex=e;var a=e*n.width;t?(egret.Tween.removeTweens(n),egret.Tween.get(n).to({scrollH:a},Math.abs(n.scrollH-a),egret.Ease.quartOut).call(function(){o||n._callPageIn(e)})):(n.scrollH=a,o||n._callPageIn(e)),i&&!o&&n.dispatchEventWith(egret.Event.CHANGE,!1,{page:e})},this)},i.prototype._callPageOut=function(){if(this._selectedIndex>=0){var e=this.getChildAt(this._selectedIndex);e.sleep&&e.sleep()}},i.prototype._callPageIn=function(e){var t=this.getChildAt(e);t.activate&&t.activate()},i.prototype.toForward=function(){var e=this._selectedIndex-1;return e>-1&&this.showPage(e),this._selectedIndex},i.prototype.toNext=function(){var e=this._selectedIndex+1;return e<this._totalPage&&this.showPage(e),this._selectedIndex},i.prototype.hasForward=function(){return this._selectedIndex>0},i.prototype.hasNext=function(){return this._selectedIndex<this._totalPage-1},Object.defineProperty(i.prototype,"totalPage",{get:function(){return this._totalPage},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedChild",{get:function(){return this._selectedIndex>=0?this.getChildAt(this._selectedIndex):null},enumerable:!0,configurable:!0}),i}(eui.Group);e.ScrollNavigator=t,__reflect(t.prototype,"CCalien.ScrollNavigator")}(CCalien||(CCalien={}));var CCalien;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedIndex=-1,t.views=[],t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.setup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._viewDefs=e,this.selectedIndex=0},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){var t=this;this._selectedIndex!=e&&this._hideView(this._selectedIndex),this._selectedIndex=e,this._viewDefs&&this._selectedIndex>=0&&this._selectedIndex<this._viewDefs.length&&egret.callLater(function(){t._showView(t._selectedIndex)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedChild",{get:function(){return 0==this.numChildren?null:this.getChildAt(0)},enumerable:!0,configurable:!0}),t.prototype._hideView=function(e){var t=this.views[e];t&&t.sleep&&t.sleep()},t.prototype._showView=function(e){var t=this.views[e];t||(t=this.views[e]=new this._viewDefs[e],t.width=this.width,t.height=this.height),this.removeChildren(),this.addChild(t),t.activate&&t.activate()},t}(eui.Group);e.ViewStack=t,__reflect(t.prototype,"CCalien.ViewStack")}(CCalien||(CCalien={}));var CCPlayerData=function(){function e(){this.nickname="",this.gold="",this.diamond="",this.ready=0,this.seatid=0,this.uid=0,this.imgId="",this.winCount=0}return e}();__reflect(CCPlayerData.prototype,"CCPlayerData");var CCGoldStr=function(){function e(){}return e.GoldFormat=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!0),null==e)return null;e=String(Math.floor(Number(e)/CCGlobalGameConfig.currencyRatio));var n="";return e.length>=1&&"-"==e.substr(0,1)&&(e=e.substr(1,e.length-1),n+="-"),t?7==e.length?(n+=e.substr(0,e.length-4),i&&(n+="."+e.substr(e.length-4,1)),n+="万"):e.length>=8?(n+=e.substr(0,e.length-4),n+="万"):n+=e:n+=e,n},e.ChipGoldFormat=function(e){if(null==e)return null;e=String(Math.floor(100*Number(e)/CCGlobalGameConfig.currencyRatio));var t="";return e.length>=1&&"-"==e.substr(0,1)&&(e=e.substr(1,e.length-1),t+="-"),e.length>2&&e.length<=4?t+=e.substr(0,e.length-2)+"."+e.substr(e.length-2,2):2==e.length?t+="0."+e:1==e.length?t+="0.0"+e:e.length<=3?t+=e.substr(0,e.length-2)+"."+e.substr(e.length-2,2):5==e.length?t+=e.substr(0,e.length-2)+"."+e.substr(e.length-2,1):6==e.length?t+=e.substr(0,e.length-2):e.length>6&&e.length<=10?t+=e.substr(0,e.length-6)+"万":e.length>=11&&(t+=e.substr(0,e.length-10)+"亿"),t},e}();__reflect(CCGoldStr.prototype,"CCGoldStr");var CCObjectPool=function(){function e(e){this._maxLength=100,this._template=e,this._list=new Array}return e.prototype.borrowObject=function(){for(var e;this._list.length>0&&!e;)e=this._list.shift();return e||(e=new this._template),e?e:this.borrowObject()},e.prototype.getPoolLength=function(){return this._list.length},Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!=e)for(this._maxLength=e;this._list.length>e;)this._list.shift()},enumerable:!0,configurable:!0}),e.prototype.returnObject=function(e){return e&&this._list.length<this.maxLength&&e instanceof this._template?(this._list.push(e),!0):!1},e.getInstance=function(t){return e._pool[t]||(e._pool[t]=new e(t)),e._pool[t]},e._pool=[],e}();__reflect(CCObjectPool.prototype,"CCObjectPool");var CCGameConfig=function(){function e(){}return e.getRoomConfig=function(e){var t;return this.roomList.forEach(function(i){return i.id==e?(t=i,!0):void 0}),t},e.init=function(){this.language=RES.getRes("langCmpChicken")},e.getRoomType=function(t){var i;return i=t>1e3?Math.floor(t/1e3):t,8==i?e.game_Type_tbnn:5==i?e.game_Type_brnn:2==i?e.game_Type_dznn:4==i?e.game_Type_qznn:13==i?e.game_Type_qrnn:e.game_Type_clnn},e.getUrl=function(e){},e.getServerUrl=function(e,t,i){},e.loadConfigs=function(e){},e.getGoodsById=function(e){},e.getShield=function(){this.shield||(this.shield=String(CCGlobal.createJsonData("shield")).split(","))},e.getRoomTask=function(e,t){return console.log("找不到对应战斗任务"),null},e.needSystemLog=!1,e.qznnMode=2,e.gameName="niuniu",e.gameId=7,e.platform="bode",e.LOGIN_SERVER_URL="",e.LOGIN_API_ROOT="http://192.168.0.86:8998/index/",e.HEAD_URL="http://client-update.htgames.cn/games/img/head/",e.RECHARGE_URL="http://192.168.0.86:8998/index/pay",e.RESOURCE_URL="http://192.168.0.81/laoqifeng/platform/",e.FORGET_PASSWORD_URL="http://192.168.0.86:8998/index/forgot",e.DOWNLOAD_PAGE_URL="http://192.168.0.86:8998/index/pay",e.SIGN_URL="http://192.168.0.86:8998/index/regist",e.ROOM_TBNN_NAME="4nn",e.ROOM_DZNN_NAME="dzniuniu",e.ROOM_QZNN_NAME="combullfight",e.ROOM_BRNN_NAME="100nn",e.ROOM_NAMES_URLS=[0,8,2,3,4,13,14],e.chatGold=1e4,e.matchGold=[5e4,1e5,15e4,2e5],e.game_match=1,e.game_team=2,e.AVATAR_ROOT="http://xpt-head.htgames.cn:8998",e.REPORT_URL="http://120.27.162.46:8866/_.gif",e.LOBBY_PAGE_URL="",e.SEX_MAN=1,e.SEX_WOMAN=2,e.CARD_WIDTH=113,e.CARD_HEIGHT=142,e.CARD_GAP=-70,e.CARD_RETURN_COUNT=10,e.CARD_RETURN_GAP=45,e.CARD_SCALE_SIDE=.6,e.CHAT_COUNT_DOWN=1,e.SOUNDS_LOADED=!1,e.DEBUG=!1,e.game_Type_tbnn=1,e.game_Type_dznn=2,e.game_Type_qznn=4,e.game_Type_brnn=4,e.game_Type_qrnn=5,e.game_Type_clnn=6,e.game_type_match=7,e.game_type_team=8,e.game_room_1=1,e.game_room_2=2,e.game_room_3=3,e.game_room_4=4,e.native_ios=2,e.native_android=3,e.native_null=4,e.upDistance=-65,e.upX=107,e.downX=71,e.cardDistance=69,e.myCardDistance=70,e.armyCardDistance=30,e.niuCardDistance=10,e.brnnMasterCardDistance=41,e.brnnNormalCardDistance=26,e.brnnUpDistance=-38,e.brnnUpX=36,e.brnnDownX=20,e.brnnCardDistance=34,e.GROUP_PRELOAD="preload",e.GROUP_LOAD_BG="loadBg",e.GROUP_LOGIN="login",e.GROUP_SOUND="sound",e.GROUP_NORMAL="normal",e.GROUP_GAME="game",e.GROUP_DZNN="dznn",e.GROUP_BRNN="brnn",e.GROUP_QZNN="qznn",e.GROUP_TBNN="tbnn",e.localHead=["default.png","head1.png","head2.png","head3.png","head4.png","head5.png","head6.png","head7.png","head8.png"],e.defaultHead="default.png",e.isShowScoreChange=!0,e.playersNum=0,e.happyScorePlayerIndex=0,e.addHappyScoreTimes=0,e.giveupPlayersNum=0,e}();__reflect(CCGameConfig.prototype,"CCGameConfig");var CCResNames=function(){function e(){}return e.cc_enter="cc_enter_mp3",e.cc_giveup="cc_giveup_mp3",e.cc_lose="cc_lose_mp3",e.cc_send_hintcard="cc_send_hintcard_mp3",e.cc_showcard="cc_showcard_mp3",e.cc_snd_throw="cc_snd_throw_mp3",e.cc_special_dispatch="cc_special_dispatch_mp3",e.cc_special_selectcard="cc_special_selectcard_mp3",e.cc_start="cc_start_mp3",e.cc_win="cc_win_mp3",e}();__reflect(CCResNames.prototype,"CCResNames");var CCEventNames=function(){function e(){}return e.LOADING_PROGRESS="loadingProgress",e.BUTTON_BAR_TAP="buttonBarTap",e.SET_PASSWORD_SUCC="setPasswordSucc",e.SELECT_CHAT="selectChat",e.SELECT_CARDS="selectCards",e.SHOW_ROLE_INFO="showRoleInfo",e.COMBO_COMPLETE="comboComplete",e.SHOW_CARD_END="showCardEnd",e.CLEAR_HEAD="clearHead",e.SHOW_GOODS_TIP="showGoodsTip",e.SHOW_USE_GOODS_PHONE="showUseGoodsPhone",e.SHOW_GET_ITEMS="showGetItems",e.SHOW_MISSION_GET_ITEMS="showMissionGetItems",e.SHOW_CHARGE="showCharge",e.SHOW_MESSAGE_BOX="showMessageBox",e.SHOW_LABA="showLaba",e.CLEAR_LABA="clearLaba",e.SHOW_PANEL_TEAM="showPanelTeam",e.SHOW_TEAM_TABLE="showTableTeam",e.SHOW_TEAM_CONFIRM="showTeamConfirm",e.SHOW_SERVICE="showService",e.SHOW_GOLD_RAIN="showGoldRain",e.SHOW_ROLE_RATE="showRoleRate",e.SHOW_MATCH_WARN="showMatchWarn",e.SHOW_RECHARGE_CHOOSE="showRechargeChoose",e.SHOW_TEAM_ROOM_INFO="showTeamRoomInfo",e.RECHARGE_SUCC="rechargeSucc",e.TEAM_REFRESH="teamRefresh",e.TEAM_CONFIRM="teamConfirm",e.TEAM_START="teamStart",e.CHAT_NEW_MESSGAE="chatNewMessage",e.MAIL_LIST_REFRESH="mailListRefresh",e.MAIL_UNREAD_UPDATE="mailUnOpenUpdate",e.HIDE_CHIPS="hideChips",e.LOG="log",e.SHOW_DISCONNECT="showDisconnect",e.HIDE_DISCONNECT="hideDisconnect",e.SHOW_SIGN_DOWNLOAD="showSignDownload",e.TEAM_TABLE_SCORE_CHANGE="teamTableScoreChange",e.TEAM_NUMBER="teamNumber",e.CONNECT_SERVER="connectToServer",e.GET_CARDS_RECORDER_REWARD_REQ="user.GetCardsRecorderRewardReq",e.GET_FRESHMAN_REWARD_REQ="user.GetFreshManRewardReq",e.GET_FRESHMAN_REWARD_REP="user.GetFreshManRewardRep",e.CREATE_PERSONAL_GAME_REQ="user.CreatePersonalGameReq",e.CREATE_PERSONAL_GAME_REP="user.CreatePersonalGameRep",e.JOIN_PGAME_REQ="user.JoinPGameReq",e.JOIN_PGAME_REP="user.JoinPGameRep",e.START_PGAME_REQ="user.StartPGameReq",e.START_PGAME_REP="user.StartPGameRep",e.QUERY_ROOMINFO_REQ="user.QueryRoomInfoReq",e.QUERY_ROOMINFO_REP="user.QueryRoomInfoRep",e.QUIT_PGAME_REQ="user.QuitPGameReq",e.QUIT_PGAME_REP="user.QuitRoomRep",e.GAME_DISSOLVE="user.GameDissolve",e.RECONNECT_PGAME_REQ="user.ReconnectPGameReq",e.RECONNECT_PGAME_REP="user.ReconnectPGameRep",e.USER_QUICK_JOIN_REQUEST="user.QuickJoinRequest",e.USER_QUICK_JOIN_RESPONSE="user.QuickJoinResonpse",e.USER_USER_INFO_REQUEST="user.UserInfoRequest",e.USER_USER_INFO_RESPONSE="user.UserInfoResonpse",e.USER_CHECK_RECONNECT_REQ="user.CheckReconnectReq",e.USER_CHECK_RECONNECT_REP="user.CheckReconnectRep",e.USER_RECONNECT_TABLE_REQ="user.ReconnectTableReq",e.USER_RECONNECT_TABLE_REP="user.ReconnectTableRep",e.USER_LOGIN_RESPONSE="user.loginResponse",e.USER_PLAYERS_AMOUNT_REQ="user.PlayersAmountReq",e.USER_PLAYERS_AMOUNT_REP="user.PlayersAmountRep",e.USER_MODIFY_USER_INFO_REQ="user.ModifyUserInfoReq",e.USER_MODIFY_USER_INFO_REP="user.ModifyUserInfoRep",e.USER_REDCOIN_RANKING_LIST_REQ="user.RedcoinRankingListReq",e.USER_REDCOIN_RANKING_LIST_REP="user.RedcoinRankingListRep",e.USER_OPERATE_REP="user.OperateRep",e.USER_OPERATE_REQ="user.OperateReq",e.USER_QUERY_FREEZE_GOLD_REP="user.QueryFreezeGoldRep",e.USER_QUERY_FREEZE_GOLD_REQ="user.QueryFreezeGoldReq",e.USER_DAY_SIGN_IN_REQ="user.DaySigninOptReq",e.USER_DAY_SIGN_IN_REP="user.DaySigninOptRep",e.USER_NOTIFY_KICK_OUT="user.NotifyKickout",e.USER_MATCH_SING_UP_INFO_REQ="user.MatchSignupInfoReq",e.USER_MATCH_SING_UP_INFO_REP="user.MatchSignupInfoRep",e.USER_MATCH_SING_UP_REQ="user.MatchSignupReq",e.USER_MATCH_SING_UP_REP="user.MatchSignupRep",e.USER_MATCH_START_NTF="user.MatchStartNtf",e.USER_MATCH_INFO_NTF="user.MatchInfoNtf",e.USER_ENTER_MATCH_REQ="user.EnterMatchReq",e.USER_ENTER_MATCH_REP="user.EnterMatchRep",e.USER_RED_PACKET_ANNOUNCE="user.RedPacketAnnounce",e.USER_BAG_INFO_REQ="user.BagInfoReq",e.USER_BAG_INFO_REP="user.BagInfoRep",e.USER_GIVE_UP_MATCH_REQ="user.GiveupMatchReq",e.USER_GIVE_UP_MATCH_REP="user.GiveupMatchRep",e.USER_ALMS_REQ="user.AlmsReq",e.USER_ALMS_REP="user.AlmsRep",e.USER_RECHARGE_RESULT_NOTIFY="user.RechargeResultNotify",e.USER_REDCOIN_EXCHANGE_GOODS_REQ="user.RedcoinExchangeGoodsReq",e.USER_REDCOIN_EXCHANGE_GOODS_REP="user.RedcoinExchangeGoodsRep",e.USER_LOTTERY_RED_COIN_REQ="user.LotteryRedcoinReq",e.USER_LOTTERY_RED_COIN_REP="user.LotteryRedcoinRep",e.USER_PAY_TO_CHAT_REQ="user.Pay2chatReq",e.USER_PAY_TO_CHAT_REP="user.Pay2chatRep",e.USER_FRESH_MAN_REDCOIN_LOTTERY_CHANCEGOT="user.FreshManRedcoinLotteryChanceGot",e.USER_GET_TASKREW_REQ="user.GetDayTaskRewardReq",e.USER_GET_TASKREW_REP="user.GetDayTaskRewardRep",e.USER_GET_FRREWARD_REQ="user.GetFirstRechargeRewardReq",e.USER_GET_FRREWARD_REP="user.GetFirstRechargeRewardRep",e.USER_GET_REWARD_REQ="user.GetRewardReq",e.USER_GET_REWARD_REP="user.GetRewardRep",e.USER_GET_ACTInfo_REQ="user.GetActivityInfoReq",e.USER_GET_ACTInfo_REP="user.GetActivityInfoRep",e.USER_DiamondGame_REQ="user.DiamondGameReq",e.USER_DiamondGame_REP="user.DiamondGameRep",e.USER_MailList_REP="user.MailListRep",e.USER_MailModify_REP="user.MailModifyRep",e.USER_MailUnread_REP="user.MailUnreadRep",e.USER_MailOperate_REQ="user.MailReq",e.USER_MailGetReward_REP="user.MailGetRewardRep",e.QUIT_WAITING_QUEUE_REQ="user.QuitWaitingQueueReq",e.USER_MatchOperate_REQ="user.MatchOperateReq",e.USER_MatchOperate_REP="user.MatchOperateRep",e.USER_CoinLottery_REQ="user.RedCoindLotteryReq",e.USER_CoinLottery_REP="user.RedCoindLotteryRep",e.GAME_RECONNECT_REP="game.ReconnectRep",e.GAME_USER_ONLINE="game.UserOnline",e.GAME_USER_INFO_IN_GAME_REQ="game.UserInfoInGameReq",e.GAME_USER_INFO_IN_GAME_REP="game.UserInfoInGameRep",e.GAME_SET_SESSION="game.SetSession",e.GAME_GAME_START_NTF="game.GameStartNtf",e.GAME_SET_CARDS="game.SetCards",e.GAME_ADD_CARD="game.AddCard",e.GAME_UPDATE_GAME_INFO="game.UpdateGameInfo",e.GAME_ASK_MASTER="game.AskMaster",e.GAME_ANSWER_MASTER="game.AnswerMaster",e.GAME_SET_SCORE="game.SetScore",e.GAME_SHOW_CARD="game.ShowCard",e.GAME_ASK_PLAY_CARD="game.AskPlayCard",e.GAME_USE_CARD_NTF="game.UseCardNtf",e.GAME_TALK_NTF="game.TalkNtf",e.GAME_OPERATE_REQ="game.OperateReq",e.GAME_OPERATE_REP="game.OperateRep",e.GAME_GAME_END="game.GameEnd",e.GAME_ENTER_TABLE="game.EnterTable",e.GAME_LEAVE_TABLE="game.LeaveTable",e.GAME_TABLE_INFO="game.TableInfo",e.GAME_GIVE_UP_GAME_REQ="game.GiveUpGameReq",e.GAME_GIVE_UP_GAME_REP="game.GiveUpGameRep",e.GAME_ASK_READY="game.AskReady",e.GAME_GET_READY_REQ="game.GetReadyReq",e.GAME_GET_READY_REP="game.GetReadyRep",e.GAME_USER_OFFLINE="game.UserOffline",e.GAME_ASK_CASHON="game.AskCashOn",e.GAME_REPLENISH_FREEZEGOLD_REQ="game.ReplenishFreezeGoldReq",e.GAME_REPLENISH_FREEZEGOLD_REP="game.ReplenishFreezeGoldRep",e.SET_NUM_TEXT="SET_NUM_TEXT",e.NUM_TYPE_DELETE="NUM_TYPE_DELETE",e.NUM_TYPE_ADD="NUM_TYPE_ADD",e.NUM_TYPE_INIT="NUM_TYPE_INIT",e.AUTO_START="AUTO_START",e.RUN_STEP2="RUN_STEP2",e.SHOW_WARN="SHOW_WARN",e.SHOW_LOADING="SHOW_LOADING",e.MISSION_LIST_REFRESH="missionListRefresh",e.MISSION_COMPLETE="missionComplete",e.GOLD_UPDATE="goldUpdate",e.STRART_COMPARISON="startComparison",e.CC_SHOW_HAPPY_SCORE="cc_showHappyScore",e.CC_SHOW_SCORECHANGE="cc_showScorechange",e.CC_SHOW_NEXT_HAPPY_SCORE="cc_showNextHappyScore",e.CC_SEND_GIVE_UP_MSG="cc_sendGiveUpMsg",e
}();__reflect(CCEventNames.prototype,"CCEventNames");var CCCard=function(e){function t(){var t=e.call(this)||this;return t._bGray=!1,t._pokerId=0,t._select=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.touchEnabled=!0,this.addChild(this._container=new egret.DisplayObjectContainer),this._container.addChild(this._body=new CCCardBody),this._body.scaleX=this._body.scaleY=CCGlobalGameConfig.CARD_SCALE,CCalien.CCDDZUtils.anchorCenter(this._container,CCGlobalGameConfig.CARD_WIDTH,CCGlobalGameConfig.CARD_HEIGHT)},t.prototype.initData=function(e){this._pokerId=0,this._body.y=0,this._bGray=!1,this.scaleX=this.scaleY=this.alpha=1,this.touchEnabled=this.touchChildren=!0,this._select=!1,0==e.pid?this.showBack():(this._body.initData(this._pokerId=e.pid),this.showFront())},Object.defineProperty(t.prototype,"pokerId",{get:function(){return this._pokerId},set:function(e){this._body.initData(this._pokerId=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rollOver",{get:function(){return this._body.rollOver},set:function(e){this._body.rollOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"select",{get:function(){return this._select},set:function(e){if(this._select!=e){this._select=e;var t=this._select?-10:0;egret.Tween.get(this._body,null,null,!0).to({y:t},80)}},enumerable:!0,configurable:!0}),t.prototype.showFront=function(e){var t=this;void 0===e&&(e=!1),e?egret.Tween.get(this._container,null,null,!0).to({scaleX:0},100).call(function(){t._bg&&(t._bg.visible=!1),t._body.visible=!0}).to({scaleX:1},100):(this._body.visible=!0,this._bg&&(this._bg.visible=!1))},t.prototype.isGray=function(){return this._bGray},t.prototype.showGrayBg=function(e){if(this._bGray=e,0!=this.pokerId)this._body.setBgGray(e);else{var t=e?"gray":"blue";this.showBack(t)}},t.prototype.showBack=function(e){void 0===e&&(e="blue"),this._bg||(this._container.addChild(this._bg=new egret.Bitmap),this._bg.scaleX=this._bg.scaleY=CCGlobalGameConfig.CARD_SCALE),this._backRes!=e&&(this._backRes=e,this._bg.texture=RES.getRes("cc_poker_"+e+"_back")),this._body.visible=!1,this._bg.visible=!0},t.prototype.animate=function(e,t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=200),void 0===o&&(o=null),egret.Tween.get(this,null,null,!0).to(i).wait(t).to(e,n,o)},t.create=function(e){return CCalien.ObjectPool.getObject("CCCard",e)},t.recycle=function(e){CCalien.ObjectPool.recycleObject("CCCard",e)},t.prototype.showMasterFlag=function(e){this._body.showMasterFlag(e)},t}(egret.DisplayObjectContainer);__reflect(CCCard.prototype,"CCCard");var CCCardBody=function(e){function t(){var t=e.call(this)||this;return t._rollOver=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.initData=function(e){if(this._master=!1,this.removeChildren(),e>0){this.addChild(this._bg=new egret.Bitmap(RES.getRes("cc_poker_broad")));var t=this._poker=CCDDZUtils.pidCCpoker(e);if(t.num>13){var i=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_joker"));this.addChild(i);var n=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_joker_ddz_icon"));n.x=0,n.y=0,this.addChild(n)}else{var o=void 0;switch(t.num){case 11:o="j";break;case 12:o="q";break;case 13:o="k";break;case 1:o="a";break;default:o=t.num.toString()}var a=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_"+o));this.addChild(a);var r=new egret.Bitmap(RES.getRes("cc_poker_sign_"+t.sign));this.addChild(r),a=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_"+o)),a.anchorOffsetX=a.x=a.width/2,a.anchorOffsetY=a.y=a.height/2,a.rotation=180,this.addChild(a),r=new egret.Bitmap(RES.getRes("cc_poker_sign_"+t.sign)),r.anchorOffsetX=r.x=r.width/2,r.anchorOffsetY=r.y=r.height/2,r.rotation=180,this.addChild(r)}this._masterFlag=new egret.Bitmap(RES.getRes("cc_icon_master_card")),this._masterFlag.scaleX=1.7,this._masterFlag.scaleY=1.7,this._masterFlag.x=50,this._masterFlag.y=2,this.addChild(this._masterFlag)}this.showMasterFlag(!1)},Object.defineProperty(t.prototype,"rollOver",{get:function(){return this._rollOver},set:function(e){if(this._rollOver!=e){this._rollOver=e;var t=this.parent.parent;if(!this._rollOver&&t.isGray())return;this._bg&&(this._bg.texture=RES.getRes("cc_poker_broad"+(this._rollOver?"_h":"")))}},enumerable:!0,configurable:!0}),t.prototype.setBgGray=function(e){this._bg&&(this._bg.texture=RES.getRes("cc_poker_broad"+(e?"_h":"")))},t.prototype.showMasterFlag=function(e){this._master=e,this._masterFlag&&(this._masterFlag.visible=e)},t}(egret.DisplayObjectContainer);__reflect(CCCardBody.prototype,"CCCardBody");var CCCardGroup=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interact=!1,t._cardsSelect=[],t._pokerIds=[],t._grayNum=0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.touchEnabled=!1},t.prototype.initListeners=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this[t](egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this[t](egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),CCalien.CCDDZStageProxy.stage[t](egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchTap=function(e){},t.prototype.onTouchBegin=function(e){this._touchBeginIndex=this.getChildIndex(e.target),this._touchBegin=!0,this.rollOverCardIds(this.getChildIndex(e.target),this._touchBeginIndex)},t.prototype.onTouchMove=function(e){this._touchBegin&&this.rollOverCardIds(this.getChildIndex(e.target),this._touchBeginIndex)},t.prototype.onTouchEnd=function(e){if(this._touchBegin){for(var t=[],i=this._selectFrom;i<=this._selectTo;i++)if(!(this.numChildren<i)){var n=this.getChildAt(i);n&&(n.rollOver=!1,t.push(n))}this.selectCards(t)}this._touchBegin=!1},t.prototype.initData=function(){this._grayNum=0,this._cardsSelect.splice(0)},t.prototype.setGrayCardsNum=function(e){ccserver.isCoupleGame&&(this._grayNum=e||0,"my"==this.currentState?this.updateMyGrayCards():this.updateOtherGrayCards())},t.prototype.updateOtherGrayCards=function(){for(var e,t,i=this,n=this.numChildren,o=n-this._grayNum,a=0;n>a;++a)t=i.getChildAt(a),e=a>=o&&0==this._isMaster?!0:!1,t.showGrayBg(e)},t.prototype.updateMyGrayCards=function(){for(var e,t=this,i=this.numChildren,n=this._pokerIds.length,o=this._pokerIds.slice(n-this._grayNum),a=0;i>a&&(e=t.getChildAt(a),e);++a){e.showGrayBg(!1);for(var r=0;r<o.length;r++)if(e.pokerId==o[r]){e.showGrayBg(!0),o.splice(r,1);break}}},t.prototype.selectCards=function(e){for(var t,i=this,n=e.map(function(e){return e.pokerId}),o=!0,a=0;a<e.length;++a)e[a].select||(o=!1);if(o)return CCalien.CCDDZUtils.enumChildren(this,function(e,t){n.indexOf(e.pokerId)>=0&&i.selectCard(e,!e.select)}),void this.checkCanUse();var r=[],s=[];if(CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.select&&s.indexOf(e.pokerId)<0&&(s.push(e.pokerId),r.push(e.pokerId))}),n.forEach(function(e){s.indexOf(e)<0&&s.push(e)}),s.sort(function(e,t){return t-e}),this._targetCards&&0!=this._targetCards.length)1==e.length||(t=CCDDZCardsType.CheckShun(n));else if(2==s.length){var c=Math.floor(s[0]/10),h=Math.floor(s[1]/10);if(c!=h){var l=[];CCalien.CCDDZUtils.enumChildren(this,function(e,t){var i=Math.floor(e.pokerId/10);(i==c||i==h||e.pokerId<s[0]&&e.pokerId>s[1])&&l.push(e.pokerId)}),t=CCDDZCardsType.CheckShun2(l)}}else r.length<1&&(t=CCDDZCardsHint.getMaxAmountCards(n));t?CCalien.CCDDZUtils.enumChildren(this,function(e,n){i.selectCard(e,t.indexOf(e.pokerId)>=0)}):CCalien.CCDDZUtils.enumChildren(this,function(e,t){n.indexOf(e.pokerId)>=0&&i.selectCard(e,!e.select)}),this.checkCanUse()},t.prototype.selectCard=function(e,t){if(!e.select&&t)this._cardsSelect.push(e.pokerId);else if(e.select&&!t){var i=this._cardsSelect.indexOf(e.pokerId);i>=0&&this._cardsSelect.splice(i,1)}e.select=t},t.prototype.getSelectedCards=function(){return this._cardsSelect},t.prototype.getPorkersId=function(){return this._pokerIds},t.prototype.setPokersId=function(e){e&&(this._pokerIds=e)},t.prototype.cleanPokersId=function(){this._pokerIds=[]},t.prototype.cancelSelect=function(){CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.sending||(e.select=e.rollOver=!1)}),this._cardsSelect.splice(0),this.checkCanUse()},t.prototype._debugCardValues=function(e){for(var t=["3","4","5","6","7","8","9","10","J","Q","k","A","2","X","D"],i=0,n=[],o=0;o<e.length;++o)i=e[o]<100?parseInt((""+e[o]).substr(0,1)):parseInt((""+e[o]).substr(0,2)),n.push(t[i-1]);return n},t.prototype.checkType=function(e){this._targetCards=e;var t=CCDDZCardsType.GetCards2(e,this._pokerIds.concat());return t?(this._arrUseHelp=t[4],this._helpIndex=0,!0):(this._arrUseHelp=null,!1)},t.prototype.checkCanUse=function(e){void 0===e&&(e=!1);var t=e||CCDDZCardsType.CheckType(this._cardsSelect,this._targetCards);CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SELECT_CARDS,{canUse:t,count:this._cardsSelect.length})},t.prototype.help=function(){var e,t=this;return this._arrUseHelp&&(this._helpIndex>=this._arrUseHelp.length&&(this._helpIndex=0),e=this._arrUseHelp[this._helpIndex]),this._helpIndex++,e?(CCalien.CCDDZUtils.enumChildren(this,function(i,n){t.selectCard(i,e.indexOf(i.pokerId)>=0)}),this.checkCanUse(!0),!0):!1},t.prototype.rollOverCardIds=function(e,t){if(!(0>e||0>t)){var i=this._selectFrom=Math.min(e,t),n=this._selectTo=Math.max(e,t);CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.rollOver=t>=i&&n>=t})}},t.prototype.cleancards=function(){e.prototype.clean.call(this),this._grayNum=0},t.prototype.addCards=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var o=e.prototype.addCards.call(this,t,i,n);return this.updatePokersIds(),o},t.prototype.useCards=function(e,t,i,n){var o=this;void 0===i&&(i=!0),void 0===n&&(n=!1);var a=[];return"my"!=this.currentState?"right_2"==this.currentState?e.forEach(function(e,t){var i=CCCard.create({pid:e});o.addChild(i),i.sending=!0;var n=o.getChildAt(t),r=0,s=0;n&&(r=n.x,s=n.y),CCalien.CCDDZUtils.injectProp(i,{x:r,y:s,alpha:1,scaleX:.24,scaleY:.24}),a.push(i)}):e.forEach(function(e){var t=CCCard.create({pid:e});o.addChild(t),t.sending=!0,CCalien.CCDDZUtils.injectProp(t,{x:0,y:0,alpha:1,scaleX:.24,scaleY:.24}),a.push(t)}):n?e.forEach(function(e,t){var i=CCCard.create({pid:e});o.addChild(i),i.sending=!0,CCalien.CCDDZUtils.injectProp(i,{x:0,y:0,alpha:1,scaleX:.24,scaleY:.24}),a.push(i)}):CCalien.CCDDZUtils.enumChildren(this,function(t,i){e.indexOf(t.pokerId)>=0&&(t.sending=!0,a.push(t))}),this.removeHandCardsToDeskCardsGrp(t,a,i,n),this._touchBegin=!1,this.updatePokersIds(),this.addPokersIdsToDeskCardsGrp(t,a,e),this.cardCount},t.prototype.updatePokersIds=function(){var e=this;this._pokerIds.splice(0),CCalien.CCDDZUtils.enumChildren(this,function(t){t.sending||e._pokerIds.push(t.pokerId)})},t.prototype.addPokersIdsToDeskCardsGrp=function(e,t,i){CCalien.CCDDZUtils.enumChildren(this,function(t){t.sending&&i.indexOf(t.pokerId)>=0&&e._pokerIds.push(t.pokerId)})},t.prototype.adjustCardsEnd=function(){e.prototype.adjustCardsEnd.call(this),this.updateMasterFlag()},Object.defineProperty(t.prototype,"isMaster",{set:function(e){this._isMaster!=e&&(this._isMaster=e,this.updateMasterFlag())},enumerable:!0,configurable:!0}),t.prototype.updateMasterFlag=function(){for(var e,t=this.numChildren-1,i=t;i>=0;i--){var n=this.getChildAt(i);n.sending||(e||(e=n,e.showMasterFlag(this._isMaster)),n!=e&&n.showMasterFlag(!1))}},t.prototype.sortPokersIdByType=function(e){e==SORT_TYPE_VALUE?this._pokerIds.sort(function(e,t){return t-e}):this._pokerIds.sort(function(e,t){return 140==e||140==t||150==e||150==t?t-e:e%10!=t%10?t%10-e%10:Math.floor(e/10)!=Math.floor(t/10)?Math.floor(t/10)-Math.floor(e/10):t-e}),console.log("sortPokersIdByType-------",this._pokerIds),this.sortPokers()},t.prototype.sortPokers=function(){e.prototype.sortCards.call(this,this._pokerIds);this.updatePokersIds()},t.prototype.checkCanUseType=function(){console.log("checkCanUseType---------this._pokerIds-----",this._pokerIds);var e=CCCardsType.checkThree(this._pokerIds),t=CCCardsType.checkStrFlush(this._pokerIds),i=CCCardsType.checkFlush(this._pokerIds);return{canUseFlush:i,canUseStrFlush:t,canUseThree:e}},t}(CCCardGroupBase);__reflect(CCCardGroup.prototype,"CCCardGroup"),window.CCCardGroup=CCCardGroup;var CCalien;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._autoPlay=!0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},Object.defineProperty(t.prototype,"resName",{get:function(){return this._resName},set:function(e){this._resName!=e&&this.setResName(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aniName",{get:function(){return this._aniName},set:function(e){this._aniName!=e&&this.setAniName(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoPlay",{get:function(){return this._autoPlay},set:function(e){this._autoPlay=e},enumerable:!0,configurable:!0}),t.prototype.setResName=function(e){this._resName=e,this._resName?this._mcDataFactory=new egret.MovieClipDataFactory(RES.getRes(this._resName+"_json"),RES.getRes(this._resName+"_png")):this._mcDataFactory&&(this._mcDataFactory.clearCache(),this._mcDataFactory=null),this.setAniName(this._aniName)},t.prototype.setAniName=function(e){this._aniName=e,this._aniName&&this._mcDataFactory&&(this.movieClip=new egret.MovieClip(this._mcDataFactory.generateMovieClipData(this._aniName)),this.removeChildren(),this.addChild(this.movieClip),this._autoPlay&&this.movieClip.play())},t}(eui.Group);e.CCDDZMovieClip=t,__reflect(t.prototype,"CCalien.CCDDZMovieClip")}(CCalien||(CCalien={}));var CCCardUI=function(e){function t(){var t=e.call(this)||this;return t.sendCardTime=.4,t.running=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"Selected",{get:function(){return this.selected},set:function(e){this.selected=e,this.selected?this.Run(this.x,-20,-1,-1,.1):this.Run(this.x,0,-1,-1,.1)},enumerable:!0,configurable:!0}),t.prototype.sendCard=function(e){var t=this,i=function(){t.visible=!0,t.StopRun(),t.endX=t.x,t.alpha=1;var e;e=t.parent.globalToLocal(CCalien.CCDDZStageProxy.stage.stageWidth-t.width*t.scaleX>>1,CCalien.CCDDZStageProxy.stage.stageHeight-t.height*t.scaleY>>1),t.x=e.x,t.y=e.y,t.Run(t.endX,0,-1,-1,t.sendCardTime,t.runCompleteHandler)};setTimeout(i,e)},t.prototype.Run=function(e,t,i,n,o,a,r,s){void 0===i&&(i=-1),void 0===n&&(n=-1),void 0===o&&(o=.7),void 0===a&&(a=null),void 0===r&&(r=1),void 0===s&&(s=null),0>i&&(i=this.width),0>n&&(n=this.height),this.running&&egret.Tween.removeTweens(this),this.running=!0,a?egret.Tween.get(this,null,null,null).to({x:e,y:t,width:i,height:n,onComplete:a,alpha:r},1e3*o,null).call(a,this,[s]):egret.Tween.get(this,null,null,null).to({x:e,y:t,width:i,height:n,onComplete:a,alpha:r},1e3*o,null)},t.prototype.StopRun=function(){this.running&&egret.Tween.removeTweens(this),this.running=!1},t.prototype.runCompleteHandler=function(){this.running&&(this.StopRun(),this.running=!1,this.dispatchEvent(new egret.Event("complete")))},Object.defineProperty(t.prototype,"CardValue",{get:function(){return this.cardValue},set:function(e){10>e?this.cardValue=e:e>=10&&13>=e&&(this.cardValue=10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CCDDZCard",{get:function(){return this.id},set:function(e){if(this.giveup.visible=!1,this._isGiveUp=!1,e){var t=CCDDZUtils.pidCCpoker(e);this.id=e;var i=e%10,n=t.num;if(this.CardValue=n,e=n,e>13)this.flower1.source=CCGlobal.createTextureByName("cc_poker_"+t.signColor+"_joker"),this.flower2.source="",this.num1.source=CCGlobal.createTextureByName("cc_poker_"+t.signColor+"_joker_ddz_icon"),this.num2.source="";else{this.flower1.source=CCGlobal.createTextureByName("cc_poker_sign_"+i),this.flower2.source=CCGlobal.createTextureByName("cc_poker_sign_"+i);var o="cc_poker_";switch(o+=1==i||3==i?"black_":"red_",n){case 11:o+="j";break;case 12:o+="q";break;case 13:o+="k";break;case 1:o+="a";break;default:o+=n}this.num1.source=CCGlobal.createTextureByName(o),this.num2.source=CCGlobal.createTextureByName(o)}this.back.visible=!1}else this.back.visible=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CardId",{set:function(e){this.id=e;var t=Math.floor(e/10);this.CardValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},set:function(e){this.index=e},enumerable:!0,configurable:!0}),t.prototype.showMasterFlag=function(e){this._isGiveUp=e,this.giveup&&(this.giveup.visible=e)},t.prototype.comboComplete=function(){this.dispatchEvent(new egret.Event(CCEventNames.COMBO_COMPLETE))},t}(eui.Component);__reflect(CCCardUI.prototype,"CCCardUI"),window.CCCardUI=CCCardUI;var CCCardView=function(e){function t(){var t=e.call(this)||this;return t._addcardsAniItval=0,t._cardTypeNames=(i={},i[6]="三条",i[5]="同花顺",i[4]="同花",i[3]="顺子",i[2]="对子",i[1]="单张",i),t;var i}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.listContainer.visible=!1,this.rewardList.dataProvider=this._rewardProvider=new eui.ArrayCollection,this.rewardList.itemRenderer=CCDDZIRRewardTypeItem},t.prototype.addCards=function(){this.cards=[],this.hideAllLbl();for(var e=0;9>e;e++){this["card"+(e+1)].CCDDZCard=0;var t=this["card"+(e+1)];t.visible=!1,this.cards.push(t)}if(this.lblTips.visible=!0,0==this._addcardsAniItval){var i=0;this._clearAnimationInterval();var n=function(){this.cards[i].visible=!0,i++,i>8&&this._clearAnimationInterval()}.bind(this);this._addcardsAniItval=egret.setInterval(function(){n()},this,150),n()}},t.prototype.showCards=function(e,t,i,n,o,a){var r=this;void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=!1);var s=0;this.hideAllLbl(),this.showAllCard(),this.timer||(this.timer=egret.setInterval(function(){r._playShowCradsAni(s,e,t,i,n,o),1==a&&s>0&&4>s&&CCDDZSoundManager.instance.playEffect(CCResNames.cc_showcard),s++},this,1e3))},t.prototype.hideAllLbl=function(){this.lblCardType1.visible=!1,this.lblCardType2.visible=!1,this.lblCardType3.visible=!1,this.lblChange1.visible=!1,this.lblChange1.text="",this.lblChange1.y=10,this.lblChange2.visible=!1,this.lblChange2.text="",this.lblChange2.y=56,this.lblChange3.visible=!1,this.lblChange3.text="",this.lblChange3.y=100,this.lblChangeAll.text="",this.lblChangeAll.visible=!1,this.listContainer.visible=!1,this.lblTips.visible=!1},t.prototype.showAllCard=function(){for(var e=0;9>e;e++){this["card"+(e+1)].CCDDZCard=0,this["card"+(e+1)].showMasterFlag(!1);var t=this["card"+(e+1)];t.visible=!0}},t.prototype._playShowCradsAni=function(e,t,i,n,o,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===a&&(a=null);var r=t;if(4>e)for(var s=0;9>s;s++){var c=Math.floor(s/3),h=this["lblCardType"+(c+1)],l=this["lblChange"+(c+1)];if(e>c&&c+1==e){var u=this["card"+(s+1)];u.scaleX=.5,h.text=this._cardTypeNames[i[2-c]];var p=n[2-c],C=CCDDZUtils.currencyRatio(Math.abs(p));l.text=p>0?"+"+C:"-"+C,l.textColor=p>0?"0x8FFFE9":"0xFF0000",h.visible=!1,l.visible=!1,this.playCardAni(u,r[8-s],h,l,o)}else if(c>=e){this["card"+(s+1)].CCDDZCard=0;var u=this["card"+(s+1)];u.scaleX=.5,h.text="",l.text="",h.visible=!1,l.visible=!1}else{this["card"+(s+1)].CCDDZCard=r[8-s],this["card"+(s+1)].showMasterFlag(o);var u=this["card"+(s+1)];u.scaleX=.5,h.text=this._cardTypeNames[i[2-c]];var p=n[2-c],C=CCDDZUtils.currencyRatio(Math.abs(p));l.text=p>0?"+"+C:"-"+C,l.textColor=p>0?"0x8FFFE9":"0xFF0000",h.visible=!0,l.visible=!0}}else{this.lblChangeAll.visible=!1;for(var s=0;3>s;s++){var h=this["lblCardType"+(s+1)],l=this["lblChange"+(s+1)];this.playAddScoreAni(h,l)}this._stopShowCradsAni(a)}},t.prototype._clearAnimationInterval=function(){0!=this._addcardsAniItval&&egret.clearInterval(this._addcardsAniItval),this._addcardsAniItval=0},t.prototype._stopShowCradsAni=function(e){void 0===e&&(e=null),this.timer&&(egret.clearInterval(this.timer),CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_HAPPY_SCORE,e)),this.timer=null},t.prototype.clearAllTimer=function(){this._clearAnimationInterval(),this._stopShowCradsAni()},t.prototype.playCardAni=function(e,t,i,n,o){egret.Tween.removeTweens(e),e.scaleX=.5,e.visible=!0,egret.Tween.get(e).wait(500).to({scaleX:.01},200).call(function(){e.CCDDZCard=t,e.showMasterFlag(o)}).to({scaleX:.5},200).call(function(){i.visible=!0,n.visible=!0})},t.prototype.playAddScoreAni=function(e,t){var i=this;egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:146},500).to({visible:!1}).call(function(){i.lblChangeAll.visible=!0;var e=Number(i.lblChange1.text),t=Number(i.lblChange2.text),n=Number(i.lblChange3.text),o=e+t+n,a=CCDDZUtils.currencyRatio(Math.abs(o));i.lblChangeAll.text=o>0?"+"+a:"-"+a,i.lblChangeAll.textColor=o>0?9437161:16711680,egret.Tween.get(i.lblChangeAll).to({scaleX:1.2,scaleY:1.2},300)})},t.prototype.refreshRewardTypeData=function(e,t,i){var n=this;if(void 0===t&&(t=!0),void 0===i&&(i=!1),console.log("refreshRewardTypeData-------->",e,t),1==t){var o=[];this._rewardProvider.source=o;var a=e;if(a){a.length>0&&(this.lblCardType1.visible=!1,this.lblCardType2.visible=!1,this.lblCardType3.visible=!1);for(var r=0;r<a.length;r++){var s={};s.type=a[r],o.push(s)}this._rewardProvider.source=o,CCGameConfig.playersNum-CCGameConfig.giveupPlayersNum-1>0?this.listContainer.visible=!0:this.listContainer.visible=!1,this.listContainer.scaleY=0,egret.Tween.get(this.listContainer).to({scaleY:1},200*o.length)}}var c=0,h=e.length;if(h>0)var l=egret.setInterval(function(){n.playAddHappyScoreAni(n.lblChange1,t,i),c++,c>=h&&(l&&egret.clearInterval(l),l=null,t&&CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_NEXT_HAPPY_SCORE))},this,500);else t&&CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_NEXT_HAPPY_SCORE)},t.prototype.playAddHappyScoreAni=function(e,t,i){var n=this;void 0===t&&(t=!0),void 0===i&&(i=!1),egret.Tween.removeTweens(e);var o=CCGameConfig.playersNum-CCGameConfig.giveupPlayersNum-1;if(console.log("playAddHappyScoreAni---------->",t,i,o),e.y=10,1==i||0>=o)return void(e.visible=!1);e.visible=!0,o=t?o*(CCGameConfig.playersNum-CCGameConfig.giveupPlayersNum-1):o;var a=CCDDZUtils.currencyRatio(Math.abs(o));e.text=t?"+"+a:"-"+a,e.textColor=t?9437161:16711680,egret.Tween.get(e).to({y:146},300).to({visible:!1}).call(function(){n.lblChangeAll.visible=!0;var e=Number(n.lblChange1.text),t=Number(n.lblChangeAll.text),i=e+t,o=CCDDZUtils.currencyRatio(Math.abs(i));n.lblChangeAll.text=i>0?"+"+o:"-"+o,n.lblChangeAll.textColor=i>0?9437161:16711680,egret.Tween.get(n.lblChangeAll).to({scaleX:1.2,scaleY:1.2},200)})},t}(eui.Component);__reflect(CCCardView.prototype,"CCCardView"),window.CCCardView=CCCardView;var CCDDZIRRewardTypeItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._happyTypeNames=(i={},i[11]="三清",i[10]="全黑",i[9]="全红",i[8]="三顺清",i[7]="双顺清",i[6]="双三条",i[5]="全三条",i[4]="四个头",i[3]="连顺",i[2]="清连顺",i[1]="通关",i),t;var i}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.lblType.text=this._happyTypeNames[Number(t.type)]},t}(eui.ItemRenderer);__reflect(CCDDZIRRewardTypeItem.prototype,"CCDDZIRRewardTypeItem"),window.CCDDZIRRewardTypeItem=CCDDZIRRewardTypeItem;var CCalien;!function(e){var t;!function(t){var i=function(){function e(){}return e.prototype.handover=function(e,t,i,n,o){void 0===o&&(o=null),e&&(e.visible=!1,i.removeChild(e)),t.visible=!0,t.alpha=1,i.addChild(t),o&&o()},e}();t.None=i,__reflect(i.prototype,"CCalien.CCDDZsceneEffect.None",["CCalien.CCDDZsceneEffect.ISceneEffect"]);var n=function(){function e(){}return e.prototype.handover=function(e,t,i,n,o){void 0===o&&(o=null),egret.Tween.get(e).to({alpha:0},500),t.alpha=0,t.visible=!0,i.addChild(t),egret.Tween.get(t).to({alpha:1},500).call(function(){i.removeChild(e),o&&o()})},e}();t.CCDDFade=n,__reflect(n.prototype,"CCalien.CCDDZsceneEffect.CCDDFade",["CCalien.CCDDZsceneEffect.ISceneEffect"]);var o=function(){function e(){}return e.prototype.handover=function(e,t,i,n,o){function a(){egret.Tween.get(t).to({alpha:1},500).call(function(){o&&o()},this)}void 0===o&&(o=null),t.alpha=0,t.visible=!0,i.addChild(t),e?egret.Tween.get(e).to({alpha:0},500).call(function(){i.removeChild(e),a()},this):a()},e}();t.FadeBlack=o,__reflect(o.prototype,"CCalien.CCDDZsceneEffect.FadeBlack",["CCalien.CCDDZsceneEffect.ISceneEffect"]);var a=function(){function t(){}return t.prototype.handover=function(i,n,o,a,r){void 0===r&&(r=null);var s=a.duration||500,c=[[0/0,-e.CCDDZStageProxy.height],[e.CCDDZStageProxy.width,0/0],[0/0,e.CCDDZStageProxy.height],[-e.CCDDZStageProxy.width,0/0]],h=c[t.transDirection(a.direction)],l={x:isNaN(h[0])?i.x:h[0],y:0==h[1]?i.y:h[1]};egret.Tween.get(i).to(l,s,egret.Ease.cubicOut),c=[[0/0,e.CCDDZStageProxy.height],[-e.CCDDZStageProxy.width,0/0],[0/0,-e.CCDDZStageProxy.height],[e.CCDDZStageProxy.width,0/0]],h=c[t.transDirection(a.direction)],l={x:0,y:0},n.x=h[0],n.y=h[1],n.alpha=1,n.visible=!0,o.addChild(n),egret.Tween.get(n).to(l,s,egret.Ease.cubicOut).call(function(){o.removeChild(i),r&&r()})},t.transDirection=function(e){var t;switch(e){case"up":t=0;break;case"right":t=1;break;case"bottom":t=2;break;case"left":t=3}return t},t}();t.Flew=a,__reflect(a.prototype,"CCalien.CCDDZsceneEffect.Flew",["CCalien.CCDDZsceneEffect.ISceneEffect"]);var r=function(){function t(){}return t.prototype.handover=function(t,i,n,o,a){t.cacheAsBitmap=i.cacheAsBitmap=!0,i.alpha=1,i.visible=!0,n.addChild(i);var r=e.CCDDZStageProxy;o=o||{};var s=this._pos=o.pos||{x:r.width/2,y:r.height/2},c=i.mask=this._mask=new egret.Shape;c.x=s.x,c.y=s.y,e.CCDDZStageProxy.root.addChild(c);var h=s.x/r.width<.5?r.width-s.x:s.x,l=s.y/r.height<.5?r.height-s.y:s.y,u=Math.sqrt(h*h+l*l)+20;this.r=0,egret.Tween.get(this).to({r:u},o.duration||1e3,egret.Ease.quartOut).call(function(){t.cacheAsBitmap=i.cacheAsBitmap=!1,n.removeChild(t),i.mask=null,e.CCDDZStageProxy.root.removeChild(c),a&&a()})},Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(e){this._r=e;var t=this._mask.graphics;t.beginFill(16711680,.5),t.drawCircle(0,0,this._r),t.endFill()},enumerable:!0,configurable:!0}),t}();t.Material=r,__reflect(r.prototype,"CCalien.CCDDZsceneEffect.Material",["CCalien.CCDDZsceneEffect.ISceneEffect"])}(t=e.CCDDZsceneEffect||(e.CCDDZsceneEffect={}))}(CCalien||(CCalien={}));var CCClock=function(e){function t(){var t=e.call(this)||this;return t.r=42,t.timePer=50,t.timePerCount=20,t}return __extends(t,e),t.prototype.init=function(){},Object.defineProperty(t.prototype,"Num",{set:function(e){var t=this;0>e&&(e=0),e=Math.floor(e),this.timerCount=0,this.fullTime=e,this.time=e,this.timeNum.text=e.toString(),this.timer||(this.visible=!0,this.timer=egret.setInterval(function(){t.onTimer()},this,1e3))},enumerable:!0,configurable:!0}),t.prototype.onTimer=function(){return this.time=this.time-1,this.timeNum.text=""+this.time,this.time<=0?void this.onComplete():void 0},t.prototype.onComplete=function(){this.stopTimer()},t.prototype.clearTimer=function(){this.timer&&egret.clearInterval(this.timer),this.timer=null},t.prototype.stopTimer=function(){this.visible=!1,this.clearTimer()},t}(eui.Component);__reflect(CCClock.prototype,"CCClock"),window.CCClock=CCClock;var CCGold=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRechargeTap,this)},t.prototype.onBtnRechargeTap=function(e){var t=0;"goldWithBuy"==this.currentState?t=0:"diamondWithBuy"==this.currentState?t=1:"redcoinWithBuy"==this.currentState&&(t=4),this.showPanelExchange(t)},t.prototype.showPanelExchange=function(e){console.log("showPanelExchange-------->",e),ccserver._isInDDZ?this.openDDZShop(e):CCDDZPanelExchange2.instance.show(e)},t.prototype.openDDZShop=function(e){void 0===e&&(e=0),ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:e})},t.prototype._formatGold=function(e){this.nGold=e;var t=""+e;return e>=1e6?t=t.substring(0,t.length-4)+"万":e>1e5&&(t=t.substr(0,2)+"."+t.substr(2,1)+"万"),t},t.prototype.updateGold=function(e){console.log("updateGold--------->",e),this.labGold&&((!e||0>e)&&(e=0),this.labGold.text=this._formatGold(Number(e)),this.commitProperties())},t.prototype.getGold=function(){return this.nGold},t.prototype.setEmpty=function(){this.labGold.text=""},t.prototype.showGold=function(){this.imgIcon.source="cc_play_icon_gold"},t.prototype.showDiamond=function(){this.imgIcon.source="cc_play_icon_diamond"},t}(eui.Component);__reflect(CCGold.prototype,"CCGold"),window.CCGold=CCGold;var CCLabelButton=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onBegin,t),CCalien.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,t.onEnd,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"DisabledSkin",{set:function(e){console.log("DisabledSkin--------",e),this.disabledSource=CCGlobal.createTextureByName(e)},enumerable:!0,configurable:!0}),t.prototype.onBegin=function(e){this.enabled&&this.tapSource&&(this.currentSoucre&&this.currentSoucre==this.tapSource||(this.currentSoucre=this.tapSource))},t.prototype.onEnd=function(e){this.enabled&&(this.currentSoucre&&this.currentSoucre==this.normalSource||(this.currentSoucre=this.normalSource))},Object.defineProperty(t.prototype,"Enabled",{set:function(e){this.enabled=e,this.enabled?this.onEnd(null):this.currentSoucre&&this.currentSoucre==this.disabledSource||(this.currentSoucre=this.disabledSource,console.log("Enabled--------",this.currentSoucre))},enumerable:!0,configurable:!0}),t}(eui.Button);__reflect(CCLabelButton.prototype,"CCLabelButton"),window.CCLabelButton=CCLabelButton;var CCPlayerHead=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefault(),this._initTouchEvent(),this.imgAvatar.source="cc_icon_head_default",this.imgMask&&(this.imgAvatar.mask=this.imgMask)},t.prototype.getHeadCenGlobalPos=function(){if(!this._headCGlobalPos){var e=this.imgAvatar.x,t=this.imgAvatar.y,i=this.imgAvatar.width,n=this.imgAvatar.height;new egret.Point(0,0);this._headCGlobalPos=this.imgAvatar.localToGlobal(e+.5*i,t+.5*n)}return this._headCGlobalPos},t.prototype._initDefault=function(){this._headTouchFunc=null,this.grpHead.touchEnabled=!1},t.prototype._initTouchEvent=function(){this.grpHead.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTouchHead,this)},t.prototype._onTouchHead=function(e){this._headTouchFunc&&this._headTouchFunc()},t.prototype.setHeadTouchFunc=function(e){this._headTouchFunc=e},t.prototype.setHeadTouch=function(e){this.grpHead.touchEnabled=e},t.prototype.setQuitFlagVisible=function(e){this.quitFlag.visible=e},t.prototype.setOwnerFlagVisible=function(e){this.ownerFlag.visible=e},t.prototype.setReadyFlagVisible=function(e){this.readyFlag.visible=e},Object.defineProperty(t.prototype,"imageId",{set:function(e){var t=e;e?e!=this.imgAvatar.source&&(-1!=e.indexOf("http://")&&(t=e.replace("http://","https://")),this.imgAvatar.source=t):""==e&&(this.imgAvatar.source="cc_play_common_avatar_bg")},enumerable:!0,configurable:!0}),t.prototype.clean=function(){this.imgAvatar.source=null},t}(eui.Component);__reflect(CCPlayerHead.prototype,"CCPlayerHead"),window.CCPlayerHead=CCPlayerHead;var CCPlayerUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.update=function(e){this.updateHeadImage(e.imageid),this.updateNickname(e),isNaN(e.gold)||this.updateGold(e.gold)},t.prototype.updateNickname=function(e){var t=CCDDZMainLogic.instance.selfData;if(e.uid==t.uid){if(t.nickname){var i=t.nickname.substr(0,10);this.labNickName.text=i+"("+t.fakeuid+")"}}else this.labNickName.text=e.nickname},t.prototype.updateHeadImage=function(e){e&&e!=this.playerHead.imageId&&(this.playerHead.imageId=e),""==e&&(this.playerHead.imageId="")},t.prototype.clean=function(){this.playerHead.clean(),this.labNickName.text="",this.playerGold.setEmpty()
},t.prototype.setHeadTouch=function(e){this.playerHead.setHeadTouch(e),this.playerHead.setHeadTouchFunc(this._onTouchHead.bind(this))},t.prototype._onTouchHead=function(){if(this._userInfoData){var e=(100*this._userInfoData.getWinRate()).toFixed(0)+"%",t=this._userInfoData.redcoingot,i=this._userInfoData.nickname,n=this._userInfoData.gold,o=this._userInfoData.imageid,a=this._userInfoData.totalwincnt+this._userInfoData.totallosecnt+this._userInfoData.totaldrawcnt,r=this._userInfoData.seatid,s=this._userInfoData.uid,c=this._userInfoData.praise,h={nick:i,gold:n,head:o,winRate:e,game:a,redBeg:t,seatId:r,uid:s,praise:c};CCDDZPanelPlayerInfo.getInstance().show(h)}},Object.defineProperty(t.prototype,"userInfoData",{get:function(){return this._userInfoData},set:function(e){this._setUserInfoData(e)},enumerable:!0,configurable:!0}),t.prototype._setUserInfoData=function(e){this._userInfoData=e,this._userInfoData||this.playerHead.clean()},t.prototype.updateUserInfoData=function(e){this._userInfoData=e,this.update(e)},t.prototype.getAvatarPos=function(){return this._globalPos||(this._globalPos=this.localToGlobal(this.playerHead.x+this.playerHead.width/2-20,this.playerHead.y+this.playerHead.height/2-20)),this._globalPos},t.prototype.updateGold=function(e,t){if(void 0===t&&(t=!0),t)this.playerGold.updateGold(Number(e));else{var i=this.playerGold.getGold();console.log("updateGold------->",i,e),i||(i=0),i+=Number(e),this.playerGold.updateGold(Number(i))}},t.prototype.updateDiamond=function(e){this.playerGold.updateGold(Number(e))},t.prototype.setReadyFlagVisible=function(e){this.playerHead.setReadyFlagVisible(e)},t}(eui.Component);__reflect(CCPlayerUI.prototype,"CCPlayerUI"),window.CCPlayerUI=CCPlayerUI;var CCStatusLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setStatus=function(e,i){var n=this;switch(0>i&&(i=0),e){case t.GAME_START:var o=[{text:"即将开始游戏："},{text:i,style:{textColor:15987465,stroke:1,strokeColor:15987465}},{text:" 秒"}];this.timeTxt.textFlow=o;break;case t.GAME_WATING:}this.time=i,this.clearInterval(),this.interval=egret.setInterval(function(){n.onInterval()},this,1e3)},t.prototype.clearInterval=function(){this.interval&&egret.clearInterval(this.interval),this.interval=null},t.prototype.onInterval=function(){if(this.time--,this.time<=0)this.clearInterval();else{var e=[{text:"即将开始游戏："},{text:this.time,style:{textColor:15987465,stroke:1,strokeColor:15987465}},{text:" 秒"}];this.timeTxt.textFlow=e}},t.GAME_START=1,t.GAME_WATING=2,t}(eui.Component);__reflect(CCStatusLabel.prototype,"CCStatusLabel"),window.CCStatusLabel=CCStatusLabel;var CCToast=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=components.CCToastSKin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.show=function(e,t,i){var n=this;void 0===i&&(i=null),e.contains(this)&&e.removeChild(this),e.addChild(this),this.x=e.width/2-this.width/2,this.y=e.height/2-this.height/2,i&&(this.x=e.width*i.x-this.width/2,this.y=e.height*i.y-this.height/2),console.log("show--------->",e.width,e.height,this.width,this.height,this.x,this.y),this.lblTips.text=t,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},300).wait(1500).to({alpha:0},300).call(function(){e.contains(n)&&e.removeChild(n)})},t}(eui.Component);__reflect(CCToast.prototype,"CCToast");var CCPanelAlert=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCPanelAlertSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dealAction.bind(this,"close"),this)},t.prototype.onGrpButtonTap=function(e){this.dealAction(e.target.name)},t.prototype.show=function(e,t,i,n,o){switch(void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n="center"),void 0===o&&(o=null),this.popup(),this.labContent.text=e,null==o&&(o=[{text:e}]),this.labContent.textFlow=o,this._callback=i,this.labContent.textAlign=n,this.grpButton.visible=!0,this.labContent.validateNow(),this.labContent.textHeight<this.ctxScroller.height?this.labContent.y=.5*(this.ctxScroller.height-this.labContent.textHeight):this.labContent.y=0,this.ctxScroller.stopAnimation(),this.ctxScroller.viewport.scrollV=0,this.ctxScroller.validateNow(),t){case 0:this.grpButton.contains(this.cancelBtn)&&this.grpButton.removeChild(this.cancelBtn);break;case 1:this.grpButton.contains(this.cancelBtn)||this.grpButton.addChild(this.cancelBtn)}},t.getInstance=function(){return this._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCPanelAlert.prototype,"CCPanelAlert");var CCAlert=function(){function e(){}return e.show=function(e,t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n="center"),void 0===o&&(o=null),CCPanelAlert.instance.show(e,t,i,n,o)},e}();__reflect(CCAlert.prototype,"CCAlert");var CCPanelRule=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCPanelRuleSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onClickClose,this)},t.prototype._onClickClose=function(e){this.dealAction()},t.prototype.show=function(){this.popup();var e=CCDDZUtils.getHtmlText("<font color='#1FA585' size='28'>1.三条规则\n</font><font color='#333333' size='24'>    1)人数：游戏支持2名玩家共同游戏。\n</font><font color='#333333' size='24'>    2)牌数：【10选9玩法】一副牌包含大小王，一共54张，每人发10张牌，玩家可在10张牌中任意选择9张进行摆放。\n</font><font color='#333333' size='24'>    3)配牌：将10张手牌配成头道、中道、尾道三副牌，每副三张。其中三道顺序必须头道&lt;中道&lt;尾道，否则为【相公】，配牌失败！超时将由系统默认配牌。\n</font><font color='#333333' size='24'>    4)比牌：所有玩家都要将自己的第一道牌相互对比，按规则判定输赢，随后依次比较第二道、第三道牌，并结算积分。\n</font><font color='#333333' size='24'>    5)喜牌：当配置的九张牌达成指定条件后，会获得喜牌奖励。奖励为其他玩家支付给拥有喜牌的玩家指定金豆，喜牌不管输赢都有奖励，并且可以叠加。\n</font><font color='#333333' size='24'>    6)投降：若玩家感觉手牌差，则可以选择投降，投降后只输牌分，不扣别人的喜牌奖励分。\n</font><font color='#333333' size='24'>    7)比牌规则：\n</font><font color='#999999' size='20'>        ①首先比较牌型：三条>同花顺>同花>顺子>对子>单张。\n</font><font color='#999999' size='20'>        ②牌型一致时，比较点数A>K>Q>J>10>9>8>7>6>5>4>3>2。\n</font><font color='#999999' size='20'>        ③三张点数也一致时，最后比较花色：黑桃>红桃>梅花>方块。\n</font><font color='#333333' size='24'>    8)大小王：\n</font><font color='#999999' size='20'>        ①王当红黑：小王可百变任意种黑花色的牌，大王可百变任意红花色的牌。\n</font><font color='#999999' size='20'>        ②同道牌中，当出现相同牌，点数均相同则比较每张牌的花色。\n</font><font color='#999999' size='20'>        ③例子一：\n</font><font color='#999999' size='20'>            玩家1：黑桃A、方块A、大王\n</font><font color='#999999' size='20'>            玩家2：红桃A、梅花A、小王\n</font><font color='#999999' size='20'>            若王当红黑则玩家2大于玩家1，因为大王当红桃A，小王当黑桃A，在都有黑 桃A与红桃A情况下，玩家2的梅花A大于玩家1的方块。\n</font><font color='#999999' size='20'>        ③例子二：\n</font><font color='#999999' size='20'>            玩家1：方块A、大王、方块6\n</font><font color='#999999' size='20'>            玩家2：红桃A、红桃K、红桃7\n</font><font color='#999999' size='20'>            玩家1与玩家2都是同花且都有A，比对第二张牌大小时，大王可以充当方块A，大于玩家2的红桃K，即玩家1大于玩家2，可以出现同花对子，但不会以对子比大小，只会单张牌比较。\n</font><font color='#1FA585' size='28'>2.基本牌型\n</font><font color='#333333' size='24'>    牌型展示从大到小分别是\n</font><font color='#333333' size='24'>    1）三条：3张同种点数的牌型，例：A、A、A。\n</font><font color='#333333' size='24'>    2）同花顺：同一花色的顺子，例：A、K、Q（同花色）。\n</font><font color='#333333' size='24'>    3）同花：相同花色，例：A、J、6（同花色）。\n</font><font color='#333333' size='24'>    4）顺子：连续的不同花色牌型，例：K、Q、J（3张牌不是同花色），注：A~3的顺子是最小的顺子。\n</font><font color='#333333' size='24'>    5）对子：一个对子，例：A、A、8。\n</font><font color='#333333' size='24'>    6）单张：无法组成以上牌型，以点数决定大小。\n</font><font color='#1FA585' size='28'>3.喜牌说明\n</font><font color='#333333' size='24'>    1）三清：手上的三道牌型都是同花。\n</font><font color='#333333' size='24'>    2）全黑：9张牌全部由黑桃和梅花组成的牌型。\n</font><font color='#333333' size='24'>    3）全红：9张牌全部由红桃和方块组成的牌型。\n</font><font color='#333333' size='24'>    4）双顺清：手上有两道为同花顺的牌型。\n</font><font color='#333333' size='24'>    5）三顺清：手上三道牌全部为同花顺的牌型。\n</font><font color='#333333' size='24'>    6）双三条：手上中道和尾道都为三条的牌型。\n</font><font color='#333333' size='24'>    7）全三条：手中三道牌都为三条的牌型。\n</font><font color='#333333' size='24'>    8）四个头：手上牌里有四张一样的牌型（注：四张必须配出一个三条，才算四个头奖励。若有两个四张，并配出两个三条，则可获得两次四个头奖励，三条+王不会触发四个头奖励。）\n</font><font color='#333333' size='24'>    9）连顺：9张牌必须配成连贯的顺子，例：A23、456、789。（注：顺序打乱则不算连顺奖励。）\n</font><font color='#333333' size='24'>    10）清连顺：9张牌组成连贯的顺子，并且9张牌只有一种花色。\n</font><font color='#333333' size='24'>    11）通关：某玩家的三道牌，每一道都比其他玩家大，则称为通关，通关也可获得喜牌奖励。\n</font><font color='#1FA585' size='28'>4.结算规则\n</font><font color='#333333' size='24'>    1)首先比较每道牌的积分：\n</font><font color='#999999' size='20'>        ①二人模式下，每道牌赢家得1分，输家扣1分。\n</font><font color='#333333' size='24'>    2)三道分数累加后，随后看喜牌奖励：\n</font><font color='#999999' size='20'>        喜牌奖励积分的方式为输家为赢家贡献1分。如有多个喜牌，则每个都单独计算积分。\n</font><font color='#333333' size='24'>    3）投降：\n</font><font color='#999999' size='20'>        玩家投降后，只输牌分，不扣赢家的喜牌奖励分，若两人投降，则只扣台费。\n</font><font color='#333333' size='24'>    4）结算：金豆=所获积分*房间底分\n</font>");this.labContent.textFlow=e},t.getInstance=function(){return this._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCPanelRule.prototype,"CCPanelRule");var SceneCmpChicken=function(e){function t(){var t=e.call(this)||this;return t.protoIndex=0,t.roomType=1,t.roomId=1,t.roomBaseScroe=1,t.roomMinScore=1,t.roomMaxScore=1,t.kickbacks=1,t.isMatch=!1,t.isMatchEnd=!1,t.matchId=0,t.isTeam=!1,t.players=null,t.selfGold=0,t.isGameStart=!1,t.isInGame=!1,t._isPlayer3LeaveTable=!1,t.roomsInfo=null,t.checkGoldTime=null,t._isInQuickJoin=!1,t.lotteryIndex=null,t.maxScore=0,t.indexP=0,t.frame=0,t.frameTimes=0,t.skinName=scenes.SceneCmpChickenSkin,t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t._onRemoveStage,t),t}return __extends(t,e),t.prototype._onAddStage=function(){},t.prototype._onRemoveStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemoveStage,this)},t.prototype._initListen=function(e){var t="addEventListener";e||(t="removeEventListener"),ccserver[t](CCEventNames.USER_QUICK_JOIN_RESPONSE,this.quickJoinResonpseHandle,this),ccserver[t](CCEventNames.GAME_GIVE_UP_GAME_REP,this.giveUpGameHandle,this),ccserver[t](CCEventNames.GAME_ASK_READY,this.askReadyHandle,this),ccserver[t](CCEventNames.GAME_ENTER_TABLE,this.enterTableHandle,this),ccserver[t](CCEventNames.GAME_TABLE_INFO,this.tableInfoHandle,this),ccserver[t](CCEventNames.GAME_USER_INFO_IN_GAME_REP,this.userInfoInGameRepHandle,this),ccserver[t](CCEventNames.GAME_LEAVE_TABLE,this.leaveTableHandle,this),ccserver[t](CCEventNames.GAME_GET_READY_REP,this.getReadyRepHandle,this),ccserver[t](CCEventNames.GAME_GAME_START_NTF,this.gameStartNtfHandle,this),ccserver[t](CCEventNames.GAME_ADD_CARD,this.addCardHandle,this),ccserver[t](CCEventNames.GAME_SET_SCORE,this.setScoreHandle,this),ccserver[t](CCEventNames.GAME_USE_CARD_NTF,this.useCardNtfHandle,this),ccserver[t](CCEventNames.GAME_SHOW_CARD,this.showCardHandle,this),ccserver[t](CCEventNames.GAME_GAME_END,this.gameEndHandle,this),ccserver[t](CCEventNames.GAME_UPDATE_GAME_INFO,this.updateGameInfoHandle,this),ccserver[t](CCEventNames.GAME_OPERATE_REP,this.onGameOperateRep,this),ccserver[t](CCEventNames.USER_RECONNECT_TABLE_REP,this.reconnectTableRepHandle,this),ccserver[t](CCEventNames.GAME_RECONNECT_REP,this.reconnectRepHandle,this),ccserver[t](CCEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this),ccserver[t](CCGlobalEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this),this.backBtn[t](egret.TouchEvent.TOUCH_TAP,this.onBackClick,this),this.bgmBtn[t](egret.TouchEvent.TOUCH_TAP,this.onBgmClick,this),this.ruleBtn[t](egret.TouchEvent.TOUCH_TAP,this._showpanelRule,this),this.startBtn[t](egret.TouchEvent.TOUCH_TAP,this.onStartBtnClick,this),this.continueBtn[t](egret.TouchEvent.TOUCH_TAP,this.onContinueBtnClick,this),this.changeBtn[t](egret.TouchEvent.TOUCH_TAP,this.onChangeBtnClick,this),this.mRed_img[t](egret.TouchEvent.TOUCH_TAP,this._onClickRed,this),this.redNormal_img[t](egret.TouchEvent.TOUCH_TAP,this._onClickRedNormal,this),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.MY_USER_INFO_UPDATE,this._updateMyUserInfo,this),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.USER_RED_COUNT_CHANGE,this._onUserRedCountChange,this),CCalien.CCDDZDispatcher[t](CCEventNames.STRART_COMPARISON,this._startComparison,this),CCalien.CCDDZDispatcher[t](CCEventNames.CC_SHOW_SCORECHANGE,this._showScoreChange,this),CCalien.CCDDZDispatcher[t](CCEventNames.CC_SHOW_HAPPY_SCORE,this._updateHappyScoreData,this),CCalien.CCDDZDispatcher[t](CCEventNames.CC_SHOW_NEXT_HAPPY_SCORE,this._showNextHappyScore,this),CCalien.CCDDZDispatcher[t](CCEventNames.CC_SEND_GIVE_UP_MSG,this._sendGiveUpGame,this)},t.prototype.onBagInfoRep=function(e){var t=e.data;CCDDZBagService.instance.bagItemArray.forEach(function(e){e.count=0}),t.items.forEach(function(e){CCDDZBagService.instance.updateItemByData(e)}),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BAG_INFO_REFRESH,!1)},t.prototype.initData=function(){t.goldPool||(t.goldPool=CCObjectPool.getInstance(egret.getDefinitionByName("CCDDZFlyGold"))),this.isLobbyGoldEnough=!0,this._isInQuickJoin=!1,this._redNormalNum=null,this.protoIndex=0,this.kickbacks=this.roomsInfo.kickbacks,this.ticket.visible=!1,this.isMatch=!1,this.isMatchEnd=!1,this.players=null,this.goldNotEnough=!1,this.matchId=0,this.isTeam=!1,this.backBtn.visible=!this.isTeam,this.matchLeftPlayer=0,this.matchScore=0,this.matchRound=0,this.teamRound=0,this.baseScore.text="",this.setBaseScore(),this.clearUI(!0),this.showCCBtns(!1),this.clock.init(),CCGameConfig.addHappyScoreTimes=0,this.startBtn.visible=!1,this.refreshBgmStatus(),this.setRedProcess(),this.updateSelfData()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.redListDataArr=[0,0,0,0,0],this.redListDataProvider=new eui.ArrayCollection(this.redListDataArr),this.redList.itemRenderer=CCDDZRedPacketProcess,this.redList.dataProvider=this.redListDataProvider},t.prototype.beforeShow=function(e,t){console.log("beforeShow--------->",e),CCGameConfig.init();var i=0;i=e.roomID?e.roomID:10001;var n=CCGlobalGameConfig.getRoomCfgFromAll(i);this.roomsInfo=n,this.roomType=n.roomType,this.roomId=n.roomID,this.roomBaseScroe=n.baseScore,this.roomMinScore=n.minScore,this.roomMaxScore=n.maxScore,this.initData(),this._initListen(!0),this.setlabWaiting(null),this._showRedCount(!1),this.redNormal_img.visible=!1,this.grpRed.visible=!0,this.redList.visible=!0,CCDDZMainLogic.instance.setScreenLandScape(1280,640),CCalien.CCDDZSoundManager.instance.playMusic("cc_bg_mp3"),CCDDZBagService.instance.refreshBagInfo()},t.prototype.onShow=function(e){switch(void 0===e&&(e=null),console.log("onShow--------->",e),e.action){case"quick_join":console.log("onShow---------->quick_join"),this.checkEnoughSendQuickJoin();break;case"reconnect":console.log("onShow---------->reconnect"),ccserver.reconnect(0);break;case"from_login":1==ccserver._isFirstFromDDZ&&(console.log("onShow---------->from_login"),ccserver._isFirstFromDDZ=!1),this.startBtn.visible=!0}1==ccserver._isFirstFromDDZ&&(ccserver._isFirstFromDDZ=!1),ccserver.isMatch=!1,ccserver.isPersonalGame=!1,CCDDZBagService.instance.refreshBagInfo()},t.prototype.beforeHide=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this._initListen(!1),ccserver.stopCache()},t.prototype._updateMyUserInfo=function(){var e=CCDDZMainLogic.instance.selfData,t=e.redcoin;this.myGold.updateGold(Number(e.gold)),this.myRedCoin.updateGold(Number(t/100));var i=this.getPlayerBySeatId(this.selfSeatId);i&&(i.gold=""+e.gold,this.myGold.updateGold(Number(i.gold))),this.updateRedCoinInfo(),this.setRedProcess()},t.prototype._onBagRefresh=function(e){var t=CCDDZBagService.instance.getItemCountById(3);this.myDiamond.updateGold(Number(t))},t.prototype._showpanelRule=function(){CCPanelRule.instance.show()},t.prototype._clearCheckGoldTime=function(){this.checkGoldTime&&egret.clearTimeout(this.checkGoldTime),this.checkGoldTime=null},t.prototype.onBackClick=function(e){var t=this;if(1==this.isInGame){var i="牌局暂未结束，确定要退出吗？";CCAlert.show(i,1,function(e){console.log("click---111--",e),"confirm"==e&&t.quitGameToMain()})}else{var i="";i=0==CCGameConfig.isShowScoreChange?"牌局暂未结束，确定要退出吗？":"确认离开房间？",CCAlert.show(i,1,function(e){console.log("click--222---",e),"confirm"==e&&t.quitGameToMain()})}},t.prototype.onBgmClick=function(e){CCDDZSoundManager.instance.switchMusic(),this.refreshBgmStatus()},t.prototype.refreshBgmStatus=function(){this.bgmBtn.source=CCDDZSoundManager.instance.musicMute?"cc_play_voice_btn_off":"cc_play_voice_btn_on",1==CCDDZSoundManager.instance.musicMute?CCDDZSoundManager.instance.playMusic(""):CCDDZSoundManager.instance.playMusic("cc_bg_mp3")},t.prototype.updateSelfData=function(){var e=CCDDZMainLogic.instance.selfData;this.myGold.updateGold(Number(e.gold)),this.myRedCoin.updateGold(Number(e.redcoin/100));var t=CCDDZBagService.instance.getItemCountById(3);t||(t=0),this.myDiamond.updateGold(t),this.player1.currentState="my",this.player1.updateUserInfoData(CCDDZMainLogic.instance.selfData),this.player1.setHeadTouch(!0)},t.prototype.onStartBtnClick=function(e){this.goldNotEnough=!1,this.clock.stopTimer(),this.checkEnoughSendQuickJoin(CCDDZMainLogic.instance.selfData.gold)},t.prototype.onContinueBtnClick=function(e){this.showCCBtns(!1),this.hideLblChanges(),this.clock.stopTimer(),this.checkEnoughSendGetReady()},t.prototype.resetPlayersStatus=function(){this.player1.currentState="my",this.player1.validateNow(),this.player2.currentState="rightChoose",this.player2.playerCardView.currentState="chooseRight",this.player2.playerCardView.visible=!1,this.player2.validateNow(),this.player3.currentState="rightChoose",this.player3.playerCardView.currentState="chooseRight",this.player3.playerCardView.visible=!1,this.player3.validateNow(),this.player4.currentState="leftChoose",this.player4.playerCardView.currentState="chooseLeft",this.player4.playerCardView.visible=!1,this.player4.validateNow(),this.player5.currentState="leftChoose",this.player5.playerCardView.currentState="chooseLeft",this.player5.playerCardView.visible=!1,this.player5.validateNow()},t.prototype.onChangeBtnClick=function(e){this.isChangeTable=!0,this.hideLblChanges(),this.giveUpGame(3),this.showCCBtns(!1),this.setlabWaiting("正在为您匹配对手...")},t.prototype._onClickRed=function(){var e=Number(this.redCount.text),t=CCDDZMainLogic.instance.selfData.getRoomCanGetRed(this.roomsInfo.roomID);if(t)return void this.doChou(this.roomsInfo.roomID);if(0>=e){var i=CCDDZMainLogic.instance.selfData.getRoomNeedWinCntGetRed(this.roomsInfo.roomID);return void(10001==this.roomsInfo.roomID||10002==this.roomsInfo.roomID||10003==this.roomsInfo.roomID?CCDDZToast.show("游戏再赢"+i+"局即可抽取"):(10004==this.roomsInfo.roomID||10005==this.roomsInfo.roomID||10006==this.roomsInfo.roomID)&&CCDDZToast.show("游戏再玩"+i+"局即可抽取"))}this.doChou(this.roomsInfo.roomID)},t.prototype._onClickRedNormal=function(){console.log("_onClickRedNormal---------->",ccserver.isMatch,ccserver.isPersonalGame),ccserver.isMatch||ccserver.isPersonalGame||this.doChou(this.roomsInfo.roomID),this._stopNewRedAni(),this._showNormalRedImg(!1)},t.prototype.doChou=function(e){console.log("doChou------------->",this.lotteryIndex,e),null==this.lotteryIndex&&(this.lotteryIndex=e,ccserver.lotteryRedCoinReq(e))},t.prototype._stopNewRedAni=function(){egret.Tween.removeTweens(this.redNormal_img),this.redNormal_img.rotation=0},t.prototype._showNormalRedImg=function(e){this.redNormal_img.visible=e},t.prototype.onLotteryRedCoinRep=function(e){if(0==e.data.result){this.setRedProcess(),this.updateRedCoinInfo();var t=e.data;switch(t.result){case 0:ccserver.getRedcoinRankingListReq(),CCAlert.show("恭喜获得"+CCDDZUtils.exchangeRatio(t.coin/100,!0)+"奖杯!");break;case 1:CCAlert.show("配置不存在");break;case 2:CCAlert.show("抽奖次数不足");break;case 3:CCAlert.show("你有未完成的兑换")}}this.lotteryIndex=null,console.log("onLotteryRedCoinRep---------->",this.lotteryIndex)},t.prototype.setRedProcess=function(e){if(void 0===e&&(e=!1),!ccserver.isMatch&&!ccserver.isPersonalGame){var t=this.roomsInfo.roomID,i=!1;if(i=10001==t||10002==t||10003==this.roomsInfo.roomID||10004==this.roomsInfo.roomID||10005==this.roomsInfo.roomID||10006==this.roomsInfo.roomID?!1:!0,1==i)return;var n=[0,0,0,0,0],o=[1,1,1,1,1],a=5,r="cc_play_btn_chou";10002==t?(a=3,n=[0,0,0],o=[1,1,1],r="cc_play_btn_chou2"):10003==t?(n=[0],o=[1],a=1,r="cc_play_btn_chou3"):10004==t?(n=[0,0,0],o=[1,1,1],a=3,r="cc_room_btn_chou4"):10005==t?(n=[0,0],o=[1,1],a=2,r="cc_room_btn_chou5"):10006==t&&(n=[0],o=[1],a=1,r="cc_room_btn_chou6"),this.mRed_img.source=r;var s=CCDDZMainLogic.instance;this.redListDataArr=n;var c=s.selfData.getRoomWinCntInfo(t),h=0,l=0;if(c&&(h=c.cnt,l=c.chance?Number(c.chance):0),this._isOverFive&&e)this.redListDataArr=o;else{h=h>a?a:h;for(var u=0;h>u;u++)this.redListDataArr[u]=1}this.redCount.text=""+l,Number(l)>0?(this._onHasRedChance(),this._showNormalRedImg(!0),this._showRedCount(!0)):(this._showNormalRedImg(!1),this._showRedCount(!1)),this.redListDataProvider.source=this.redListDataArr,this.redListDataProvider.refresh()}},t.prototype.addRedProcess=function(){this._isOverFive=!1;var e=CCDDZMainLogic.instance,t=this.roomsInfo.roomID,i=e.selfData.getRoomWinCntInfo(t),n=0;i&&(n=i.cnt);var o=5,a=n+1;1002==t?o=3:8001==t&&(o=1);for(var r=!1,s=CCDDZMainLogic.instance.selfData.wincnt,c=0;c<s.length;c++)s[c].roomid==t&&(r=!0,a==o?(this._isOverFive=!0,s[c].cnt=0,s[c].chance=i.chance+1):s[c].cnt=a);r||s.push({chance:0,cnt:a,roomid:t,getchance:null,time:(new Date).getTime()}),this.setRedProcess(!0)},t.prototype.updateRedCoinInfo=function(){var e=CCDDZMainLogic.instance.selfData,t=CCGlobalGameConfig.exchangeConfig.filter(function(t){if(4==t.goodsid){if(t.first){var i=e.rcminexcexpiretime,n=(new Date).getTime(),o=e.rcminexcchanceused;return 1e3*i>n&&!o?!0:!1}return!0}return!1});t.sort(function(e,t){return e.amount-t.amount});for(var i=Math.ceil(e.redcoin)/100,n=t.length,o=0;o<t.length;++o)if(t[o].amount>i){n=o;break}this.myRedCoin.updateGold(i)},t.prototype._onHasRedChance=function(){this._stopNewRedAni(),this._showNormalRedImg(!0);var e=null;(e=function(){egret.Tween.get(this.redNormal_img).to({rotation:20},100).to({rotation:-20},100).to({rotation:10},60).to({rotation:-10},60).to({rotation:0},30).wait(1e3).call(function(){e()}.bind(this))}.bind(this))()},t.prototype._showRedCount=function(e){this.redCountBg_img.visible=e,this.redCount.visible=e},t.prototype._onUserRedCountChange=function(e){var t=e.data,i=!1;t.count>0&&(this.redCount.text=t.count,i=!0),this._showRedCount(i)},t.prototype.showStartGameAni=function(){CCDDZSoundManager.instance.playEffect(CCResNames.cc_start),this.start_bg.x=-CCalien.CCDDZStageProxy.width,this.start_bg.scaleY=1,this.start_bg.visible=!0,this.start_bg.alpha=0,egret.Tween.get(this.start_bg).to({x:0,alpha:.5},200).to({alpha:1},300).wait(800).to({scaleY:.2,alpha:0,visible:!1},500),this.start_word.visible=!0,this.start_word.scaleX=3,this.start_word.scaleY=3,this.start_word.alpha=0,this.start_word.horizontalCenter=0,this.start_word.verticalCenter=0,egret.Tween.get(this.start_word).to({scaleX:1,scaleY:1,alpha:.5},200).to({alpha:1},300).wait(800).to({alpha:0,verticalCenter:-250,visible:!1},500)},t.prototype.stopStartGameAni=function(){this.start_bg.visible=!1,this.start_word.visible=!1,egret.Tween.removeTweens(this.start_bg),egret.Tween.removeTweens(this.start_word)},t.prototype.startGameTest=function(){this.player1.currentState="my",this.chooseCard.visible=!0;var e=[133,132,131,123,122,121,113,112,111,103];this.chooseCard.addCards(e,!0,!0),this.player2.currentState="rightChoose",this.player2.playerCardView.currentState="chooseRight",this.player2.playerCardView.addCards(),this.player3.currentState="rightChoose",this.player3.playerCardView.currentState="chooseRight",this.player3.playerCardView.addCards(),this.player4.currentState="leftChoose",this.player4.playerCardView.currentState="chooseLeft",this.player4.playerCardView.addCards(),this.player5.currentState="leftChoose",this.player5.playerCardView.currentState="chooseLeft",this.player5.playerCardView.addCards()},t.prototype._startComparison=function(e){this.chooseCard.visible=!1,e.data&&(e.data.hassorted&&CCToast.instance.show(this,"道位摆放错误，系统已自动帮您调整。",{x:.5,y:.65}),ccserver.send(CCEventNames.GAME_OPERATE_REQ,{optype:1,params:e.data.cardsid}))},t.prototype.playChangeEffect=function(e,t,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var r=i+n,s=e,c=this["labChange"+s];c.font=r>0?"cc_font_num_17":"cc_font_num_18";var h=Math.abs(r);if(c.text=r>0?"+"+h:"-"+h,1==e){var l=r>0?CCResNames.cc_win:CCResNames.cc_lose;CCDDZSoundManager.instance.playEffect(l)}console.log("playChangeEffect--------->",h,c.text,o),c.alpha=0,c.visible=!0,egret.Tween.get(c).wait(a).to({alpha:1},1e3).call(this._changeEffectEnd.bind(this,t,i,n,o))},t.prototype._changeEffectEnd=function(e,t,i,n){if(e!=this.player1)1==this._isPlayer3LeaveTable&&(n=0),e.updateGold(n,!0);else{var o=this.roomsInfo;(10004==o.roomID||10005==o.roomID||10006==o.roomID)&&this.myDiamond.updateGold(n)}},t.prototype.checkGoldNotEnough=function(){return CCDDZMainLogic.instance.selfData.gold<this.roomMinScore?!0:!1},t.prototype.QuitWaitingQueueReq=function(){ccserver.send(CCEventNames.QUIT_WAITING_QUEUE_REQ,{})},t.prototype.giveUpGame=function(e){var t={};t.status=e,t.session=0,ccserver.send(CCEventNames.GAME_GIVE_UP_GAME_REQ,t)},t.prototype.getReady=function(){var e={};ccserver.send(CCEventNames.GAME_GET_READY_REQ,e)},t.prototype._isEnoughChip=function(){var e=!1,t=CCDDZMainLogic.instance.selfData.gold,i=this.roomsInfo.kickScore;if(i||(i=this.roomsInfo.minScore),1==this.roomsInfo.roomFlag)t>=i&&(e=!0);else{var n=CCDDZBagService.instance.getItemCountById(3);n>=i&&(e=!0)}return e},t.prototype._isOverEnoughChip=function(){var e=!1,t=CCDDZMainLogic.instance.selfData.gold,i=this.roomsInfo.maxScore;if(i||(i=this.roomsInfo.maxScore),1==this.roomsInfo.roomFlag)t>=i&&(e=!0);else{var n=CCDDZBagService.instance.getItemCountById(3);n>=i&&(e=!0)}return e},t.prototype.checkEnoughSendQuickJoin=function(e){if(void 0===e&&(e=0),this._isEnoughChip()){if(this._isOverEnoughChip())return this.setlabWaiting(null),this.hideLblChanges(),this.showCCBtns(!1),CCDDZMainLogic.instance.enterGameItemIsOver(this.roomsInfo),void(this.startBtn.visible=!0);this.startBtn.visible=!1,this.quickJoin(e),this.resetPlayersStatus(),this.hideLblChanges(),this.player1.playerHead.setReadyFlagVisible(!0),this.setlabWaiting("正在为您匹配对手...")}else this.setlabWaiting(null),this.hideLblChanges(),this.showCCBtns(!1),CCDDZMainLogic.instance.enterGameItemNotEnough(this.roomsInfo),this.startBtn.visible=!0},t.prototype.checkEnoughSendGetReady=function(e){if(void 0===e&&(e=0),this._isEnoughChip()){if(this._isOverEnoughChip())return this.startBtn.visible=!0,this.hideLblChanges(),this.showCCBtns(!1),void CCDDZMainLogic.instance.enterGameItemIsOver(this.roomsInfo);this.startBtn.visible=!1,this.resetPlayersStatus(),this.getReady(),this.hideLblChanges()}else this.startBtn.visible=!0,this.hideLblChanges(),this.showCCBtns(!1),CCDDZMainLogic.instance.enterGameItemNotEnough(this.roomsInfo)},t.prototype.quickJoin=function(e){void 0===e&&(e=0);var t={};this._isInQuickJoin=!0,t.roomid=this.roomId,t.clientid=ccserver.uid,t.gold=e,0!=e&&(t.flag=1),ccserver.send(CCEventNames.USER_QUICK_JOIN_REQUEST,t)},t.prototype.quitGameToMain=function(){if(CCDDZPanelPlayerInfo.remove(),this._clearCheckGoldTime(),console.log("quitGameToMain-------------->",this.isInGame,this._isInQuickJoin),!this.isInGame){var e=this.roomsInfo;e.style&&("diamond"==e.style||"queue"==e.style)&&this._isInQuickJoin?this.QuitWaitingQueueReq():this.giveUpGame(0)}this.chooseCard.visible=!1,this.chooseCard.cleanAllCardGrps(),this.player1.playerCardView.clearAllTimer(),this.player3&&this.player3.playerCardView&&this.player3.playerCardView.clearAllTimer(),this.stopStartGameAni(),this._initListen(!1),this.clearUI(),ccserver.stopCache(),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype.quickJoinResonpseHandle=function(e){var t=this,i=e.data;console.log("快速加入游戏返回:"+i.result),0==i.result?this.addGameView():2==i.result?(this.showGoldNotEnough(),this.showCCBtns(!1),this.startBtn.visible=!0,this.setlabWaiting(null)):3==i.result&&CCDDZAlert.show("房间已满，请稍后重试",0,function(e){t.quitGameToMain()})},t.prototype.giveUpGameHandle=function(e){e.data;console.log("离开游戏")},t.prototype.setBaseScore=function(){this.isMatch?this.baseScore.text="淘汰积分："+this.matchScore:this.baseScore.text="房间底分："+CCGoldStr.GoldFormat(this.roomBaseScroe.toString())},t.prototype.clearUI=function(e){void 0===e&&(e=!1),this.selfSeatId=0,this.gameStatus=0,this.masterSeatId=0,this.isOneGameEnd=!1,this.isChangeTable=!1,this.clock.stopTimer(),this.startBtn.visible=!1,this.hideLblChanges(),this.showPlayers(!1)},t.prototype.addGameView=function(){this._updateMyUserInfo()},t.prototype.askReadyHandle=function(e){var t=e.data;if(1==t.flag)this.addGameView();else{var t=e.data;this.clock.Num=t.time/100,this.askReadyNow(t),CCDDZMainLogic.instance.alms()}},t.prototype.askReadyNow=function(e){e&&(this.isMatch?this.getReady():this.isOneGameEnd=!1)},t.prototype.getPlayerByUid=function(e){if(!this.players)return null;for(var t=0;t<this.players.length;t++)if(this.players[t].uid==e)return this.players[t];return null},t.prototype.enterTableHandle=function(e){var t=e.data;if(t){this.players||(this.players=new Array);var i=this.getPlayerByUid(t.uid);i||(i=new CCPlayerData,this.players.push(i)),t.gold&&Number(t.gold)?i.gold=t.gold:i.gold="0",i.uid=t.uid,i.seatid=t.seatid,i.ready=0,i.info=t,this.getUserInfo(i.uid),CCDDZSoundManager.instance.playEffect(CCResNames.cc_enter),this.isMatch&&this.checkShowMatchWait()}},t.prototype.tableInfoHandle=function(e){var t=e.data;if(console.log("tableInfoHandle------------->",t),t){this.players||(this.players=new Array);for(var i=0;i<t.players.length;i++)if(t.players[i].uid){var n=this.getPlayerByUid(t.players[i].uid);n||(n=new CCPlayerData,this.players.push(n)),n.info=t.players[i],n.uid=t.players[i].uid,n.seatid=t.players[i].seatid,this.isGameStart?n.ready=0:n.ready=t.players[i].ready,console.log("this.getUserInfo(-------->",n.uid),this.getUserInfo(n.uid),t.players[i].uid==ccserver.uid&&(this.selfSeatId=n.seatid)}this.isMatch&&this.checkShowMatchWait()}},t.prototype.showGoldNotEnough=function(){var e=this;CCDDZPanelAlert3.instance.show("金豆不足"+this.roomMinScore+"，是否前往商城购买？",1,function(t){"confirm"==t?ccserver._isInDDZ?e.openDDZShop():CCDDZPanelExchange2.instance.show():e.quitGameToMain()})},t.prototype.openDDZShop=function(e){void 0===e&&(e=0),ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:e})},t.prototype.onGoldEnough=function(e){},t.prototype.leaveTableHandle=function(e){console.log("leaveTableHandle===========>");var t=e.data;if(t){var i;if(t.uid==ccserver.uid){for(var n=0;n<this.players.length;n++){var o=this.getPlayer(this.players[n].seatid);if(o&&o!=this.player1){var a=this.players[n];
a.diamond="0",a.gold="0",a.nickname="",a.imgId="",o.updateHeadImage(""),o.updateNickname(""),o.updateGold(0),o.updateDiamond(0),o.playerHead.setReadyFlagVisible(!1),this.deletePlayerByUid(a.uid)}}if(t&&t.uid==ccserver.uid&&4==t.reason&&!this.isMatch&&!this.isTeam){var r=this.roomsInfo;return(10001==r.roomID||10002==r.roomID||10003==r.roomID)&&this.showGoldNotEnough(),this.continueBtn.visible=!1,void(this.startBtn.visible=!0)}this.isChangeTable?(this.isChangeTable=!1,i=this.getPlayerByUid(t.uid),this.checkEnoughSendQuickJoin(Number(i.gold)),this.players=null):(this.showCCBtns(!1),this.continueBtn.visible=!1,this.startBtn.visible=!0,this.isOneGameEnd=!0,this.players=null)}else if(i=this.getPlayerByUid(t.uid),i&&i.seatid){var s=this.getPlayer(i.seatid);this._isPlayer3LeaveTable=!0,i.diamond="0",i.gold="0",i.nickname="",i.imgId="",s.updateHeadImage(""),s.updateNickname(""),s.updateGold(0),s.updateDiamond(0),s.playerHead.setReadyFlagVisible(!1),this.deletePlayerByUid(t.uid)}else;}},t.prototype.onReconnectPGameRep=function(e){var t=e.data;0==t.result&&(this.roomBaseScroe=t.bscore,this.setBaseScore(),this.teamRound=t.playround+1)},t.prototype.onGameDissolve=function(e){},t.prototype.getUserInfo=function(e){var t={};t.uid=e,ccserver.send(CCEventNames.GAME_USER_INFO_IN_GAME_REQ,t)},t.prototype.onGameOperateRep=function(e){var t=e.data;if(t)if(8==t.optype){if((0==t.result||null==t.result)&&t.params&&t.params.length>=2){var i=t.params[0],n=this.getPlayerBySeatId(i);if(n){var o=t.params[1],a=n;a.praise[0],a.praise[1];0==o?a.praise[1]+=1:a.praise[0]+=1,a.praise[i+1]=o,CCDDZPanelPlayerInfo.onPraise(i,o)}}}else if(2==t.optype||1==t.optype)if(t.seatid==this.selfSeatId)this.chooseCard.visible=!1,this.chooseCard.cleanAllCardGrps(),this.player1.currentState="myComparison",this.player1.width=CCalien.CCDDZStageProxy.width,this.player1.playerCardView.currentState="comparisonRight",this.player1.playerCardView.visible=!0,this.player1.playerCardView.hideAllLbl(),this.player1.playerCardView.showAllCard();else{var r=this.getPlayer(t.seatid);r&&1==r.visible&&(r==this.player2||r==this.player3?(r.currentState="rightComparison",r.playerCardView.currentState="comparisonRight",r.playerCardView.hideAllLbl(),r.playerCardView.showAllCard()):(r==this.player4||r==this.player5)&&(r.currentState="leftComparison",r.playerCardView.currentState="comparisonLeft",r.playerCardView.hideAllLbl(),r.playerCardView.showAllCard()))}},t.prototype.userInfoInGameRepHandle=function(e){var t=e.data;if(console.log("userInfoInGameRepHandle===========>",t),t){var i=this.getPlayerByUid(t.uid);i&&(i.uid=t.uid,i.gold=t.gold||0,i.diamond=t.diamond||0,i.nickname=CCDDZBase64.decode(t.nickname),i.imgId=t.imageid,i.sex=t.sex,i.redcoingot=t.redcoingot||0,i.totalwincnt=t.totalwincnt||0,i.totallosecnt=t.totallosecnt||0,i.totaldrawcnt=t.totaldrawcnt||0,t.praise&&t.praise.length>=5&&(i.praise=t.praise)),t.uid==ccserver.uid&&(this.myName=i.nickname,this.myImgId=i.imgId),this.setRedProcess(),this.setPlayerInfo()}},t.prototype.getReadyRepHandle=function(e){console.log("getReadyRepHandle===========>");var t=e.data;if(t){var i=this.getPlayerBySeatId(t.seatid);if(i){i.ready=t.result,i.showed=0;var n=this.getPlayer(i.seatid);n&&n.playerHead&&n.playerHead.setReadyFlagVisible(!0),i.uid==ccserver.uid&&this.clock.stopTimer()}}},t.prototype.gameStartNtfHandle=function(e){if(console.log("gameStartNtfHandle===========>"),this._isInQuickJoin=!1,this.isGameStart=!0,console.log("游戏开始"),this.setlabWaiting(null),!this.players)return null;this.isMatch&&(this.addGameView(),this.setBaseScore()),this.isInGame=!1,this.isGameEndEffectEnd=!1,CCGameConfig.happyTypes=[],this._clearCheckGoldTime();for(var t=0;t<this.players.length;t++)this.players[t].ready=0,this.players[t].isInGame=!0,this.players[t].uid==ccserver.uid&&(this.isInGame=!0);var i=e.data;if(console.log("gameStartNtfHandle----------->",i),this._isPlayer3LeaveTable=!1,i&&i.playerinfo)for(var n=0;n<i.playerinfo.length;n++){var o=this.getPlayer(i.playerinfo[n].seatid);if(o)if(o.playerHead.setReadyFlagVisible(!1),o==this.player1){var a=this.roomsInfo;if(10004==a.roomID||10005==a.roomID||10006==a.roomID){var r=this.getPlayerBySeatId(i.playerinfo[n].seatid),s=i.playerinfo[n].diamond||0;r.diamond=s,this.myDiamond.updateGold(Number(s))}else{var c=CCDDZMainLogic.instance.selfData;c.gold=Number(i.playerinfo[n].gold),this.myGold.updateGold(Number(i.playerinfo[n].gold))}}else{var r=this.getPlayerBySeatId(i.playerinfo[n].seatid);if(console.log("gameStartNtfHandle----playerdata-111--->",r),r){var a=this.roomsInfo;if(console.log("gameStartNtfHandle----playerdata-111--->",a.roomID,r),10004==a.roomID||10005==a.roomID||10006==a.roomID){var s=Number(i.playerinfo[n].diamond);s||(s=0),r.diamond=""+s,o.updateDiamond(s)}else{var h=Number(i.playerinfo[n].gold);h||(h=0),r.gold=""+h,o.updateGold(Number(i.playerinfo[n].gold))}}else;}}},t.prototype.addCardHandle=function(e){var t=e.data;if(console.log("addCardHandle-----111--->",t),t){if(t.status)this.chooseCard.visible=!1,this.chooseCard.cleanAllCardGrps(),this.player1.currentState="myComparison",this.player1.width=CCalien.CCDDZStageProxy.width,!this.player1||this.player1.playerCardView||(this.player1.playerCardView.currentState="comparisonRight",this.player1.playerCardView.hideAllLbl());else{var i=!0;Number(t.time)<900&&(i=!1),this.chooseCard.visible=!0,this.chooseCard.cleanAllCardGrps();var n=t.cardids,o=t.cardids2;this.chooseCard.addCards(n,!0,!0,i,o)}this.clock.Num=Math.floor(Number(t.time)/100);for(var a=1;5>=a;++a){var r=this.getPlayerBySeatId(a);if(r&&r.isInGame){var s=this.getPlayer(r.seatid);console.log("addCardHandle---------->",r),s&&s.playerCardView&&s!=this.player1&&(r.showed?s==this.player2||s==this.player3?(s.currentState="rightComparison",s.playerCardView.currentState="comparisonRight",s.playerCardView.visible=!0,s.playerCardView.hideAllLbl()):(s==this.player4||s==this.player5)&&(s.currentState="leftComparison",s.playerCardView.currentState="comparisonLeft",s.playerCardView.visible=!0,s.playerCardView.hideAllLbl()):(s.playerCardView.visible=!0,s.playerCardView.addCards(),s.playerCardView.validateNow()))}}}},t.prototype.playCardSound=function(e,t){void 0===t&&(t=200);for(var i=0;e>i;i++);},t.prototype.setScoreHandle=function(e){console.log("setScoreHandle===========>");var t=e.data;this.getPlayer(t.seatid);this.masterSeatId||(t.ismaster?(this.masterSeatId=t.seatid,this.showGetMasterMovie()):t.score>this.maxScore&&(this.maxScore=t.score))},t.prototype.showGetMasterMovie=function(){this.indexP=0,this.setIsQiangZhuang(),this.indexP>1?(this.isMasterMovieEnd=!1,this.frame=0):(this.isMasterMovieEnd=!0,this.maxScore=0)},t.prototype.enterFrame=function(e){if(this.frame++,this.isFrameDo()){this.frameTimes++;var t=1;this.players&&(t=this.players.length),this.frameTimes>2*t&&this.indexP==this.masterSeatId&&(this.maxScore=0,this.indexP=0,this.frameTimes=0,this.isMasterMovieEnd=!0)}},t.prototype.isFrameDo=function(){return this.frameTimes<=20?this.frame%4==0?(this.frame=0,!0):!1:this.frameTimes<=22?this.frame%8==0?(this.frame=0,!0):!1:this.frameTimes<=24?this.frame%12==0?(this.frame=0,!0):!1:this.frameTimes<=26?this.frame%16==0?(this.frame=0,!0):!1:this.frame%20==0?(this.frame=0,!0):!1},t.prototype.setIsQiangZhuang=function(){for(var e=0;e<this.players.length;e++){var t=this.players[e];if(t){this.getPlayer(t.seatid);t&&t.uid&&t.isInGame&&this.indexP++}}},t.prototype.useCardNtfHandle=function(e){console.log("useCardNtfHandle===========>");var t=e.data;2==CCGameConfig.qznnMode&&t.seatid==this.selfSeatId},t.prototype.autoStart=function(e){this.useCard()},t.prototype.useCard=function(){var e={};e.session=0,e.cardids=[],e.index=0,e.seatid=0,ccserver.send(CCEventNames.GAME_USE_CARD_NTF,e)},t.prototype.showCardHandle=function(e){var t=e.data;this.clock.stopTimer(),t&&(0==this.start_bg.visible&&this.showStartGameAni(),this.showCardNow(t))},t.prototype.showCardNow=function(e){if(console.log("showCardNow===========>"),e&&this.players)for(var t=0;t<this.players.length;t++){var i=this.getPlayer(this.players[t].seatid);i&&this.players[t].seatid==e.seatid&&(i==this.player1?(this.chooseCard.visible&&(this.chooseCard.visible=!1,this.chooseCard.cleanAllCardGrps(),this.clock.stopTimer(),CCToast.instance.show(this,"超时未摆放，系统已自动帮您调整。",{x:.5,y:.65})),i.currentState="myComparison",i.width=CCalien.CCDDZStageProxy.width,i.playerCardView.currentState="comparisonRight"):i==this.player2||i==this.player3?(i.currentState="rightComparison",i.playerCardView.currentState="comparisonRight",i.playerCardView.visible=!0):(i==this.player4||i==this.player5)&&(i.currentState="leftComparison",i.playerCardView.currentState="comparisonLeft",i.playerCardView.visible=!0),this.playerShowCards(i,e))}},t.prototype.playerShowCards=function(e,t){var i=[];t.cardids&&9==t.cardids.length&&(i=t.cardids);var n=[];t.params&&t.params.length>2&&(n=t.params.slice(0,3));var o=[];t.params1&&3==t.params1.length&&(o=t.params1);var a=!1;t.status?t.status&&2==t.status&&(a=!0):a=!1;var r=!1;e==this.player1&&(r=!0),e.playerCardView.showCards(i,n,o,a,t,r)},t.prototype.gameEndHandle=function(e){var t=e.data;console.log("gameEndHandle===========>"),t&&(CCGameConfig.gameendData=t,CCGameConfig.isShowScoreChange=!1,this.isInGame=!1,ccserver.startCache([],100))},t.prototype._showScoreChange=function(e){var t=CCGameConfig.gameendData;if(console.log("_showScoreChange-------------->"),t&&0==CCGameConfig.isShowScoreChange){CCGameConfig.isShowScoreChange=!0,this.isGameEndEffectEnd=!1,this.isGameStart=!1,this._isInQuickJoin=!1,this.isInGame=!1,this.clock.stopTimer(),this.winSeatId=[];for(var i=0,n=1;5>=n;n++){var o=this.getPlayerBySeatId(n);if(i=n-1,o&&o.isInGame){var a=Number(t.gold[i]||0)+Number(t.realkickback[i]||0);o.gold=""+a,o.seatid==this.selfSeatId&&(10004==this.roomsInfo.roomID||10005==this.roomsInfo.roomID||10006==this.roomsInfo.roomID?a=CCDDZMainLogic.instance.selfData.gold:(CCDDZMainLogic.instance.selfData.gold=a,this.myGold.updateGold(a))),t.chanage[i]>0&&this.winSeatId.push(n);var r=this.getPlayer(n),s=0,c=0;s=t.chanage[i],s||(s=0),c=null==t.realkickback[i]?0:t.realkickback[i],c||(c=0),a=t.gold[i],(10004==this.roomsInfo.roomID||10005==this.roomsInfo.roomID||10006==this.roomsInfo.roomID)&&(a=Number(o.diamond)+(Number(s)+Number(c)),o.diamond=a.toString());var h=1;r==this.player1?h=1:r==this.player2?h=2:r==this.player3?h=3:r==this.player4?h=4:r==this.player5&&(h=5),this.playChangeEffect(h,r,s,c,a)}}this.showCCBtns(!0),ccserver.stopCache()}},t.prototype._updateHappyScoreData=function(e){CCGameConfig.playersNum=0,CCGameConfig.addHappyScoreTimes++;for(var t=1;5>=t;t++)1==this["player"+t].visible&&CCGameConfig.playersNum++;var i=e.data;if(CCGameConfig.happyTypes||(CCGameConfig.happyTypes=[]),CCGameConfig.happyTypes.push(i),Number(CCGameConfig.addHappyScoreTimes)==Number(CCGameConfig.playersNum)){CCGameConfig.giveupPlayersNum=0;for(var t=0;t<CCGameConfig.happyTypes.length;t++){var n=CCGameConfig.happyTypes[t];n&&n.status&&2==n.status&&CCGameConfig.giveupPlayersNum++}console.log("_showHappyScore---------->",CCGameConfig.playersNum,CCGameConfig.giveupPlayersNum),this._showHappyScore()}},t.prototype._showHappyScore=function(){CCGameConfig.happyScorePlayerIndex=0,CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_NEXT_HAPPY_SCORE)},t.prototype._showNextHappyScore=function(e){var t=Number(CCGameConfig.happyScorePlayerIndex)+1;CCGameConfig.happyScorePlayerIndex=t;var i=this["player"+t];if(i&&1==i.visible)for(var n=0;n<CCGameConfig.happyTypes.length;n++){var o=CCGameConfig.happyTypes[n];if(o&&o.seatid){var a=this.getPlayer(o.seatid),r=[],s=0;if(o.params&&o.params.length>3)for(s=3;s<o.params.length;s++)if(o.params[s]>0){var c=s-2;c>0&&r.push(c)}if(a==i)for(s=1;5>=s;s++){var h=this.getPlayer(s);if(h&&h.visible&&1==h.visible)if(h==a)h.playerCardView.refreshRewardTypeData(r,!0);else for(var l=0;l<CCGameConfig.happyTypes.length;l++){var u=CCGameConfig.happyTypes[l],p=this.getPlayer(u.seatid),C=!1;u.status?2==u.status&&(C=!0):C=!1,p==h&&h.playerCardView.refreshRewardTypeData(r,!1,C)}}}}else CCGameConfig.happyScorePlayerIndex<=5?CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_NEXT_HAPPY_SCORE):(CCalien.CCDDZDispatcher.dispatch(CCEventNames.CC_SHOW_SCORECHANGE),CCGameConfig.happyTypes=[],CCGameConfig.addHappyScoreTimes=0)},t.prototype._sendGiveUpGame=function(e){CCDDZSoundManager.instance.playEffect(CCResNames.cc_giveup),ccserver.send(CCEventNames.GAME_OPERATE_REQ,{optype:2})},t.prototype.showWin=function(){for(var e=1;5>=e;++e){var t=this.getPlayerBySeatId(e);if(t&&t.isInGame){this.getPlayer(t.seatid)}}this.isOneGameEnd=!0},t.prototype.showCCBtns=function(e){this.continueBtn.visible=e},t.prototype.setPlayerInfo=function(){if(this.players)for(var e=0;e<this.players.length;e++){var t=this.getPlayer(this.players[e].seatid);if(t){if(t.visible=!0,t.updateNickname(this.players[e]),t!=this.player1)t.updateHeadImage(this.players[e].imgId);else{var i=CCDDZMainLogic.instance.selfData;t.updateHeadImage(i.imageid)}var n=this.roomsInfo;if(t.playerGold.showGold(),10004==n.roomID||10005==n.roomID||10006==n.roomID)if(t!=this.player1)t.playerGold.showDiamond(),t.updateDiamond(Number(this.players[e].diamond));else{var o=Number(this.players[e].diamond);this.myDiamond.updateGold(o)}else t!=this.player1?t.updateGold(this.players[e].gold):(this.myGold.updateGold(this.players[e].gold),this.myDiamond.updateGold(this.players[e].diamond))}}},t.prototype.updateGameInfoHandle=function(e){var t=e.data;t&&t.params1&&t.params1.length>=2&&250==t.params1[0]&&250==t.params1[1]&&(1==t.params1[3]?this.isLobbyGoldEnough=!0:this.isLobbyGoldEnough=!1)},t.prototype.reconnectTableReq=function(){var e={};e.result=0,e.index=this.protoIndex,e.session=this.session,ccserver.send(CCEventNames.USER_RECONNECT_TABLE_REQ,e)},t.prototype.reconnectTableRepHandle=function(e){var t=e.data;t&&(0==t.result||(1==t.result||2==t.result)&&(this.isMatch?this.checkShowMatchWait():CCDDZMainLogic.backToRoomScene()))},t.prototype.reconnectRepHandle=function(e){var t=e.data;if(t){this.clearUI();var i,n,o=0;this.addGameView(),this.isReconnect=!0;var a=t.players;this.isInGame=!1,this._isInQuickJoin=!1,this.players||(this.players=[]),t.params1&&t.params1.length>0&&t.status>1&&(this.masterSeatId=t.params1.shift()),a||(a=[]),this.players=[];var r=0;for(this._isPlayer3LeaveTable=!1,console.log("reconnectRepHandle===================>",this.masterSeatId,a,this.players,t.params2,t.status),o=0;o<a.length;o++)a[o].uid&&(n=this.getPlayerByUid(a[o].uid),n?(n.seatid=a[o].seatid,n.ready=0,n.uid=a[o].uid):(n=new CCPlayerData,n.seatid=a[o].seatid,n.ready=0,n.uid=a[o].uid,this.players.push(n)),1==a[o].params[0]?(n.isInGame=!0,n.uid==ccserver.uid&&(this.isInGame=!0)):n.isInGame=!1,a[o].params[2]?(n.showed=Number(a[o].params[2]),n.uid==ccserver.uid&&(r=n.showed)):(n.showed=0,n.uid==ccserver.uid&&(r=0)),a[o].uid==ccserver.uid&&(this.selfSeatId=n.seatid),this.getUserInfo(n.uid));if(t.status&&1==t.status){this.isGameStart=!0;var s={};s.seatid=this.selfSeatId,s.time=t.time,s.cardids=t.params1,s.cardids2=t.params2,s.selfStatus=r,i=new egret.Event(CCEventNames.GAME_ADD_CARD,!1,!1,s),this.resetPlayersStatus(),this.addCardHandle(i)}var c=this.roomsInfo;10004==c.roomID||10005==c.roomID||10006==c.roomID||CCDDZBagService.instance.refreshBagInfo()}this.isReconnect=!1},t.prototype.matchInfoNtfRepHandler=function(e){},t.prototype.checkShowMatchWait=function(e){void 0===e&&(e=!1)},t.prototype.chekShowMatchPromoted=function(){},t.prototype.enterMatchRepHandler=function(e){var t=e.data;0==t.result&&console.log("加入比赛成功")},t.prototype.getPlayer=function(e){return e==this.selfSeatId?this.player1:e-this.selfSeatId==1||e-this.selfSeatId==-1?this.player3:null},t.prototype.getPlayer2=function(e){return e==this.selfSeatId?this.player1:e-this.selfSeatId==1||e-this.selfSeatId==-4?this.player2:e-this.selfSeatId==2||e-this.selfSeatId==-3?this.player3:e-this.selfSeatId==3||e-this.selfSeatId==-2?this.player4:e-this.selfSeatId==4||e-this.selfSeatId==-1?this.player5:(console.log("getPlayer2 找不到玩家"),null)},t.prototype.nextSeatId=function(e){return e>5?e-5:0>=e?e+5:e},t.prototype.getPlayerBySeatId=function(e){if(!this.players)return null;for(var t=0;t<this.players.length;t++)if(this.players[t].seatid==e)return this.players[t];return null},t.prototype.setPlayerIsNotInGame=function(){if(!this.players)return null;for(var e=0;e<this.players.length;e++)this.players[e].uid&&(this.players[e].isInGame=!1)},t.prototype.deletePlayerByUid=function(e){if(this.players)for(var t=0;t<this.players.length;t++)if(this.players[t].uid==e)return void this.players.splice(t,1)},t.prototype.hideLblChanges=function(){this.labChange1.visible=!1,this.labChange2.visible=!1,this.labChange3.visible=!1,this.labChange4.visible=!1,this.labChange5.visible=!1},t.prototype.showPlayers=function(e){0==e&&(this.player1.currentState="my"),this.player3.visible=e},t.prototype.setlabWaiting=function(e){void 0===e&&(e=null),e?(this.labWaiting.text=e,this.labWaiting.visible=!0):this.labWaiting.visible=!1},t.STATUS_ADDCARD1=1,t.STATUS_ADDCARD2=2,t}(CCalien.CCDDZSceneBase);__reflect(SceneCmpChicken.prototype,"SceneCmpChicken");var CC_THREE=6,CC_STRFLUSH=5,CC_FLUSH=4,CC_STRAIGHT=3,CC_DOUBLE=2,CC_SINGLE=1,CCCardsType=function(){function e(){}return e.checkThree=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[],a=[],r=[],s=[],c=[];for(t=0;t<i.length;++t)1==i[t]?o.push(t):2==i[t]?a.push(t):3==i[t]?(r.push(t),s.push(t)):4==i[t]&&(c.push(t),s.push(t));return s.length>0?!0:a.length>0&&(i[14]>0||i[15]>0)?!0:o.length>2&&i[14]>0&&i[15]>0?!0:!1},e.checkStrFlush=function(t){var i,n=e.sortCardsByColor(t);for(i=0;i<n.length-2;++i){var o=n[i],a=n[i+1],r=n[i+2];if(o%10==a%10&&o%10==r%10&&Math.floor(o/10)-1==Math.floor(a/10)&&Math.floor(a/10)-1==Math.floor(r/10)&&140!=o&&150!=o)return!0}var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;++i){var c=Math.floor(t[i]/10);s[c]++}for(i=0;i<n.length-1;++i){var o=n[i],a=n[i+1];if(o%10==a%10&&(Math.floor(o/10)-1==Math.floor(a/10)||Math.floor(o/10)-2==Math.floor(a/10))&&(o%2==1&&s[14]>0||o%2==0&&s[15]>0)&&140!=o&&150!=o)return!0}return!1},e.checkFlush=function(e){var t,i=[0,0,0,0];for(t=0;t<e.length;++t){var n=e[t]%10;140!=e[t]&&150!=e[t]?i[n]++:140==e[t]?(i[1]++,i[3]++):150==e[t]&&(i[0]++,i[2]++)}for(t=0;t<i.length;++t)if(i[t]>2)return!0;return!1},e.checkStraight=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}for(t=i.length-1;t>=2;--t){var o=t,a=t-1,r=t-2;if(i[o]>0&&i[a]>0&&i[r]>0&&14!=o&&15!=o)return!0;if(13==o&&i[o]>0&&i[1]>0&&i[2]>0)return!0}for(t=i.length-1;t>=2;--t){var o=t,a=t-1,r=t-2;if(14!=o&&15!=o&&(i[14]>0||i[15]>0)){if(i[o]>0&&i[a]>0)return!0;if(i[o]>0&&i[r]>0)return!0}}return!1},e.checkDouble=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[],a=[],r=[],s=[],c=[];for(t=0;t<i.length;++t)1==i[t]?o.push(t):2==i[t]?a.push(t):3==i[t]?(r.push(t),s.push(t)):4==i[t]&&(c.push(t),s.push(t));return a.length>0&&o.length>0||a.length>1?!0:!1},e.checkSingle=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[],a=[],r=[],s=[],c=[];for(t=0;t<i.length;++t)1==i[t]&&14!=i[t]&&15!=i[t]?o.push(t):2==i[t]?a.push(t):3==i[t]?(r.push(t),s.push(t)):4==i[t]&&(c.push(t),s.push(t));return o.length>=3?!0:!1},e.getThree=function(t){var i,n=e.sortCardsByValue(t),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<n.length;++i){var a=Math.floor(n[i]/10);o[a]++}var r=[],s=[],c=[],h=[],l=[];for(i=0;i<o.length;++i)1==o[i]?r.push(i):2==o[i]?s.push(i):3==o[i]?(c.push(i),h.push(i)):4==o[i]&&(l.push(i),h.push(i));var u=[],p=[],C=[];if(h.length>0){var d=h.length,_=h[d-1],g=[_,_,_],f=n;u=this.GetCardsByNum(g,f)}if(s.length>0&&(o[14]>0||o[15]>0)){var d=s.length,_=s[d-1],g=[_,_];o[14]>0&&g.length<3?g.push(14):o[15]>0&&g.length<3&&g.push(15);var f=n;p=this.GetCardsByNum(g,f)}if(r.length>2&&o[14]>0&&o[15]>0){var d=r.length,_=r[d-3],g=[_,14,15],f=n;C=this.GetCardsByNum(g,f)}return u.length>0||p.length>0||C.length>0?{type:CC_THREE,cards:this.getMaxRes1(u,p,C)}:null},e.getStrFlush=function(t){var i,n=e.sortCardsByColor(t),o=[];for(i=0;i<n.length-2;++i){var a=n[i],r=n[i+1],s=n[i+2];if(a%10==r%10&&a%10==s%10&&Math.floor(a/10)-1==Math.floor(r/10)&&Math.floor(r/10)-1==Math.floor(s/10)&&140!=a&&150!=a){var c=[a,r,s];o.push(c)}}var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;++i){var l=Math.floor(t[i]/10);h[l]++}for(i=0;i<n.length-1;++i){var a=n[i],r=n[i+1];if(a%10==r%10&&a%2==1&&h[14]>0&&140!=a&&150!=a){if(Math.floor(a/10)-1==Math.floor(r/10)){var c=[a,r,140];o.push(c)}else if(Math.floor(a/10)-2==Math.floor(r/10)){var c=[a,140,r];o.push(c)}}else if(a%10==r%10&&a%2==0&&h[15]>0&&140!=a&&150!=a)if(Math.floor(a/10)-2==Math.floor(r/10)){var c=[a,r,150];o.push(c)}else if(Math.floor(a/10)-1==Math.floor(r/10)){var c=[a,150,r];o.push(c)}}return o.length>0?{type:CC_STRFLUSH,cards:this.getMaxRes2(o)}:null},e.getFlush=function(t){var i,n,o,a=e.sortCardsByColor(t),r=[0,0,0,0],s=0,c=0;for(i=0;i<a.length;++i){var h=t[i]%10;140!=t[i]&&150!=t[i]?r[h]++:140==t[i]?s=1:150==t[i]&&(c=1)}var l=[];for(i=r.length-1;i>=0;--i){var u=[],p=[],C=[];if(r[i]>2){var d=[],_=a.concat(),g=[i,i,i];for(n=0;n<g.length;++n)for(o=0;o<_.length;++o){var h=_[o]%10;if(h==g[n]&&140!=_[o]&&150!=_[o]){d.push(_[o]),_.splice(o,1);break}}u=d}else if(r[i]>1)if(i%2==1&&s>0){var d=[],_=a.concat(),g=[i,i];for(n=0;n<g.length;++n)for(o=0;o<_.length;++o){var h=_[o]%10;if(h==g[n]&&140!=_[o]&&150!=_[o]){d.push(_[o]),_.splice(o,1);break}}d.push(140),p=d}else if(i%2==0&&c>0){var d=[],_=a.concat(),g=[i,i];for(n=0;n<g.length;++n)for(o=0;o<_.length;++o){var h=_[o]%10;if(h==g[n]&&140!=_[o]&&150!=_[o]){d.push(_[o]),_.splice(o,1);break}}d.push(150),C=d}(u.length>0||p.length>0||C.length>0)&&l.push(this.getMaxRes1(u,p,C))}return l.length>0?{type:CC_FLUSH,cards:this.getMaxRes2(l)}:null},e.getStraight=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[];for(t=i.length-1;t>=2;--t){var a=t,r=t-1,s=t-2;if(i[a]>0&&i[r]>0&&i[s]>0&&14!=a&&15!=a){var c=[a,r,s],h=e,l=this.GetCardsByNum(c,h);o.push(l)}if(13==a&&i[a]>0&&i[1]>0&&i[2]>0){var c=[1,2,13],h=e,l=this.GetCardsByNum(c,h);o.push(l)}}for(t=i.length-1;t>=2;--t){var a=t,r=t-1,s=t-2;if(14!=a&&15!=a&&(i[14]>0||i[15]>0))if(i[a]>0&&i[r]>0){var c=[a,r],h=e;if(i[14]>0){c.push(14);var l=this.GetCardsByNum(c,h);o.push(l)}else if(i[15]>0){c.push(15);var l=this.GetCardsByNum(c,h);o.push(l)}}else if(i[a]>0&&i[s]>0){var c=[a,s],h=e;if(i[14]>0){c.push(14);var l=this.GetCardsByNum(c,h);o.push(l)}else if(i[15]>0){c.push(15);var l=this.GetCardsByNum(c,h);o.push(l)}}}return o.length>0?{type:CC_STRAIGHT,cards:this.getMaxRes2(o)}:null},e.getDouble=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[],a=[],r=[],s=[],c=[];for(t=0;t<i.length;++t)1==i[t]?o.push(t):2==i[t]?a.push(t):3==i[t]?(r.push(t),s.push(t)):4==i[t]&&(c.push(t),s.push(t));if(a.length>0&&o.length>0){var h=a.length,l=a[h-1],u=o.length,p=0;for(t=0;u>t;t++)if(140!=o[t]&&150!=o[t]){p=o[t];break}p||(p=o[u-1]);var C=[l,l,p],d=e,_=this.GetCardsByNum(C,d);return{type:CC_DOUBLE,cards:_}}if(a.length>1){var h=a.length,l=a[h-1],p=a[0],C=[l,l,p],d=e,_=this.GetCardsByNum(C,d);return{type:CC_DOUBLE,cards:_}}return null},e.getSingle=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var n=Math.floor(e[t]/10);i[n]++}var o=[],a=[],r=[],s=[],c=[];for(t=0;t<i.length;++t)1==i[t]&&14!=i[t]&&15!=i[t]?o.push(t):2==i[t]?a.push(t):3==i[t]?(r.push(t),s.push(t)):4==i[t]&&(c.push(t),s.push(t));if(o.length>=3){var h=[];for(t=o.length-1;t>=2;--t){h=[o[t],o[t-1],o[t-2]];var l=e,u=this.GetCardsByNum(h,l);return{type:CC_SINGLE,cards:u}}}return null},e.GetCardsByNum=function(e,t){for(var i=[],n=t.concat(),o=0;o<e.length;++o)for(var a=0;a<n.length;++a){var r=Math.floor(n[a]/10);if(r==e[o]){i.push(n[a]),n.splice(a,1);break}}return i},e.getMaxRes1=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null);var n=0,o=0,a=0;e.length>0&&(n=e[0]),t.length>0&&(o=t[0]),i.length>0&&(a=i[0]);var r=0;switch(n>r&&(r=n),o>r&&(r=o),a>r&&(r=a),r){case n:return e;case o:return t;case a:return i}},e.getMaxRes2=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n][0]>t&&(t=e[n][0],i=n);return e[i]},e.sortCardsByColor=function(e){var t=e.sort(function(e,t){return e%10!=t%10?t%10-e%10:Math.floor(e/10)!=Math.floor(t/10)?Math.floor(t/10)-Math.floor(e/10):t-e});return t},e.sortCardsByValue=function(e){var t=e.sort(function(e,t){return t-e});return t},e.checkType=function(t){var i,n,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;++i){var a=Math.floor(t[i]/10);o[a]++}var r=[],s=[],c=[],h=[],l=[];for(i=0;i<o.length;++i)1==o[i]?r.push(i):2==o[i]?s.push(i):3==o[i]?(c.push(i),h.push(i)):4==o[i]&&(l.push(i),h.push(i));if(h.length>0){var u=this.sortCardsByColor(t),p=this.GetCardsByNum([h[0],h[0],h[0]],u);return{ct:CC_THREE,kv:p[0],kv2:p[1],kv3:p[2]}}if(s.length>0&&(o[14]>0||o[15]>0)){var u=this.sortCardsByColor(t),p=this.GetCardsByNum([s[0],s[0]],u),C=0;return o[14]>0&&(C=10*s[0]+3,p.push(C)),o[15]>0&&p.length<3&&(C=10*s[0]+2,p.push(C)),p.sort(function(e,t){return t-e}),{ct:CC_THREE,kv:p[0],kv2:p[1],kv3:p[2]}}if(r.length>2&&o[14]>0&&o[15]>0){var u=this.sortCardsByColor(t),p=this.GetCardsByNum([r[0]],u),d=10*r[0]+3,_=10*r[0]+2;return p.push(d),p.push(_),p.sort(function(e,t){return t-e}),{ct:CC_THREE,kv:p[0],kv2:p[1],kv3:p[2]}}var g=e.sortCardsByColor(t);for(i=0;i<g.length-2;++i){var f=g[i],m=g[i+1],v=g[i+2];if(f%10==m%10&&f%10==v%10&&Math.floor(f/10)-1==Math.floor(m/10)&&Math.floor(m/10)-1==Math.floor(v/10)&&140!=f&&150!=f)return{ct:CC_STRFLUSH,kv:f,kv2:m,kv3:v};if(f%10==m%10&&f%10==v%10&&13==Math.floor(f/10)&&2==Math.floor(m/10)&&1==Math.floor(v/10))return{ct:CC_STRFLUSH,kv:m,kv2:v,kv3:f}}for(i=0;i<g.length-1;++i){var f=g[i],m=g[i+1];if(f%10==m%10&&f%2==1&&o[14]>0&&140!=f&&150!=f){if(Math.floor(f/10)-1==Math.floor(m/10))return 13!=Math.floor(f/10)?{ct:CC_STRFLUSH,kv:f+10,kv2:f,kv3:m}:{ct:CC_STRFLUSH,kv:f,kv2:m,kv3:m-10};if(Math.floor(f/10)-2==Math.floor(m/10))return{ct:CC_STRFLUSH,kv:f,kv2:f-10,kv3:m}}else if(f%10==m%10&&f%2==0&&o[15]>0&&140!=f&&150!=f){if(Math.floor(f/10)-1==Math.floor(m/10))return 13!=Math.floor(f/10)?{ct:CC_STRFLUSH,kv:f+10,kv2:f,kv3:m}:{ct:CC_STRFLUSH,kv:f,kv2:m,kv3:m-10};if(Math.floor(f/10)-2==Math.floor(m/10))return{ct:CC_STRFLUSH,kv:f,kv2:f-10,kv3:m}}}var D,y=[0,0,0,0],b=0,E=0;for(i=0;i<g.length;++i){var a=t[i]%10;140!=t[i]&&150!=t[i]?y[a]++:140==t[i]?b=1:150==t[i]&&(E=1)}for(i=y.length-1;i>=0;--i){if(y[i]>2){var R=[],S=g.concat(),w=[i,i,i];for(n=0;n<w.length;++n)for(D=0;D<S.length;++D){var a=S[D]%10;if(a==w[n]&&140!=S[D]&&150!=S[D]){R.push(S[D]),S.splice(D,1);break}}return{ct:CC_FLUSH,kv:R[0],kv2:R[1],kv3:R[2]}}if(y[i]>1){if(i%2==1&&b>0){var R=[],S=g.concat(),w=[i,i];for(n=0;n<w.length;++n)for(D=0;D<S.length;++D){var a=S[D]%10;if(a==w[n]&&140!=S[D]&&150!=S[D]){R.push(S[D]),S.splice(D,1);break}}var C=0;return C=R[0]%10==3?133:131,{ct:CC_FLUSH,kv:C,kv2:R[0],kv3:R[1]}}if(i%2==0&&E>0){var R=[],S=g.concat(),w=[i,i];for(n=0;n<w.length;++n)for(D=0;D<S.length;++D){var a=S[D]%10;if(a==w[n]&&140!=S[D]&&150!=S[D]){R.push(S[D]),S.splice(D,1);break}}var C=0;return C=R[0]%10==2?132:130,{ct:CC_FLUSH,kv:C,kv2:R[0],kv3:R[1]}}}}for(g=this.sortCardsByValue(t),i=0;i<g.length-2;++i){var f=g[i],m=g[i+1],v=g[i+2];if(Math.floor(f/10)-1==Math.floor(m/10)&&Math.floor(m/10)-1==Math.floor(v/10)&&140!=f&&150!=f)return{ct:CC_STRAIGHT,kv:f,kv2:m,kv3:v};if(13==Math.floor(f/10)&&2==Math.floor(m/10)&&1==Math.floor(v/10))return{ct:CC_STRAIGHT,kv:m,kv2:v,kv3:f}}for(i=0;i<g.length-1;++i){var f=g[i],m=g[i+1];if(140!=f&&150!=f&&(o[14]>0||o[15]>0))if(Math.floor(f/10)-1==Math.floor(m/10))if(13!=Math.floor(f/10)){if(o[14]>0){var C=10*Math.floor(f/10)+3+10;return{ct:CC_STRFLUSH,kv:C,kv2:f,kv3:m}}if(o[15]>0){var C=10*Math.floor(f/10)+2+10;return{ct:CC_STRFLUSH,kv:C,kv2:f,kv3:m}}}else{if(o[14]>0){var _=10*Math.floor(m/10)+3-10;return{ct:CC_STRAIGHT,kv:f,kv2:m,kv3:_}}if(o[15]>0){var _=10*Math.floor(m/10)+2-10;return{ct:CC_STRAIGHT,kv:f,kv2:m,kv3:_}}}else if(Math.floor(f/10)-2==Math.floor(m/10)){if(o[14]>0){var d=10*Math.floor(f/10)+3-10;return{ct:CC_STRAIGHT,kv:f,kv2:d,kv3:m}}if(o[15]>0){var d=10*Math.floor(f/10)+2-10;return{ct:CC_STRAIGHT,kv:f,kv2:d,kv3:m}}}}if(s.length>0&&r.length>0){var u=this.sortCardsByColor(t),p=this.GetCardsByNum([s[0],s[0],r[0]],u);return{ct:CC_DOUBLE,kv:p[0],kv2:p[1],kv3:p[2]}}if(3==r.length){var u=this.sortCardsByValue(t),p=this.GetCardsByNum([r[2],r[1],r[0]],u);return{ct:CC_SINGLE,kv:p[0],kv2:p[1],kv3:p[2]}}return{ct:0,kv:0,kv2:0,kv3:0}},e}();__reflect(CCCardsType.prototype,"CCCardsType");var CCGlobal=function(){function e(){}return e.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.createTextureByName=function(e){var t=RES.getRes(e);return t},e.createJsonData=function(e){return RES.getRes(e)},e}();__reflect(CCGlobal.prototype,"CCGlobal");var CCDDZCard=function(e){function t(){var t=e.call(this)||this;return t._bGray=!1,t._pokerId=0,t._select=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.touchEnabled=!0,this.addChild(this._container=new egret.DisplayObjectContainer),this._container.addChild(this._body=new CCDDZCardBody),this._body.scaleX=this._body.scaleY=CCGlobalGameConfig.CARD_SCALE,CCalien.CCDDZUtils.anchorCenter(this._container,CCGlobalGameConfig.CARD_WIDTH,CCGlobalGameConfig.CARD_HEIGHT)},t.prototype.initData=function(e){this._pokerId=0,this._body.y=0,this._bGray=!1,this.scaleX=this.scaleY=this.alpha=1,this.touchEnabled=this.touchChildren=!0,this._select=!1,0==e.pid?this.showBack():(this._body.initData(this._pokerId=e.pid),this.showFront())},Object.defineProperty(t.prototype,"pokerId",{get:function(){return this._pokerId},set:function(e){this._body.initData(this._pokerId=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rollOver",{get:function(){return this._body.rollOver},set:function(e){this._body.rollOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"select",{get:function(){return this._select},set:function(e){if(this._select!=e){this._select=e;var t=this._select?-10:0;egret.Tween.get(this._body,null,null,!0).to({y:t},80)}},enumerable:!0,configurable:!0}),t.prototype.showFront=function(e){var t=this;void 0===e&&(e=!1),e?egret.Tween.get(this._container,null,null,!0).to({scaleX:0},100).call(function(){t._bg&&(t._bg.visible=!1),t._body.visible=!0}).to({scaleX:1},100):(this._body.visible=!0,this._bg&&(this._bg.visible=!1))},t.prototype.isGray=function(){return this._bGray},t.prototype.showGrayBg=function(e){if(this._bGray=e,0!=this.pokerId)this._body.setBgGray(e);else{var t=e?"gray":"blue";this.showBack(t)}},t.prototype.showBack=function(e){void 0===e&&(e="blue"),this._bg||(this._container.addChild(this._bg=new egret.Bitmap),this._bg.scaleX=this._bg.scaleY=CCGlobalGameConfig.CARD_SCALE),this._backRes!=e&&(this._backRes=e,this._bg.texture=RES.getRes("cc_poker_"+e+"_back")),this._body.visible=!1,this._bg.visible=!0},t.prototype.animate=function(e,t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=200),void 0===o&&(o=null),egret.Tween.get(this,null,null,!0).to(i).wait(t).to(e,n,o)},t.create=function(e){return CCalien.ObjectPool.getObject("CCDDZCard",e)},t.recycle=function(e){CCalien.ObjectPool.recycleObject("CCDDZCard",e)},t.prototype.showMasterFlag=function(e){this._body.showMasterFlag(e)},t}(egret.DisplayObjectContainer);__reflect(CCDDZCard.prototype,"CCDDZCard");var CCDDZCardBody=function(e){function t(){var t=e.call(this)||this;return t._rollOver=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.initData=function(e){if(this._master=!1,this.removeChildren(),e>0){this.addChild(this._bg=new egret.Bitmap(RES.getRes("cc_poker_broad")));var t=this._poker=CCDDZUtils.pid2poker(e);
if(t.num>13){var i=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_joker"));this.addChild(i);var n=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_joker_ddz_icon"));n.x=0,n.y=0,this.addChild(n)}else{var o=void 0;switch(t.num){case 1:o="a";break;case 11:o="j";break;case 12:o="q";break;case 13:o="k";break;default:o=t.num.toString()}var a=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_"+o));this.addChild(a);var r=new egret.Bitmap(RES.getRes("cc_poker_sign_"+t.sign));this.addChild(r),a=new egret.Bitmap(RES.getRes("cc_poker_"+t.signColor+"_"+o)),a.anchorOffsetX=a.x=a.width/2,a.anchorOffsetY=a.y=a.height/2,a.rotation=180,this.addChild(a),r=new egret.Bitmap(RES.getRes("cc_poker_sign_"+t.sign)),r.anchorOffsetX=r.x=r.width/2,r.anchorOffsetY=r.y=r.height/2,r.rotation=180,this.addChild(r)}this._masterFlag=new egret.Bitmap(RES.getRes("cc_icon_master_card")),this._masterFlag.scaleX=1.7,this._masterFlag.scaleY=1.7,this._masterFlag.x=50,this._masterFlag.y=2,this.addChild(this._masterFlag)}this.showMasterFlag(!1)},Object.defineProperty(t.prototype,"rollOver",{get:function(){return this._rollOver},set:function(e){if(this._rollOver!=e){this._rollOver=e;var t=this.parent.parent;if(!this._rollOver&&t.isGray())return;this._bg&&(this._bg.texture=RES.getRes("cc_poker_broad"+(this._rollOver?"_h":"")))}},enumerable:!0,configurable:!0}),t.prototype.setBgGray=function(e){this._bg&&(this._bg.texture=RES.getRes("cc_poker_broad"+(e?"_h":"")))},t.prototype.showMasterFlag=function(e){this._master=e,this._masterFlag&&(this._masterFlag.visible=e)},t}(egret.DisplayObjectContainer);__reflect(CCDDZCardBody.prototype,"CCDDZCardBody");var CCalien;!function(e){var t=function(){function e(t,i,n,o,a,r,s){void 0===n&&(n=null),void 0===o&&(o=0),void 0===a&&(a=!0),void 0===r&&(r=!1),void 0===s&&(s=0),this._oldProperties={},this._t=0,this.target=t,this._calProps=n?n:e.round,this.duration=i,this.loop=o,this.reverse=r,this.delay=s,this.updateRegisterPos(),a&&this.play()}return e.prototype.updateRegisterPos=function(){this._oldProperties.x=this.target.x,this._oldProperties.y=this.target.y,this._oldProperties.scaleX=this.target.scaleX,this._oldProperties.scaleY=this.target.scaleY,this._oldProperties.skewX=this.target.skewX,this._oldProperties.skewY=this.target.skewY,this._oldProperties.rotation=this.target.rotation,this._oldProperties.alpha=this.target.alpha},e.prototype.play=function(){this._tween||(this._count=0,this._playStep())},e.prototype._playStep=function(){return this.loop>0&&this._count>=this.loop?void this.stop():(this._count++,this.t=this.reverse?2*Math.PI:0,this._tween=egret.Tween.get(this),void this._tween.wait(this.delay).to({t:this.reverse?0:2*Math.PI},this.duration).call(this._playStep,this))},Object.defineProperty(e.prototype,"t",{get:function(){return this._t},set:function(e){if(this.target.stage){this._t=e;var t=this._calProps.call(this,this._t);t.hasOwnProperty("x")&&(this.target.x=(t.x||0)+this._oldProperties.x),t.hasOwnProperty("y")&&(this.target.y=(t.y||0)+this._oldProperties.y),t.hasOwnProperty("sx")&&(this.target.scaleX=t.sx),t.hasOwnProperty("sy")&&(this.target.scaleY=t.sy),t.hasOwnProperty("skewX")&&(this.target.skewX=t.skewX),t.hasOwnProperty("skewY")&&(this.target.skewY=t.skewY),t.hasOwnProperty("r")&&(this.target.rotation=t.r),t.hasOwnProperty("alpha")&&(this.target.alpha=t.alpha)}},enumerable:!0,configurable:!0}),e.prototype.stop=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=1e3),this._tween&&(egret.Tween.removeTweens(this),e&&egret.Tween.get(this.target).to(this._oldProperties,i),this._tween=null)},Object.defineProperty(e.prototype,"playing",{get:function(){return null!=this._tween},enumerable:!0,configurable:!0}),e.round=function(e){return{x:Math.cos(e),y:Math.sin(e)}},e.cos=function(e){return{x:Math.cos(e),y:0}},e.sin=function(e,t){return e=e||1,{x:0,y:Math.sin(t)*e}},e.rotate=function(e){return{r:360*e/Math.PI/2}},e.shake=function(e,t){return e=e||10,{r:Math.sin(2*t)*e}},e.breath=function(e,t){return{sx:Math.sin(t)*e+1,sy:-Math.sin(t+Math.PI/4)*e+1}},e}();e.CCDDZWave=t,__reflect(t.prototype,"CCalien.CCDDZWave",["CCalien.CCDDZIAnimation"])}(CCalien||(CCalien={}));var CCDDZEnvironment=function(){function e(){}return e.channel_id=1,e}();__reflect(CCDDZEnvironment.prototype,"CCDDZEnvironment");var CCDDZLogUtil=function(){function e(){}return e.argsToString=function(e){var t=function(e){for(var t="",i=0;e>i;++i)t+=" ";return t},i="",n=function(e,i,o){var a=e;if(CCDDZUtils.isArray(o)){a+="[";for(var r=0;r<o.length;++r)a+=n("",i,o[r])+",";a+="]"}else if(CCDDZUtils.isObject(o)){a+="{\n",i+=1;for(var s in o)a+=n(t(i)+s.toString()+":",i,o[s])+",\n";a+=t(i-1)+"}"}else a+=""+o;return a};return i=n(i,0,e)},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return},e.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return},e.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return},e}();__reflect(CCDDZLogUtil.prototype,"CCDDZLogUtil");var CCDDZ_T_G_FISH=5,CCDDZ_T_G_GOLD=1,CCDDZ_T_G_DIAMOND=3,CCDDZ_T_G_NIU=4,CCDDZ_T_G_NGOLD=2,CCDDZ_T_G_DZPK=6,CCDDZ_T_G_P_DK=7,CCDDZ_T_G_LLK=8,CCDDZ_T_G_2048=9,CCDDZ_T_G_FFL=10,CCDDZ_T_G_CC=11,CCDDZMainLogic=function(){function e(){this._almsUsageCount=0,this.init()}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){CCalien.Native.instance.addEventListener("back",this.back,this),CCalien.Native.instance.addEventListener("enterBackground",this.enterBackground,this),CCalien.Native.instance.addEventListener("enterForeground",this.enterForeground,this),ccserver.addEventListener(CCGlobalEventNames.USER_USER_INFO_RESPONSE,this.onUserInfoResponse,this),ccserver.addEventListener(CCGlobalEventNames.USER_ALMS_REP,this.onAlmsResponse,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.CLOCK_0,this.onClock0,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SERVER_CLOSE,this.onServerClose,this),ccserver.addEventListener(CCGlobalEventNames.USER_GET_FRREWARD_REP,this._onRecvGetFRechargeRewRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_PAY_TO_CHAT_REP,this._onRecvHornRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_CHECK_RECONNECT_REP,this._onCheckReconnectRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetRewRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_QUICK_JOIN_RESPONSE,this.onQuickJoinRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_DiamondGame_REP,this._onNewPlayerDiamonRewInfoRep,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SERVER_HASUPDATE,this._onServerHasUpdate,this),this._suitableRoom=null,this.selfData=new CCGlobalUserInfoData},e.prototype.setWillToGame=function(e){this._nToGame=e},e.prototype.getWillToGame=function(){return this._nToGame},e.prototype.resetChannelClick=function(){this._nToGame=0},e.prototype._onNewPlayerDiamonRewInfoRep=function(e){var t=e.data;if(3==t.optype)if(null==t.result){this.selfData.setHasGetNewDiamond();var i="恭喜您,成功领取新手钻石奖励:免费补充到32钻";CCDDZAlert.show(i,0,function(){var e=CCalien.CCDDZSceneManager.instance.currentScene;if(e instanceof CCDDZScenePlay){var t=e;t.checkEnoughSendQuickJoin()}else ccserver.checkReconnect()})}else CCDDZAlert.show("领取新手钻石奖励失败:"+t.result+"|"+this.selfData.diamondgiftgot)},e.prototype.onQuickJoinRep=function(e){var t=e.data;switch(t.result){case 11:this._onServerHasUpdate()}},e.prototype._onRecvGetRewRep=function(t){var i=t.data,n=null;5==i.optype?(0==i.result||null==i.result?i.params&&i.params.length>=1&&(n="恭喜获得"+CCDDZUtils.exchangeRatio(i.params[0]/100,!0)+"奖杯!",this.selfData.subWangZhaRedNum(),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_RED_COUNT_CHANGE,{num:i.params[0],optype:i.optype}),ccserver.getRedcoinRankingListReq()):1==i.result?n="活动不存在":2==i.result?n="任务未完成":3==i.result&&(n="奖励已领取"),n&&CCDDZAlert.show(n)):10==i.optype?(0==i.result||null==i.result)&&(e.instance.selfData.monthcardinfo[3]=ccserver.tsServer,CCDDZAlert3.show("领取月卡复活成功",function(e){if("confirm"==e){var t=CCalien.CCDDZSceneManager.instance.currentScene;if(t instanceof CCDDZScenePlay){var i=t;i.checkEnoughSendQuickJoin()}}},"cc_common_btn_lab_confirm_n",!1)):9==i.optype&&(0==i.result||null==i.result)&&e.instance.selfData.setHasGetTodayVipRew()},e.prototype.initData=function(){CCGlobalGameConfig.roomList.forEach(function(e){e.hasOwnProperty("cycleTime")&&!e.hasOwnProperty("cycleTimeStamp")&&(e.cycleTimeStamp=[],e.cycleTime.some(function(t){e.cycleTimeStamp.push(CCalien.TimeUtils.parseTime(t))})),2==e.roomType&&(ccserver._isInDDZ||(e.masterReward=CCDDZMatchService.getRewardStringByRank(e),e.rewardText=CCalien.StringUtils.format(lang.match_jikai_reward,e.masterReward),205==e.matchId&&(e.masterReward=CCDDZMatchService.getRewardStringBy205(e),e.rewardText=CCalien.StringUtils.format(lang.match_jikai_reward,e.masterReward)),e.limitText=CCalien.StringUtils.format(lang.match_jikai_limit,e.maxPlayer),e.entryMoneyText=e.entryMoney>0?CCDDZUtils.currencyRatio(e.entryMoney)+lang.gold:lang.free_pay))}),CCDDZGoodsManager.instance,ccserver._isInDDZ||CCDDZMatchService.instance.initData()},e.prototype.back=function(e){if(!CCalien.CCDDZPopUpManager.removeTopPupUp()){var t=CCalien.CCDDZSceneManager.instance.currentScene;if(t.name==CCGlobalSceneNames.ROOM){var i=t;i.doBack()}else CCalien.CCDDZSceneManager.back(null,CCalien.CCDDZsceneEffect.CCDDFade)||CCalien.Native.instance.closeApp()}},e.prototype.enterForeground=function(e){console.log("app enter foreground."),this.onAppEnterForeground()},e.prototype.enterBackground=function(e){console.log("app enter background."),this._ready&&CCalien.CCDDZSceneManager.instance.currentSceneName==CCGlobalSceneNames.LOADING?this.tryStart():(CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.ENTER_BACKGROUND),this.onAppEnterBackground())},e.prototype.delayStart=function(){console.log("delayStart----------->"),this._ready=!0,CCGlobalGameData.instance.loadData(),CCGlobalUserData.instance.init(CCGlobalGameConfig.platform),CCGlobalUserData.instance.loadData(),this.initData(),this.tryStart()},e.prototype.tryStart=function(){if(console.log("tryStart"),ccserver.ready(),1==ccserver._isInDDZ)ccserver.checkReconnect();else{var e=CCalien.Native.instance;e.isWXMP?CCLoginService.instance.doWebWXLogin():e.isAli()?CCLoginService.instance.doWebAliLogin():e.isWxQr()?CCLoginService.instance.doWebWXLogin():e.isAliQr()?CCLoginService.instance.doWebAliLogin():this.showLogin()}},e.prototype.showLogin=function(){CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.LOGIN,{autoLogin:!0,isFirstIn:!0},CCalien.CCDDZsceneEffect.CCDDFade)},e.prototype.getLocation=function(){var t=this;CCalien.Native.instance.getWXLocation(function(i){if("success"==i.result){e.instance.latitude=i.latitude,e.instance.longitude=i.longitude,console.log("!!!!!!!!得到位置信息");var n={latitude:i.latitude,longitude:i.longitude};ccserver.modifyUserInfo(n),t._getLocationTimer.stop()}else console.log("获取位置信息失败: "+i.result)})},e.prototype.start=function(e){var t=this;if(!this.running){console.log("CCDDZMainLogic start."),this.refreshSelfInfo();var i=CCGlobalGameData.instance,n=i.getItem("lastLaunchTime",0),o=CCalien.TimeUtils.tsToDate(n),a=CCalien.TimeUtils.tsToDate(ccserver.tsLocal);o.getDate()==a.getDate()&&o.getMonth()==a.getMonth()&&o.getFullYear()==a.getFullYear()?i.changeItem("todayLaunchCount",1):i.setItem("todayLaunchCount",1),CCalien.TimeUtils.getWeekIndex(n)==CCalien.TimeUtils.getWeekIndex(ccserver.tsLocal)?i.changeItem("weekLaunchCount",1):i.setItem("weekLaunchCount",1),i.setItem("lastLaunchTime",ccserver.tsLocal,!0),ccserver._isInDDZ?(this.running=!0,e()):async.parallel([function(e){CCDDZMatchService.instance.start(e)},function(e){CCDDZBagService.instance.start(e)},function(e){CCDDZCountDownService.instance.start(e)},function(e){CCDDZRechargeService.instance.start(e)},function(e){CCDDZExchangeService.instance.start(e)},function(e){CCDDZMailService.instance.start(e)}],function(){t.running=!0,e()}),this.checkNicknameCount=0}},e.prototype.onKickOut=function(e){if(ccserver._isInDDZ)return void ccserver.ddzDispatchEvent(1,"",{type:1});var t={content:lang.disconnect_kick_out[e]};4==e||1==e?(t.button=lang.confirm,4==e?CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.ACCOUNT_ERROR,t):this.showMostTopTip(t)):5==e?this._onServerHasUpdate():3==e?this.onSocketClose():this.showMostTopTip(t)},e.prototype.showMostTopTip=function(e){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_DISCONNECT,e)},e.prototype.isLoginScene=function(){var e=CCalien.CCDDZSceneManager.instance.currentSceneName;return e==CCGlobalSceneNames.LOGIN?!0:!1},e.prototype.showDisconnect=function(e){e.socketClose&&(CCalien.CCDDZStageProxy.isPause()||ccserver.kickOut||this.isLoginScene())||this.showMostTopTip(e)},e.prototype.onSocketClose=function(){CCalien.CCDDZStageProxy.isPause()||ccserver.kickOut||this.isLoginScene()||CCLoginService.instance.showWaitAndTryConnect()},e.prototype.stop=function(){CCalien.CCDDZPopUpManager.removeAllPupUp(),this.running&&(console.log("CCDDZMainLogic stop."),this.selfData.clean(),CCDDZMatchService.instance.stop(),CCDDZBagService.instance.stop(),CCDDZCountDownService.instance.stop(),CCDDZRechargeService.instance.stop(),CCDDZMailService.instance.stop(),ccserver.close(!1),this.running=!1)},e.prototype.restart=function(e){this._restartFlag=!0,this._restartCallback=e,ccserver.connected?this.stop():(e(),this._restartFlag=!1,this._restartCallback=null),egret.setTimeout(e.bind(this),this,500)},e.prototype.onAppEnterForeground=function(){ccserver.frozen=!1},e.prototype.onAppEnterBackground=function(){ccserver.frozen=!0},e.prototype.onServerClose=function(e){this.stop()},e.prototype.onClock0=function(e){CCGlobalGameConfig.setCfgByField("hasGetIRedNum",0),this.selfData.setHasPayToday(0)},e.prototype.refreshSelfInfo=function(){ccserver.userInfoRequest(ccserver.uid)},e.prototype.onUserInfoResponse=function(e){var t=e.data;t.uid==ccserver.uid&&(this.selfData.initData(t),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.MY_USER_INFO_UPDATE,{userInfoData:this.selfData}),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.GOLD_UPDATE,{gold:this.selfData.gold}),CCDDZOtherGameManager.instance.onMyInfoUpdate())},e.prototype.updateRecorderExpireTime=function(){var e=new Date;e.setFullYear(this.selfData.cardsRecorder[0],this.selfData.cardsRecorder[1]-1,this.selfData.cardsRecorder[2]),e.setHours(this.selfData.cardsRecorder[3]),e.setMinutes(this.selfData.cardsRecorder[4]),e.setSeconds(this.selfData.cardsRecorder[5]);var t=new Date,i=e.getTime()-t.getTime();this.selfData.cardsRecorder[6]=Math.floor(i/1e3)},e.prototype.alms=function(e){return void 0===e&&(e=0),e=e||this.selfData.gold,e<CCGlobalGameConfig.almsConfig.condition?(ccserver.alms(),!0):!1},e.prototype.getLeftAlmsCount=function(){var e=CCGlobalGameConfig.almsConfig.count-this._almsUsageCount;return 0>e&&(e=0),e},e.prototype.rechareErrByServerUpdate=function(){if(ccserver.reqServerUpdateRechareErr(),ccserver.playing){var e="游戏服务器已更新，请在本局游戏结束后重新登录游戏!";CCalien.Native.instance.isNative&&(e="游戏服务器已更新，请在本局游戏结束后重新启动游戏!"),CCDDZAlert.show(e)}else this._onServerHasUpdate()},e.prototype.onAlmsResponse=function(e){var t=e.data;switch(t.result){case 0:CCDDZAlert.show(lang.format(lang.id.alms_success,CCDDZUtils.currencyRatio(CCGlobalGameConfig.almsConfig.gold),CCGlobalGameConfig.almsConfig.count-t.usagecnt)),this._almsUsageCount=t.usagecnt;break;case 1:break;case 2:}},e.backToRoomScene=function(t){void 0===t&&(t=null),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},CCalien.CCDDZsceneEffect.CCDDFade,null,null,!1,CCGlobalSceneNames.LOADING),e.instance.alms()},e.getTodayLaunchCount=function(){return CCGlobalGameData.instance.getItem("todayLaunchCount",0)},e.getWeekLaunchCount=function(){return CCGlobalGameData.instance.getItem("weekLaunchCount",0)},e.prototype._getRewSuccTextByCfg=function(e){var t="成功领取";e.sort(function(e,t){return e.id>t.id});for(var i=0;i<e.length;++i)0==e[i].id?t+="首充每日大礼:"+e[i].num+"金豆\n":101==e[i].id||2==e[i].id&&(t+="记牌器*"+e[i].num/24/7+"天 ");return t},e.prototype._onRecvGetFRechargeRewRep=function(e){var t=e.data,i="";if(0==t.result){var n=CCGlobalGameConfig.getFRechargeRewByDay(t.day);if(!n)return void CCDDZLogUtil.error("_onRecvGetFRechargeRewRep==========error===",t.day,n);i=this._getRewSuccTextByCfg(n),i+="\n\n首充每日大礼剩余"+(7-t.day)+"天",CCDDZBagService.instance.refreshBagInfo(),this.selfData.setFRechargeTodayHasGet(),CCDDZPanelFirstRecharge.setDisableGet()}else{var o=(a={},a[1]="没有资格",a[2]="奖励已领取",a[3]="奖励已过期",a);o[t.result]?i=o[t.result]:(i="领取奖励失败",CCDDZLogUtil.error("_onRecvGetRewRep==========error===",t.result))}CCDDZAlert.show(i);var a},e.prototype.onGoGetRewardReq=function(){var e=this.selfData,t=e.getFRechargeRewGetDay();t&&t>=1&&7>=t?ccserver.send(CCGlobalEventNames.USER_GET_FRREWARD_REQ,{day:t}):CCDDZLogUtil.info("_onGoRecharge------------ERROR-->",t)},e.prototype._onRecvHornRep=function(t){var i=t.data,n=(l={},l[1]="钻石不足",l[2]="内容不能为空",l[3]="参数错误",l),o="";if(null==i.result)for(var a=i.chatinfo,r=e.instance.selfData.nickname,s={time:0,msg:null,nickname:null},c="",h=0;h<a.length;++h)c=CCDDZBase64.decode(a[h].nickname),c!=r&&(s.time=1e3*a[h].time,s.nickname=c,s.msg=a[h].msg,this.selfData.addHornTalkRec(s));else n[i.result]&&(o=n[i.result],CCDDZToast.show(o));var l},e.prototype.ifBuyReviveMaxTipShop=function(t){if(this.selfData.isMaxBuyDiamondRevive()){var i=this.selfData.getDiamondReviveMaxBuy();CCDDZAlert.show("今日复活礼包购买已达到"+i+"次上限,请前往商城购买!",0,function(t){"confirm"==t?CCDDZPanelExchange2.instance.show(1):e.backToRoomScene()})}else CCDDZPanelReviveBag.getInstance().show(t)},e.prototype.noDiamondGetNewDiamondRewOrBuyRevive=function(e){var t=this.selfData.hasGetNewDiamond();return t?void this.ifBuyReviveMaxTipShop(e):void ccserver.reqNewPlayerGetDiamond()},e.prototype.hideIndexDownAndRefresh=function(){CCalien.Native.instance.isWXMP},e.prototype.loadFntFont=function(){RES.isGroupLoaded("font")||RES.loadGroup("font")},e.prototype.loadRecharge=function(){},e.prototype._loadResGroups=function(){this.loadFntFont(),this.loadRecharge()},e.prototype.showGoldNotEnough=function(e){CCDDZAlert.show("金豆不足"+e+" 是否前往商城购买 ？",1,function(e){"confirm"==e&&(ccserver._isInDDZ?ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:0}):CCDDZPanelExchange2.instance.show(0))})},e.prototype.ifBuyGoldReviveMaxTipShop=function(t){if(this.selfData.isMaxBuyGoldRevive()){var i=CCGlobalGameConfig.getGoldReviveMaxBuy();CCDDZAlert.show("今日复活礼包购买已达到"+i+"次上限,请前往商城购买!",0,function(t){"confirm"==t?CCDDZPanelExchange2.instance.show(0):e.backToRoomScene()})}else{var n={type:1,num:t};CCDDZPanelReviveBag.getInstance().show(n)}},e.prototype.checkPoker=function(e){var t=RES.getRes("cc_sheet_poker");t?e():RES.getResAsync("cc_sheet_poker",function(){e()},this)},e.prototype.checkNiuGoldNum=function(e){return void this.checkCCGoldNum(e)},e.prototype.toZcj=function(e){void 0===e&&(e={}),this.checkPoker(function(){var t=CCGlobalGameConfig.getRoomCfgFromAll(4001);CCalien.CCDDZPopUpManager.removeAllPupUp(),CCalien.CCDDZSceneManager.show("QznnGamePage",{data:e,roomInfo:t})})},e.prototype.checkCCGoldNum=function(t){var i=CCGlobalGameConfig.getRoomConfigById(t.roomid),n=e.instance.selfData.gold;return i.minScore>n?void this.showGoldNotEnough(i.minScore):void this.toCC(t)},e.prototype.toCC=function(t){void 0===t&&(t={}),this.checkPoker(function(){var i=CCGlobalGameConfig.getRoomCfgFromAll(t.roomid);CCalien.CCDDZPopUpManager.removeAllPupUp(),e.instance.setScreenLandScape(1280,640);var n="quick_join";n=t.isReconnect?"reconnect":"quick_join",CCalien.CCDDZSceneManager.show("SceneCmpChicken",{action:n,roomID:i.roomID})})},e.prototype.checkPDKGoldNum=function(){CCDDZOtherGameManager.instance.runOtherGameByName("pdk")},e.prototype.checkDzpkGoldNum=function(t){var i=CCGlobalGameConfig.getRoomCfgByGameId(5,0),n=i[0],o=e.instance.selfData.gold;return n.minScore>o?void this.showGoldNotEnough(n.minScore):void this.checkPoker(function(){CCalien.CCDDZSceneManager.show("SceneDzpkPlay",{data:t,roomInfo:n})})},e.prototype.toFFF=function(){var e=CCGlobalGameConfig.getCfgByField("drawcard_conf.turn");CCalien.CCDDZSceneManager.show("SceneFffPlay",{roomInfo:e})},e.prototype.toLLT=function(){var e=CCGlobalGameConfig.getCfgByField("drawcard_conf.checkout");CCalien.CCDDZSceneManager.show("GameLLT",{roomInfo:e})},e.prototype._reconnectRetCheckStatusByData=function(e){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING);var t=CCDDZSceneManager.instance.currentSceneName,i=CCDDZSceneManager.instance.currentScene,n=!1,o=null;if(e.roomid&&(n=!0,o=CCGlobalGameConfig.getRid2gt(e.roomid)),e.roomid>999&&e.roomid<1e4&&2==e.gametype)if(this._loadResGroups(),t==CCGlobalSceneNames.PLAY){var a=i;a.doReconnectToGame({personalgame:!0,action:"reconnect",roomID:e.roomid})}else CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{personalgame:!0,action:"reconnect",roomID:e.roomid},CCalien.CCDDZsceneEffect.CCDDFade);else if(n){if("ddz"==o||"ddz2"==o||"tommorow"==o||"texasholdem"==o){if(4001==e.roomid)return e.isReconnect=!0,void this.toZcj(e);if(5001==e.roomid)return e.isReconnect=!0,void this.checkDzpkGoldNum(e)}if(10001==e.roomid||10002==e.roomid||10003==e.roomid||10004==e.roomid||10005==e.roomid||10006==e.roomid)return e.isReconnect=!0,void this.toCC(e);if(this._loadResGroups(),t==CCGlobalSceneNames.PLAY){var a=i;a.doReconnectToGame({personalgame:!1,action:"reconnect",roomID:e.roomid})}else CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{action:"reconnect",roomID:e.roomid},CCalien.CCDDZsceneEffect.CCDDFade)}else{if(CCDDZOtherGameManager.instance.isRunOtherGame())return;if(ccddzwebService.loadLog(2,1),t==CCGlobalSceneNames.ROOM){var a=i;a.doReconnectToLobby(e)}else CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},CCalien.CCDDZsceneEffect.CCDDFade),this._loadResGroups()}},e.prototype._onCheckReconnectRep=function(e){var t=e.data;console.log("_onCheckReconnectRep-------------------->",t),this.hideIndexDownAndRefresh(),this.running?this._reconnectRetCheckStatusByData(t):this.start(this._reconnectRetCheckStatusByData.bind(this,t))},e.prototype.toSuitableRoom=function(e){console.log("toSuitableRoom===================>",e),this._suitableRoom=e},e.prototype.doRestartGame=function(){var t=CCalien.Native.instance;this.stop(),t.isNative?t.checkAppUpdate(function(){e.instance.showLogin()}):window.top.location.reload()},e.prototype._onServerHasUpdate=function(){var e=this;egret.setTimeout(function(){var t=CCalien.Native.instance,i=e.doRestartGame.bind(e),n="游戏服务器已更新，为了保障您的数据完整性，请重新登录游戏！";t.isNative&&(n="游戏服务器已更新，为了保障您的数据完整性，请重新启动游戏！",i=t.closeApp.bind(t)),CCDDZPanelAlert3.instance.show(n,0,function(e){"confirm"==e&&i()}.bind(e),!1)},this,100)},e.prototype.closeSelf=function(){var e=CCalien.Native.instance;e.isNative&&e.closeApp()},e.prototype.setScreenLandScape=function(e,t){var i=CCalien.CCDDZStageProxy.stage;i.setContentSize(e,t),i.orientation=egret.OrientationMode.LANDSCAPE},e.prototype.setScreenPortrait=function(e,t){var i=CCalien.CCDDZStageProxy.stage;i.setContentSize(e,t),i.orientation=egret.OrientationMode.PORTRAIT},e.prototype.enterGameItemNotEnough=function(e){var t=this;1==e.roomFlag?CCDDZPanelAlert3.instance.show("金豆不足"+e.minScore+"，是否前往商城购买？",1,function(e){"confirm"==e&&(ccserver._isInDDZ?t.openDDZShop():CCDDZPanelExchange2.instance.show())}):2==e.roomFlag&&(1e3==e.roomID?!this.selfData.hasGetNewDiamond()&&this.selfData.canGetNewDiamond()?ccserver.reqNewPlayerGetDiamond():this.selfData.checkMonthCardRevival()||CCDDZPanelReviveBag.getInstance().show(e):ccserver._isInDDZ?CCDDZPanelAlert3.instance.show("钻石不足"+e.minScore+"，是否前往商城购买？",1,function(e){"confirm"==e&&(ccserver._isInDDZ?t.openDDZShop(1):CCDDZPanelExchange2.instance.show())}):CCDDZPanelReviveBag.getInstance().show(e))},e.prototype.enterGameItemIsOver=function(t){1==t.roomFlag?CCDDZPanelAlert3.instance.show("拥有金豆已超过房间上限",1,function(t){"confirm"==t&&(ccserver._isInDDZ?CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},CCalien.CCDDZsceneEffect.CCDDFade):e.backToRoomScene())}):2==t.roomFlag&&(ccserver._isInDDZ?CCDDZPanelAlert3.instance.show("拥有钻石已超过房间上限",1,function(t){"confirm"==t&&(ccserver._isInDDZ?CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},CCalien.CCDDZsceneEffect.CCDDFade):e.backToRoomScene())}):CCDDZPanelReviveBag.getInstance().show(t))},e.prototype.openDDZShop=function(e){void 0===e&&(e=0),ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:e})},e.prototype.getResInfoByUrl=function(e){var t=null;return this._resCfg?this._resCfg.urls&&(t=this._resCfg.urls[e]):e.indexOf("goods-icon")>=0&&(t={url:e}),t},e.prototype.getResInfoByName=function(e){return this._resCfg&&this._resCfg.names?this._resCfg.names[e]:null},e.prototype.parseResConfigByIns=function(e){var t=e;this._resCfg={urls:{},names:{},subkeys:""},this._resIns=t;var i,n=this,o=this._resCfg.urls,a=this._resCfg.names,r=this._resCfg.subkeys,s=RES.configInstance,c=s.keyMap;for(var h in c)i=c[h],o[i.url]=i,a[i.name]=i,i.subkeys&&(r+=i.subkeys+",");var l=this._resIns.$getAnalyzerByType;this._resIns.$getAnalyzerByType=function(e){var t=l.call(this,e);if(!t.hasOverWrite){var i=t.onLoadFinish;t.onLoadFinish=function(e){var t=e.target,a=this.resItemDic[t.$hashCode],r=a.item;a.func;if(r.loaded=e.type==egret.Event.COMPLETE,r.loaded&&t instanceof egret.HttpRequest&&(r.loaded=!1,this.analyzeConfig)){var s=n.getResInfoByUrl(r.url);if(s){var c=this.analyzeConfig(r,t.response);c&&(o[c]={url:c})}}i&&i.call(this,e)}.bind(t)}return t.hasOverWrite=!0,t}.bind(this._resIns)},e}();__reflect(CCDDZMainLogic.prototype,"CCDDZMainLogic");var CCDDZProtoIDs=function(){function e(){}return e.getMap=function(){var e={};return e[2001]="game.GameStartNtf",e["game.GameStartNtf"]=2001,e[2002]="game.SetSession",e["game.SetSession"]=2002,e[2003]="game.TableInfo",e["game.TableInfo"]=2003,e[2004]="game.EnterTable",e["game.EnterTable"]=2004,e[2005]="game.AskReady",e["game.AskReady"]=2005,e[2006]="game.LeaveTable",e["game.LeaveTable"]=2006,e[2007]="game.GetReadyReq",e["game.GetReadyReq"]=2007,e[2008]="game.GetReadyRep",e["game.GetReadyRep"]=2008,e[2009]="game.AskCashOn",e["game.AskCashOn"]=2009,e[2010]="game.AnswerCashOn",e["game.AnswerCashOn"]=2010,e[2011]="game.UseCardNtf",e["game.UseCardNtf"]=2011,e[2012]="game.AskMaster",e["game.AskMaster"]=2012,e[2013]="game.AnswerMaster",e["game.AnswerMaster"]=2013,e[2014]="game.SetScore",e["game.SetScore"]=2014,e[2015]="game.AskPlayCard",e["game.AskPlayCard"]=2015,e[2016]="game.AddCard",e["game.AddCard"]=2016,e[2017]="game.ShowCard",e["game.ShowCard"]=2017,e[2018]="game.GameEnd",e["game.GameEnd"]=2018,e[2019]="game.TalkNtf",e["game.TalkNtf"]=2019,e[2020]="game.RobotSetInfos",e["game.RobotSetInfos"]=2020,e[2021]="game.SetCards",e["game.SetCards"]=2021,e[2022]="game.ReconnectReq",e["game.ReconnectReq"]=2022,e[2023]="game.ReconnectRep",e["game.ReconnectRep"]=2023,e[2024]="game.GiveUpGameReq",e["game.GiveUpGameReq"]=2024,e[2025]="game.GiveUpGameRep",e["game.GiveUpGameRep"]=2025,e[2026]="game.UserOffline",e["game.UserOffline"]=2026,e[2027]="game.UserOnline",e["game.UserOnline"]=2027,e[2028]="game.GameActionReq",e["game.GameActionReq"]=2028,e[2029]="game.GameActionRep",e["game.GameActionRep"]=2029,e[2030]="game.UpdateMasterInfo",e["game.UpdateMasterInfo"]=2030,e[2031]="game.UpdateBetInfo",e["game.UpdateBetInfo"]=2031,e[2032]="game.GameStatusNtf",e["game.GameStatusNtf"]=2032,e[2033]="game.UpdateGameInfo",e["game.UpdateGameInfo"]=2033,e[2034]="game.OperateReq",e["game.OperateReq"]=2034,e[2035]="game.OperateRep",e["game.OperateRep"]=2035,e[2036]="game.UserInfoInGameReq",e["game.UserInfoInGameReq"]=2036,e[2037]="game.UserInfoInGameRep",e["game.UserInfoInGameRep"]=2037,e[2038]="game.AiInfo",e["game.AiInfo"]=2038,e[2039]="game.ServerInfoNtf",e["game.ServerInfoNtf"]=2039,e[2040]="game.SidePotInfo",e["game.SidePotInfo"]=2040,e[2041]="game.OperateRepEX",e["game.OperateRepEX"]=2041,e[2042]="game.ReplenishFreezeGoldReq",e["game.ReplenishFreezeGoldReq"]=2042,e[2043]="game.ReplenishFreezeGoldRep",e["game.ReplenishFreezeGoldRep"]=2043,e[1001]="user.UserInfoRequest",e["user.UserInfoRequest"]=1001,e[1002]="user.UserInfoResonpse",e["user.UserInfoResonpse"]=1002,e[1003]="user.ModifyUserInfoReq",e["user.ModifyUserInfoReq"]=1003,e[1004]="user.ModifyUserInfoRep",e["user.ModifyUserInfoRep"]=1004,e[1005]="user.CheckReconnectReq",e["user.CheckReconnectReq"]=1005,e[1006]="user.CheckReconnectRep",e["user.CheckReconnectRep"]=1006,e[1007]="user.ReconnectTableReq",e["user.ReconnectTableReq"]=1007,e[1008]="user.ReconnectTableRep",e["user.ReconnectTableRep"]=1008,e[1009]="user.QuickJoinRequest",e["user.QuickJoinRequest"]=1009,e[1010]="user.QuickJoinResonpse",e["user.QuickJoinResonpse"]=1010,e[1011]="user.PlayersAmountReq",e["user.PlayersAmountReq"]=1011,e[1012]="user.PlayersAmountRep",e["user.PlayersAmountRep"]=1012,e[1013]="user.MatchOperateReq",e["user.MatchOperateReq"]=1013,e[1014]="user.MatchOperateRep",e["user.MatchOperateRep"]=1014,e[1021]="user.MatchSignupReq",e["user.MatchSignupReq"]=1021,e[1022]="user.MatchSignupRep",e["user.MatchSignupRep"]=1022,e[1023]="user.MatchStartNtf",e["user.MatchStartNtf"]=1023,e[1024]="user.EnterMatchReq",e["user.EnterMatchReq"]=1024,e[1025]="user.EnterMatchRep",e["user.EnterMatchRep"]=1025,e[1026]="user.MatchInfoNtf",e["user.MatchInfoNtf"]=1026,e[1027]="user.QueryFreezeGoldReq",e["user.QueryFreezeGoldReq"]=1027,e[1028]="user.QueryFreezeGoldRep",e["user.QueryFreezeGoldRep"]=1028,e[1038]="user.DaySigninOptReq",e["user.DaySigninOptReq"]=1038,e[1039]="user.DaySigninOptRep",e["user.DaySigninOptRep"]=1039,e[1040]="user.MatchSignupInfoReq",e["user.MatchSignupInfoReq"]=1040,e[1041]="user.MatchSignupInfoRep",e["user.MatchSignupInfoRep"]=1041,e[1042]="user.NotifyKickout",e["user.NotifyKickout"]=1042,e[1046]="user.BagInfoReq",e["user.BagInfoReq"]=1046,e[1047]="user.BagInfoRep",e["user.BagInfoRep"]=1047,e[1048]="user.GiveupMatchReq",e["user.GiveupMatchReq"]=1048,e[1049]="user.GiveupMatchRep",e["user.GiveupMatchRep"]=1049,e[1050]="user.AlmsReq",e["user.AlmsReq"]=1050,e[1051]="user.AlmsRep",e["user.AlmsRep"]=1051,e[1052]="user.RechargeResultNotify",e["user.RechargeResultNotify"]=1052,e[1055]="user.Pay2chatReq",e["user.Pay2chatReq"]=1055,e[1056]="user.Pay2chatRep",e["user.Pay2chatRep"]=1056,e[1061]="user.MailReq",e["user.MailReq"]=1061,e[1062]="user.MailDetail",e["user.MailDetail"]=1062,e[1063]="user.MailListRep",e["user.MailListRep"]=1063,e[1064]="user.MailModifyRep",e["user.MailModifyRep"]=1064,e[1065]="user.MailGetRewardRep",e["user.MailGetRewardRep"]=1065,e[1066]="user.MailUnreadRep",e["user.MailUnreadRep"]=1066,e[1073]="user.CreatePersonalGameReq",e["user.CreatePersonalGameReq"]=1073,e[1074]="user.CreatePersonalGameRep",e["user.CreatePersonalGameRep"]=1074,e[1075]="user.JoinPGameReq",e["user.JoinPGameReq"]=1075,e[1076]="user.JoinPGameRep",e["user.JoinPGameRep"]=1076,e[1077]="user.StartPGameReq",e["user.StartPGameReq"]=1077,e[1078]="user.StartPGameRep",e["user.StartPGameRep"]=1078,e[1079]="user.QueryRoomInfoReq",e["user.QueryRoomInfoReq"]=1079,e[1080]="user.QueryRoomInfoRep",e["user.QueryRoomInfoRep"]=1080,e[1081]="user.QuitPGameReq",e["user.QuitPGameReq"]=1081,e[1082]="user.QuitRoomRep",e["user.QuitRoomRep"]=1082,e[1083]="user.GameDissolve",e["user.GameDissolve"]=1083,e[1084]="user.ReconnectPGameReq",e["user.ReconnectPGameReq"]=1084,e[1085]="user.ReconnectPGameRep",e["user.ReconnectPGameRep"]=1085,e[1090]="user.RedcoinExchangeGoodsReq",e["user.RedcoinExchangeGoodsReq"]=1090,e[1091]="user.RedcoinExchangeGoodsRep",e["user.RedcoinExchangeGoodsRep"]=1091,e[1092]="user.LotteryRedcoinReq",e["user.LotteryRedcoinReq"]=1092,e[1093]="user.LotteryRedcoinRep",e["user.LotteryRedcoinRep"]=1093,e[1094]="user.RedcoinRankingListReq",e["user.RedcoinRankingListReq"]=1094,e[1095]="user.RedcoinRankingListRep",e["user.RedcoinRankingListRep"]=1095,e[1096]="user.FreshManRedcoinLotteryChanceGot",e["user.FreshManRedcoinLotteryChanceGot"]=1096,e[1099]="user.DissolveGameReq",e["user.DissolveGameReq"]=1099,e[1100]="user.DissolveGameRep",e["user.DissolveGameRep"]=1100,e[1101]="user.QueryRoomPlayingReq",e["user.QueryRoomPlayingReq"]=1101,e[1102]="user.QueryRoomPlayingRep",e["user.QueryRoomPlayingRep"]=1102,e[1107]="user.GetFreshManRewardReq",e["user.GetFreshManRewardReq"]=1107,e[1108]="user.GetFreshManRewardRep",e["user.GetFreshManRewardRep"]=1108,e[1109]="user.GetCardsRecorderRewardReq",e["user.GetCardsRecorderRewardReq"]=1109,e[1110]="user.GetDayTaskRewardReq",e["user.GetDayTaskRewardReq"]=1110,e[1111]="user.GetDayTaskRewardRep",e["user.GetDayTaskRewardRep"]=1111,e[1112]="user.GetFirstRechargeRewardReq",e["user.GetFirstRechargeRewardReq"]=1112,e[1113]="user.GetFirstRechargeRewardRep",e["user.GetFirstRechargeRewardRep"]=1113,e[1114]="user.GetRewardReq",e["user.GetRewardReq"]=1114,e[1115]="user.GetRewardRep",e["user.GetRewardRep"]=1115,e[1116]="user.GetActivityInfoReq",e["user.GetActivityInfoReq"]=1116,e[1117]="user.GetActivityInfoRep",e["user.GetActivityInfoRep"]=1117,e[1118]="user.OperateReq",e["user.OperateReq"]=1118,e[1119]="user.OperateRep",e["user.OperateRep"]=1119,e[1120]="user.DiamondGameReq",e["user.DiamondGameReq"]=1120,e[1121]="user.DiamondGameRep",e["user.DiamondGameRep"]=1121,e[1122]="user.QuitWaitingQueueReq",e["user.QuitWaitingQueueReq"]=1122,e[1123]="user.RedCoindLotteryReq",e["user.RedCoindLotteryReq"]=1123,e[1124]="user.RedCoindLotteryRep",e["user.RedCoindLotteryRep"]=1124,e
},e}();__reflect(CCDDZProtoIDs.prototype,"CCDDZProtoIDs");var CCDDZReportor=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.start=function(){window.onerror=this.onWindowError},e.prototype.stop=function(){window.onerror=null},e.prototype.onWindowError=function(e,t,i,n,o){var a=!0;if(e.indexOf("gif")>=0)return a;var r=egret.Capabilities.os,s={PF:CCalien.Native.instance.platformId,OS:r,PID:1,MSG:t+"["+i+","+n+"]\n"+e};o&&(s.MSG+=" stack:"+o.stack),CCGlobalGameConfig.gameId&&(s.RID=CCGlobalGameConfig.gameId);var c=JSON.stringify(s),h=CCalien.Native.instance.getUrlArg();return 1==h.alertErr&&CCDDZAlert.show(c,0,function(){CCGlobalGameConfig.copyText(null,c,"错误日志",!0)}),a&&ccddzwebService.postError(CCGlobalErrorConfig.REPORT_ERROR,c),a},e.prototype.reportCodeError=function(e){var t=egret.Capabilities.os,i={PF:CCalien.Native.instance.platformId,OS:t,PID:1,MSG:e};CCGlobalGameConfig.gameId&&(i.RID=CCGlobalGameConfig.gameId);var n=CCalien.Native.instance.getUrlArg();1==n.alertErr&&(console.error(e,arguments.callee.caller),CCDDZAlert.show(e,0,function(){CCGlobalGameConfig.copyText(null,e,"错误日志",!0)})),ccddzwebService.postError(CCGlobalErrorConfig.REPORT_ERROR,JSON.stringify(i))},e.prototype.toReportPage=function(){var e=CCGlobalGameConfig.getCfgByField("urlCfg.reportUrl");e=e+"?uid="+ccserver.uid,CCalien.Native.instance.isNative?(e=e+"&app="+egret.Capabilities.os,CCalien.Native.instance.openUrlBySys(e)):window.top.location.href=e},e}();__reflect(CCDDZReportor.prototype,"CCDDZReportor");var CCDDZAdvanceMethod=function(){function e(){}return e.start=function(){if("iOS"==egret.Capabilities.os){console.log("replace Array.sort");var e=Array.prototype.sort;Array.prototype.sort=function(t){if(t&&"function"==typeof t){if(this.length<2)return this;for(var i=0,n=i+1,o=this.length,a=void 0,r=!1,s=0;o>i;i++)for(n=i+1;o>n;n++)s=t.call(this,this[i],this[n]),r=("number"==typeof s?s:s?1:0)>0,r&&(a=this[i],this[i]=this[n],this[n]=a);return this}return e.call(this)}}},e}();__reflect(CCDDZAdvanceMethod.prototype,"CCDDZAdvanceMethod");var CCDDZUtils=function(){function e(){}return e.pid2poker=function(e){var t=Math.floor(e/10);11>=t?t+=2:t=this.mapping[t-12];var i,n=e%10;return i=14==t?"black":15==t?"red":e%2==0?"red":"black",{num:t,sign:n,signColor:i}},e.pidCCpoker=function(e){var t=Math.floor(e/10),i=[1,14,15];12>=t?t+=1:t=i[t-13];var n,o=e%10;return n=14==t?"black":15==t?"red":e%2==0?"red":"black",{num:t,sign:o,signColor:n}},e.pidDzpkpoker=function(e){var t=Math.floor(e/10);13>=t&&(t+=1);var i=e%2==0?"red":"black",n=e%10;return{num:t,sign:n,signColor:i}},e.recycleCards=function(e,t){void 0===t&&(t=null);var i;if(t)for(var n=0,o=e.numChildren;o>n;n++)i=e.getChildAt(n),t(i);else for(;e.numChildren>0;)i=e.removeChildAt(0),CCDDZCard.recycle(i)},e.order=function(e){e.sort(function(e,t){return t-e})},e.currencyRatio=function(e,t){if(void 0===t&&(t=!1),null===e)return"";var i="string"==typeof e?parseInt(e):e;i/=CCGlobalGameConfig.currencyRatio;var n=i.toString(),o=n.indexOf(".");return t&&(0>o?n+=".00":n.length-n.indexOf(".")==2&&(n+="0")),n},e.exchangeRatio=function(e,t){if(void 0===t&&(t=!1),null===e)return"";var i="string"==typeof e?parseInt(e):e;i/=CCGlobalGameConfig.exchangeRatio;var n=i.toString(),o=n.indexOf(".");return t&&(0>o?n+=".00":n.length-n.indexOf(".")==2&&(n+="0")),n},e.roomScoreFormat=function(e){var t=Number(e);if(t>9999){t=Math.floor(t/1e4);var i=Math.floor((e-1e4*t)/1e3);return i>0?t+"万"+i:t+"万"}return t.toString()},e.countDown=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=1e3);var o=e,a=Math.floor(e/n);return CCalien.repeat(function(){o-=n,t(o/n)},n,a,i,!0)},e.goodsListToString=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);for(var n=[],o=0==t?e.length:Math.min(e.length,t),a=0;o>a;a++){var r=e[a],s="";s=i?r.count+CCDDZGoodsManager.instance.getGoodsById(r.id).name:CCDDZGoodsManager.instance.getGoodsById(r.id).name+"x"+r.count,n.push(s)}return n.join(" ")},e.parseGoodsString=function(e){var t=[];if(e){var i=e.split("|");i.forEach(function(e){var i=e.split(":"),n=parseInt(i[0]),o=parseInt(i[1]);1==n&&(o/=100),t.push({id:n,count:o})})}return t},e.regNickname=function(e){return!e.match(/^[0-9a-zA-Z\u4e00-\u9fa5_]*$/)},e.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.getHtmlText=function(e){return(new egret.HtmlTextParser).parser(e)},e.getTimeStampDiff=function(e,t,i){var n=e,o=t;i=i.toLowerCase();var a=new Date(n),r=new Date(o),s=r.getTime()-a.getTime(),c=1;switch(i){case"second":c=1e3;break;case"minute":c=6e4;break;case"hour":c=36e5;break;case"day":c=864e5;break;case"all":var h={},l=864e5,u=36e5,p=6e4,C=1e3,d=s%l;return h.days=Math.floor(s/l),h.hours=Math.floor(d/u),d%=u,h.minutes=Math.floor(d/p),d%=p,h.seconds=Math.round(d/C),d%=C,h.milliseconds=d,h}return s/c},e.isInTimeSection=function(e,t,i,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var a=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),r=new Date(Date.parse(t.replace(/-/g,"/"))).getTime();return i>=a&&r>=i&&(n||a!=i)&&(o||r!=i)?!0:!1},e.isTwoStampSameDay=function(e,t){var i=new Date(e),n=new Date(t);return i.getFullYear()==n.getFullYear()&&i.getMonth()==n.getMonth()&&i.getDate()==n.getDate()?!0:!1},e.setSensitiveWord=function(t){e._sensitive=t},e.getSensitiveWord=function(){return e._sensitive},e.getFormatGold=function(e,t){void 0===t&&(t="万");var i=""+e;return e>=1e4&&(i=e>=1e5?e>=1e6?i.substring(0,i.length-4)+t:i.substr(0,2)+"."+i.substr(2,1)+t:e%1e4==0?i.substring(0,i.length-4)+t:i.substr(0,1)+"."+i.substr(1,1)+t),i},e.formatDate=function(e,t){var i=e.toString();if(i.length>13)i.substring(0,14);else if(i.length<13)for(var n=i.length;13>n;)i+="0",n++;var o=new Date(Number(i)),a={"y+":o.getFullYear(),"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),"S+":o.getMilliseconds()};/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},e.formatGold=function(e){return e>9999?(e/1e4).toFixed(2)+"万":""+e},e.mapping=[1,2,14,15],e}();__reflect(CCDDZUtils.prototype,"CCDDZUtils");var CCalien;!function(e){var t=function(){function e(){}return e.init=function(){e.instance=new egret.EventDispatcher},e.dispatch=function(t,i){void 0===i&&(i=null),i?e.instance.dispatchEventWith(t,!1,i):e.instance.dispatchEvent(new egret.Event(t))},e.addEventListener=function(t,i,n){e.instance.addEventListener(t,i,n)},e.removeEventListener=function(t,i,n){e.instance.removeEventListener(t,i,n)},e}();e.CCDDZDispatcher=t,__reflect(t.prototype,"CCalien.CCDDZDispatcher")}(CCalien||(CCalien={}));var ccddz_version="07260900";CCalien.Native.instance.isNative&&(ccddz_version+="iOS"==egret.Capabilities.os?"i":"Android"==egret.Capabilities.os?"a":"n");var CCDDZCardsHint=function(){function e(){}return e.getCardLogicValue=function(e){return Math.floor(e/10)},e.getCardsHash=function(t){for(var i,n={},o=0;o<t.length;++o)i=e.getCardLogicValue(t[o]),n[i]?n[i].push(t[o]):n[i]=[t[o]];return n},e.getMinSingle=function(e,t,i){e.sort(function(e,t){return e-t});for(var n,o=[],a=0;a<e.length;++a){n=!0;for(var r=0;r<i.length;++r)if(i[r]==e[a]){n=!1;break}if(n&&o.length<t&&(o.push(e[a]),o.length>=t))return o}},e.getMinDouble=function(e,t,i){var n,o=this.getCardsHash(e),a=[];for(var r in o)if(!(o[r].length<2)){n=!0;for(var s=0;s<o[r].length;++s){for(var c=0;c<i.length;++c)if(i[c]==o[r][s]){n=!1;break}if(!n)break}if(n&&a.length<t&&(a=a.concat(o[r]),a.length>=t))return a}},e.getAllFourCard=function(e,t){void 0===t&&(t=0);var i,n=this.getCardsHash(e);for(var o in n)if(4==n[o].length){if(8>t){var a=this.getMinDouble(e,4,n[o]);if(a&&4==a.length){var r=n[o].concat(a);i={node:CCDDZCardsType.GetType(r),cards:r},t=r.length}}if(6>t){var a=this.getMinSingle(e,2,n[o]);if(a&&2==a.length){var r=n[o].concat(a);i={node:CCDDZCardsType.GetType(r),cards:r},t=r.length}}4>t&&(i={node:CCDDZCardsType.GetType(n[o]),cards:n[o]},t=4)}return i},e.getAllLineCard=function(e,t){if(void 0===t&&(t=0),!(e.length<5)){for(var i,n,o=this.getCardsHash(e),a=1;9>a;++a)if(o[a]){n=[o[a][0]];for(var r=a+1;13>r;++r){if(!o[r]){n.length>4&&n.length>t&&(i={node:CCDDZCardsType.GetType(n),cards:n},t=n.length);break}n.push(o[r][0]),12==r&&n.length>4&&n.length>t&&(i={node:CCDDZCardsType.GetType(n),cards:n},t=n.length)}}return i}},e.getAllDoubleLineCard=function(e,t){if(void 0===t&&(t=0),!(e.length<6)){for(var i,n,o=this.getCardsHash(e),a=1;11>a;++a)if(o[a]&&!(o[a].length<2)){n=[o[a][0],o[a][1]];for(var r=a+1;13>r;++r){if(!(o[r]&&o[r].length>1)){n.length>5&&n.length>t&&(i={node:CCDDZCardsType.GetType(n),cards:n},t=n.length);break}n.push(o[r][0]),n.push(o[r][1]),12==r&&n.length>5&&n.length>t&&(i={node:CCDDZCardsType.GetType(n),cards:n},t=n.length)}}return i}},e.getAllCardsPossible=function(t){for(var i,n={},o={},a=0;a<t.length;++a)i=e.getCardLogicValue(t[a]),n[i]?n[i]=n[i]+1:n[i]=1;for(var r in n)o[n[r]]=(o[n[r]]||0)+1;var s,c=0;if(o[3]>0||o[4]>0){var h=this.getAllPlaneCard(t,c);if(h&&(s=h,c=h.cards.length),o[4]>0){var l=this.getAllFourCard(t,c);l&&(s=l,c=l.cards.length)}}var u=this.getAllLineCard(t,c);u&&(s=u,c=u.cards.length);var p=this.getAllDoubleLineCard(t,c);return p&&(s=p,c=p.cards.length),s},e.getAllPlaneCard=function(e,t){if(void 0===t&&(t=0),!(e.length<3)){var i,n,o,a,r=this.getCardsHash(e);for(var s in r)if(o=parseInt(s),n=r[s],n.length>=3){i=[n[0],n[1],n[2]];for(var c=o+1;12>c&&(r[c]&&r[c].length>=3);++c){for(var h=0;3>h;++h)i.push(r[c][h]);if(i.length>=6){if(t<i.length+i.length/3*2){var l=this.getMinDouble(e,i.length/3*2,i);if(l&&l.length==i.length/3*2){var u=i.concat(l);a={node:CCDDZCardsType.GetType(u),cards:u},t=u.length}}if(t<i.length+i.length/3){var l=this.getMinSingle(e,i.length/3,i);if(l&&l.length==i.length/3){var u=i.concat(l);a={node:CCDDZCardsType.GetType(u),cards:u},t=u.length}}t<i.length&&(a={node:CCDDZCardsType.GetType(i),cards:i},t=i.length)}}if(t<i.length+i.length/3*2){var l=this.getMinDouble(e,i.length/3*2,i);if(l&&l.length==i.length/3*2){var u=i.concat(l);a={node:CCDDZCardsType.GetType(u),cards:u},t=u.length}}if(t<i.length+i.length/3){var l=this.getMinSingle(e,i.length/3,i);if(l&&l.length==i.length/3){var u=i.concat(l);a={node:CCDDZCardsType.GetType(u),cards:u},t=u.length}}t<i.length&&(a={node:CCDDZCardsType.GetType(i),cards:i},t=i.length)}return a}},e.getMaxAmountCards=function(t){if(t&&!(t.length<1)){var i=CCDDZCardsType.GetType(t);return i.ct>0?t:(i=e.getAllCardsPossible(t),i?i.cards:t)}},e.getFitCards=function(e,t,i){if(void 0===i&&(i=[]),!(!e||e.length<1||t>=e.length||e.length<i.length)){var n={ct:0,kv:0};if(!(i.length>0)||(n=CCDDZCardsType.GetType(i),n&&n.ct)){var o=(this.getCardsHash(e),CCDDZCardsType.GetType(e));if(i.length>0&&2!=n.ct&&4!=n.ct&&5!=n.ct&&6!=n.ct||n.kv>o.kv)return 2==o.ct||1==o.ct?e:void 0;if(!(1==n.ct||2==n.ct&&o.kv<=n.kv||o.kv<=n.kv&&2!=o.ct&&1!=o.ct)){var a=[];if(0==i.length)for(var r=0;t>=r;++r)a.push(e[r]);else if(t+1>i.length&&(2==o.ct||1==o.ct))a=e;else for(var r=0;r<i.length;++r)a.push(e[r]);return a}}}},e.getHumanVisible=function(e){var t=this.getCardLogicValue(e);t+=2;var i;e%10==0?i="♥":e%10==1?i="♠":e%10==2?i="♣":e%10==3&&(i="♦");var n="";return 11>t?n=t+i:11==t?n="J"+i:12==t?n="Q"+i:13==t?n="K"+i:14==t?n="A"+i:15==t?n="2"+i:16==t?n="JokerS":17==t&&(n="JokerB"),n},e.printCards=function(e,t){if(void 0===t&&(t=""),e){for(var i="",n=0;n<e.length;++n)i=i+this.getHumanVisible(e[n])+" ";console.log(t),console.log(i)}},e}();__reflect(CCDDZCardsHint.prototype,"CCDDZCardsHint");var CCDDZBUYAO=0,CCDDZSHUANGWANG=1,CCDDZZHADAN=2,CCDDZDAN=4,CCDDZDUIZI=5,CCDDZSANZHANG=6,CCDDZSANDAIYI=7,CCDDZSANDAIYIDUI=13,CCDDZSIDAIER=8,CCDDZSIDAIERDUI=14,CCDDZFEIJI=9,CCDDZDANSHUN=10,CCDDZSHUANGSHUN=11,CCDDZSANSHUN=12,CCDDZCardsType=function(){function e(){}return e.CheckType=function(e,t){var i=this.GetType(e);if(i.ct==CCDDZSHUANGWANG)return!0;if(null==t||t.length<1)return 0!=i.ct;var n=this.GetType(t);if(i.ct==n.ct){if(e.length==t.length)return i.kv>n.kv}else if(n.ct!=CCDDZSHUANGWANG&&n.ct!=CCDDZZHADAN&&i.ct==CCDDZZHADAN)return!0;return!1},e.GetCards2=function(e,t){var i=[],n=[],o=[],a=[],r=this.GetType(e,i,n,o,a),s=r.ct,c=s;if(0==s)return null;for(var h,l=[s,i,n,o],u=this.m_getCards(e,s,i,n,o,a,t,c),p=[],C=[],d=[];null!=u&&u.hasOwnProperty("chai")&&u.hasOwnProperty("cards")&&u.hasOwnProperty("nums");){h=u.cards,0==u.chai?p.push(h):C.push(h),d.push(u.nums),i=[],n=[],o=[],a=[];var r=this.GetType(h,i,n,o,a);s=r.ct,u=this.m_getCards(h,s,i,n,o,a,t,c)}var _=p.concat(C);return _.length>0?(l.push(_),l.push(d),l):null},e.m_getCards=function(e,t,i,n,o,a,r,s){if(null==r||r.length<1)return null;if(t==CCDDZSHUANGWANG||0==t)return null;var c,h,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=0;c<r.length;++c){var u=Math.floor(r[c]/10);l[u]++}var p=[],C=[],d=[],_=[];for(c=0;c<l.length;++c)1==l[c]?p.push(c):2==l[c]?C.push(c):3==l[c]?d.push(c):4==l[c]&&_.push(c);if(t==CCDDZDAN)for(c=i[0]+1;c<l.length;++c){if(1==l[c])return(14==c||15==c)&&l[14]>0&&l[15]>0?{chai:!0,cards:this.GetCardsByNum([c],r),nums:[c]}:{chai:!1,cards:this.GetCardsByNum([c],r),nums:[c]};if(l[c]>1)return{chai:!0,cards:this.GetCardsByNum([c],r),nums:[c]}}if(t==CCDDZDUIZI)for(c=n[0]+1;c<l.length;++c){if(2==l[c])return{chai:!1,cards:this.GetCardsByNum([c,c],r),nums:[c,c]};if(l[c]>2)return{chai:!0,cards:this.GetCardsByNum([c,c],r),nums:[c,c]}}if(t==CCDDZSANZHANG)for(c=o[0]+1;c<l.length;++c){if(3==l[c])return{chai:!1,cards:this.GetCardsByNum([c,c,c],r),nums:[c,c,c]};if(l[c]>3)return{chai:!0,cards:this.GetCardsByNum([c,c,c],r),nums:[c,c,c]}}var g;if(t==CCDDZSANDAIYI)for(c=o[0]+1;c<l.length;++c)if(l[c]>2){if(g=[c,c,c],p.length>0)g.push(p[0]);else for(h=1;h<l.length;++h)if(l[h]>0&&h!=c){g.push(h);break}if(4==g.length)return 3==l[c]?{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}:{chai:!0,cards:this.GetCardsByNum(g,r),nums:g};break}if(t==CCDDZSANDAIYIDUI)for(c=o[0]+1;c<l.length;++c)if(l[c]>2){if(g=[c,c,c],C.length>0)g.push(C[0],C[0]);else for(h=1;h<l.length;++h)if(l[h]>1&&h!=c){g.push(h,h);break}if(5==g.length)return 3==l[c]?{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}:{chai:!0,cards:this.GetCardsByNum(g,r),nums:g};break}if(t==CCDDZSIDAIER&&_.length>0)for(c=0;c<_.length;++c)if(_[c]>a[0]){for(g=[_[c],_[c],_[c],_[c]],h=0;h<p.length&&g.length<6;++h)g.push(p[h]);if(g.length<6)for(h=1;h<l.length&&g.length<6;++h)l[h]>0&&g.indexOf(h)<0&&g.push(h);if(6==g.length)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g};break}if(t==CCDDZSIDAIERDUI&&_.length>0)for(c=0;c<_.length;++c)if(_[c]>a[0]){for(g=[_[c],_[c],_[c],_[c]],h=0;h<C.length&&g.length<8;++h)g.push(C[h],C[h]);if(g.length<8)for(h=1;h<l.length&&g.length<8;++h)l[h]>1&&g.indexOf(h)<0&&g.push(h,h);if(8==g.length)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g};break}var f,m;if(t==CCDDZFEIJI)for(f=o.length,c=o[0]+1;c<l.length-f+1;++c){for(m=!0,g=[],h=0;f>h;++h)if(g.push(c+h,c+h,c+h),l[c+h]<3||c+h==13||c+h==14||c+h==15){m=!1;break}if(m){if(4*o.length==e.length){for(h=0;h<p.length&&g.length<e.length;++h)g.push(p[h]);if(g.length<e.length)for(h=1;h<l.length&&g.length<e.length;++h)if(l[h]>0&&g.indexOf(h)<0)for(var v=0;v<l[h]&&g.length<e.length;++v)g.push(h);if(g.length==e.length)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}}else if(n.length==o.length){for(h=0;h<C.length&&g.length<e.length;++h)g.push(C[h],C[h]);if(g.length<e.length)for(h=0;h<l.length&&g.length<e.length;++h)l[h]>1&&g.indexOf(h)<0&&g.push(h,h);if(g.length==e.length)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}}break}}if(t==CCDDZDANSHUN)for(f=i.length,c=i[0]+1;c<l.length-f+1;++c){for(m=!0,g=[],h=0;f>h;++h)if(g.push(c+h),l[c+h]<1||c+h==13||c+h==14||c+h==15){m=!1;break}if(m)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}}if(t==CCDDZSHUANGSHUN)for(f=n.length,c=n[0]+1;c<l.length-f+1;++c){for(m=!0,g=[],h=0;f>h;++h)if(g.push(c+h,c+h),l[c+h]<2||c+h==13||c+h==14||c+h==15){m=!1;break}if(m)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}}if(t==CCDDZSANSHUN)for(f=o.length,c=o[0]+1;c<l.length-f+1;++c){for(m=!0,g=[],h=0;f>h;++h)if(g.push(c+h,c+h,c+h),l[c+h]<3||c+h==13||c+h==14||c+h==15){m=!1;break}if(m)return{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}}if(t==CCDDZZHADAN){if(_.length>0)for(c=0;c<_.length;++c)if(_[c]>a[0])return g=[_[c],_[c],_[c],_[c]],t==s?{chai:!1,cards:this.GetCardsByNum(g,r),nums:g}:{chai:!0,cards:this.GetCardsByNum(g,r),nums:g}}else if(_.length>0)return g=[_[0],_[0],_[0],_[0]],{chai:!0,cards:this.GetCardsByNum(g,r),nums:g};return l[14]>0&&l[15]>0?{chai:!0,cards:this.GetCardsByNum([14,15],r),nums:[14,15]}:null},e.GetCardsByNum=function(e,t){for(var i=[],n=t.concat(),o=0;o<e.length;++o)for(var a=0;a<n.length;++a){var r=Math.floor(n[a]/10);if(r==e[o]){i.push(n[a]),n.splice(a,1);break}}return i},e.CheckShun=function(e){var t,i,n=[0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;++t){var o=Math.floor(e[t]/10);o<n.length&&n[o]++}var a;t=0;for(var r=[];t<n.length;){if(a=[],n[t]>2)for(a.push(t,t,t),i=t+1;i<n.length;++i){if(t=i,!(n[i]>2)){a.length>r.length&&(r=a);break}a.push(i,i,i)}++t}a&&a.length>r.length&&(r=a),(!r||r.length<6)&&(r=null),t=0;for(var s=[];t<n.length;){if(a=[],n[t]>1)for(a.push(t,t),i=t+1;i<n.length;++i){if(t=i,!(n[i]>1)){a.length>s.length&&(s=a);break}a.push(i,i)}++t}a&&a.length>s.length&&(s=a),(!s||s.length<6)&&(s=null),t=0;for(var c=[];t<n.length;){if(a=[],n[t]>0)for(a.push(t),i=t+1;i<n.length;++i){if(t=i,!(n[i]>0)){a.length>c.length&&(c=a);break}a.push(i)}++t}a&&a.length>c.length&&(c=a),(!c||c.length<5)&&(c=null);var h=r;return s&&(!h||s[0]<h[0])&&(h=s),c&&(!h||c[0]<h[0])&&(h=c),h&&h.length>0?this.GetCardsByNum(h,e):null},e.CheckShun2=function(e){var t,i=[0,0,0,0,0,0,0,0,0,0,0,0,0],n=Math.floor(e[0]/10),o=Math.floor(e[e.length-1]/10);for(t=0;t<e.length;++t){var a=Math.floor(e[t]/10);a<i.length&&i[a]++}var r=[];if(i[o]>2&&i[n]>2){for(r.push(o,o,o),t=o+1;n>t;++t){if(!(i[t]>2)){r=[];break}r.push(t,t,t)}r.length&&r.push(n,n,n)}if(!r.length&&i[o]>1&&i[n]>1&&n-o>1){for(r.push(o,o),t=o+1;n>t;++t){if(!(i[t]>1)){r=[];break}r.push(t,t)}r.length&&r.push(n,n)}if(!r.length&&i[o]>0&&i[n]>0&&n-o>3){for(r.push(o),t=o+1;n>t;++t){if(!(i[t]>0)){r=[];break}r.push(t)}r.length&&r.push(n)}return r.length?this.GetCardsByNum(r,e):null},e.is_shun=function(e,t){if(void 0===t&&(t=!0),!e||e.length<1)return{result:!1};for(var i=!1,n=!1,o=0;o<e.length-1;++o)if(e[o]+1!=e[o+1]||13==e[o+1]||14==e[o+1]||15==e[o+1]){if(t)return{result:!1};if(!(e.length>2))return{result:!1};if(0==o)n=!0;else{if(o!=e.length-2)return{result:!1};if(n)return{result:!1};i=!0}}return!t&&i?{result:!0,kv:e[e.length-2]}:{result:!0,kv:e[e.length-1]}},e.GetType=function(e,t,i,n,o){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=null),null==e||e.length<1)return{ct:0,kv:0};var a,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<e.length;++a){var s=Math.floor(e[a]/10);r[s]++}var c=[],h=[],l=[],u=[],p=[];for(a=0;a<r.length;++a)1==r[a]?(c.push(a),t&&t.push(a)):2==r[a]?(h.push(a),i&&i.push(a)):3==r[a]?(l.push(a),u.push(a),n&&n.push(a)):4==r[a]&&(p.push(a),u.push(a),o&&o.push(a));if(1==e.length)return{ct:CCDDZDAN,kv:c[0]};if(2==e.length&&e.indexOf(140)>=0&&e.indexOf(150)>=0)return{ct:CCDDZSHUANGWANG,kv:15};if(1==p.length&&4==e.length)return{ct:CCDDZZHADAN,kv:p[0]};if(1==h.length&&2==e.length)return{ct:CCDDZDUIZI,kv:h[0]};if(1==l.length&&3==e.length)return{ct:CCDDZSANZHANG,kv:l[0]};if(1==l.length&&4==e.length)return{ct:CCDDZSANDAIYI,kv:l[0]};if(1==l.length&&1==h.length&&5==e.length)return{ct:CCDDZSANDAIYIDUI,kv:l[0]};if(1==p.length&&6==e.length)return{ct:CCDDZSIDAIER,kv:p[0]};if(8==e.length){if(1==p.length&&2==h.length)return{ct:CCDDZSIDAIERDUI,kv:p[0]};if(2==p.length)return{ct:CCDDZSIDAIERDUI,kv:p[1]}}if(u.length>1){var C=this.is_shun(u,!1);if(C.result&&e.length==4*(u.length-1))return{ct:CCDDZFEIJI,kv:C.kv};if(C=this.is_shun(u),C.result&&e.length==4*u.length)return{ct:CCDDZFEIJI,kv:C.kv}}if(l.length>1){var C=this.is_shun(l);if(C.result){if(e.length==5*l.length&&l.length==h.length+2*p.length)return{ct:CCDDZFEIJI,kv:C.kv};if(3*l.length==e.length)return{ct:CCDDZSANSHUN,kv:C.kv}}}if(c.length>4&&e.length==c.length){var C=this.is_shun(c);if(C.result)return{ct:CCDDZDANSHUN,kv:C.kv}}if(h.length>2&&2*h.length==e.length){var C=this.is_shun(h);if(C.result)return{ct:CCDDZSHUANGSHUN,kv:C.kv}}return{ct:0,kv:0}},e.getMaxNumType=function(e){var t=[];return t},e.prototype.CCDDZCardsType=function(){},e}();__reflect(CCDDZCardsType.prototype,"CCDDZCardsType");var CCDDZDDZCardGroup=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interact=!1,t._cardsSelect=[],t._pokerIds=[],t._grayNum=0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.touchEnabled=!1,this.interact&&(this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),CCalien.CCDDZStageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this))},t.prototype.onTouchTap=function(e){},t.prototype.onTouchBegin=function(e){this._touchBeginIndex=this.getChildIndex(e.target),this._touchBegin=!0,this.rollOverCardIds(this.getChildIndex(e.target),this._touchBeginIndex)},t.prototype.onTouchMove=function(e){this._touchBegin&&this.rollOverCardIds(this.getChildIndex(e.target),this._touchBeginIndex)},t.prototype.onTouchEnd=function(e){if(this._touchBegin){for(var t=[],i=this._selectFrom;i<=this._selectTo;i++){var n=this.getChildAt(i);n&&(n.rollOver=!1,t.push(n))}this.selectCards(t)}this._touchBegin=!1},t.prototype.initData=function(){this._grayNum=0,this._cardsSelect.splice(0)},t.prototype.setGrayCardsNum=function(e){ccserver.isCoupleGame&&(this._grayNum=e||0,"my"==this.currentState?this.updateMyGrayCards():this.updateOtherGrayCards())},t.prototype.updateOtherGrayCards=function(){for(var e,t,i=this,n=this.numChildren,o=n-this._grayNum,a=0;n>a;++a)t=i.getChildAt(a),e=a>=o&&0==this._isMaster?!0:!1,t.showGrayBg(e)},t.prototype.updateMyGrayCards=function(){for(var e,t=this,i=this.numChildren,n=this._pokerIds.length,o=this._pokerIds.slice(n-this._grayNum),a=0;i>a&&(e=t.getChildAt(a),e);++a){e.showGrayBg(!1);for(var r=0;r<o.length;r++)if(e.pokerId==o[r]){e.showGrayBg(!0),o.splice(r,1);break}}},t.prototype.selectCards=function(e){for(var t,i=this,n=e.map(function(e){return e.pokerId}),o=!0,a=0;a<e.length;++a)e[a].select||(o=!1);if(o)return CCalien.CCDDZUtils.enumChildren(this,function(e,t){n.indexOf(e.pokerId)>=0&&i.selectCard(e,!e.select)}),void this.checkCanUse();var r=[],s=[];if(CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.select&&s.indexOf(e.pokerId)<0&&(s.push(e.pokerId),r.push(e.pokerId))}),n.forEach(function(e){s.indexOf(e)<0&&s.push(e)}),s.sort(function(e,t){return t-e}),this._targetCards&&0!=this._targetCards.length)1==e.length||(t=CCDDZCardsType.CheckShun(n));else if(2==s.length){var c=Math.floor(s[0]/10),h=Math.floor(s[1]/10);if(c!=h){var l=[];CCalien.CCDDZUtils.enumChildren(this,function(e,t){var i=Math.floor(e.pokerId/10);(i==c||i==h||e.pokerId<s[0]&&e.pokerId>s[1])&&l.push(e.pokerId)}),t=CCDDZCardsType.CheckShun2(l)}}else r.length<1&&(t=CCDDZCardsHint.getMaxAmountCards(n));t?CCalien.CCDDZUtils.enumChildren(this,function(e,n){i.selectCard(e,t.indexOf(e.pokerId)>=0)}):CCalien.CCDDZUtils.enumChildren(this,function(e,t){n.indexOf(e.pokerId)>=0&&i.selectCard(e,!e.select)}),this.checkCanUse()},t.prototype.selectCard=function(e,t){if(!e.select&&t)this._cardsSelect.push(e.pokerId);else if(e.select&&!t){var i=this._cardsSelect.indexOf(e.pokerId);i>=0&&this._cardsSelect.splice(i,1)}e.select=t},t.prototype.getSelectedCards=function(){return this._cardsSelect},t.prototype.cancelSelect=function(){CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.sending||(e.select=e.rollOver=!1)}),this._cardsSelect.splice(0),this.checkCanUse()},t.prototype._debugCardValues=function(e){for(var t=["3","4","5","6","7","8","9","10","J","Q","k","A","2","X","D"],i=0,n=[],o=0;o<e.length;++o)i=e[o]<100?parseInt((""+e[o]).substr(0,1)):parseInt((""+e[o]).substr(0,2)),n.push(t[i-1]);return n},t.prototype.checkType=function(e){this._targetCards=e;var t=CCDDZCardsType.GetCards2(e,this._pokerIds.concat());return t?(this._arrUseHelp=t[4],this._helpIndex=0,!0):(this._arrUseHelp=null,!1)},t.prototype.checkCanUse=function(e){void 0===e&&(e=!1);var t=e||CCDDZCardsType.CheckType(this._cardsSelect,this._targetCards);CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SELECT_CARDS,{canUse:t,count:this._cardsSelect.length})},t.prototype.help=function(){var e,t=this;return this._arrUseHelp&&(this._helpIndex>=this._arrUseHelp.length&&(this._helpIndex=0),e=this._arrUseHelp[this._helpIndex]),this._helpIndex++,e?(CCalien.CCDDZUtils.enumChildren(this,function(i,n){t.selectCard(i,e.indexOf(i.pokerId)>=0)}),this.checkCanUse(!0),!0):!1},t.prototype.rollOverCardIds=function(e,t){if(!(0>e||0>t)){var i=this._selectFrom=Math.min(e,t),n=this._selectTo=Math.max(e,t);CCalien.CCDDZUtils.enumChildren(this,function(e,t){e.rollOver=t>=i&&n>=t})}},t.prototype.cleancards=function(){e.prototype.clean.call(this),this._grayNum=0},t.prototype.addCards=function(t,i){void 0===i&&(i=!0);var n=e.prototype.addCards.call(this,t,i);return this.updatePokersIds(),n},t.prototype.useCards=function(e,t,i,n){var o=this;void 0===i&&(i=!0),void 0===n&&(n=!1);var a=[];return"my"!=this.currentState?"right_2"==this.currentState?e.forEach(function(e,t){var i=CCDDZCard.create({pid:e});o.addChild(i),i.sending=!0;var n=o.getChildAt(t),r=0,s=0;n&&(r=n.x,s=n.y),CCalien.CCDDZUtils.injectProp(i,{x:r,y:s,alpha:1,scaleX:.24,scaleY:.24}),a.push(i)}):e.forEach(function(e){var t=CCDDZCard.create({pid:e});o.addChild(t),t.sending=!0,CCalien.CCDDZUtils.injectProp(t,{x:0,y:0,alpha:1,scaleX:.24,scaleY:.24}),a.push(t)}):n?e.forEach(function(e,t){var i=CCDDZCard.create({pid:e});o.addChild(i),i.sending=!0,CCalien.CCDDZUtils.injectProp(i,{x:0,y:0,alpha:1,scaleX:.24,scaleY:.24}),a.push(i)}):CCalien.CCDDZUtils.enumChildren(this,function(t,i){e.indexOf(t.pokerId)>=0&&(t.sending=!0,a.push(t))}),this.removeHandCardsToDeskCardsGrp(t,a,i,n),this._touchBegin=!1,this.updatePokersIds(),this.cardCount},t.prototype.updatePokersIds=function(){var e=this;this._pokerIds.splice(0),CCalien.CCDDZUtils.enumChildren(this,function(t){t.sending||e._pokerIds.push(t.pokerId)})},t.prototype.adjustCardsEnd=function(){e.prototype.adjustCardsEnd.call(this),this.updateMasterFlag()},Object.defineProperty(t.prototype,"isMaster",{set:function(e){this._isMaster!=e&&(this._isMaster=e,this.updateMasterFlag())},enumerable:!0,configurable:!0}),t.prototype.updateMasterFlag=function(){for(var e,t=this.numChildren-1,i=t;i>=0;i--){var n=this.getChildAt(i);n.sending||(e||(e=n,e.showMasterFlag(this._isMaster)),n!=e&&n.showMasterFlag(!1))}},t}(CCDDZCardGroup);__reflect(CCDDZDDZCardGroup.prototype,"CCDDZDDZCardGroup"),window.CCDDZDDZCardGroup=CCDDZDDZCardGroup;var CCDDZDDZServer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.beforeDispatchMessage=function(t,i){switch(t){case CCGlobalEventNames.GAME_SET_SESSION:this._session>0&&this._session!=i.session&&this.giveUpGame(),this.resetSession();break;case CCGlobalEventNames.GAME_GAME_START_NTF:}e.prototype.beforeDispatchMessage.call(this,t,i)},t.prototype.send=function(t,i){!i.session&&t.indexOf("game")>=0&&(i.session=this._session),e.prototype.send.call(this,t,i)},t.prototype.setCards=function(e){this.send(CCGlobalEventNames.GAME_SET_CARDS,{seatid:0,cardids:e})},t.prototype.quickJoin=function(e){void 0===e&&(e=0),this.send(CCGlobalEventNames.USER_QUICK_JOIN_REQUEST,{roomid:this.roomInfo.roomID,clientid:this._clientId,flag:e})},t.prototype.userInfoRequest=function(e){this.send(CCGlobalEventNames.USER_USER_INFO_REQUEST,{uid:e})},t.prototype.getUserInfoInGame=function(e){this.send(CCGlobalEventNames.GAME_USER_INFO_IN_GAME_REQ,{uid:e})},t.prototype.CreatePersonalGameReq=function(e,t,i,n,o,a){void 0===a&&(a=0),this.send(CCGlobalEventNames.CREATE_PERSONAL_GAME_REQ,{gameid:e,bscore:t,maxround:i,maxodd:n,minscore:o,cost:a})},t.prototype.JoinPGameReq=function(e){this.send(CCGlobalEventNames.JOIN_PGAME_REQ,{roomid:e})},t.prototype.StartPGameReq=function(e){this.send(CCGlobalEventNames.START_PGAME_REQ,{roomid:e})},t.prototype.QueryRoomInfoReq=function(e){this.send(CCGlobalEventNames.QUERY_ROOMINFO_REQ,{roomid:e})},t.prototype.QuitPGameReq=function(e){this.send(CCGlobalEventNames.QUIT_PGAME_REQ,{roomid:e})},t.prototype.GameDissolve=function(e){this.send(CCGlobalEventNames.GAME_DISSOLVE,{roomid:e})},t.prototype.ReconnectPGameReq=function(){this.send(CCGlobalEventNames.RECONNECT_PGAME_REQ,{})},t.prototype.answerMaster=function(e){this.send(CCGlobalEventNames.GAME_ANSWER_MASTER,{score:e})},t.prototype.useCardNtf=function(e){this.send(CCGlobalEventNames.GAME_USE_CARD_NTF,{seatid:this.seatid,cardids:e,index:0})},t.prototype.talk=function(e){this.send(CCGlobalEventNames.GAME_TALK_NTF,{seatid:0,msg:e})},t.prototype.hang=function(e){this.send(CCGlobalEventNames.GAME_OPERATE_REQ,{optype:e?1:0})},t.prototype.gameOperate=function(e,t){void 0===t&&(t=null),this.send(CCGlobalEventNames.GAME_OPERATE_REQ,{optype:e,params:t})},t.prototype.getPlayersAmount=function(e){this.send(CCGlobalEventNames.USER_PLAYERS_AMOUNT_REQ,{game_id:e})},t.prototype.modifyUserInfo=function(e){this.send(CCGlobalEventNames.USER_MODIFY_USER_INFO_REQ,e)},t.prototype.giveUpGame=function(){this.send(CCGlobalEventNames.GAME_GIVE_UP_GAME_REQ,{status:0})},t.prototype.QuitWaitingQueueReq=function(){this.send(CCGlobalEventNames.QUIT_WAITING_QUEUE_REQ,{})},t.prototype.getMatchSignUpInfo=function(e){this.send(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REQ,{matchid:e})},t.prototype.matchSignUp=function(e,t,i){void 0===i&&(i=0),this.send(CCGlobalEventNames.USER_MATCH_SING_UP_REQ,{matchid:e,optype:t,itemid:i})},t.prototype.enterMatch=function(e){this.send(CCGlobalEventNames.USER_ENTER_MATCH_REQ,{matchid:e,clientid:this._clientId})},t.prototype.giveUpMatch=function(e){this.send(CCGlobalEventNames.USER_GIVE_UP_MATCH_REQ,{matchid:e,clientid:this._clientId})},t.prototype.getBagInfo=function(){this.send(CCGlobalEventNames.USER_BAG_INFO_REQ,{})},t.prototype.GetFreshManReward=function(){this.send(CCGlobalEventNames.GET_FRESHMAN_REWARD_REQ,{})},t.prototype.alms=function(){this.send(CCGlobalEventNames.USER_ALMS_REQ,{})},t.prototype.getReady=function(){this.send(CCGlobalEventNames.GAME_GET_READY_REQ,{})},t.prototype.redcoinExchangeGoodsReq=function(e){this.send(CCGlobalEventNames.USER_REDCOIN_EXCHANGE_GOODS_REQ,{index:e})},t.prototype.diamondExchangeGoodsReq=function(e){this.reqUserOperate(1,[e])},t.prototype.lotteryRedCoinReq=function(e){var t=CCGlobalGameConfig.getRoomCfgFromAll(e);t?1==t.poolsupport?this.send(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:e,optype:1}):1==t.rewardwinround?this.send(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:e,optype:4}):"diamond"==t.style?this.send(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:e,optype:2}):this.send(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:e}):CCDDZReportor.instance.reportCodeError("--------lotteryRedCoinReq-----error-->roomId:"+e)},t.prototype.getSignReward=function(){this.send(CCGlobalEventNames.USER_DAY_SIGN_IN_REQ,{optype:2})},t.prototype.getSignInInfo=function(){this.send(CCGlobalEventNames.USER_DAY_SIGN_IN_REQ,{optype:1})},t.prototype.getRedcoinRankingListReq=function(){ccddzwebService.getRanklist()},t.prototype.getCardsRecorderReward=function(){this.send(CCGlobalEventNames.GET_CARDS_RECORDER_REWARD_REQ,{})},t.prototype.sendHornMsg=function(e,t){var i=e,n=t,o={type:i,msg:n};this.send(CCGlobalEventNames.USER_PAY_TO_CHAT_REQ,o)
},t.prototype.reqGetDownAppRew=function(){var e={optype:1};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqNationalLoginRew=function(){var e={optype:2};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqNationalInviteRew=function(){var e={optype:3};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqNewGoldRedRew=function(){var e={optype:1,roomid:0};ccserver.send(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REQ,e)},t.prototype.reqInviteRedRew=function(){var e={optype:4};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqInviteExtra=function(){var e={optype:6};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqWangZhaRedRew=function(){var e={optype:5};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqNationalActInfo=function(){var e={optype:2};this.send(CCGlobalEventNames.USER_GET_ACTInfo_REQ,e)},t.prototype.reqDownAppRewInfo=function(){var e={optype:1};ccserver.send(CCGlobalEventNames.USER_GET_ACTInfo_REQ,e)},t.prototype.reqDouble=function(){var e={optype:7,params:[2]};ccserver.send(CCGlobalEventNames.GAME_OPERATE_REQ,e)},t.prototype.reqNoDouble=function(){var e={optype:7,params:[1]};ccserver.send(CCGlobalEventNames.GAME_OPERATE_REQ,e)},t.prototype.reqUserOperate=function(e,t){var i={optype:e,params:t};ccserver.send(CCGlobalEventNames.USER_OPERATE_REQ,i)},t.prototype.reqUserGuessNextCard=function(e,t){this.reqUserOperate(3,[t,e])},t.prototype.reqShareSuccRew=function(){this.reqUserOperate(2,null)},t.prototype.reqRedNormalTime=function(){var e={optype:2};ccserver.send(CCGlobalEventNames.USER_DiamondGame_REQ,e)},t.prototype.reqRedNormalMoney=function(){var e={optype:1};ccserver.send(CCGlobalEventNames.USER_DiamondGame_REQ,e)},t.prototype.reqNewPlayerGetDiamond=function(){var e={optype:3};ccserver.send(CCGlobalEventNames.USER_DiamondGame_REQ,e)},t.prototype.reqMailOperate=function(e,t){var i={optype:e,id:t};ccserver.send(CCGlobalEventNames.USER_MailOperate_REQ,i)},t.prototype.reqMailGetRew=function(e){this.reqMailOperate(1,e)},t.prototype.reqTanksQualifications=function(){this.reqUserOperate(4,null)},t.prototype.reqMatchOperate=function(e,t){var i={optype:e,matchid:t};this.send(CCGlobalEventNames.USER_MatchOperate_REQ,i)},t.prototype.reqMatchRevive=function(){this.reqMatchOperate(1,ccserver.roomInfo.matchId)},t.prototype.reqNewPlayerClickTask=function(){this.reqUserOperate(5,[1])},t.prototype.reqClickDownApp=function(){this.reqUserOperate(5,3)},t.prototype.reqClickFirstRecharge=function(){this.reqUserOperate(5,2)},t.prototype.reqClickThanksgiving=function(){this.reqUserOperate(5,4)},t.prototype.reqThanksBuyCounts=function(){this.reqUserOperate(4,null)},t.prototype.reqThanksSign=function(){this.reqUserOperate(6,null)},t.prototype.reqGetDayFuDai=function(){this.reqUserOperate(7,null)},t.prototype.reqServerUpdateRechareErr=function(){this.reqUserOperate(8,null)},t.prototype.reqAllLotteryStatus=function(){var e={optype:1};ccserver.send(CCGlobalEventNames.USER_CoinLottery_REQ,e)},t.prototype.reqLotteryStatusById=function(e){var t={optype:1,params:[e]};ccserver.send(CCGlobalEventNames.USER_CoinLottery_REQ,t)},t.prototype.reqBuyLotteryById=function(e,t){var i={optype:2,params:[e,t]};ccserver.send(CCGlobalEventNames.USER_CoinLottery_REQ,i)},t.prototype.reqGetNewYearLoginRew=function(){this.reqUserOperate(9,[2])},t.prototype.reqGetNewYearTaskRew=function(e,t,i){this.reqUserOperate(10,[e,i,t])},t.prototype.reqGetNewYearWorkRew=function(e,t){this.reqUserOperate(11,[e,t])},t.prototype.isInNewyearGiftReqNewYear=function(){var e=CCGlobalGameConfig.isInNewYearGift();e.isInTime&&this.reqUserOperate(4,[2])},t.prototype.isInNewyearTaskReqNewYear=function(){this.reqUserOperate(4,[3])},t.prototype.isInNewyearWorkReqNewYear=function(){var e=CCGlobalGameConfig.isInNewYearWork();e.isInTime&&this.reqUserOperate(4,[4])},t.prototype.reqFiveCard=function(e){this.reqUserOperate(13,[e])},t.prototype.reqGetFiveCardRew=function(e){this.reqUserOperate(14,[e])},t.prototype.reqPlayerPraise=function(e,t){ccserver.gameOperate(8,[e,t])},t.prototype.reqLucky=function(e){var t={optype:e};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,t)},t.prototype.reqLuckyInfo=function(){var e={optype:8};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t.prototype.reqGetVipRew=function(){var e={optype:9};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,e)},t}(CCServer);__reflect(CCDDZDDZServer.prototype,"CCDDZDDZServer");var ccserver=new CCDDZDDZServer,CCDDZGameSoundManager=function(){function e(){}return e.playCardType=function(e,t,i){void 0===i&&(i=0);var n,o=!1;switch(t){case CCDDZBUYAO:n="buyao"+CCalien.MathUtils.makeRandomInt(5,1);break;case CCDDZSHUANGWANG:n="wangzha",o=!0;break;case CCDDZZHADAN:n="zhadan",o=!0;break;case CCDDZDAN:n=""+i;break;case CCDDZDUIZI:n="dui"+i;break;case CCDDZSANZHANG:n="tuple"+i;break;case CCDDZSANDAIYI:n="sandaiyi";break;case CCDDZSANDAIYIDUI:n="sandaiyidui";break;case CCDDZSIDAIER:n="sidaier";break;case CCDDZSIDAIERDUI:n="sidailiangdui";break;case CCDDZFEIJI:n="feiji";break;case CCDDZDANSHUN:n="shunzi";break;case CCDDZSHUANGSHUN:n="liandui";break;case CCDDZSANSHUN:n="shunzi"}var a="cc_"+e+"_"+n+"_mp3";CCalien.CCDDZSoundManager.instance.playEffect(a),o&&CCDDZSoundManager.instance.vibrate()},e.playScore=function(e,t){var i="cc_"+e+"_";if(0==t)i+="NoOrder";else{if(0>t)return;i+="Order"}CCalien.CCDDZSoundManager.instance.playEffect(i+"_mp3")},e.playDouble=function(e,t){var i="cc_"+e+"_";i+=t?"jiabei":"bujiabei",CCalien.CCDDZSoundManager.instance.playEffect(i+"_mp3")},e}();__reflect(CCDDZGameSoundManager.prototype,"CCDDZGameSoundManager");var CCDDZGoodsManager=function(){function e(){this.init()}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this;this.goodsMap={},this.goodsArray=CCGlobalGameConfig.goodsConfig.map(function(t){var i=GoodsConfig.create(t);return e.goodsMap[i.id]=i,i})},e.prototype.getGoodsById=function(e){if(null!=e){var t=this.goodsMap[e];return t?t:void console.warn("物品不存在(id: %d)",e)}},e}();__reflect(CCDDZGoodsManager.prototype,"CCDDZGoodsManager");var GoodsConfig=function(){function e(){}return e.create=function(t){var i=new e;return CCalien.CCDDZUtils.injectProp(i,t),i},e}();__reflect(GoodsConfig.prototype,"GoodsConfig");var CCDDZObjectPoolInit=function(){function e(){this.init()}return e.prototype.init=function(){CCalien.ObjectPool.registerPool("CCDDZCard",function(e){return new CCDDZCard},function(e,t){e.initData(t)}),CCalien.ObjectPool.registerPool("CCCard",function(e){return new CCCard},function(e,t){e.initData(t)}),CCalien.ObjectPool.registerPool("CCDDZFlyGold",function(e){return new CCDDZFlyGold},function(e,t){e.initData(t)})},e}();__reflect(CCDDZObjectPoolInit.prototype,"CCDDZObjectPoolInit");var CCDDZOtherGameManager=function(){function e(){this._dispatcher=new OtherGameBridge,this._otherCfg=ccddz_otherGameCfg,this._loadConfigFunc=RES.loadConfig.bind(RES),this._getResByUrlFunc=RES.getResByUrl.bind(RES),this._$getVirtualUrlFunc=RES.$getVirtualUrl.bind(RES),this._protoIDS={},this._resetRunGame(),this._initTypeFunc()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.isListenAllProto=function(){return this._curGameCfg&&this._curGameCfg.listenAllProto?!0:!1},e.prototype.isInOtherProtoListen=function(e){return this._protoIDS&&this._protoIDS[e]?!0:!1},e.prototype.dispatch=function(e,t){this._dispatcher.dispatchEventWith(e,!1,t)},e.prototype.onSocketData=function(e,t,i){this.isRunOtherGame()&&this.dispatch(CCGlobalEventNames.RECV_SOCKET_DATA,{nameId:e,len:t,byteArray:i})},e.prototype.onMyInfoUpdate=function(){var e=CCDDZMainLogic.instance.selfData;e=JSON.parse(JSON.stringify(e)),this.dispatch("MY_USER_INFO_UPDATE",e)},e.prototype.runOtherGameByName=function(e,t){void 0===t&&(t=null);var i=this._getGameConfigByGameName(e);i&&this._startOtherGame(i,t)},e.prototype.runOtherGameByID=function(e,t){void 0===t&&(t=null);var i=this._getGameConfigByGameId(name);i&&this._startOtherGame(i,t)},e.prototype.getCurGameCfg=function(){return this._curGameCfg},e.prototype.isRunOtherGame=function(){return this._curGameCfg?!0:!1},e.prototype.onMusicEnableChange=function(){var e=CCalien.CCDDZSoundManager.instance.musicMute;this.dispatch("MUSCI_ENABEL_CHANGE",{enable:e})},e.prototype.onEffectEnableChange=function(){var e=CCalien.CCDDZSoundManager.instance.effectMute;this.dispatch("EFFECT_ENABEL_CHANGE",{enable:e})},e.prototype.onVibrateEnableChange=function(){var e=CCalien.CCDDZSoundManager.instance.vibrateMute;this.dispatch("VIBRATE_ENABEL_CHANGE",{enable:e})},e.prototype._getGameConfigByGameName=function(e){var t=null;if(this._otherCfg)for(var i in this._otherCfg)if(this._otherCfg[i].name==e)return this._otherCfg[i];return t},e.prototype._getGameConfigByGameId=function(e){var t=null;return this._otherCfg&&this._otherCfg[e]?this._otherCfg[e]:t},e.prototype._initLoadFunc=function(){var e=this;RES.$getVirtualUrl=function(t){var i=t;t.indexOf("http://")<0&&t.indexOf("https://")<0&&(i=e._curGameCfg.rootPath+t);var n=CCDDZMainLogic.instance.getResInfoByUrl(t);return n&&(i=t),e._$getVirtualUrlFunc(i)}},e.prototype._resetLoadFunc=function(){RES.loadConfig=this._loadConfigFunc,RES.getResByUrl=this._getResByUrlFunc,RES.$getVirtualUrl=this._$getVirtualUrlFunc},e.prototype._startOtherGame=function(t,i){var n=this;t.name&&CCalien.Ajax.GET(lang.config_url+"api.php",{action:"getGameByName",name:t.name},function(o){var a=JSON.parse(o);if(0==a.code){var r=a.data,s=r.host+r.url,c=s+r.mainJs;ccserver.setMustSolveList(t.ddzProto),console.log("startOtherGam==mainJs==>",c,"--entryClassName-",r.entryClassName),CCalien.Native.instance.loadJs(c,function(t){if(!t)return void n._resetRunGame();var o=egret.getDefinitionByName(r.entryClassName);if(o){n._curGameCfg=r,n._curGameCfg.rootPath=s,n._initLoadFunc(),n._dispatcher.addEventListener(r.entryClassName,n._onOtherGameEvent.bind(n),n);var a=new o({dispatcher:n._dispatcher,serverUid:ccserver.uid,ccserver:CCGlobalGameConfig.SERVER_URL,data:i});n._curGameContainer=a,CCalien.CCDDZSoundManager.instance.stopMusic(),CCalien.CCDDZSoundManager.instance.stopEffect(),CCalien.CCDDZSceneManager.addOtherContainer(a),CCalien.CCDDZSceneManager.removeDDZContainer(),e.instance.onMyInfoUpdate()}else n._resetRunGame()})}else CCDDZToast.show("未查询到相关游戏配置"+t.name),n._resetRunGame()})},e.prototype._onSendData=function(e){e.protoID&&e.byteArray&&ccserver.sendDataByProtoId(e.protoID,e.byteArray)},e.prototype._onOtherBack=function(e){CCalien.CCDDZSceneManager.removeOtherContainer(this._curGameContainer),this._resetRunGame(),CCalien.CCDDZSoundManager.instance.playMusic(CCGlobalResNames.bgm);var t=CCalien.CCDDZSceneManager.instance;t.currentSceneName!=CCGlobalSceneNames.ROOM&&t.show(CCGlobalSceneNames.ROOM,null,CCalien.CCDDZsceneEffect.CCDDFade)},e.prototype._onShowShop=function(e){CCDDZPanelExchange2.instance.show(e.shopFlag)},e.prototype._onShowSetting=function(e){CCDDZPanelSetting.instance.show()},e.prototype._onPlaySound=function(e){1==e.soundType?CCalien.CCDDZSoundManager.instance.playMusic(e.soundRes):2==e.soundType&&CCalien.CCDDZSoundManager.instance.playEffect(e.soundRes,e.loop)},e.prototype._onRecharge=function(e){e.productID&&CCDDZRechargeService.instance.doRecharge(e.productID)},e.prototype._onSetListerenProtoID=function(e){e&&e.protoIDS&&(this._protoIDS=e.protoIDS)},e.prototype._onExchange=function(e){e.id&&ccserver.redcoinExchangeGoodsReq(Number(e.id))},e.prototype._initTypeFunc=function(){this._tTypeFunc={},this._tTypeFunc[0]=this._onSendData.bind(this),this._tTypeFunc[1]=this._onOtherBack.bind(this),this._tTypeFunc[2]=this._onShowShop.bind(this),this._tTypeFunc[3]=this._onShowSetting.bind(this),this._tTypeFunc[4]=this._onPlaySound.bind(this),this._tTypeFunc[5]=this._onRecharge.bind(this),this._tTypeFunc[6]=this._onSetListerenProtoID.bind(this),this._tTypeFunc[7]=this._onExchange.bind(this)},e.prototype._onOtherGameEvent=function(e){var t=e.data;console.log("_onOtherGameEvent===>",t.type),t&&this._tTypeFunc[t.type]&&this._tTypeFunc[t.type](t)},e.prototype._removeListeners=function(){var e=this._dispatcher.$EventDispatcher[1],t=[];for(var i in e)if(t=e[i])for(var n=t.length,o=0;n>o;++o){var a=t.pop();this._dispatcher.removeEventListener(a.type,a.listener,a.thisObject,a.useCapture)}this._dispatcher.$EventDispatcher[1]={}},e.prototype._resetRunGame=function(){this._curGameContainer=null,this._curGameCfg=null,this._removeListeners(),this._resetLoadFunc()},e}();__reflect(CCDDZOtherGameManager.prototype,"CCDDZOtherGameManager");var OtherGameBridge=function(e){function t(){var t=e.call(this)||this;return t._soundIns=CCalien.CCDDZSoundManager.instance,t}return __extends(t,e),t.prototype.isEnableMusic=function(){return this._soundIns.musicMute},t.prototype.isEnableEffect=function(){return this._soundIns.effectMute},t}(egret.EventDispatcher);__reflect(OtherGameBridge.prototype,"OtherGameBridge");var CCDDZShareImageManager=function(){function e(){this._isWaitTipShowing=!1}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.start=function(e,t){this.showWait(),this.getImageUrl(e,t,this.onImageUrlResult.bind(this))},e.prototype.shareImgByType=function(e,t,i){var n=this;this.showWait(),this.getImageUrl(e,t,function(e){var t=JSON.parse(e);0==Number(t.code)&&n.shareImage(t.url,i)})},e.prototype.checkShareResult=function(){var t=+egret.localStorage.getItem(e.SHARE_RESULT_TAG);console.log("share result:"+t),t&&(t==CCGlobalWxHelper.NATIVE_SHARE_SUCC?this.onShareSucc():t>CCGlobalWxHelper.NATIVE_SHARE_SUCC&&this.onShareFailed())},e.prototype.getShareScene=function(t,i){var n=e.SCENE_NORMAL;if(t==e.GAME_TYPE_RED)switch(i){case 48:n=e.SCENE_RED_48;break;case 96:n=e.SCENE_RED_96;break;case 192:n=e.SCENE_RED_192;break;default:n=e.SCENE_NORMAL}else if(t==e.GAME_TYPE_MATCH)switch(i){case 201:n=e.SCENE_MATCH_200_RANK_1;break;case 202:n=e.SCENE_MATCH_200_RANK_2;break;case 203:n=e.SCENE_MATCH_200_RANK_3;break;case 501:n=e.SCENE_MATCH_500_RANK_1;break;case 502:n=e.SCENE_MATCH_500_RANK_2;break;case 503:n=e.SCENE_MATCH_500_RANK_3;break;default:n=e.SCENE_NORMAL}else if(t==e.GAME_TYPE_FAST)switch(i){case 200:n=e.SCENE_FAST_2;break;case 500:n=e.SCENE_FAST_5;break;case 1e3:n=e.SCENE_FAST_10;break;default:n=e.SCENE_NORMAL}return n},e.prototype.showWait=function(){this._isWaitTipShowing=!0,egret.localStorage.setItem(e.SHARE_RESULT_TAG,"1"),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_WAITING,{content:"分享中..."}),egret.setTimeout(this.hideWait,this,e.WAIT_TIMEOUT)},e.prototype.hideWait=function(e){void 0===e&&(e=!1),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING),this._isWaitTipShowing=!1},e.prototype.getImageUrl=function(e,t,i){var n=CCGlobalGameConfig.getCfgByField("urlCfg.shareUrl");CCalien.Ajax.GET(n,{uid:e,scene:t},i,this.onImageUrlError.bind(this))},e.prototype.onImageUrlResult=function(e){var t=JSON.parse(e);console.log(">>>>>>>>>>"+e),0==+t.code?this.shareImage(t.url):(console.log("onImageUrlResult:"+t.code),this.stop(!1))},e.prototype.onImageUrlError=function(e){console.log("onImageUrlError"),this.stop(!1)},e.prototype.shareImage=function(e,t){void 0===t&&(t=CCGlobalWxHelper.SHARE_IMAGE_TO_TIMELINE),CCGlobalWxHelper.shareImageNative(t,this.onShareResult.bind(this),[e])},e.prototype.saveShareResult=function(t){egret.localStorage.setItem(e.SHARE_RESULT_TAG,""+t)},e.prototype.onShareResult=function(e){var t=e.code;this.saveShareResult(t),+t==CCGlobalWxHelper.NATIVE_SHARE_SUCC?this.onShareSucc():this.onShareFailed()},e.prototype.onShareSucc=function(){ccserver.reqShareSuccRew()},e.prototype.onShareFailed=function(){this.stop(!1)},e.prototype.onUserOperateRep=function(e){if(2==e.optype)if(1==e.result)this.stop(!0);else{var t=CCGlobalGameConfig,i=t.getShareRewCfg();if(!i)return;var n=null,o=1,a="恭喜您分享成功获得以下奖励:\n";for(var r in i)n=t.getItemNameById(parseInt(r)),n&&(a+=o+"."+n+"x"+i[r]+"\n");this.stop(!0,a)}},e.prototype.resetShareResult=function(){egret.localStorage.setItem(e.SHARE_RESULT_TAG,"0")},e.prototype.onAlertButton=function(e,t){this.resetShareResult()},e.prototype.stop=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=null),this.hideWait();var n="center";t?null==i?i="分享成功！":n="left":null==i&&(i="分享失败！"),egret.setTimeout(CCDDZAlert.show,this,e.ALERT_DELAY,i,0,this.onAlertButton.bind(this),n)},e.GAME_TYPE_RED=1,e.GAME_TYPE_MATCH=2,e.GAME_TYPE_FAST=3,e.SHARE_RESULT_TAG="shareResultTag",e.SCENE_NORMAL=1,e.SCENE_SPRING=2,e.SCENE_RED_NORMAL=e.SCENE_NORMAL,e.SCENE_RED_BASE=10,e.SCENE_RED_48=e.SCENE_RED_BASE+1,e.SCENE_RED_96=e.SCENE_RED_BASE+2,e.SCENE_RED_192=e.SCENE_RED_BASE+3,e.SCENE_MATCH_NORMAL=e.SCENE_NORMAL,e.SCENE_MATCH_BASE=30,e.SCENE_MATCH_500_RANK_1=e.SCENE_MATCH_BASE+1,e.SCENE_MATCH_500_RANK_2=e.SCENE_MATCH_BASE+2,e.SCENE_MATCH_500_RANK_3=e.SCENE_MATCH_BASE+3,e.SCENE_MATCH_200_RANK_1=e.SCENE_MATCH_BASE+6,e.SCENE_MATCH_200_RANK_2=e.SCENE_MATCH_BASE+7,e.SCENE_MATCH_200_RANK_3=e.SCENE_MATCH_BASE+8,e.SCENE_FAST_NORMAL=e.SCENE_NORMAL,e.SCENE_FAST_BASE=50,e.SCENE_FAST_2=e.SCENE_FAST_BASE+1,e.SCENE_FAST_5=e.SCENE_FAST_BASE+2,e.SCENE_FAST_10=e.SCENE_FAST_BASE+3,e.WAIT_TIMEOUT=15e3,e.ALERT_DELAY=500,e}();__reflect(CCDDZShareImageManager.prototype,"CCDDZShareImageManager");var CCalien;!function(e){var t=function(){function e(){}return e.init=function(e){this.ID=e},e.getName=function(e,t){return void 0===t&&(t=null),(t||!this.ID||""==this.ID?t:this.ID)+"_"+e},e.getItem=function(e,t){return void 0===t&&(t=null),egret.localStorage.getItem(this.getName(e,t))},e.setItem=function(e,t,i){return void 0===i&&(i=null),egret.localStorage.setItem(this.getName(e,i),t)},e.getItemObj=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n;try{n=JSON.parse(this.getItem(e,i))}catch(o){}return n||(n=t),n},e.setItemObj=function(e,t,i){return void 0===i&&(i=null),this.setItem(e,JSON.stringify(t),i)},e.ID="",e}();e.CCDDZlocalStorage=t,__reflect(t.prototype,"CCalien.CCDDZlocalStorage")}(CCalien||(CCalien={}));var CCDDZMySeat=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setRedcoin=function(e,t){this.lbRedCoin&&(this.lbRedCoin.text=e,this.redBgImg.touchEnabled=t)},t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.clean=function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!0),this.imgNoMatchCards.visible=!1,e.prototype.clean.call(this,t,!1)},t.prototype.addCards=function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1),n&&this.handCardGroup.clean(),e.prototype.addCards.call(this,t),this.handCardGroup.addCards(t,i),this.ddzHandCardGroup.updateMyGrayCards()},t.prototype.useCard=function(t,i,n,o){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===o&&(o=!1);var a=e.prototype.useCard.call(this,t,i,n,o);return this.ddzHandCardGroup.updateMyGrayCards(),a},t.prototype.cancelSelect=function(){this.ddzHandCardGroup.cancelSelect()},t.prototype.getSelectPokerIds=function(){return this.ddzHandCardGroup.getSelectedCards()},t.prototype.help=function(){var e=this.ddzHandCardGroup.help();return e},t.prototype.checkType=function(e){return this.ddzHandCardGroup.checkType(e)},t.prototype.showNoMatchCards=function(e){void 0===e&&(e=2e3),this.imgNoMatchCards.visible=!0,this.setShowCardShadow(!0),this._tweenNoMathCards=egret.Tween.get(this.imgNoMatchCards,null,null,!0).to({alpha:1},100).wait(e).call(this.hideNoMathCards,this)},t.prototype.hideNoMathCards=function(){var e=this;this._tweenNoMathCards&&(this._tweenNoMathCards=null,egret.Tween.get(this.imgNoMatchCards,null,null,!0).to({alpha:0},100).call(function(){e.imgNoMatchCards.visible=!1,e.setShowCardShadow(!1)}))},t.prototype.checkCanUse=function(){this.ddzHandCardGroup.checkCanUse()},t}(CCDDZDDZSeat);__reflect(CCDDZMySeat.prototype,"CCDDZMySeat"),window.CCDDZMySeat=CCDDZMySeat;var CCDDZSideSeat=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.addCards=function(t,i){if(void 0===i&&(i=!0),3==t.length&&(t=[0,0,0]),e.prototype.addCards.call(this,t),0==t.length){t=[],this.setCardCount(0);for(var n=0;17>n;n++)t.push(0)}this.handCardGroup.addCards(t,i),this.ddzHandCardGroup.updateOtherGrayCards()},t.prototype.reset=function(t){return this.cardCount=0,e.prototype.reset.call(this,t)},t.prototype.onCardAdded=function(t){e.prototype.onCardAdded.call(this,t),this.cardCount++,this.updateCardCount(this.cardCount),1==ccserver.isCoupleGame?t.parent==this.handCardGroup&&"left"==this.currentState&&this.handCardGroup.removeChild(t):t.parent==this.handCardGroup&&this.handCardGroup.removeChild(t)},t.prototype.setCardCount=function(e){this.cardCount=e,this.ddzHandCardGroup.cardCount=e,this.updateCardCount(e)},t.prototype.updateCardCount=function(t){e.prototype.updateCardCount.call(this,t),this.labCardCount.text=t.toString()},t}(CCDDZDDZSeat);__reflect(CCDDZSideSeat.prototype,"CCDDZSideSeat");var CCDDZBagService=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.bagItemMap={},this.bagItemArray=[]},t.prototype.start=function(t){ccserver.addEventListener(CCGlobalEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this),this.refreshBagInfo(),e.prototype.start.call(this,t)},t.prototype.stop=function(){e.prototype.stop.call(this),ccserver.removeEventListener(CCGlobalEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this)},t.prototype.refreshBagInfo=function(e){void 0===e&&(e=!1),(e||!this._refreshing)&&(this._refreshing=!0,ccserver.getBagInfo())},t.prototype.onBagInfoRep=function(e){var t=this,i=e.data;this._refreshing=!1,this.bagItemArray.forEach(function(e){e.count=0}),i.items.forEach(function(e){t.updateItemByData(e)}),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BAG_INFO_REFRESH,!1)},t.prototype.getItemById=function(e){return this.bagItemMap[e]},t.prototype.getItemCountById=function(e){var t=this.getItemById(e);return t?t.count:0},t.prototype.updateItemByData=function(e){var t;return CCDDZGoodsManager.instance.getGoodsById(e.id)&&(t=this.getItemById(e.id),t||(t=new CCDDZBagItemData,this.bagItemMap[e.id]=t,this.bagItemArray.push(t)),CCalien.CCDDZUtils.injectProp(t,e)),t},t.prototype.updateItemCount=function(e,t){var i=this.getItemById(e);if(i){var n=Math.max(i.count+t,0);return i.count=n,CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BAG_INFO_REFRESH,!1),n}return 0},t}(CCService);__reflect(CCDDZBagService.prototype,"CCDDZBagService");var CCDDZBagItemData=function(){function e(){}return e}();__reflect(CCDDZBagItemData.prototype,"CCDDZBagItemData");var CCDDZCountDownService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._items=[],t._ids=0,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.start=function(t){this._items.splice(0),this._timer>0&&egret.clearInterval(this._timer),this._timer=egret.setInterval(this.onTimer.bind(this),this,1e3),e.prototype.start.call(this,t)},t.prototype.stop=function(){e.prototype.stop.call(this),this._timer>0&&(egret.clearInterval(this._timer),this._timer=0)},t.prototype.register=function(e,t,i){void 0===i&&(i=null);var n=++this._ids;return this._items.push({id:n,second:e,end:ccserver.tsServer+e,onSecond:t,onComplete:i}),t&&t(e),n},t.prototype.unregister=function(e){var t=this;this._items.some(function(i,n){return i.id==e?(t._items.splice(n,1),!0):void 0})},t.prototype.onTimer=function(){var e=this;if(0!=this._items.length){var t=[];this._items.forEach(function(e,i){var n=e.end-ccserver.tsServer,o=e.onSecond;if(o&&o(Math.max(0,n)),0>=n){t.push(i);var a=e.onComplete;a&&a()}}),t.forEach(function(t){e._items.splice(t,1)})}},t.register=function(e,i,n){return void 0===n&&(n=null),t.instance.register(e,i,n)},t.unregister=function(e){t.instance.unregister(e)},t}(CCService);__reflect(CCDDZCountDownService.prototype,"CCDDZCountDownService");var CCDDZExchangeService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selfData=CCDDZMainLogic.instance.selfData,t._showInfoQueen=[],t._oneChouInfo=null,t.matchChampionMsg=[],t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){ccserver._isInDDZ||(ccserver.addEventListener(CCGlobalEventNames.USER_REDCOIN_EXCHANGE_GOODS_REP,this.onExchangeNotify,this),ccserver.addEventListener(CCGlobalEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this,!1,1),ccserver.addEventListener(CCGlobalEventNames.USER_OPERATE_REP,this._onDiamondExchangeRep,this),this._matchMsgReqTimer||(this._matchMsgReqTimer=new egret.Timer(3e4),this._matchMsgReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getMatchChampion,this),this._matchMsgReqTimer.start()),this._redcoinReqTimer||(this._redcoinReqTimer=new egret.Timer(3e4),this._redcoinReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getRedCoinData,this),this._redcoinReqTimer.start()),this._announceReqTimer||(this._announceReqTimer=new egret.Timer(12e4),this._announceReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getAnnouce,this),this._announceReqTimer.start()),this._lotteryReqTimer||(this._lotteryReqTimer=new egret.Timer(6e4),this._lotteryReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getLottery,this),this._lotteryReqTimer.start()),this.getAnnouce(),this.getRedCoinData(),this.getMatchChampion(),this.getLottery())},t.prototype.deleteAnnounce=function(){this.announce=null},t.prototype.delLottery=function(){var e=this.lottery;e?this.lottery={next_id:e.next_id}:this.lottery=null},t.prototype.getData=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i="/notify/redPackets"),t||(t={});var n=CCGlobalGameConfig.WEB_SERVICE_URL+i,o=CCalien.Ajax.GET;o.call(CCalien.Ajax,n,t,function(t){if(CCGlobalGameConfig.DEBUG&&console.log("get:"+t),e){var i=JSON.parse(t);i.code>0&&CCGlobalGameConfig.DEBUG&&console.log(n,i.code,i.message),e(i)}})},t.prototype.getRedCoinData=function(){if(!(this._showInfoQueen&&this._showInfoQueen.length>0)){var e={};this.redcoinhttpMsgId&&(e.id=this.redcoinhttpMsgId),this.getData(function(e){if(0==e.code){var i=e.data||[];if(i&&i.total_items>0){t.instance.redcoinhttpMsgId=i.next_id,t.instance._showInfoQueen=t.instance._showInfoQueen.concat(i.items);var n=t.instance._showInfoQueen.length;t.instance._oneChouInfo=t.instance._showInfoQueen[n-1],CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_PAYCHAT)}}},e)}},t.prototype.getOneChouInfoFromFront=function(e){var i=null,n=t.instance._showInfoQueen;if(e)i=n.shift();else{var o=n.length;if(o>0){n[o-1];n.splice(o-1,1)}}return i},t.prototype.getOneChouMaxInfo=function(){return t.instance._oneChouInfo},t.prototype.getMatchChampion=function(){if(!(this.matchChampionMsg&&this.matchChampionMsg.length>0)){var e={};this.matchhttpMsgId&&(e.id=this.matchhttpMsgId),this.getData(function(e){if(0==e.code){var i=e.data||[];i&&(t.instance.matchhttpMsgId=i.next_id||0,t.instance.matchChampionMsg=t.instance.matchChampionMsg.concat(i.items),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_PAYCHAT))}},e,"/notify/matchChampionMsg")}},t.prototype.getAnnouce=function(){var e={};this.getData(function(e){0==e.code&&(t.instance.announce=e.data,t.instance.announce&&t.instance.announce.length>0&&(CCDDZMainLogic.instance.selfData.addSysTalkRec(t.instance.announce),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_ANNOUNCE)))},e,"/msg/notice")},t.prototype.getLottery=function(){var e=this,t={};this.lottery&&(t.id=this.lottery.next_id),this.getData(function(t){0==t.code&&(e.lottery=t.data,e.lottery&&e.lottery.nickname&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_LOTTERY))},t,"/lottery/roll")},t.prototype._alertWithFollowCourse=function(e,t){var i=CCDDZPanelAlert3.instance,n=0,o=t.toHistory,a=t.toRedCourse;o||(n=1),i.show(e,n,function(e){if(o&&CCDDZPanelExchange2.instance.show(5),"cancel"==e&&a){var t=CCGlobalGameConfig.getCfgByField("custom.redFollowUrl");CCGlobalGameConfig.toUrl(t)}}),a&&(i.btnCancel.labelIcon="cc_room_getRedCourse")},t.prototype.onExchangeRedSucc=function(){var e="兑换"+this._exchangeInfo.amount+"微信红包成功，请在(好手气斗地主)公众号领取";this._alertWithFollowCourse(e,{toRedCourse:!0})},t.prototype.onExchangeHuaFeiSucc=function(){var e="兑换"+this._exchangeInfo.amount+"元话费成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(e,{toHistory:!0})},t.prototype.onExchangeHFKSucc=function(){var e="兑换"+this._exchangeInfo.amount+"元话费充值卡成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(e,{toHistory:!0})},t.prototype.onExchangeJDKSucc=function(){var e="兑换"+this._exchangeInfo.amount+"元京东卡成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(e,{toHistory:!0})},t.prototype.onExchangeAliSucc=function(){var e="兑换"+this._exchangeInfo.amount+"支付宝红包成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(e,{toHistory:!0})},t.prototype.onExchangeDiamondSucc=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg.diamondsCode");if(1==e){var t="兑换"+this._exchangeInfo.num+"钻石成功,请到<font color=0xff0000>兑换记录</font>领取";this._alertWithFollowCourse(t,{toHistory:!0})}else CCDDZAlert3.show("兑换"+this._exchangeInfo.num+"钻石成功",this.onConfirm,"cc_common_btn_lab_confirm_n")},t.prototype.onExchangeNotify=function(e){var t=e.data;switch(t.result){case 0:this._exchangeInfo?(1==this._exchangeInfo.goodsid?this.onExchangeRedSucc():4==this._exchangeInfo.goodsid?this.onExchangeHuaFeiSucc():6==this._exchangeInfo.goodsid?this.onExchangeHFKSucc():5==this._exchangeInfo.goodsid?this.onExchangeJDKSucc():7==this._exchangeInfo.goodsid?this.onExchangeAliSucc():3==this._exchangeInfo.item_type?this.onExchangeDiamondSucc():1==this._exchangeInfo.item_type&&CCDDZAlert3.show("兑换"+this._exchangeInfo.num+"金豆成功",this.onConfirm,"cc_common_btn_lab_confirm_n"),this._exchangeInfo.first?(CCDDZMainLogic.instance.selfData.rcminexcchanceused=1,CCDDZMainLogic.instance.selfData.rcminexcexpiretime=null,CCDDZPanelExchange2.instance.flashData(!0)):CCDDZPanelExchange2.instance.flashData()):CCDDZAlert3.show(lang.exchange_redcoin[t.result],this.onConfirm,"cc_common_btn_lab_confirm_n");break;case 1:CCDDZAlert3.show(lang.exchange_redcoin[t.result],this.onConfirm,"cc_common_btn_lab_confirm_n");break;case 2:CCDDZAlert3.show(lang.exchange_redcoin[t.result],this.onConfirm,"cc_common_btn_lab_confirm_n");break;case 3:CCDDZAlert3.show(lang.exchange_redcoin[t.result],this.onConfirm,"cc_common_btn_lab_confirm_n");break;case 4:CCDDZAlert3.show(lang.exchange_redcoin[t.result],null,"cc_common_btn_lab_confirm_n")}this._exchangeInfo=null},t.prototype.onConfirm=function(){},t.prototype.onLotteryRedCoinRep=function(e){var t=this;if(!ccserver._isInDDZ){var i=e.data;switch(i.result){case 0:i.coin&&i.coin>0?(ccserver.getRedcoinRankingListReq(),CCDDZAlert.show("恭喜获得"+CCDDZUtils.exchangeRatio(i.coin/100,!0)+"奖杯!"),this._selfData.wincnt.forEach(function(e,i){null!=t.lotteryIndex&&t.lotteryIndex==e.roomid&&(e.chance-=1,CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_RED_COUNT_CHANGE,{count:e.chance}))})):i.gold&&i.gold>0&&CCDDZAlert.show("恭喜获得"+i.gold+"金豆!");break;case 1:CCDDZAlert.show("配置不存在");break;case 2:CCDDZAlert.show("抽奖次数不足")}this.lotteryIndex=null}},t.prototype.onPay2ChatRep=function(e){var t=e.data;3==t.type&&(this._showInfoQueen.push(t),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_PAYCHAT))
},t.prototype.doRedExchange=function(e){this._exchangeInfo=e,e.money>0||e.coin>0?ccserver.redcoinExchangeGoodsReq(e.id):e.diamond&&e.diamond>0&&ccserver.diamondExchangeGoodsReq(e.id)},t.prototype.doChouWangZha=function(){var e=CCDDZMainLogic.instance.selfData.getWangZhaRedNum();return e>0?(ccserver.reqWangZhaRedRew(),!0):!1},t.prototype.doChouNewGold=function(){var e=CCDDZMainLogic.instance.selfData.getNewGoldRed();return e.length>=2&&e[1]>0?(ccserver.reqNewGoldRedRew(),!0):!1},t.prototype.doChou=function(e){null==this.lotteryIndex&&(this.lotteryIndex=e,ccserver.lotteryRedCoinReq(e))},t.prototype._onDiamondExchangeRep=function(e){var t=e.data;t&&1==t.optype&&null==t.result&&CCDDZAlert3.show("兑换"+this._exchangeInfo.num+"金豆成功",this.onConfirm,"cc_common_btn_lab_confirm_n")},t}(CCService);__reflect(CCDDZExchangeService.prototype,"CCDDZExchangeService");var CCDDZInviteService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadCount=8,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._source=[],this._reqAmount=0,this._total_page=0,this._complete_amount=0},t.prototype.getData=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i="get"),t||(t={}),t.uid=ccserver.uid,t.token=CCGlobalUserData.instance.getToken(),t.limit=this._loadCount;var n=CCGlobalGameConfig.WEB_SERVICE_URL+"/user/sharelist",o="post"==i?CCalien.Ajax.POST:CCalien.Ajax.GET;o.call(CCalien.Ajax,n,t,function(t){if(CCGlobalGameConfig.DEBUG&&console.log("get:"+t),e){var i=JSON.parse(t);i.code>0&&CCGlobalGameConfig.DEBUG&&console.log(n,i.code,i.message),e(i)}})},t.prototype.clearInvitePlayersList=function(){this._source=[],this._reqAmount=0,this._total_page=0},t.prototype.getInvitePlayersList=function(e){var i=this;if(void 0===e&&(e=0),0==e&&(e=this._reqAmount+1),!(this._reqAmount>=e||this._reqAmount>this._total_page)){var n={page:e};this.getData(function(n){if(0==n.code){i._reqAmount=e>i._reqAmount?e:i._reqAmount;var o=n.data||[];o&&(i._complete_amount=o.total_items_finished,t.instance.source=i._source.concat(o.current_items),t.instance.total_page=o.total_page),i.dispatchEventWith(CCGlobalEventNames.INVITE_DATA_REFRESH,!1,i._source)}},n)}},t.prototype.getInviteRankList=function(){var e=this;ccddzwebService.getInviteRankList(function(t){e.dispatchEventWith("INVITE_RANK_LIST",!1,t)})},Object.defineProperty(t.prototype,"total_page",{set:function(e){this._total_page=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(e){this._source=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"complete_amount",{get:function(){return this._complete_amount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"haveMore",{get:function(){return this._haveMore},enumerable:!0,configurable:!0}),t}(CCService);__reflect(CCDDZInviteService.prototype,"CCDDZInviteService");var CCDDZMailService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadCount=10,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._source=[],this._unReadList=[],this._readList=[],this._curPage=0,this._unreadCount=0,this._timer=new egret.Timer(6e5),this._isReqMailList=!1;var e=CCalien.CCDDZEventManager.instance,t=egret.getQualifiedClassName(this);e.register(t,ccserver,CCGlobalEventNames.USER_MailGetReward_REP,this.onMailGetRewardResponse,this),e.register(t,this._timer,egret.TimerEvent.TIMER,this.onCheckTimer,this)},t.prototype.start=function(t){this._source=[],this._unreadCount=0,this._haveMore=!1,this.getMailList(),CCalien.CCDDZEventManager.instance.enable(egret.getQualifiedClassName(this)),this._timer.reset(),this._timer.start(),e.prototype.start.call(this,t)},t.prototype.stop=function(){CCalien.CCDDZEventManager.instance.disable(egret.getQualifiedClassName(this)),this._timer.stop()},t.prototype.onCheckTimer=function(e){void 0===e&&(e=null),this.checkMail(),ccddzwebService.getRanklist()},t.prototype.callMailApi=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n="get"),i=i||{},i.uid=ccserver.uid,ccddzwebService.callApi("msg",e,t,i,n)},t.prototype.checkMail=function(){var e=this;this._isReqMailList=!1,this.callMailApi("checkmail",function(t){0==t.code&&(e._unreadCount=parseInt(t.data.unread_count),e.getMailList())})},t.prototype.getUnreadCount=function(){var e=this;this.callMailApi("count",function(t){0==t.code&&(e._unreadCount=parseInt(t.data.count),e.updateUnreadCount())},{})},t.prototype.shouldLoadMore=function(){this._haveMore&&this.getMailList(this._curPage+1)},t.prototype.getMailList=function(e){var t=this;if(void 0===e&&(e=0),!this._isReqMailList){this._isReqMailList=!0;var i={page:e};this.callMailApi("index",function(e){if(t._isReqMailList=!1,0==e.code){var i=e.data;if(!i||!i.items||i.items.length<1)return;t._curPage=i.page,t._totalPage=i.total_page;var n=i.items||[],o=n.length;if(t._unreadCount=i.un_read_count,t.updateUnreadCount(),o>0){for(var a=0;o>a;++a)t.addMailItem(n[a]);t.checkTipMailDetail()}t._haveMore=i.page<i.total_page,t.dispatchEventWith(CCGlobalEventNames.MAIL_LIST_REFRESH,!1)}},i)}},t.prototype.checkTipMailDetail=function(){for(var e=this._unReadList,t=0;t<e.length;++t)if(4==e[t].type){if(0==e[t].status)return this._unreadCount>1&&CCDDZPanelMail.getInstance().show(),void CCDDZPanelMail.getInstance().tipOpenMailItem(e[t])}else if(5==e[t].type&&0==e[t].status)return void CCDDZPanelMail.getInstance().tipOpenMailItem(e[t])},t.prototype.openMail=function(e){var t=this;this.callMailApi("update",function(i){if(0==i.code){t.updateUnreadCount(-1);var n,o=-1;t._unReadList.some(function(t,i){return t.id==e?(n=t,o=i,!0):void 0}),n&&(t._unReadList.splice(o,1),n.status=1,t.addMailItem(n,!0),t.dispatchEventWith(CCGlobalEventNames.MAIL_LIST_REFRESH,!1))}},{id:e,status:1},"post")},t.prototype.getReward=function(e){ccserver.reqMailGetRew(e)},Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),t.prototype._checkListHasItem=function(e,t){for(var i=e,n=i.length,o=0;n>o;++o)if(i[o].id==t.id)return{idx:o,has:!0};return null},t.prototype.addMailItem=function(e,t){if(void 0===t&&(t=!1),e.sendtime=parseInt(e.sendtime),e.id=parseInt(e.id),e.type=parseInt(e.type),e.status=parseInt(e.status),e.readtime=Number(e.readtime),e.gettime=Number(e.gettime),"string"==typeof e.attachment&&(e.attachment=CCDDZUtils.parseGoodsString(e.attachment)),0!=e.status&&(t=!0),t){var i=this._checkListHasItem(this._readList,e);i?this._readList[i.idx].gettime=e.gettime:this._readList.push(e),this._readList.sort(function(e,t){return t.gettime-e.gettime})}else{var i=this._checkListHasItem(this._unReadList,e);i?this._unReadList[i.idx].gettime=e.gettime:this._unReadList.push(e)}this._source=[],this._source=this._source.concat(this._unReadList,this._readList)},t.prototype.onMailGetRewardResponse=function(e){var t=e.data;if(0==t.result){CCDDZToast.show("领取成功！");var i,n=-1;this._unReadList.some(function(e,o){return e.id==t.id?(i=e,n=o,!0):void 0}),i&&(this._unReadList.splice(n,1),i.status=2,this.updateUnreadCount(-1),this.addMailItem(i,!0),this.dispatchEventWith(CCGlobalEventNames.MAIL_LIST_REFRESH,!1),CCDDZBagService.instance.refreshBagInfo(),CCDDZPanelMailDetails.getInstance().close())}else CCDDZToast.show("领取失败！")},t.prototype.updateUnreadCount=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0),this._unreadCount+=e,this._unreadCount<0&&(this._unreadCount=0),t&&this.dispatchEventWith(CCGlobalEventNames.MAIL_UNREAD_UPDATE,!1,{count:this._unreadCount})},Object.defineProperty(t.prototype,"unreadCount",{get:function(){return this._unreadCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"haveMore",{get:function(){return this._haveMore},enumerable:!0,configurable:!0}),t}(CCService);__reflect(CCDDZMailService.prototype,"CCDDZMailService");var CCDDZSoundManager=CCalien.CCDDZSoundManager,CCDDZMatchService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._checkCount=0,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextPlayerCount",{get:function(){return this._nextPlayerCount},enumerable:!0,configurable:!0}),t.prototype.init=function(){ccserver._isInDDZ||(this.myUserInfoData=CCDDZMainLogic.instance.selfData,this._watchedRooms=[],this._matchTopNotify=CCalien.CCDDZUtils.parseColorTextFlow(lang.match_top_notify),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_REP,this.onMatchSignUpRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_START_NTF,this.onMatchStartNtf,this),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),ccserver.addEventListener(CCGlobalEventNames.USER_GIVE_UP_MATCH_REP,this.onGiveUpMatchRep,this),ccserver.addEventListener(CCGlobalEventNames.GAME_GAME_START_NTF,this.onGameStart,this,!1,1e3),ccserver.addEventListener(CCGlobalEventNames.GAME_GAME_END,this.onGameEnd,this),ccserver.addEventListener(CCGlobalEventNames.GAME_LEAVE_TABLE,this.onLeaveTable,this),ccserver.addEventListener(CCGlobalEventNames.GAME_RECONNECT_REP,this.onReconnectRep,this))},t.prototype.initData=function(){ccserver._isInDDZ||e.prototype.initData.call(this)},t.prototype.start=function(t){ccserver._isInDDZ||(this._playerInMatch=1e6,this._checkCount=0,this._watchedRooms.splice(0),this._timer>0&&egret.clearInterval(this._timer),this._initDefaultInfo(),this._timer=egret.setInterval(this.onTimer.bind(this),this,1e3),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),this.checkMatchStatus(),e.prototype.start.call(this,t))},t.prototype.stop=function(){e.prototype.stop.call(this),this._timer>0&&egret.clearInterval(this._timer),this._idTopNotify>0&&(egret.clearInterval(this._idTopNotify),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_TOP_NOTIFY))},Object.defineProperty(t.prototype,"scoreGetOut",{get:function(){return this._scoreGetOut},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTurn",{get:function(){return this._currentTurn},set:function(e){this._currentTurn=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPlay",{get:function(){return this._currentPlay},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMatchMode",{get:function(){return this._currentMatchMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"countPromote",{get:function(){return this._countPromote},enumerable:!0,configurable:!0}),t.prototype._showSignMatchSucc=function(e,t){var i="   "+e.name+"报名成功，请您准时参加。\n（比赛还有{2}小时{1}分钟开始，开赛前有提示）",n=ccserver.tsNow,o=t.nextTs;i=CCalien.TimeUtils.timeFormat(o-n,i),CCDDZAlert.show(i)},t.prototype.onMatchSignUpRep=function(e){var t=e.data;if(t.result>0)if(8==t.result)CCDDZPanelMatchSignUp.instance.close(),CCDDZPanelRechargeTips.instance.show();else if(16==t.result){var i=CCGlobalGameConfig.getRoomConfigByMatchId(t.matchid);CCDDZAlert.show(CCalien.StringUtils.formatApply(lang.match_sign_up_result[16],[i.maxOwnGoldLimit,i.name]))}else 5==t.result||CCDDZAlert.show(lang.match_sign_up_result[t.result]);else{CCDDZBagService.instance.refreshBagInfo();var i=CCGlobalGameConfig.getRoomConfigByMatchId(t.matchid);switch(t.optype){case 1:if(i.is_signup=1,ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),CCDDZPanelMatchSignUp.instance.close(),i.hasOwnProperty("startDate")){var n=this.addWatchRoom(i);this._showSignMatchSucc(i,n)}else CCDDZPanelMatchWaiting.instance.show(i);break;case 2:i.is_signup=0,i.hasOwnProperty("startDate")?(this._idTopNotify>0&&(egret.clearInterval(this._idTopNotify),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_TOP_NOTIFY)),this.removeWatchRoom(i),CCDDZPanelMatchCountDown.instance.close(),CCDDZPanelMatchNotice.instance.close()):CCDDZPanelMatchWaiting.instance.close()}CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.REFRESH_MATCH_LIST,t)}},t.prototype._initDefaultInfo=function(){this._currentMatchMode=0,this._currentTurn=0,this._currentPlay=0,this._countPromote=0,this._playerInMatch=1e6,this._nextPlayerCount=0},t.prototype.onMatchStartNtf=function(e){var t=e.data;this._initDefaultInfo();var i=CCGlobalGameConfig.getRoomConfigByMatchId(t.matchid);i.stage.length>1&&this.updateScoreGetOut(t.matchid),CCDDZSceneManager.instance.currentSceneName==CCGlobalSceneNames.PLAY&&CCDDZMainLogic.backToRoomScene(),ccserver.resetSession(),i.hasOwnProperty("startDate")&&(CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_TOP_NOTIFY),CCGlobalGameConfig.roomList.forEach(function(e){!e.hasOwnProperty("startDate")&&e.is_signup>=1&&ccserver.giveUpMatch(e.matchId)})),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{roomID:t.matchid},CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype.onMatchEndCheckRemoveMatchInfoNtf=function(e){CCGlobalGameConfig.setMatchSignupFlag(e.matchid,0);CCGlobalGameConfig.anyMatchSignuped()||ccserver.removeEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this)},t.prototype.onMatchInfoNtf=function(e){var i=e.data,n=CCGlobalGameConfig.getRoomConfigByMatchId(i.matchid),o=null;switch(o=n&&n.stage?n.stage:[{handCount:6}],i.optype){case-1:var a=CCGlobalGameConfig.getRoomConfigByMatchId(i.matchid);i.params&&i.params[0]&&i.params[0]>0&&CCDDZAlert.show("您报名的"+a.name+"因人数不足比赛取消\n报名费用"+i.params[0]+"已通过邮件退还");break;case-2:var a=CCGlobalGameConfig.getRoomConfigByMatchId(i.matchid);a&&CCDDZAlert.show("您报名的"+a.name+"已更新\n请在开赛前重新登录游戏 感谢您的配合");break;case 100:if(this._currentMatchMode=i.params[0],!i.params[1]){var r=1;2==this._currentMatchMode&&(r=o[1==o.length?0:1].handCount),CCDDZPanelBeforeMatch.instance.show(o.length,this._currentMatchMode,r),CCDDZPanelMatchWaitingInner.instance.close()}break;case 101:!this._matchover&&ccserver.isMatch&&egret.setTimeout(function(){var e=(CCGlobalGameConfig.getRoomConfigByMatchId(i.matchid),t.instance._currentTurn+1+2);i.params.length>e&&t.instance.checkMatchWaiting(i.params[e])},this,6e3);break;case 102:this._matchover=!0,this._timerWaiting>0&&(egret.clearTimeout(this._timerWaiting),this._timerWaiting=0),CCDDZPanelMatchWaitingInner.instance.close();break;case 103:this._countPromote=i.params[0],this._currentTurn=i.params[1],this._currentPlay=0;break;case 104:this._playerInMatch=i.params[1],this._nextPlayerCount=i.params[2],1==this._currentMatchMode&&this.checkMatchWaiting(this._playerInMatch);break;case 105:this.updateScoreGetOut(i.matchid,i.params[0]);break;case 106:this._currentTurn=i.params[0],this._currentPlay=i.params[1],this._countPromote=i.params[2],console.log("currentTurn",this._currentTurn,"currentPlay",this._currentPlay)}this.dispatchEvent(e)},t.prototype.updateScoreGetOut=function(e,t){void 0===t&&(t=-1);var i=CCGlobalGameConfig.getRoomConfigByMatchId(e);if(console.log("updateScoreGetOut--------------------->",this._currentMatchMode,this._currentPlay),3==this._currentMatchMode){var n=i.stage[0].kickScore,o=this._currentPlay-1,a=n.length;0>o?o=0:o>=a&&(o=a-1),this._scoreGetOut=n[o]}else{-1==t&&(t=i.stage[0].baseScore[0][1]);var r=i.stage[0].kickOutOdds;this._scoreGetOut=t*r}console.log("scoreGetOut :"+this._scoreGetOut)},t.prototype.onGameStart=function(e){ccserver.isMatch&&(this._matchover=!1,this._currentPlay++,3==this._currentMatchMode&&this.updateScoreGetOut(ccserver.roomInfo.matchId))},t.prototype.onGameEnd=function(e){ccserver.isMatch&&this.checkMatchWaiting(this._nextPlayerCount,!0)},t.prototype.onLeaveTable=function(e){ccserver.isMatch},t.prototype.onReconnectRep=function(e){ccserver.isMatch&&this.checkMatchWaiting()},t.prototype.checkMatchWaiting=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!1),!ccserver.playing&&CCalien.CCDDZSceneManager.instance.currentSceneName==CCGlobalSceneNames.PLAY&&!this._matchover)if(console.log("checkMatchWaiting currentMatchMode:",this._currentMatchMode,t),2==this._currentMatchMode)t||CCDDZPanelMatchWaitingInner.instance.show(e);else if(ccserver.roomInfo&&ccserver.roomInfo.stage&&2==ccserver.roomInfo.stage.length){var i=ccserver.roomInfo.stage[1].playerIn;this._playerInMatch<=i?CCDDZPanelMatchWaitingInner.instance.show(i):t&&CCDDZPanelMatchWaitingInner.instance.show()}},t.prototype.onMatchSignUpInfoRep=function(e){var t=e.data;if(t.is_signup)this.onCheckMatchStatus(t.matchid,t.is_signup);else if(this._checkCount--,this._checkCount<=0)return this.onCheckMatchStatus(0),void ccserver.removeEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this)},t.prototype.onPanelMatchResultClose=function(){CCalien.CCDDZSceneManager.instance.currentSceneName!=CCGlobalSceneNames.ROOM&&CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,null,CCalien.CCDDZsceneEffect.CCDDFade,null,null,!1,CCGlobalSceneNames.LOADING)},t.prototype.onGiveUpMatchRep=function(e){var t=e.data;0==t.result},t.prototype.checkMatchStatus=function(){var e=this;CCGlobalGameConfig.roomList.forEach(function(t){2!=t.roomType||t.ads||(e._checkCount++,ccserver.getMatchSignUpInfo(t.matchId))})},t.prototype.onCheckMatchStatus=function(e,t){if(void 0===t&&(t=0),e>0){var i=CCGlobalGameConfig.getRoomConfigByMatchId(e);switch(t){case 1:if(i.hasOwnProperty("startDate"))this.addWatchRoom(i);else{var n=CCDDZPanelMatchWaiting.instance;n.isWaitingShow()||n.show(i)}break;case 2:this.setInMatch(),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{roomID:e,action:"reconnect"},CCalien.CCDDZsceneEffect.CCDDFade)}}CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING)},t.prototype.addWatchRoom=function(e){var i=t.getNextTurn(e);return this._watchedRooms.push({roomInfo:e,nextTurn:i}),i},t.prototype.removeWatchRoom=function(e){var t=this;this._watchedRooms.some(function(i,n){return i.roomInfo==e?(t._watchedRooms.splice(n,1),!0):void 0})},t.prototype.onTimer=function(){var e=this,t=[];this._watchedRooms.forEach(function(i,n){var o=i.nextTurn.nextTs-ccserver.tsNow;0>=o&&t.push(n),30>=o&&(i.notifyWhen30||(i.notifyWhen30=!0,CCDDZPanelMatchNotice.instance.show(i.roomInfo,o),CCDDZSoundManager.instance.vibrate())),300>=o&&(i.notifyWhen300||(i.notifyWhen300=!0,e._matchTopNotify[1].text=i.roomInfo.name,CCDDZCountDownService.unregister(e._idTopNotify),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_TOP_NOTIFY,{content:function(t){e._idTopNotify=CCDDZCountDownService.register(o,function(i){e._matchTopNotify[3].text=CCalien.TimeUtils.timeFormat(i),t.textFlow=e._matchTopNotify})},onTap:function(){CCDDZCountDownService.unregister(e._idTopNotify)},showButton:!0})))}),t.forEach(function(t){e._watchedRooms.splice(t,1)})},t.prototype.signUp=function(e,t){ccserver.matchSignUp(e.matchId,1,t)},t.prototype.cancelMatch=function(e){ccserver.matchSignUp(e.matchId,2)},t.prototype.setInMatch=function(){ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this)},t.prototype.isMatchOver=function(){return this._matchover},t.getRewardStringByRank=function(e,t,i){return void 0===t&&(t=1),void 0===i&&(i=" "),this.rewardToString(this.makeRewardTextFlow(this.getRewardByRank(e,t)),i)},t.getRewardStringBy205=function(e){var t=this.getRewardByRank(e,1),i=e.rewardredcoinpool,n=0;for(var o in i)i[o][1]>=n&&(n=i[o][1]);return n/=100,"最高"+(t[0].count+n)+"奖杯"},t.makeRewardTextFlow=function(e){var t=[];return e&&e.forEach(function(e){var i=e.count;0==e.id&&(i=CCDDZUtils.currencyRatio(i)),1==e.id?t.push(i+"奖杯"):t.push(CCDDZGoodsManager.instance.getGoodsById(e.id).name+"x"+i)}),t},t.rewardToString=function(e,t){return void 0===t&&(t=" "),e.join(t)},t.getNextTurn=function(e){var t=ccserver.tsNow,i=-1;e.cycleTimeStamp.some(function(e,n){return e>t?(i=n,!0):void 0});var n,o,a=0,r="";if(0>i){i=0;var s=ccserver.tsToday+86400;r=CCalien.TimeUtils.tsToMonthDayString(s),a=86400}return n=r+" "+e.cycleTime[i],o=e.cycleTimeStamp[i]+a,e.nextIndex=i,{nextTime:n,nextIndex:i,nextTs:o}},t.getRewardByRank=function(e,t){void 0===t&&(t=1);var i;return e.reward.some(function(e){return e.rankend>=t&&e.rankstart<=t?(i=CCDDZUtils.parseGoodsString(e.reward),!0):void 0}),i},t}(CCService);__reflect(CCDDZMatchService.prototype,"CCDDZMatchService");var CCDDZPersonalGameHistory=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadCount=8,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._source=[],this._reqAmount=0,this._total_page=0},t.prototype.getData=function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i="get"),t||(t={}),t.uid=ccserver.uid,t.token=CCGlobalUserData.instance.getToken(),t.limit=this._loadCount;var n=CCGlobalGameConfig.WEB_SERVICE_URL+"/user/gamelist",o="post"==i?CCalien.Ajax.POST:CCalien.Ajax.GET;o.call(CCalien.Ajax,n,t,function(t){if(CCGlobalGameConfig.DEBUG&&console.log("get:"+t),e&&t){var i=JSON.parse(t);i.code>0&&CCGlobalGameConfig.DEBUG&&console.log(n,i.code,i.message),e(i)}})},t.prototype.clearDataList=function(){this._source=[],this._reqAmount=0,this._total_page=0},t.prototype.getDataList=function(e){var i=this;if(void 0===e&&(e=0),0==e&&(e=this._reqAmount+1),!(this._reqAmount>=e||this._reqAmount>this._total_page)){var n={page:e};this.getData(function(n){if(0==n.code){t.instance.reqAmount=e>t.instance.reqAmount?e:t.instance.reqAmount;var o=n.data||[];o&&o.items&&o.items.length>0&&(t.instance.source=i._source.concat(o.items),t.instance.total_page=o.total_page),i.dispatchEventWith(CCGlobalEventNames.PGAME_RECORD_DATA_REFRESH,!1,i._source)}},n)}},Object.defineProperty(t.prototype,"reqAmount",{get:function(){return this._reqAmount},set:function(e){this._reqAmount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total_page",{set:function(e){this._total_page=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(e){this._source=e},enumerable:!0,configurable:!0}),t}(CCService);__reflect(CCDDZPersonalGameHistory.prototype,"CCDDZPersonalGameHistory");var CCDDZRechargeService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isWaitTipShowing=!1,t._rechargeTit=(i={},i[10011]="60钻石",i[10012]="180钻石",i[10013]="300钻石",i[10014]="550钻石",i[10015]="1200钻石",i[10001]="10000金豆",i[10002]="30000金豆",i[10003]="100000金豆",i[10004]="200000金豆",i[10005]="500000金豆",i[10006]="1100000金豆",i[10007]="首充礼包",i[10042]="钻石首充礼包",i[10043]="12元月卡",i[10044]="30元月卡",i[80001]="记牌器1天特权",i[80002]="记牌器3天特权",i[80003]="记牌器7天特权",i[10009]="复活礼包",i[10016]="复活礼包",i[10017]="双11礼包",i[10018]="感恩节礼包",i[10019]="感恩节礼包",i[10020]="感恩节礼包",i[10021]="新年礼盒",i[10022]="复活礼包",i[10023]="复活礼包",i[10024]="复活礼包",i[10025]="复活礼包",i[10026]="复活礼包",i[10027]="复活礼包",i[10028]="复活礼包",i[10032]="复活礼包",i[10033]="复活礼包",i[10029]="复活礼包",i[10030]="复活礼包",i[10031]="复活礼包",i[10034]="复活礼包",i[10035]="复活礼包",i[10036]="复活礼包",i[10037]="复活礼包",i[10038]="复活礼包",i[10039]="复活礼包",i[10040]="复活礼包",i[10041]="复活礼包",i[10050]="复活礼包",i[10051]="复活礼包",i[10046]="周一特惠",i),t;var i}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){ccserver.addEventListener(CCGlobalEventNames.USER_RECHARGE_RESULT_NOTIFY,this.onRechargeResultNotify,this)},t.prototype.onRechargeResultNotify=function(e){var t=e.data;if(0==t.result){var i=t.productid;this._rechargeTit[i]&&(CCDDZAlert.show("购买"+this._rechargeTit[i]+"成功!"),10042==i&&(CCDDZPanelAct.getInstance().refreshActList(),CCDDZPanelDiaFirRecharge.nullInstance()),(10043==i||10044==i)&&CCDDZPanelMonthCard.instance._refreshMonthCardInfo());var n=CCDDZMainLogic.instance.selfData;n.addPayCount(),n.setHasPayToday(1)}},t.prototype.doRecharge=function(e){ccddzwebService.rechagre(e)},t}(CCService);__reflect(CCDDZRechargeService.prototype,"CCDDZRechargeService");var CCLoginService=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._reconnectLoginInterval=0,t._loginData={uid:0,token:""},t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t,this._instance.init()),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){ccserver.addEventListener(CCGlobalEventNames.USER_LOGIN_RESPONSE,this._onLoginResponse,this),ccserver.addEventListener(CCGlobalEventNames.CONNECT_SERVER,this._onConnectToServer,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.ACCOUNT_ERROR,this._onAccountError,this)},t.prototype._openNewWindow=function(e,t,i,n){var o=null,a=(window.screen.availHeight-30-n)/2,r=(window.screen.availWidth-10-i)/2;o=window.open(e,t,"height="+n+",innerHeight="+n+",width="+i+",innerWidth="+i+",top="+a+",left="+r+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no")},t.prototype._onConnectToServer=function(e){ccserver.login(this._loginData.uid,this._loginData.token)},t.prototype._onLoginResponse=function(e){var t=e.data;switch(this._clearReconnectInterval(),t.code){case 0:this._setCanReconnect(!0),CCGlobalGameConfig.getExAliRedInfo(),CCGlobalGameConfig.initGameUrlsCfg(function(){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.LOGIN_SUCCESS),ccserver.checkReconnect()});break;default:CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING),105==t.errorId?CCDDZToast.show(CCalien.StringUtils.format(lang.loginError[1100],lang.loginError[t.errorId]+" uid  "+this._loginData.uid)):CCDDZToast.show(CCalien.StringUtils.format(lang.loginError[1100],lang.loginError[t.errorId])),this._onAccountError(),103==t.errorId?this.doRelogin():CCDDZSceneLoading.setLoadingText("验证登录失败:"+t.errorId)}},t.prototype._doRedirectH5WX=function(e,t){window.top.redirectWX(e)},t.prototype.onVerifyResponse=function(e){if(e)if(console.log("onVerifyResponse====>",e.code),e.hasOwnProperty("code")){var t=e.code;if(6666==e.code){var i=e.data.unionid,n=e.data.url;return void(CCalien.Native.instance.isNative||this._doRedirectH5WX(i,n))}if(2020==e.code){var o=e.data;return o.showClose=!1,void CCDDZPanelBindPhone.getInstance().show(1,o,function(){CCDDZMainLogic.instance.doRestartGame()})}0==t?this.tryLogin(e.data):(CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING),t>10&&CCDDZToast.show(lang.loginError[t]+" "+JSON.stringify(e.data)),CCDDZSceneLoading.setLoadingText("授权失败:"+t))}else this.tryLogin(e);else CCDDZToast.show(lang.loginError[2013]),CCDDZSceneLoading.setLoadingText("授权失败"),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING)},t.prototype.tryLogin=function(e){this._loginData=e;var t=CCGlobalUserData.instance;t.setUid(this._loginData.uid),t.setSk(this._loginData.sk),t.setItem("username",this._loginData.username),t.setItem("type",this._loginData.type),t.setBindPhone(this._loginData.bindinfo),t.saveLocalPhone(e.phone),t.setToken(this._loginData.token,!0);var i=this._loginData.uid;CCalien.Native.instance.isNative&&"Android"==egret.Capabilities.os&&CCalien.Native.instance.getAppChannelId(function(e){ccddzwebService.doBindChannel(i,e)}),this._loginData.sk||CCDDZReportor.instance.reportCodeError("sk error tryLogin"),ccddzwebService.doUserInit(this._loginData.uid),CCGlobalWxHelper.doWebH5ShareCfg(),CCGlobalGameConfig.initServer(e.server),CCDDZSceneLoading.setLoadingText("验证登录中。。。"),ccserver.connect()},t.prototype.doWebWXLogin=function(){var e=CCalien.Native.instance,t=e.getUrlArg(),i=t.wx_code;if(i&&"null"!=i){var n=t.share_sk;n||(n=""),CCDDZSceneLoading.setLoadingText("微信授权。。。");var o=CCalien.Native.instance,a=o.getUrlArg(),r="cn.htgames.doudizhu.wechat",s=null;a.unionid&&0!=a.unionid&&(s=a.unionid,r="cn.htgames.doudizhu.wechat.new"),"1"==a.oldWx&&(r="cn.htgames.doudizhu.wechat_old"),o.isWxQr()&&(r="cn.htgames.doudizhu.qrcode"),ccddzwebService.loginByWxFromWechat(i,n,s,r,this.onVerifyResponse.bind(this))}},t.prototype.doWebAliLogin=function(){var e=CCalien.Native.instance,t=e.getUrlArg(),i=t.ali_code;if(i&&"null"!=i){var n=t.share_sk;n||(n="");var o=CCalien.Native.instance,a=o.getUrlArg(),r=null;a.unionid&&0!=a.unionid&&(r=a.unionid),ccddzwebService.loginByAliH5(i,n,r,this.onVerifyResponse.bind(this))}},t.prototype.doAppWxLogin=function(){var e=this;ccddzwebService.loginWXApp(function(t){e.onVerifyResponse(t)})},t.prototype._onTryConnectError=function(){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING)},t.prototype._hasLocalUidAndToken=function(){var e=CCGlobalUserData.instance,t=e.getUid(),i=e.getToken();return null!=t&&null!=i},t.prototype.checkLocalToken=function(){var e=CCGlobalUserData.instance,t=e.getUid(),i=e.getToken();if("true"==lang.debug){var n=CCalien.CCDDZlocalStorage.getItem("uid_token");n&&(n=n.split("|"),n.length>=2&&(t=n[0],i=n[1]))}return console.log("uid:",t,"|token:",i),i&&"null"!=i&&t?(this._loginData.uid=t,this._loginData.token=i,ccddzwebService.doUserInit(this._loginData.uid),ccddzwebService.getServer(t,function(t){0==t.code?(e.getToken()||CCDDZReportor.instance.reportCodeError("sk error checkLocalToken"),CCGlobalGameConfig.initServer(t.data),CCDDZSceneLoading.setLoadingText("连接游戏服务器。。。"),ccserver.connect()):CCDDZSceneLoading.setLoadingText("获取服务器地址错误")}),!0):(this._clearReconnectInterval(),!1)},t.prototype._clearToken=function(){this._loginData.token=null;var e=CCGlobalUserData.instance;e.setToken("null",!0)},t.prototype._setCanReconnect=function(e){this._bCanReconnect=e},t.prototype._onAccountError=function(){this._setCanReconnect(!1),this._clearToken(),CCDDZMainLogic.instance.stop()},t.prototype.showWaitAndTryConnect=function(){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_WAITING,{content:""}),this.tryReconnectLogin()},t.prototype.tryReconnectLogin=function(){if(0==this._reconnectLoginInterval){var e=0;this._clearReconnectInterval();var i=function(){return ccserver.close(),e>=3?(CCDDZMainLogic.instance.showDisconnect({content:lang.disconnect_server}),void this._clearReconnectInterval()):(e>=2&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_WAITING,{content:"重连中。。。"}),e+=1,console.log("tryReconnectLogin------>",e,this._bCanReconnect),this._bCanReconnect?void t.instance.doReconnectLogin():(this._clearReconnectInterval(),void CCDDZMainLogic.instance.showMostTopTip({content:lang.disconnect_kick_out[3]})))}.bind(this);this._reconnectLoginInterval=egret.setInterval(function(){i()},this,5e3),i()}},t.prototype._clearReconnectInterval=function(){0!=this._reconnectLoginInterval&&egret.clearInterval(this._reconnectLoginInterval),this._reconnectLoginInterval=0},t.prototype.doRelogin=function(){this._setCanReconnect(!1),this._clearToken(),CCalien.Native.instance.isWXMP?window.top.reqWXCode():CCalien.Native.instance.isAli()?window.top.reqAliCode():CCDDZMainLogic.instance.showLogin()},t.prototype.doReconnectLogin=function(){console.log("doReconnectLogin---->"),this.checkLocalToken()||(CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_DISCONNECT),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.LOGIN,{autoLogin:!0,isFirstIn:!0},CCalien.CCDDZsceneEffect.CCDDFade))},t}(CCService);__reflect(CCLoginService.prototype,"CCLoginService");var CCWebService=function(){function e(){this.loadLogStartId="",this.reportUser=function(e,t,i,n,o,a,r,s){void 0===s&&(s=null),this.callApi("game","impeach",r,{token:e,uid:t,type:i,roomid:n,tableid:o,touid:a,content:s})}}return e.prototype.login=function(e,t,i){this.callApi("index","login",function(e){i(e.data)},{username:e,password:t})},e.prototype.fastLogin=function(e){this.callApi("index","guest",function(t){e(t.data)},{device:this.uuid})},e.prototype.doLoginWebCheck=function(e,t,i,n,o){var a=0;CCalien.Native.instance.isNative&&(a=1),this.callApi("index","login",function(e){o(e)
},{type:1,"package":n,unionid:i,code:e,sk:t,os:a},"post")},e.prototype.loginWXApp=function(e){var t=CCalien.Native.instance,i=this;t.call("loginByWechat",null,function(t){var n=JSON.parse(t);console.log("doAppWxLogin==cb=》",n.code,n.wxCode),n&&0==n.code&&n.wxCode&&i.doLoginWebCheck(n.wxCode,null,null,"cn.htgames.doudizhu",e)})},e.prototype.loginByPhone=function(e,t,i,n,o){var a=this;a.callApi("index","login",function(e){o(e)},{type:2,unid:i,sk:n,phone:e,code:t},"post")},e.prototype.loginByWxFromWechat=function(e,t,i,n,o){this.doLoginWebCheck(e,t,i,n,o)},e.prototype.loginByAliH5=function(e,t,i,n){this.callApi("index","login",function(e){n(e)},{type:3,unionid:i,code:e,sk:t},"post")},e.prototype.bindByWx=function(e,t){this.callApi("user","bindByUid",function(e){t(e)},{type:1,"package":"cn.htgames.doudizhu.web",wxcode:e,uid:CCDDZMainLogic.instance.selfData.uid},"post")},e.prototype.checkAppUpdate=function(e){var t=CCGlobalGameConfig.RESOURCE_URL+"appVerCheck.php",i=egret.Capabilities.os,n=null,o=null,a=CCalien.Native.instance;a.getAppChannelId(function(r){n=r,a.getAppVerCode(function(r){o=r,console.log("checkAppUpdate=====>",n,o),CCalien.Ajax.POST(t,{platform:i,channel:""+n,id:"com.tangyou.doudizhu"},function(t){if(console.log("appVerCheck=1=>",t),t){var n=JSON.parse(t),r=n.data;if(r.cleanTmp=!0,r.shouldInstall=!1,console.log("appVerCheck=2=>code:",n.code,"version:",r.version),0==n.code&&r.version>o){if("Android"==i){var s=a.getAndroidLocalVercode(),c=a.getAndroidDownState();console.log("_downVerCode",s,"_downState======",c),s&&0!=s&&s==r.version&&(r.cleanTmp=!1,2==c&&(r.shouldInstall=!0))}return void e(!0,r)}}e(!1,null,null)})})})},e.prototype._callWXPay=function(e){var t=CCalien.Native.instance;t.isWXMP?t.rechargeInWXMP(e.data):t.isNative?t.rechageWXApp(e.data):t.isWxQr()||t.isLoginByWXQr()?t.rechargeInWXQr(e.data):t.rechargeWXH5(e.data)},e.prototype._callAliPay=function(e){var t=CCalien.Native.instance,i=e.data;t.isAli()?t.rechargeAliH5(i.info):t.isNative?(i.h5=1)?t.rechargeAliH5(i.info):t.rechargeAliApp(i.info):t.rechargeAliH5(i.info)},e.prototype._onWebPayOrderCallBack=function(e,t){CCalien.Native.instance;0==t.code?"wx"==e?this._callWXPay(t):"ali"==e&&this._callAliPay(t):7005==t.code?CCDDZAlert.show("您已参加过此活动,感谢您的支持!"):7006==t.code?CCDDZMainLogic.instance.rechareErrByServerUpdate():50003==t.code?CCDDZAlert.show("您的充值金额已达每日上限!"):CCDDZAlert.show("支付失败,错误码:"+t.code)},e.prototype.getRechargeCfgByAli=function(e){var t="PAGEAPI",i=this,n=CCalien.Native.instance;n.isNative&&(t="APP");var o=0;n.isAli()&&(o=1);var a=CCGlobalUserData.instance.getUid();a&&this.callApi("shop","alipayOrder",function(e){i._onWebPayOrderCallBack("ali",e)},{product_id:e,os:1,uid:a,type:CCGlobalGameConfig.SERVER_URL_TAIL,trade_type:t,"return":o},"post")},e.prototype.getRechargeCfgByWX=function(e){var t="h5",i=this;CCalien.Native.instance.isNative?t="APP":CCalien.Native.instance.isWxQr()||CCalien.Native.instance.isLoginByWXQr()?t="NATIVE":CCalien.Native.instance.isWXMP||CCalien.Native.instance.isAli()||(t="MWEB");var n=CCalien.Native.instance.getUrlArg(),o="";"1"==n.oldWx&&(o="cn.htgames.doudizhu.wechat_old");var a=CCGlobalUserData.instance.getUid();a&&this.callApi("shop","wechatpayOrder",function(e){i._onWebPayOrderCallBack("wx",e)},{product_id:e,os:1,uid:a,type:CCGlobalGameConfig.SERVER_URL_TAIL,trade_type:t,"package":o},"post")},e.prototype.rechagre=function(e){var t=CCalien.Native.instance;if(t.isWXMP||t.isWxQr()||t.isLoginByWXQr())this.getRechargeCfgByWX(e);else if(t.isAli())this.getRechargeCfgByAli(e);else{if(t.isInMiniApp()){var i=!1,n=!1,o=CCGlobalGameConfig.getCfgByField("webCfg.appzfbzf");o&&1==o.status&&(i=!0);var a=CCGlobalGameConfig.getCfgByField("webCfg.appwxzf");a&&1==a.status&&(n=!0),n&&i?CCDDZPanelChoosePay.getInstance().show(e):n?this.getRechargeCfgByWX(e):i&&this.getRechargeCfgByAli(e)}else if(!t.isNative){var r=t.getUrlArg();"1"==r.oldWx?this.getRechargeCfgByAli(e):CCDDZPanelChoosePay.getInstance().show(e)}console.log("未选择支付渠道,当前运行的渠道为:",t.getChannelName(),"|是APP版本:",t.isNative)}},e.prototype.buyCardsRecorder=function(e){this.rechagre(e)},e.prototype.getShareImgUrlByScene=function(e,t){void 0===t&&(t=1);var i=CCGlobalGameConfig.getCfgByField("urlCfg.shareUrl");CCalien.Ajax.GET(i,{uid:CCDDZMainLogic.instance.selfData.uid,scene:t},e)},e.prototype.getWxConfig=function(e){this.callApi("wechat","jsConfig",function(t){0==t.code&&e(t.data)},{url:encodeURIComponent(window.top.location.href)},"post")},e.prototype.loadLog=function(e,t){var i=this;if(!CCalien.Native.instance.isNative){if(1==e&&this.isLogType1Send)return;if(2==e&&this.isLogType2Send)return;var n=(new Date).valueOf(),o=CCalien.CCDDZlocalStorage.getItem("is_first",CCGlobalGameConfig.platform);o=null==o?"1":o;var a=Number(o);1==t&&(this.loadLogStartId="");var r=md5(ccddzwebService.uuid+e+t+n+"!@#HTGames$%^");this.callApi("load","index",function(e){e&&0==e.code&&(i.loadLogStartId=e.data)},{uuid:ccddzwebService.uuid,load_type:e,load_tag:t,load_time_stamp:n,is_first:a,start_id:this.loadLogStartId,sign:r},"post"),1==a&&2==e&&0==t&&CCalien.CCDDZlocalStorage.setItem("is_first","0",CCGlobalGameConfig.platform),1==e&&0==t&&(this.isLogType1Send=!0),2==e&&0==t&&(this.isLogType2Send=!0)}},e.prototype.bindPhoneByLogin=function(e,t,i,n,o){this.callApi("index","login",function(e){o(e)},{phone:e,code:t,sk:n,unid:i,type:2})},e.prototype.bindPhoneByExchange=function(e,t,i){var n=CCGlobalUserData.instance,o=CCalien.Native.instance,a=n.getUid(),r=n.getToken(),s="ddz";o.isAli()?s="alipay":o.isWXMP?s="wechat":o.isNative&&(s="wechat"),this.callApi("index","bindMobile",function(e){i(e)},{phone:e,code:t,token:r,uid:a,source:s})},e.prototype.getCode=function(e,t){this.callApi("user","getYunCode",function(e){t(e)},{phone:e},"get")},e.prototype.getExChangeHistory=function(e,t,i,n){this.callApi("user","bind",function(e){n(e.code)},{phone:e,code:t,password:i,device_id:ccddzwebService.uuid})},e.prototype.getRedcoinHistory=function(e,t){this.callApi("coin","index",function(e){t(e)},{uid:e},"get")},e.prototype.getWatchPublicWX=function(e,t){this.callApi("user","getUserInfo",function(e){t(e)},{uid:e},"post")},e.prototype.getServer=function(e,t){this.callApi("user","server",function(e){t(e)},{uid:e},"post")},e.prototype.callApi=function(e,t,i,n,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o="post"),n||(n={}),n.pf=CCalien.Native.instance.platformId;var a=CCGlobalGameConfig.WEB_SERVICE_URL+e+"/"+t,r="post"==o?CCalien.Ajax.POST:CCalien.Ajax.GET;r.call(CCalien.Ajax,a,n,function(n){if(CCGlobalGameConfig.DEBUG&&console.log("get:"+n),i){var o=void 0;try{o=JSON.parse(n)}catch(r){CCDDZReportor.instance.reportCodeError(e+" ----callApi---- "+t+" json error")}if(o.code>0&&(CCGlobalGameConfig.DEBUG&&console.log(a,o.code,o.message),500==o.code))return void CCDDZAlert.show("服务器维护中,预计2018年1月3日02:00:00维护完成",0,function(){CCDDZMainLogic.instance.closeSelf()});i(o)}})},e.prototype.postError=function(e,t){var i="|g:",n="xx",o="|d:",a="xx",r="|r:",s="xx",c="|room:",h="xx",l="uid:",u="xx",p=CCDDZMainLogic.instance.selfData;if(p&&(u=""+p.uid)){p.gold>=0&&(n=p.gold),p.redcoin>=0&&(s=p.redcoin);var C=CCDDZBagService.instance.getItemCountById(3);C>=0&&(a=C),ccserver.roomInfo&&(h=ccserver.roomInfo.roomID)}r+=s,i+=n,o+=a,c+=h,l+=u;var d=l+r+i+o+c+t;CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/load/error",{type:e,body:d})},e.prototype.getHornRec=function(e){CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"/msg/chatmsg",{},function(t){if(e){var i=JSON.parse(t);0==i.code&&e(i.data)}})},e.prototype.postLoginStep=function(e,t){void 0===t&&(t="")},e.prototype.getExHistory=function(e,t){var i=CCGlobalUserData.instance.getToken();CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/wechat/redcoin",{uid:ccserver.uid,token:i,page:e},function(e){var i=JSON.parse(e);t(i)})},e.prototype.goRechageFei=function(e,t){CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/mobile/onlineorder",e,function(e){var i=JSON.parse(e),n=i.message;return 0==i.code?void t(i):(5004==i.code&&(n+=CCGlobalGameConfig.wxService),void CCDDZAlert3.show(n,null,"cc_common_btn_lab_confirm_n"))})},e.prototype.doCodeExchange=function(e,t){CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"shop/exchangecode",e,function(e){var i=JSON.parse(e);t(i)})},e.prototype.doBindChannel=function(e,t){CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/agent/subordinate",{uid:e,agentid:t},function(e){})},e.prototype._getSystemId=function(){var e=egret.Capabilities.os,t=CCalien.Native.instance,i=-1;return t.isNative?"Android"==e?i=3:"iOS"==e&&(i=8):"Android"==e?(i=2,t.isWXMP&&(i=1)):"iOS"==e?(i=7,t.isWXMP&&(i=6)):i=10,i},e.prototype.doUserInit=function(e){var t=this._getSystemId();CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/user/userInit",{uid:e,system:t},function(e){var t=JSON.parse(e);if(t&&t.data){var i=t.data;if(t.data.payment_num>0){var n=i.payment_num;if(CCDDZMainLogic.instance.selfData.setPayCount(n),i.alipay&&i.alipay.connection_alipay){var o=i.alipay;o.username&&o.realname&&CCGlobalUserData.instance.saveLocalAli(o.username,o.realname)}}t.data.realname&&(CCDDZMainLogic.instance.selfData.realName=!0)}})},e.prototype.getDoLotteryRec=function(e,t,i){CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/lottery/index",{uid:e,page:t},function(e){var t=JSON.parse(e);i(t)})},e.prototype.getLotteryCurLuck=function(e,t,i){CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"/lottery/run",{lotteryid:e,phase:t},function(e){var t=JSON.parse(e);i(t)})},e.prototype.getLotteryLuckHistory=function(e,t,i){CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"/lottery/history",{page:e,lotteryid:t},function(e){var t=JSON.parse(e);i(t)})},e.prototype.getExchangeWXInfo=function(e){var t=CCGlobalGameConfig.getCfgByField("urlCfg.wxRedUrl");CCalien.Ajax.GET(t,{},function(t){var i=JSON.parse(t);e(i)})},e.prototype.getInviteActInfo=function(e){return},e.prototype.getExchangeAliInfo=function(e){var t=CCGlobalUserData.instance.getUid(),i=CCalien.Native.instance.getChannelName();CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"/user/showAlipayRedCoin",{uid:t,platform:i},function(t){var i=JSON.parse(t);e(i)})},e.prototype.getRanklist=function(){var e=CCGlobalUserData.instance.getUid();CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"/notify/rankingList",{uid:e},function(e){var t=JSON.parse(e);if(0==t.code){var i=new egret.Event(CCGlobalEventNames.USER_REDCOIN_RANKING_LIST_REP);i.data={list:t.data},ccserver.dispatchEvent(i)}})},e.prototype.getInviteRankList=function(e){var t=CCGlobalUserData.instance.getUid();CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"/notify/shareRedCoin",{uid:t},function(t){var i=JSON.parse(t);0==i.code&&e(i.data)})},e.prototype.getDzpkHistory=function(e){var t=CCGlobalUserData.instance.getUid();CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"poker/gamelog",{uid:t},function(t){var i=JSON.parse(t);e(i)})},e.prototype.postRealNameAuth=function(e,t,i){var n=CCGlobalUserData.instance,o=n.getUid(),a=n.getToken();CCalien.Ajax.POST(CCGlobalGameConfig.WEB_SERVICE_URL+"user/realName",{uid:o,name:e,idcard:t,token:a},function(e){var t=JSON.parse(e);0==t.code&&(CCDDZMainLogic.instance.selfData.realName=!0),i(t)})},e.prototype.getGameUrlsCfg=function(e){var t=CCGlobalUserData.instance,i=t.getUid(),n=t.getToken();CCalien.Ajax.GET(CCGlobalGameConfig.WEB_SERVICE_URL+"activity/gameurl",{uid:i,token:n},function(t){var i=JSON.parse(t);0==i.code&&e(i.data)})},e}();__reflect(CCWebService.prototype,"CCWebService");var ccddzwebService=new CCWebService,CCGlobalBrowData=function(){function e(){this._browsEnable={},this.init()}return e.prototype.init=function(){for(var t=e.BrowID.BROW_MIN;t<=e.BrowID.BROW_MAX;++t)this._browsEnable[t]={enable:!0}},e.prototype.checkCanBuyByBrowId=function(e){return this._browsEnable[e]?this._browsEnable[e].enable:!1},e.prototype.startCDByBrowId=function(e){var t=this;this._browsEnable[e]&&(this._browsEnable[e].enable=!1,egret.setTimeout(function(){t._browsEnable[e].enable=!0},this,200))},e.prototype.getBrowCostGold=function(e){var t=CCGlobalGameConfig.getBrowCfgById(e);return t?t.price:null},e.getBrowAniDataById=function(t){if(!e.brows[t])return null;var i=e.brows[t].json,n=e.brows[t].png,o=e.brows[t].actName;return{json:i,png:n,actName:o}},e.createBrowMCById=function(t){var i=e.getBrowAniDataById(t);if(!i)return null;var n=RES.getRes(i.json),o=RES.getRes(i.png),a=new egret.MovieClipDataFactory(n,o),r=new egret.MovieClip(a.generateMovieClipData(i.actName));return r},e.isNeedXMoveById=function(t){return e.brows[t].xMove},e.getBrowAniWHById=function(t){var i=e.brows[t].width,n=e.brows[t].height;return{width:i,height:n}},e.getBrowAniLastStayById=function(t){return e.brows[t].fStay},e.BrowID={BROW_MIN:1,BROW_666:1,BROW_TORTISE:2,BROW_TOMATO:3,BROW_LOVE:4,BROW_GOOD:5,BROW_MAX:5},e.brows=(_a={},_a[e.BrowID.BROW_666]={json:"cc_brow666Ani_json",png:"cc_brow666Ani_png",actName:"brow666",xMove:!1,width:260,height:260},_a[e.BrowID.BROW_TORTISE]={json:"cc_browTortiseAni_json",png:"cc_browTortiseAni_png",actName:"browTortise",xMove:!1,width:170,height:118},_a[e.BrowID.BROW_TOMATO]={json:"cc_browTomatoAni_json",png:"cc_browTomatoAni_png",actName:"browTomato",xMove:!1,width:230,height:220,fStay:.4},_a[e.BrowID.BROW_LOVE]={json:"cc_browLoveAni_json",png:"cc_browLoveAni_png",actName:"browLove",xMove:!1,width:194,height:200},_a[e.BrowID.BROW_GOOD]={json:"cc_browGoodAni_json",png:"cc_browGoodAni_png",actName:"browGood",xMove:!0,width:208,height:330},_a),e}();__reflect(CCGlobalBrowData.prototype,"CCGlobalBrowData");var _a;window.CCalien=CCalien;var CCMain=function(e){function t(i){var n=e.call(this)||this;return t._instance=n,ccserver._isInDDZ=!1,ccserver._isFirstFromDDZ=!1,console.log("CCtMain------------>constructor",i),ccserver.initFromParams(i),n}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype._initExt=function(){if(CCalien.Native.instance.isAndroidWebView()){var e=console.log.bind(console);console.log=function(){for(var t=arguments,i=t.length,n="[js]",o=0;i>o;o++){var a=t[o];if("object"==typeof a){var r=JSON.stringify(t[o]);n+=r?r:t[o]}else n+=t[o];n+="  "}t=null,e(n)}}egret.DisplayObject.prototype.addClickListener=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var n=this,o=n.scaleX,a=n.scaleY,r=function(){n.touchEnabled&&(n._hasTouchBegin=!0,i&&egret.Tween.get(n).to({scaleX:o+.1,scaleY:a+.1},50))},s=function(i){n._hasTouchBegin&&(i.stopImmediatePropagation(),egret.Tween.get(n).to({scaleX:o,scaleY:a},50),e&&e.call(t,i)),n._hasTouchBegin=!1},c=function(){n._hasTouchBegin=!1,i&&egret.Tween.get(n).to({scaleX:o,scaleY:a},50)},h=function(){n._hasTouchBegin=!1,i&&egret.Tween.get(n).to({scaleX:o,scaleY:a},50)},l=function(){u(!1)},u=function(e){var t="addEventListener";e||(t="removeEventListener"),n._hasTouchBegin=!1,n[t](egret.TouchEvent.TOUCH_BEGIN,r),n[t](egret.TouchEvent.TOUCH_END,s),n[t](egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,c),n[t](egret.TouchEvent.TOUCH_CANCEL,h),n[t](egret.Event.REMOVED_FROM_STAGE,l)};u(!0)},egret.ImageLoader.crossOrigin="anonymous";console.log.bind(console),console.error.bind(console),console.warn.bind(console),console.info.bind(console)},t.prototype.doNativeInit=function(){if(console.log("doNativeInit===========>",CCalien.Native.instance.isNative,egret.Capabilities.os),CCalien.Native.instance.isNative){var e=3,t="C9029BAFD559F19C50E0247E2E9B57353",i="C2E5D5868229A2EFA0563E5C3A3A66881",n="wx2f626b869698b735",o=t,a="cbe075303b",r="cec021ffbd",s=a,c=!1,h="adbddfsf",l="223",u=!1;"iOS"==egret.Capabilities.os&&(o=i,s=r);var p={logLevel:e,deAppId:o,deChannelId:"",wxAppId:n,hasAli:!1,xgDebug:u,xgAccount:h,xgTag:l,bugAppId:s,bugDebug:c};CCalien.Native.instance.setKeepScreenOn(!0),CCalien.Native.instance.getAppChannelId(function(e){p.deChannelId=e,CCalien.Native.instance.call("initNative",p,function(e){var t=JSON.parse(e);console.log("initNative-------->",e,t.result)})})}},t.prototype.initMta=function(){var e=document.createElement("script");e.src="https://pingjs.qq.com/h5/stats.js?v2.0.2",e.setAttribute("name","MTAH5"),e.setAttribute("sid","500485827");var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},t.prototype.createChildren=function(){this._initExt(),e.prototype.createChildren.call(this),RES.setMaxLoadingThread(8);var t=CCalien.Native.instance.getUrlArg();CCalien.Native.instance.setInMiniApp(t.egretnative),this.doGameInit()},t.prototype.doGameInit=function(){this.initMta(),this.doNativeInit(),t._instance=this,this._resetCfgAndRoomFalse(),CCDDZAdvanceMethod.start(),CCDDZReportor.instance.start(),this.init()},t.prototype.init=function(){"iOS"==egret.Capabilities.os&&(this.stage.frameRate=45),CCalien.CCDDZDispatcher.init(),CCalien.CCDDZStageProxy.init(this.stage,this),CCalien.CCDDZSceneManager.init(this),CCalien.CCDDZlocalStorage.init(CCGlobalGameConfig.gameName),CCalien.CCDDZTickerManager.activate(),new CCDDZObjectPoolInit,console.log("DEBUG :"+CCGlobalGameConfig.DEBUG),egret.registerImplementation("eui.IAssetAdapter",new CCDDZAssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new CCDDZThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/cc.res.json","resource/")},t.prototype.onGotEnvInfo=function(e){CCalien.CCDDZUtils.injectProp(CCDDZEnvironment,e)},t.prototype.onConfigComplete=function(e){CCDDZMainLogic.instance.parseResConfigByIns(e.target),RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/cc.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("ccpreload")},t.prototype._initH5Info=function(){var e=CCalien.Native.instance,t=e.getUrlArg();if(console.log("_initH5Info=====>",e.isNative,t),e.isNative){var i="other";"iOS"==egret.Capabilities.os?i="ios_app":"Android"==egret.Capabilities.os&&(i="android_app"),e.setChannelName(i)}else if(t.wx_code)t.isWxQr&&"1"==t.isWxQr?e.setChannelName("wxqr"):(e.setChannelName("wxmp"),window.top.isWXReady()?e.onWXReadyCallInit():window.top.onWXReadyFunc(function(){e.onWXReadyCallInit()}));else if(t.ali_code)t.isAliQr&&"1"==t.isAliQr?e.setChannelName("aliqr"):e.setChannelName("ali");else{var i="other";"iOS"==egret.Capabilities.os?i="ios_browser":"Android"==egret.Capabilities.os&&(i="android_browser"),e.setChannelName(i)}},t.prototype._doCreateScene=function(){CCDDZSceneLoading.setLoadingText("资源加载中。。。"),CCalien.CCDDZSceneManager.register(CCGlobalSceneNames.LOGIN,CCDDZSceneLogin,"ccpreload"),CCalien.CCDDZSceneManager.register(CCGlobalSceneNames.ROOM,CCDDZSceneRoom,"ccpreload"),CCalien.CCDDZSceneManager.register(CCGlobalSceneNames.PLAY,CCDDZScenePlay,"ccplay"),CCalien.CCDDZSceneManager.register("SceneCmpChicken",SceneCmpChicken,"cc"),RES.loadGroup("cccommon"),CCDDZSceneLoading.setLoadingText("获取配置。。。"),ccddzwebService.loadLog(1,1),this._initH5Info(),this.createScene()},t.prototype.onResourceLoadComplete=function(e){var t=this;if("cccommon"==e.groupName)this._onRoomLoadOver();else if("ccpreload"==e.groupName){CCGlobalGameConfig.init(),CCalien.CCDDZSceneManager.register(CCGlobalSceneNames.LOADING,CCDDZSceneLoading,"ccpreload"),CCalien.CCDDZStageProxy.addEvent(),RES.loadGroup("ccplay"),RES.loadGroup("ccfont"),RES.loadGroup("ccsounds"),RES.loadGroup("cc");var i=!0;CCalien.Native.instance.isNative?(i=!1,CCalien.Native.instance.closeStartImg()):window.parent&&window.parent.postMessage("hideProgress","*"),CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.LOADING,{showCopyRight:i}),CCGlobalGameConfig.getUrl(function(){CCalien.Native.instance.isNative?(CCDDZSceneLoading.setLoadingText("检测版本更新。。。"),CCalien.Native.instance.checkAppUpdate(function(){t._doCreateScene()})):t._doCreateScene()})}},t.prototype.onResourceLoadError=function(e){egret.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){},t.prototype._resetCfgAndRoomFalse=function(){this._cfgLoadOver=!1,this._roomLoadOver=!1},t.prototype._onRoomLoadOver=function(){this._roomLoadOver=!0,this._checkRoomAndCfgOkAndStart()},t.prototype._onCfgInitOver=function(){this._cfgLoadOver=!0,this._checkRoomAndCfgOkAndStart()},t.prototype._checkRoomAndCfgOkAndStart=function(){console.log("_checkRoomAndCfgOkAndStart=======>"+this._cfgLoadOver+"|"+this._roomLoadOver),this._cfgLoadOver&&this._roomLoadOver&&(this._resetCfgAndRoomFalse(),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),CCDDZMainLogic.instance.delayStart())},t.prototype.createScene=function(){var e=this;console.log("createScene============>"),async.parallel([function(e){CCalien.CCDDZSceneManager.addTopScene(CCGlobalSceneNames.COMMON,CCDDZSceneCommon),CCalien.CCDDZSceneManager.addEffectScene(CCGlobalSceneNames.EFFECT,CCDDZSceneEffect),CCalien.CCDDZSceneManager.addMostTopScene(CCGlobalSceneNames.MOST_TOP,CCDDZSceneMostTop);var t=RES.getRes("ccbadwords_txt"),i=t.split("\n");CCDDZUtils.setSensitiveWord(i),CCalien.Native.instance.getDeviceUUID(function(t){CCGlobalGameConfig.IS_NATIVE_SHOW_TIP=!t.not_show_tip,ccddzwebService.uuid=t.uuid,e()},CCGlobalGameConfig.platform)},function(e){CCGlobalGameConfig.loadConfigs(function(t){e()})}],function(){e._onCfgInitOver()})},t}(eui.UILayer);__reflect(CCMain.prototype,"CCMain");var CCGlobalDebugHelper=function(){function e(){}return e.isAdmin=function(){return"seacole"==CCDDZMainLogic.instance.selfData.nickname.substr(0,7)?!0:!1},e}();__reflect(CCGlobalDebugHelper.prototype,"CCGlobalDebugHelper");var CCGlobalErrorConfig=function(){function e(){}return e.BMG_LOAD_ERROR="BMG_LOAD_ERROR",e.CONFIG_LOAD_ERROR="CONFIG_LOAD_ERROR",e.RESOURCE_LOAD_ERROR="RESOURCE_LOAD_ERROR",e.REPORT_ERROR="REPORT_ERROR",e}();__reflect(CCGlobalErrorConfig.prototype,"CCGlobalErrorConfig");var CCGlobalEventNames=function(){function e(){}return e.PGAME_RECORD_DATA_REFRESH="personalGameRecordDataRefresh",e.INVITE_DATA_REFRESH="inviteDataRefresh",e.LOADING_PROGRESS="loadingProgress",e.BUTTON_BAR_TAP="buttonBarTap",e.CLOCK_0="clock0",e.SELECT_CHAT="selectChat",e.SELECT_CARDS="selectCards",e.TAP_SEAT="tapSeat",e.LOG="log",e.CONTINUE_PLAY="continuePlay",e.SHOW_DISCONNECT="showDisconnect",e.HIDE_DISCONNECT="hideDisconnect",e.SHOW_WAITING="showWaiting",e.HIDE_WAITING="hideWaiting",e.SHOW_GAME_EFFECT="showGameEffect",e.SHOW_TOAST="showToast",e.SHOW_PAYCHAT="showPayChat",e.SHOW_ANNOUNCE="showAnnounce",e.HIDE_ANNOUNCE="hideAnnounce",e.SHOW_TOP_NOTIFY="showTopNotify",e.HIDE_TOP_NOTIFY="hideTopNotify",e.SHOW_LOTTERY="showLottery",e.HIDE_LOTTERY="hideLottery",e.MY_USER_INFO_UPDATE="myUserInfoUpdate",e.REFRESH_MATCH_LIST="refreshMatchList",e.MATCH_CD_NOTIFICATION="matchCDNotification",e.BAG_INFO_REFRESH="bagInfoRefresh",e.BAG_COUNT_CHANGE="bagCountChange",e.MAIL_LIST_REFRESH="mailListRefresh",e.MAIL_UNREAD_UPDATE="mailUnOpenUpdate",e.MISSION_LIST_REFRESH="missionListRefresh",e.GOLD_UPDATE="goldUpdate",e.GOLD_RAIN_EFFECT="goldRainEffect",e.WX_SHARE="wxShare",e.CONNECT_SERVER="connectToServer",e.SERVER_CLOSE="serverClose",e.SERVER_ERROR="serverError",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.ENTER_BACKGROUND="enterBackground",e.USER_FRREWARD_GET_SUCC="USER_FRREWARD_GET_SUCC",e.USER_DTREWARD_GET_SUCC="USER_DTREWARD_GET_SUCC",e.ACT_RED_CHANGE="ACT_RED_CHANGE",e.USER_SHARE_RESULT="USER_SHARE_RESULT",e.USER_RED_COUNT_CHANGE="USER_RED_COUNT_CHANGE",e.HORN_TALK_RECORDS_CHANGE="HORN_TALK_RECORDS_CHANGE",e.CENTER_ROOM_HORN_POS="CENTER_ROOM_HORN_POS",e.NATIONAL_INFO_CHANGE="NATIONAL_INFO_CHANGE",e.CLOSE_REVIVE_PANEL="CLOSE_REVIVE_PANEL",e.BUY_REVIVE_SUCC="BUY_REVIVE_SUCC",e.ACCOUNT_ERROR="ACCOUNT_ERROR",e.HIDE_MOSTTOP_TIP="HIDE_MOSTTOP_TIP",e.RECV_SOCKET_DATA="RECV_SOCKET_DATA",e.START_OTHER_GAME="START_OTHER_GAME",e.SERVER_HASUPDATE="SERVER_HASUPDATE",e.FRECHARGE_HASUPDATE="FRECHARGE_HASUPDATE",e.LOGINAPP_HASUPDATE="LOGINAPP_HASUPDATE",e.TASK_RED_SHOW="TASK_RED_SHOW",e.GET_CARDS_RECORDER_REWARD_REQ="user.GetCardsRecorderRewardReq",e.GET_FRESHMAN_REWARD_REQ="user.GetFreshManRewardReq",e.GET_FRESHMAN_REWARD_REP="user.GetFreshManRewardRep",e.CREATE_PERSONAL_GAME_REQ="user.CreatePersonalGameReq",e.CREATE_PERSONAL_GAME_REP="user.CreatePersonalGameRep",e.JOIN_PGAME_REQ="user.JoinPGameReq",e.JOIN_PGAME_REP="user.JoinPGameRep",e.START_PGAME_REQ="user.StartPGameReq",e.START_PGAME_REP="user.StartPGameRep",e.QUERY_ROOMINFO_REQ="user.QueryRoomInfoReq",e.QUERY_ROOMINFO_REP="user.QueryRoomInfoRep",e.QUIT_PGAME_REQ="user.QuitPGameReq",e.QUIT_PGAME_REP="user.QuitRoomRep",e.GAME_DISSOLVE="user.GameDissolve",e.RECONNECT_PGAME_REQ="user.ReconnectPGameReq",e.RECONNECT_PGAME_REP="user.ReconnectPGameRep",e.USER_QUICK_JOIN_REQUEST="user.QuickJoinRequest",e.USER_QUICK_JOIN_RESPONSE="user.QuickJoinResonpse",e.USER_USER_INFO_REQUEST="user.UserInfoRequest",e.USER_USER_INFO_RESPONSE="user.UserInfoResonpse",e.USER_CHECK_RECONNECT_REQ="user.CheckReconnectReq",e.USER_CHECK_RECONNECT_REP="user.CheckReconnectRep",e.USER_RECONNECT_TABLE_REQ="user.ReconnectTableReq",e.USER_RECONNECT_TABLE_REP="user.ReconnectTableRep",e.USER_LOGIN_RESPONSE="user.loginResponse",e.USER_PLAYERS_AMOUNT_REQ="user.PlayersAmountReq",e.USER_PLAYERS_AMOUNT_REP="user.PlayersAmountRep",e.USER_MODIFY_USER_INFO_REQ="user.ModifyUserInfoReq",e.USER_MODIFY_USER_INFO_REP="user.ModifyUserInfoRep",e.USER_REDCOIN_RANKING_LIST_REQ="user.RedcoinRankingListReq",e.USER_REDCOIN_RANKING_LIST_REP="user.RedcoinRankingListRep",e.USER_OPERATE_REP="user.OperateRep",e.USER_OPERATE_REQ="user.OperateReq",e.USER_DAY_SIGN_IN_REQ="user.DaySigninOptReq",e.USER_DAY_SIGN_IN_REP="user.DaySigninOptRep",e.USER_NOTIFY_KICK_OUT="user.NotifyKickout",e.USER_MATCH_SING_UP_INFO_REQ="user.MatchSignupInfoReq",e.USER_MATCH_SING_UP_INFO_REP="user.MatchSignupInfoRep",e.USER_MATCH_SING_UP_REQ="user.MatchSignupReq",e.USER_MATCH_SING_UP_REP="user.MatchSignupRep",e.USER_MATCH_START_NTF="user.MatchStartNtf",e.USER_MATCH_INFO_NTF="user.MatchInfoNtf",e.USER_ENTER_MATCH_REQ="user.EnterMatchReq",e.USER_ENTER_MATCH_REP="user.EnterMatchRep",e.USER_RED_PACKET_ANNOUNCE="user.RedPacketAnnounce",e.USER_BAG_INFO_REQ="user.BagInfoReq",e.USER_BAG_INFO_REP="user.BagInfoRep",e.USER_GIVE_UP_MATCH_REQ="user.GiveupMatchReq",e.USER_GIVE_UP_MATCH_REP="user.GiveupMatchRep",e.USER_ALMS_REQ="user.AlmsReq",e.USER_ALMS_REP="user.AlmsRep",e.USER_RECHARGE_RESULT_NOTIFY="user.RechargeResultNotify",e.USER_REDCOIN_EXCHANGE_GOODS_REQ="user.RedcoinExchangeGoodsReq",e.USER_REDCOIN_EXCHANGE_GOODS_REP="user.RedcoinExchangeGoodsRep",e.USER_LOTTERY_RED_COIN_REQ="user.LotteryRedcoinReq",e.USER_LOTTERY_RED_COIN_REP="user.LotteryRedcoinRep",e.USER_PAY_TO_CHAT_REQ="user.Pay2chatReq",e.USER_PAY_TO_CHAT_REP="user.Pay2chatRep",e.USER_FRESH_MAN_REDCOIN_LOTTERY_CHANCEGOT="user.FreshManRedcoinLotteryChanceGot",e.USER_GET_TASKREW_REQ="user.GetDayTaskRewardReq",e.USER_GET_TASKREW_REP="user.GetDayTaskRewardRep",e.USER_GET_FRREWARD_REQ="user.GetFirstRechargeRewardReq",e.USER_GET_FRREWARD_REP="user.GetFirstRechargeRewardRep",e.USER_GET_REWARD_REQ="user.GetRewardReq",e.USER_GET_REWARD_REP="user.GetRewardRep",e.USER_GET_ACTInfo_REQ="user.GetActivityInfoReq",e.USER_GET_ACTInfo_REP="user.GetActivityInfoRep",e.USER_DiamondGame_REQ="user.DiamondGameReq",e.USER_DiamondGame_REP="user.DiamondGameRep",e.USER_MailList_REP="user.MailListRep",e.USER_MailModify_REP="user.MailModifyRep",e.USER_MailUnread_REP="user.MailUnreadRep",e.USER_MailOperate_REQ="user.MailReq",e.USER_MailGetReward_REP="user.MailGetRewardRep",e.QUIT_WAITING_QUEUE_REQ="user.QuitWaitingQueueReq",e.USER_MatchOperate_REQ="user.MatchOperateReq",e.USER_MatchOperate_REP="user.MatchOperateRep",e.USER_CoinLottery_REQ="user.RedCoindLotteryReq",e.USER_CoinLottery_REP="user.RedCoindLotteryRep",e.GAME_RECONNECT_REP="game.ReconnectRep",e.GAME_USER_ONLINE="game.UserOnline",e.GAME_USER_INFO_IN_GAME_REQ="game.UserInfoInGameReq",e.GAME_USER_INFO_IN_GAME_REP="game.UserInfoInGameRep",e.GAME_SET_SESSION="game.SetSession",e.GAME_GAME_START_NTF="game.GameStartNtf",e.GAME_SET_CARDS="game.SetCards",e.GAME_ADD_CARD="game.AddCard",e.GAME_UPDATE_GAME_INFO="game.UpdateGameInfo",e.GAME_ASK_MASTER="game.AskMaster",e.GAME_ANSWER_MASTER="game.AnswerMaster",e.GAME_SET_SCORE="game.SetScore",e.GAME_SHOW_CARD="game.ShowCard",e.GAME_ASK_PLAY_CARD="game.AskPlayCard",e.GAME_USE_CARD_NTF="game.UseCardNtf",e.GAME_TALK_NTF="game.TalkNtf",e.GAME_OPERATE_REQ="game.OperateReq",e.GAME_OPERATE_REP="game.OperateRep",e.GAME_GAME_END="game.GameEnd",e.GAME_ENTER_TABLE="game.EnterTable",e.GAME_LEAVE_TABLE="game.LeaveTable",e.GAME_TABLE_INFO="game.CCDDZTableInfo",e.GAME_GIVE_UP_GAME_REQ="game.GiveUpGameReq",e.GAME_GIVE_UP_GAME_REP="game.GiveUpGameRep",e.GAME_ASK_READY="game.AskReady",e.GAME_GET_READY_REQ="game.GetReadyReq",e.GAME_GET_READY_REP="game.GetReadyRep",e.GAME_USER_OFFLINE="game.UserOffline",e.GAME_OPERATE_REP_EX="game.OperateRepEX",e.GAME_REPLENISH_FREEZE_GOLD_REP="game.ReplenishFreezeGoldRep",e}();__reflect(CCGlobalEventNames.prototype,"CCGlobalEventNames");var CCGlobalGameConfig=function(){function e(){}return e.getRoomCfgByGameId=function(e,t){var i=this.getCfgByField("allGamesCfg"),n=i[e];if(n){if(0==t)return n.rooms;for(var o=n.rooms.length,a=0;o>a;++a)if(n.rooms[a].roomID==t)return n.rooms[a]}return null},e.getRoomConfigById=function(e){var t;return this.roomList.forEach(function(i){return i.roomID==e?(t=i,!0):void 0}),t},e.getSuitableRoomConfig=function(e,t){void 0===t&&(t=1);for(var i=0;i<this.roomList.length;++i){var n=this.roomList[i];if(1==n.roomType&&n.roomFlag==t&&n.maxScore>e&&n.minScore<=e)return n}return null},e.getRoomConfigByMatchId=function(e){for(var t=0;t<this.roomList.length;++t)if(this.roomList[t].matchId==e)return this.roomList[t]},e.setMatchSignupFlag=function(e,t){this.roomList.forEach(function(i){i.matchId==e&&(i.is_signup=t)})},e.anyMatchSignuped=function(){for(var e=0;e<this.roomList.length;++e)if(this.roomList[e].is_signup>0)return!0;return!1},e.getRoomConfig=function(e){var t=this.getRoomConfigById(e);return t||(t=this.getRoomConfigByMatchId(e)),t},e.getMatchConfigById=function(e){for(var t in this.matchConfig)if(parseInt(t)==e)return this.matchConfig[t]},e.init=function(){lang=new CCGlobalLanguage(RES.getRes("ccddzlang")),this.CARD_WIDTH*=this.CARD_SCALE,this.CARD_HEIGHT*=this.CARD_SCALE,this.CARD_GAP_H*=this.CARD_SCALE,this.CARD_OFFSET=this.CARD_WIDTH-this.CARD_GAP_H},e.getUrl=function(t){var i=this;CCalien.Ajax.GET((this.DEBUG?this.RESOURCE_URL:lang.config_url)+"geturl.php",{},function(n){var o=JSON.parse(n);i.DEBUG||(e.WEB_SERVICE_URL=o.WEB_SERVICE_URL,e.WX_LOGIN_URL=o.WX_LOGIN_URL,e.RESOURCE_URL=o.RESOURCE_URL,e.RECHARGE_URL=o.RECHARGE_URL,e.REGISTER_URL=o.REGISTER_URL,e.PASSWORD_URL=o.PASSWORD_URL,e.HOME_PAGE_URL=o.HOME_PAGE_URL,e.DOWNLOAD_PAGE_URL=o.DOWNLOAD_PAGE_URL,e.LOBBY_PAGE_URL=o.LOBBY_PAGE_URL),console.log("WX_LOGIN_URL:"+e.WX_LOGIN_URL),console.log("WEB_SERVICE_URL:"+e.WEB_SERVICE_URL),console.log("RESOURCE_URL:"+e.RESOURCE_URL),console.log("RECHARGE_URL:"+e.RECHARGE_URL),e.urlData=o,t()},function(){ccddzwebService.postError(CCGlobalErrorConfig.CONFIG_LOAD_ERROR,"geturl.php")})},e.getUrlData=function(t){t(e.urlData)},e.initServer=function(e){if("true"==lang.debug){var t=CCalien.CCDDZlocalStorage.getItem("server_url");t&&(e=t)}this.SERVER_URL=e,console.log("SERVER_URL===>",this.SERVER_URL),this.init_SERVER_URL_TAIL()},e.init_SERVER_URL_TAIL=function(){var t=e.SERVER_URL,i=t.split("."),n=i[0],o=n.substr(n.length-1);e.SERVER_URL_TAIL=o,console.log("SERVER_URL_TAIL===>",e.SERVER_URL_TAIL)},e.getServerUrl=function(e,t,i){},e.resetRoomList=function(){this.roomList=JSON.parse(JSON.stringify(this.roomListBak))
},e._formatChatCost=function(e){var t={},i=null;for(var n in e)i=e[n].split(":"),t[Number(n)+1]={id:Number(i[0]),cost:Number(i[1])};return t},e.parseShareRewardCfg=function(){var e=this.dbsConfig.day_share_reward.split("|");if(e){for(var t={},i=null,n=0;n<e.length;++n)i=e[n].split(":"),t[i[0]]=parseInt(i[1]);this._dayShareCfg=t}},e._formatNewYearCfg=function(e){if(e){var t=e,i=t.length;this.newYearCfg={yearGift:null,yearTask:null,yearWork:null};for(var n=0;i>n;++n)2==t[n].id?this.newYearCfg.yearGift=e[n]:3==t[n].id?this.newYearCfg.yearTask=e[n]:4==t[n].id&&(this.newYearCfg.yearWork=e[n])}},e.getInviteActInfo=function(e){void 0===e&&(e=null)},e.getExAliRedInfo=function(){var e=this;ccddzwebService.getExchangeAliInfo(function(t){e.setCfgByField("aliRedInfo",t)})},e._formatRooms=function(e){var t={};e.forEach(function(e){t[e.gameID]=e});var i=t[10],n=i.rooms,o=[],a=[];this.roomList=n.sort(function(e,t){return e.roomID-t.roomID}),this.roomList.forEach(function(e){1==e.roomType&&(1==e.roomFlag?o.push(e):a.push(e))}),this.roomListBak=this.roomList,this.setCfgByField("goldRooms",o),this.setCfgByField("diamondRooms",a),this.setCfgByField("allGamesCfg",t)},e.getRoomCfgFromAll=function(e){var t=this.allCfgs.allGamesCfg;if(t){var i=null;for(var n in t)if(i=t[n].rooms)for(var o in i)if(i[o].roomID==e)return i[o]}return null},e.loadConfigs=function(t){var i=this;CCDDZSceneLoading.setLoadingText("加载配置。。。"),this.allCfgs={},CCalien.Ajax.GET((this.DEBUG?this.RESOURCE_URL:lang.config_url)+"config.php",{id:this.gameId},function(n){var o=JSON.parse(n);i.allCfgs=o,i.dbsConfig=o.dbs_config,i.rid2gt=o.rid2gt,i.chatCost=e._formatChatCost(i.dbsConfig.chat_consume);var a=o.custom;i.almsConfig=i.dbsConfig.alms,i._dayShareCfg=i.dbsConfig.day_share_reward,i.parseShareRewardCfg(),i._diamondExCfg=i.dbsConfig.diamond_exc,e._formatNewYearCfg(o.activity_config),i.currencyRatio=a.currency_ratio,i.rechargeRatio=a.recharge_ratio,i.exchangeRatio=a.exchange_ratio,i.lotteryMaxNum=a.lotteryMaxNum;var r=i.dbsConfig.login_app_reward.split("|");if(r){for(var s={},c=null,h=0;h<r.length;++h)c=r[h].split(":"),s[c[0]]=parseInt(c[1]);i.loginAppRew=s}i.wxService=a.qq,i.extendWX=a.extendWX,i.signInRewardConfig=i.dbsConfig.daysignin.map(function(e){return CCDDZUtils.parseGoodsString(e)}),i._formatRooms(o.game),i._browList=o.game_prop,i._dayTaskList=o.day_task,i._dayTaskList=i._dayTaskList.filter(function(e){return e?!0:!1}),i._formatTaskInfo(),e._formatFRechargeDays(i.dbsConfig.firstrechargereward.reward),i.matchConfig=o.match,i.goodsConfig=o.goods,i.rechargeConfig=o.recharge,i.exchangeConfig=o.red_coin_exchange,i.exchangeGoodsConfig=o.red_coin_goods,i.personalGameConfig=o.personalgame,i.testers=o.testers,i.cardsRecorderConfig=o.cards_recorder_buy_option,t(o)})},e._formatTaskInfo=function(){for(var e={},t=this._dayTaskList,i=t.length,n=0;i>n;++n)e[t[n].id]=t[n];this.setCfgByField("newTaskInfo",e)},e._formatNationalLoginRewCfg=function(){for(var e={},t=0,i=0,n=null,o=this.nationalCfg.daysignin,a=0;a<o.length;++a)n=o[a].split(":"),t=Number(n[0]),i=Number(n[1]),e[a+1]={id:t,num:i};this.nationalCfg.daysignin=e},e._formatFRechargeDays=function(e){for(var t=null,i={},n=null,o=0;o<e.length;++o){t=e[o].split("|"),i[o]=[];for(var a=0;a<t.length;++a)n=t[a].split(":"),i[o].push({id:parseInt(n[0]),num:parseInt(n[1])})}this._fRechargeCfg=i},e.getBrowCfgById=function(e){var t=null;if(this._browList)for(var i=0;i<this._browList.length;++i)if(e==this._browList[i].id)return{id:this._browList[i].id,currency:this._browList[i].currency,price:this._browList[i].price};return t},e.getDayTaskList=function(){return this._dayTaskList},e.getFRechargeRewByDay=function(e){return 1>e?null:this._fRechargeCfg&&this._fRechargeCfg[e-1]?this._fRechargeCfg[e-1]:null},e.getFRechargeInfo=function(){for(var t=0;t<e.rechargeConfig.length;++t)if(e.rechargeConfig[t].firstrecharge)return e.rechargeConfig[t];return CCDDZLogUtil.error("getFRechargeInfo------error----->"),null},e.getReviveBagInfo=function(t){for(var i=0;i<e.rechargeConfig.length;++i)if(e.rechargeConfig[i].product_id==t)return e.rechargeConfig[i];return CCDDZLogUtil.error("getReviveBagInfo------error----->"),null},e.getLoginAppRew=function(){return this.loginAppRew},e.getItemNameById=function(e){var t=this._itemName[e];return t?t:null},e.getLoginAppRewText=function(){if(this.loginAppRew){var e="",t=null;for(var i in this.loginAppRew)t=this.getItemNameById(Number(i)),t&&(e+=t+"x"+this.loginAppRew[i]+"\n");return e}return""},e.getNationalCfg=function(){return this.nationalCfg},e.isInNationalTime=function(){var e={isInTime:!1,isBefore:!1,isAfter:!1};if(this.nationalCfg&&this.nationalCfg.trigger_time&&this.nationalCfg.finish_time){var t=(new Date).getTime(),i=1e3*this.nationalCfg.trigger_time,n=1e3*this.nationalCfg.finish_time;t>=i&&n>=t?e.isInTime=!0:i>t?(e.isInTime=!1,e.isBefore=!0,e.isAfter=!1):t>n&&(e.isInTime=!1,e.isBefore=!1,e.isAfter=!0)}return e},e.isTimeToGetNationalInviteRew=function(){if(this.nationalCfg&&this.nationalCfg.finish_time){var e=(new Date).getTime(),t=1e3*this.nationalCfg.finish_time;if(e>=t)return!0}return!1},e.getNationalInviteRewByNum=function(e){if(this.nationalCfg&&this.nationalCfg.invite&&4==this.nationalCfg.invite.length){var t=this.nationalCfg.invite,i=t[0].e,n=t[1].e,o=t[2].e,a=t[3].e,r=.01*t[0].reward,s=.01*t[1].reward,c=.01*t[2].reward,h=.01*t[3].reward;return i>=e?e*r:n>=e?(e-i)*s+r*i:o>=e?i*r+s*(n-i)+(e-n)*c:a>=e?i*r+s*(n-i)+(o-n)*c+(e-o)*h:i*r+(n-i)*s+(o-n)*c+(a-o)*h}return 0},e.getNationalLoginRewByDay=function(e){if(this.nationalCfg&&this.nationalCfg.daysignin&&this.nationalCfg.daysignin[e]){var t=this.nationalCfg.daysignin[e];if(t){var i=(a={},a[0]="金豆x{0}",a[1]="奖杯x{0}",a[2]="记牌器x{0}小时",a[101]="表情免费次数x{0}次",a),n=i[t.id],o=t.num;if(1==t.id&&(o=.01*o),n)return n=n.replace("{0}",o)}}return null;var a},e.shouldShowNationalBtn=function(){var e="2017-09-30 23:50:00",t=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),i=(new Date).getTime();return i>=t?!0:!1},e.getNationalInviteRewTimeOut=function(){var e="2017-10-15 00:00:00",t=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),i=(new Date).getTime();return i>=t?!0:!1},e.isBetweenTime=function(e){var t={isInTime:!1,isBefore:!1,isAfter:!1};if(e&&e.trigger_time&&e.finish_time){var i=ccserver.getServerStamp(),n=e.trigger_time[1],o=e.trigger_time[2],a=e.finish_time[1],r=e.finish_time[2],s="2018/"+n+"/"+o+" 00:00:00",c=new Date(Date.parse(s)).getTime(),h="2018/"+a+"/"+r+" 00:00:00",l=new Date(Date.parse(h)).getTime();c>i?t.isBefore=!0:i>=l?t.isAfter=!0:t.isInTime=!0}return t},e.getNewYearGift=function(){return this.newYearCfg.yearGift},e.isInNewYearGift=function(){return this.isBetweenTime(this.newYearCfg.yearGift)},e.isInNewYearBuyGift=function(){var e=null;return e={},e.trigger_time=this.newYearCfg.yearGift.trigger_time,e.finish_time=this.newYearCfg.yearGift.recharge_finish_time,this.isBetweenTime(e)},e.isInNewYearTask=function(){return this.isBetweenTime(this.newYearCfg.yearTask)},e.isInNewYearWork=function(){return this.isBetweenTime(this.newYearCfg.yearWork)},e.getNewYearTask=function(){return this.newYearCfg.yearTask},e.getNewYearWork=function(){return this.newYearCfg.yearWork},e.getChatCostInfoByType=function(e){return this.chatCost&&this.chatCost[e]?this.chatCost[e]:null},e.copyText=function(e,t,i,n){void 0===n&&(n=!1);var o=t,a=n;if(CCalien.Native.instance.isNative)CCalien.Native.instance.toClipboard(o),a?CCDDZToast.show("复制"+i+"成功"):CCDDZAlert.show("复制"+i+"成功!");else{var r=document.getElementById("ddzCopyTex"),s=document.getElementById("ddzCopyBtn");r.style.visibility="visible",r.value=o;var c=new Clipboard(".copyBtn"),h=function(){a?CCDDZToast.show("复制"+i+"成功"):CCDDZAlert.show("复制"+i+"成功!")},l=function(){CCDDZAlert.show("复制"+i+"失败")};c.once("success",h),c.once("error",l),s.click(),r.style.visibility="hidden"}},e.getShareRewCfg=function(){return this._dayShareCfg},e.getDiamondExCfg=function(){return this._diamondExCfg},e.getRid2gt=function(e){return this.rid2gt&&this.rid2gt[e]?this.rid2gt[e]:null},e.getField=function(t,i){var n=null;if("string"==typeof i)return n=t[i];var o=0;if(t[i[o]]){if(i.length<=1)return n=t[i[o]];n=e.getField(t[i[o]],i.slice(o+1))}return n},e.getCfgByField=function(t){var i=t.split("."),n=null;return n=e.getField(this.allCfgs,i)},e.setCfgByField=function(e,t){return this.allCfgs[e]=t},e.toUrl=function(e){var t=CCalien.Native.instance;t.isNative?t.openUrlBySys(e):window.top.location.href=e},e.downApp=function(){var e=this.getCfgByField("urlCfg.downAppUrl");this.toUrl(e)},e.toFeiUrl=function(){var e=this.getCfgByField("urlCfg.queryFeiUrl");this.toUrl(e)},e.toAliRedUrl=function(){var e=this.getCfgByField("urlCfg.aliRedFollowUrl");this.toUrl(e)},e.toFeiCardUrl=function(){var e=this.getCfgByField("urlCfg.queryFeiCardUrl");this.toUrl(e)},e.toJDCardUrl=function(){var e=this.getCfgByField("urlCfg.queryJDUrl");this.toUrl(e)},e.toWatchWXUrl=function(){var e=this.getCfgByField("urlCfg.watchWXUrl");this.toUrl(e)},e.showKeFu=function(){var t=e.wxService,i=CCDDZPanelAlert3.instance,n="如有问题或宝贵意见，请联系客服。\n我们将会非常重视，感谢你！\n",o=0;t.length>1&&(n+="微信客服："+t+"\n",o=1),n+="客服电话：400-178-1766\n",n+="客服工作时间：周一到周五(9:00-18:00)",i.show(n,o,function(n){"confirm"==n?"cc_room_report"==i.btnConfirm.labelIcon?CCDDZReportor.instance.toReportPage():e.copyText(this.parent,t,"微信号("+t+")"):"cancel"==n&&CCDDZReportor.instance.toReportPage()},!0),1==o?i.btnConfirm.labelIcon="cc_common_copyWX":i.btnConfirm.labelIcon="cc_room_report",i.btnCancel.labelIcon="cc_room_report"},e.getGoldReviveMaxBuy=function(){return 9999},e.shouldShowInviteAct=function(){return CCalien.Native.instance.isNative?!0:!1},e.getMySelfUrl=function(){var t=CCGlobalUserData.instance,i=t.getSk();i||(i="");var n=e.WX_LOGIN_URL+"?state=3&share_sk="+i;return n},e.initGameUrlsCfg=function(e){var t=this;ccddzwebService.getGameUrlsCfg(function(i){t.allCfgs.urlCfg=i,e()})},e.DEBUG=!1,e.IS_NATIVE_DEBUG=!1,e.IS_NATIVE_SHOW_TIP=!0,e.gameName="cc",e.gameAlice="cc",e.gameId=1,e.platform="bode",e.CHAT_COUNT_DOWN=1,e.CARD_SCALE=1,e.CARD_WIDTH=140,e.CARD_HEIGHT=178,e.CARD_GAP_H=80,e.CARD_GAP_V=100,e.SERVER_URL="ws://192.168.0.91:9001/ws",e.WX_LOGIN_URL="http://www.htgames.cn/zhanghaichuan",e.WEB_SERVICE_URL="http://192.168.1.7:8081/",e.REPORT_URL="http://120.27.162.46:8866/_.gif",e.RESOURCE_URL="http://192.168.0.81/laoqifeng/platform/",e.RECHARGE_URL="http://pay.exunsoul.com:8998/index/pay?account=",e.REGISTER_URL="http://reg.gamebode.com/regist.html",e.PASSWORD_URL="http://reg.gamebode.com/motify.html",e.HOME_PAGE_URL="http://reg.gamebode.com/index.html",e.DOWNLOAD_PAGE_URL="http://reg.gamebode.com/index.html",e.LOBBY_PAGE_URL="http://reg.gamebode.com/game_list_1.html",e.EXCHANGE_URL="http://192.168.0.86:8998/coin/index",e.currencyRatio=1,e.rechargeRatio=1e3,e.exchangeRatio=100,e.wxService="",e.extendWX="",e.loginAppRew=null,e.lotteryMaxNum=1e3,e.currentSortType=SORT_TYPE_VALUE,e._itemName=(_a={},_a[0]="金豆",_a[1]="奖杯",_a[2]="记牌器",_a[3]="钻石",_a[101]="表情免费次数",_a[41001]="初级场奖杯抽奖机会",_a[41002]="中级场奖杯抽奖机会",_a[41003]="高级场奖杯抽奖机会",_a),e}();__reflect(CCGlobalGameConfig.prototype,"CCGlobalGameConfig");var lang,_a,CCGlobalGameData=function(e){function t(){var t=e.call(this)||this;return t.name="save",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t}(CCGlobalDataStorage);__reflect(CCGlobalGameData.prototype,"CCGlobalGameData");var CCGlobalLanguage=function(e){function t(t){var i=e.call(this)||this;return i.splitCache={},i.id=new LanguageIds,CCalien.CCDDZUtils.injectProp(i,t),i}return __extends(t,e),t.prototype.split=function(e,t){var i=this.splitCache[e];return i||(i=this.splitCache[e]=lang[e].split(",")),i[t]},t.prototype.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return CCalien.StringUtils.formatApply(this[e],t)},t}(CCGlobalLanguagePack);__reflect(CCGlobalLanguage.prototype,"CCGlobalLanguage");var CCalien;!function(e){var t=function(){function t(){}return t.init=function(e,t){this.stage=e,this.root=t},t.addEvent=function(){var e=this.stage;e.addEventListener(egret.Event.DEACTIVATE,this.onPause,this),e.addEventListener(egret.Event.ACTIVATE,this.onResume,this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(e){this.lastTouchPos.x=e.stageX,this.lastTouchPos.y=e.stageY},this)},t.onPause=function(){this._isPause=!0,console.log("stage onPause--------->"),e.CCDDZSoundManager.instance.onPause()},t.onResume=function(){if(this._isPause=!1,console.log("stage onResume--------->"),e.CCDDZSoundManager.instance.onResume(),console.log(ccserver.checkEnterForegroundTimeLong()),e.CCDDZSceneManager.instance.currentSceneName!=CCGlobalSceneNames.LOGIN&&!ccserver.kickOut){if(ccserver._isInDDZ)return void(ccserver.checkEnterForegroundTimeLong()&&e.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,{jump2cc:!0},e.CCDDZsceneEffect.CCDDFade));if(ccserver.checkEnterForegroundTimeOut())CCDDZMainLogic.instance.stop();else if(ccserver.connected)return;CCLoginService.instance.showWaitAndTryConnect()}},t.enableToucn=function(e){this.stage.touchEnabled=e,this.stage.touchChildren=e},t.isPause=function(){return this._isPause},Object.defineProperty(t,"width",{get:function(){return this.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t,"height",{get:function(){return this.stage.stageHeight},enumerable:!0,configurable:!0}),t._isPause=!1,t.lastTouchPos={},t}();e.CCDDZStageProxy=t,__reflect(t.prototype,"CCalien.CCDDZStageProxy")}(CCalien||(CCalien={}));var CCGlobalResNames=function(){function e(){}return e.bank_panel_inner_bg="bank_panel_inner_bg",e.bank_word_30="bank_word_30",e.bank_word_31="bank_word_31",e.bank_word_32="bank_word_32",e.bank_word_33_h="bank_word_33_h",e.bank_word_33_n="bank_word_33_n",e.bank_word_34_h="bank_word_34_h",e.bank_word_34_n="bank_word_34_n",e.bank_word_35_h="bank_word_35_h",e.bank_word_35_n="bank_word_35_n",e.bank_word_36="bank_word_36",e.cc_common_alert_bg="cc_common_alert_bg",e.cc_common_avatar_bg="cc_common_avatar_bg",e.cc_common_avatar_light="cc_common_avatar_light",e.cc_common_avatar_mask="cc_common_avatar_mask",e.cc_common_bg_inner="cc_common_bg_inner",e.common_btn_21_h="common_btn_21_h",e.common_btn_21_n="common_btn_21_n",e.common_btn_6_h="common_btn_6_h",e.common_btn_6_n="common_btn_6_n",e.common_btn_add_favorite_h="common_btn_add_favorite_h",e.common_btn_add_favorite_n="common_btn_add_favorite_n",e.cc_common_btn_back_small_h="cc_common_btn_back_small_h",e.cc_common_btn_back_small_n="cc_common_btn_back_small_n",e.cc_common_btn_blue_d="cc_common_btn_blue_d",e.cc_common_btn_blue_h="cc_common_btn_blue_h",e.cc_common_btn_blue_n="cc_common_btn_blue_n",e.cc_common_close_h="cc_common_close_h",e.common_btn_close_icon_c="common_btn_close_icon_c",e.common_btn_close_icon_h="common_btn_close_icon_h",e.common_btn_close_icon_n="common_btn_close_icon_n",e.cc_common_close_n="cc_common_close_n",e.common_btn_gb_h="common_btn_gb_h",e.common_btn_gb_n="common_btn_gb_n",e.common_btn_get_code_d="common_btn_get_code_d",e.common_btn_get_code_h="common_btn_get_code_h",e.common_btn_get_code_n="common_btn_get_code_n",e.common_btn_increase="common_btn_increase",e.cc_common_btn_lab_cancel_h="cc_common_btn_lab_cancel_h",e.cc_common_btn_lab_cancel_n="cc_common_btn_lab_cancel_n",e.cc_common_btn_lab_confirm_h="cc_common_btn_lab_confirm_h",e.cc_common_btn_lab_confirm_n="cc_common_btn_lab_confirm_n",e.common_btn_lab_reconnect_h="common_btn_lab_reconnect_h",e.common_btn_lab_reconnect_n="common_btn_lab_reconnect_n",e.cc_common_btn_lsx_h="cc_common_btn_lsx_h",e.cc_common_btn_lsx_n="cc_common_btn_lsx_n",e.cc_common_btn_lx_h="cc_common_btn_lx_h",e.cc_common_btn_lx_n="cc_common_btn_lx_n",e.cc_common_btn_orange1_1="cc_common_btn_orange1_1",e.cc_common_btn_orange1_2="cc_common_btn_orange1_2",e.cc_common_btn_orange1_3="cc_common_btn_orange1_3",e.cc_common_btn_orange2_h="cc_common_btn_orange2_h",e.cc_common_btn_orange2_n="cc_common_btn_orange2_n",e.cc_common_btn_orange_d="cc_common_btn_orange_d",e.cc_common_btn_orange_h="cc_common_btn_orange_h",e.cc_common_btn_orange_n="cc_common_btn_orange_n",e.cc_common_btn_plus_h="cc_common_btn_plus_h",e.cc_common_btn_plus_n="cc_common_btn_plus_n",e.common_btn_reduce="common_btn_reduce",e.common_btn_register_h="common_btn_register_h",e.common_btn_register_n="common_btn_register_n",e.common_btn_return_d="common_btn_return_d",e.common_btn_return_h="common_btn_return_h",e.cc_common_btn_return_n="cc_common_btn_return_n",e.common_btn_to_register_h="common_btn_to_register_h",e.common_btn_to_register_n="common_btn_to_register_n",e.cc_common_dropdown_bg="cc_common_dropdown_bg",e.cc_common_dropdown="cc_common_dropdown",e.cc_common_dropdown_checkbox="cc_common_dropdown_checkbox",e.cc_common_dropdown_d="cc_common_dropdown_d",e.cc_common_dropdown_h="cc_common_dropdown_h",e.cc_common_dropdown_n="cc_common_dropdown_n",e.cc_common_gold_bg="cc_common_gold_bg",e.cc_common_h_slider_thumb_button="cc_common_h_slider_thumb_button",e.cc_common_h_slider_track="cc_common_h_slider_track",e.cc_common_h_slider_track_highlight="cc_common_h_slider_track_highlight",e.common_light="common_light",e.cc_common_match_info_bg="cc_common_match_info_bg",e.cc_common_progress_circle_thumb="cc_common_progress_circle_thumb",e.cc_common_progress_circle_track="cc_common_progress_circle_track",e.cc_common_progress_thumb="cc_common_progress_thumb",e.cc_common_progress_thumb_layer_0="cc_common_progress_thumb_layer_0",e.cc_common_progress_thumb_layer_1="cc_common_progress_thumb_layer_1",e.cc_common_progress_thumb_layer_2="cc_common_progress_thumb_layer_2",e.cc_common_progress_thumb_repeat="cc_common_progress_thumb_repeat",e.cc_common_progress_track="cc_common_progress_track",e.cc_common_radio_1="cc_common_radio_1",e.cc_common_radio_2="cc_common_radio_2",e.cc_common_switch_lab_off="cc_common_switch_lab_off",e.cc_common_switch_lab_on="cc_common_switch_lab_on",e.cc_common_tab_button_h="cc_common_tab_button_h",e.cc_common_tab_button_n="cc_common_tab_button_n",e.cc_common_tab_tutton_h="cc_common_tab_tutton_h",e.cc_common_tab_tutton_n="cc_common_tab_tutton_n",e.cc_common_text_input_bg2="cc_common_text_input_bg2",e.cc_common_text_input_bg="cc_common_text_input_bg",e.cc_common_toast="cc_common_toast",e.common_waiting_bg_1="common_waiting_bg_1",e.common_waiting_bg_2="common_waiting_bg_2",e.cc_common_word_15="cc_common_word_15",e.common_word_16="common_word_16",e.cc_exchange_btn_1="cc_exchange_btn_1",e.cc_exchange_btn_2="cc_exchange_btn_2",e.exchange_btn_3_h="exchange_btn_3_h",e.exchange_btn_3_n="exchange_btn_3_n",e.exchange_btn_4_h="exchange_btn_4_h",e.cc_exchange_btn_4_n="cc_exchange_btn_4_n",e.exchange_btn_5_h="exchange_btn_5_h",e.exchange_btn_6_h="exchange_btn_6_h",e.exchange_btn_6_n="exchange_btn_6_n",e.exchange_btn_7_h="exchange_btn_7_h",e.exchange_btn_7_n="exchange_btn_7_n",e.cc_exchange_btn_word_1_h="cc_exchange_btn_word_1_h",e.cc_exchange_btn_word_1_n="cc_exchange_btn_word_1_n",e.cc_exchange_btn_word_2_h="cc_exchange_btn_word_2_h",e.cc_exchange_btn_word_2_n="cc_exchange_btn_word_2_n",e.exchange_btn_word_3_h="exchange_btn_word_3_h",e.exchange_btn_word_3_n="exchange_btn_word_3_n",e.exchange_btn_word_4="exchange_btn_word_4",e.cc_exchange_image_1="cc_exchange_image_1",e.cc_exchange_image_10="cc_exchange_image_10",e.exchange_image_11="exchange_image_11",e.exchange_image_12="exchange_image_12",e.exchange_image_13="exchange_image_13",e.exchange_image_14="exchange_image_14",e.exchange_image_15="exchange_image_15",e.exchange_image_16="exchange_image_16",e.exchange_image_17="exchange_image_17",e.exchange_image_18="exchange_image_18",e.exchange_image_19="exchange_image_19",e.exchange_image_2="exchange_image_2",e.exchange_image_20="exchange_image_20",e.exchange_image_21="exchange_image_21",e.exchange_image_22="exchange_image_22",e.exchange_image_23="exchange_image_23",e.exchange_image_24="exchange_image_24",e.exchange_image_25="exchange_image_25",e.exchange_image_26="exchange_image_26",e.exchange_image_27="exchange_image_27",e.exchange_image_29="exchange_image_29",e.cc_exchange_image_3="cc_exchange_image_3",e.exchange_image_30="exchange_image_30",e.exchange_image_31="exchange_image_31",e.exchange_image_32="exchange_image_32",e.exchange_image_33="exchange_image_33",e.exchange_image_34="exchange_image_34",e.exchange_image_35="exchange_image_35",e.exchange_image_4="exchange_image_4",e.cc_exchange_image_6="cc_exchange_image_6",e.exchange_image_9="exchange_image_9",e.cc_icon_amount="cc_icon_amount",e.cc_icon_clock="cc_icon_clock",e.cc_icon_gold="cc_icon_gold",e.icon_head1="icon_head1",e.icon_head2="icon_head2",e.icon_head3="icon_head3",e.icon_head4="icon_head4",e.icon_head5="icon_head5",e.icon_head6="icon_head6",e.icon_head7="icon_head7",e.icon_head8="icon_head8",e.cc_icon_head_default="cc_icon_head_default",e.cc_icon_master="cc_icon_master",e.cc_icon_master_card="cc_icon_master_card",e.cc_icon_room_0="cc_icon_room_0",e.cc_icon_room_1="cc_icon_room_1",e.cc_icon_score="cc_icon_score",e.cc_icon_sign_up="cc_icon_sign_up",e.loading_icon="loading_icon",e.loading_logo="loading_logo",e.login_bg_3_2="login_bg_3_2",e.login_bg_3="login_bg_3",e.login_bg_4="login_bg_4",e.login_bg_5="login_bg_5",e.login_bg_6="login_bg_6",e.login_bt_word_wjmm_h="login_bt_word_wjmm_h",e.cc_login_bt_word_wjmm_n="cc_login_bt_word_wjmm_n",e.login_bt_word_zczh_h="login_bt_word_zczh_h",e.cc_login_bt_word_zczh_n="cc_login_bt_word_zczh_n",e.login_btn_collect_h="login_btn_collect_h",e.login_btn_collect_n="login_btn_collect_n",e.cc_login_btn_dl_h="cc_login_btn_dl_h",e.cc_login_btn_dl_n="cc_login_btn_dl_n",e.login_btn_home_page_h="login_btn_home_page_h",e.login_btn_home_page_n="login_btn_home_page_n",e.login_btn_ksdl_h="login_btn_ksdl_h",e.login_btn_ksdl_n="login_btn_ksdl_n",e.login_btn_ls_h="login_btn_ls_h",e.login_btn_ls_n="login_btn_ls_n",e.login_btn_word_ksdl_h="login_btn_word_ksdl_h",e.login_btn_word_ksdl_n="login_btn_word_ksdl_n",e.login_btn_word_ls_h="login_btn_word_ls_h",e.login_btn_word_ls_n="login_btn_word_ls_n",e.login_panel_bg="login_panel_bg",e.match_bg_1="match_bg_1",e.cc_match_btn_exit_h="cc_match_btn_exit_h",e.cc_match_btn_exit_n="cc_match_btn_exit_n",e.cc_match_btn_exit_txt_h="cc_match_btn_exit_txt_h",e.cc_match_btn_exit_txt_n="cc_match_btn_exit_txt_n",e.cc_match_btn_help_h="cc_match_btn_help_h",e.cc_match_btn_help_n="cc_match_btn_help_n",e.match_btn_join_h="match_btn_join_h",e.match_btn_join_n="match_btn_join_n",e.cc_match_btn_reward_h="cc_match_btn_reward_h",e.cc_match_btn_reward_n="cc_match_btn_reward_n",e.cc_match_btn_sign_up_h="cc_match_btn_sign_up_h",e.cc_match_btn_sign_up_n="cc_match_btn_sign_up_n",e.cc_match_finish_bg="cc_match_finish_bg",e.cc_match_finish_top="cc_match_finish_top",e.cc_match_float_bg="cc_match_float_bg",e.cc_match_panel_bg_2="cc_match_panel_bg_2",e.cc_match_panel_bg="cc_match_panel_bg",e.match_waiting_1_h="match_waiting_1_h",e.match_waiting_1_n="match_waiting_1_n",e.match_waiting_2_h="match_waiting_2_h",e.match_waiting_2_n="match_waiting_2_n",e.match_waiting_3_h="match_waiting_3_h",e.match_waiting_3_n="match_waiting_3_n",e.match_waiting_4_h="match_waiting_4_h",e.match_waiting_4_n="match_waiting_4_n",e.cc_match_word_17="cc_match_word_17",e.cc_match_word_18="cc_match_word_18",e.cc_match_word_19="cc_match_word_19",e.cc_match_word_20="cc_match_word_20",e.cc_match_word_21="cc_match_word_21",e.cc_match_word_22="cc_match_word_22",e.cc_match_word_24="cc_match_word_24",e.cc_match_word_26="cc_match_word_26",e.cc_match_word_29="cc_match_word_29",e.cc_match_word_4="cc_match_word_4",e.cc_match_word_5="cc_match_word_5",e.cc_match_word_6="cc_match_word_6",e.cc_play_bg_1="cc_play_bg_1",e.cc_play_bg_2="cc_play_bg_2",e.cc_play_bg_3="cc_play_bg_3",e.cc_play_bg_4="cc_play_bg_4",e.cc_play_bg_5="cc_play_bg_5",e.play_bg_6="play_bg_6",e.play_bottom_bar_bg="play_bottom_bar_bg",e.play_bottom_bar_bg_long="play_bottom_bar_bg_long",e.play_btn_anger_h="play_btn_anger_h",e.play_btn_anger_n="play_btn_anger_n",e.play_btn_chat_1="play_btn_chat_1",e.play_btn_chat_2="play_btn_chat_2",e.play_btn_praiser_h="play_btn_praiser_h",e.play_btn_praiser_n="play_btn_praiser_n",e.play_btn_ridiculer_h="play_btn_ridiculer_h",e.play_btn_ridiculer_n="play_btn_ridiculer_n",e.cc_play_btn_trusteeship_d="cc_play_btn_trusteeship_d",e.cc_play_btn_trusteeship_h="cc_play_btn_trusteeship_h",e.cc_play_btn_trusteeship_n="cc_play_btn_trusteeship_n",e.play_btn_urge_h="play_btn_urge_h",e.play_btn_urge_n="play_btn_urge_n",e.cc_play_btn_word_1_d="cc_play_btn_word_1_d",e.cc_play_btn_word_1_h="cc_play_btn_word_1_h",e.cc_play_btn_word_1_n="cc_play_btn_word_1_n",e.cc_play_btn_word_2_d="cc_play_btn_word_2_d",e.cc_play_btn_word_2_h="cc_play_btn_word_2_h",e.cc_play_btn_word_2_n="cc_play_btn_word_2_n",e.cc_play_btn_word_3_h="cc_play_btn_word_3_h",e.cc_play_btn_word_3_n="cc_play_btn_word_3_n",e.cc_play_btn_word_again_d="cc_play_btn_word_again_d",e.cc_play_btn_word_again_h="cc_play_btn_word_again_h",e.cc_play_btn_word_again_n="cc_play_btn_word_again_n",e.cc_play_btn_word_come_d="cc_play_btn_word_come_d",e.cc_play_btn_word_come_h="cc_play_btn_word_come_h",e.cc_play_btn_word_come_n="cc_play_btn_word_come_n",e.cc_play_btn_word_continue_h="cc_play_btn_word_continue_h",e.cc_play_btn_word_continue_n="cc_play_btn_word_continue_n",e.cc_play_btn_word_exchange_h="cc_play_btn_word_exchange_h",e.cc_play_btn_word_exchange_n="cc_play_btn_word_exchange_n",e.cc_play_btn_word_getready_h="cc_play_btn_word_getready_h",e.cc_play_btn_word_getready_n="cc_play_btn_word_getready_n",e.cc_play_btn_word_no_d="cc_play_btn_word_no_d",e.cc_play_btn_word_no_h="cc_play_btn_word_no_h",e.cc_play_btn_word_no_n="cc_play_btn_word_no_n",e.cc_play_btn_word_nocall_h="cc_play_btn_word_nocall_h",e.cc_play_btn_word_nocall_n="cc_play_btn_word_nocall_n",e.cc_play_btn_word_prompt_d="cc_play_btn_word_prompt_d",e.cc_play_btn_word_prompt_h="cc_play_btn_word_prompt_h",e.cc_play_btn_word_prompt_n="cc_play_btn_word_prompt_n",e.play_bubble="play_bubble",e.cc_play_card_count_bg="cc_play_card_count_bg",e.play_chat_bg="play_chat_bg",e.play_failed="play_failed",e.cc_play_hand_ok="cc_play_hand_ok",e.cc_play_master_card_bg="cc_play_master_card_bg",e.cc_play_match_detail_bg="cc_play_match_detail_bg",e.cc_play_match_place_info_bg="cc_play_match_place_info_bg",e.cc_play_name_bg="cc_play_name_bg",e.cc_play_robot="cc_play_robot",e.cc_play_robot_eye="cc_play_robot_eye",e.play_success="play_success",e.cc_play_word_1="cc_play_word_1",e.cc_play_word_2="cc_play_word_2",e.cc_play_word_3="cc_play_word_3",e.cc_play_word_4="cc_play_word_4",e.cc_play_word_5="cc_play_word_5",e.cc_play_word_6="cc_play_word_6",e.cc_play_word_7="cc_play_word_7",e.profile_txt_1="profile_txt_1",e.cc_recharge_bg_34="cc_recharge_bg_34",e.recharge_bg_35="recharge_bg_35",e.cc_recharge_bg_36="cc_recharge_bg_36",e.recharge_bg_37="recharge_bg_37",e.cc_recharge_bg_38="cc_recharge_bg_38",e.recharge_bg_39="recharge_bg_39",e.recharge_bg_40="recharge_bg_40",e.redgift_bg="redgift_bg",e.redgift_happy="redgift_happy",e.redgift_icon="redgift_icon",e.redgift_label_bg="redgift_label_bg",e.redgift_sorry="redgift_sorry",e.room_ads_collect="room_ads_collect",e.cc_room_bg_1="cc_room_bg_1",e.cc_room_bg_2="cc_room_bg_2",e.cc_room_bg_3="cc_room_bg_3",e.room_btn_bank_h="room_btn_bank_h",e.room_btn_bank_n="room_btn_bank_n",e.room_btn_lobby_h="room_btn_lobby_h",e.room_btn_lobby_n="room_btn_lobby_n",e.room_btn_setup_d="room_btn_setup_d",e.room_btn_setup_h="room_btn_setup_h",e.cc_room_btn_setup_n="cc_room_btn_setup_n",e.room_channel_icon_0="room_channel_icon_0",e.room_channel_icon_1="room_channel_icon_1",e.room_channel_lab_0="room_channel_lab_0",e.room_channel_lab_1="room_channel_lab_1",e.room_item_ads="room_item_ads",e.cc_room_item_bg="cc_room_item_bg",e.cc_room_item_bottom="cc_room_item_bottom",e.cc_room_match_item_bg="cc_room_match_item_bg",e.cc_room_seprate="cc_room_seprate",e.cc_room_tip_gold_can_get="cc_room_tip_gold_can_get",e.cc_room_word_0="cc_room_word_0",e.cc_room_word_13="cc_room_word_13",e.cc_room_word_14="cc_room_word_14",e.cc_room_word_1="cc_room_word_1",e.cc_room_word_23="cc_room_word_23",e.cc_room_word_25="cc_room_word_25",e.room_word_27="room_word_27",e.cc_room_word_28="cc_room_word_28",e.cc_room_word_2="cc_room_word_2",e.cc_room_word_3="cc_room_word_3",e.room_word_8="room_word_8",e.cc_setting_btn_about_h="cc_setting_btn_about_h",e.cc_setting_btn_about_n="cc_setting_btn_about_n",e.cc_setting_btn_feedback_h="cc_setting_btn_feedback_h",e.cc_setting_btn_feedback_n="cc_setting_btn_feedback_n",e.cc_setting_btn_help_h="cc_setting_btn_help_h",e.cc_setting_btn_help_n="cc_setting_btn_help_n",e.cc_setting_btn_logout_d="cc_setting_btn_logout_d",e.cc_setting_btn_logout_h="cc_setting_btn_logout_h",e.cc_setting_btn_logout_n="cc_setting_btn_logout_n",e.cc_setting_word_1="cc_setting_word_1",e.cc_setting_word_2="cc_setting_word_2",e.cc_setting_word_3="cc_setting_word_3",e.ccddzlang="ccddzlang",e.sheet_loading="sheet_loading",e.sheet_bank_c="sheet_bank_c",e.sheet_common="sheet_common",e.sheet_common_c="sheet_common_c",e.sheet_icon_c="sheet_icon_c",e.sheet_login_c="sheet_login_c",e.sheet_match="sheet_match",e.sheet_match_c="sheet_match_c",e.sheet_play="sheet_play",e.sheet_play_c="sheet_play_c",e.sheet_profile_c="sheet_profile_c",e.sheet_redgift="sheet_redgift",e.sheet_room_c="sheet_room_c",e.sheet_setting="sheet_setting",e.sheet_poker="sheet_poker",e.sheet_recharge="sheet_recharge",e.ccgame_proto="ccgame_proto",e.ccuser_proto="ccuser_proto",e.cc_font_num_0="cc_font_num_0",e.cc_font_num_1="cc_font_num_1",e.cc_font_num_2="cc_font_num_2",e.cc_font_num_3="cc_font_num_3",e.cc_font_num_6="cc_font_num_6",e.cc_font_num_7="cc_font_num_7",e.cc_font_num_8="cc_font_num_8",e.cc_font_num_9="cc_font_num_9",e.login_bg="cc_login_bg",e.play_bg="cc_play_bg",e.room_bg="cc_room_bg",e.bgm="cc_bgm",e.Man_1="Man_1",e.Man_10="Man_10",e.Man_11="Man_11",e.Man_12="Man_12",e.Man_13="Man_13",e.Man_14="Man_14",e.Man_15="Man_15",e.Man_2="Man_2",e.Man_3="Man_3",e.Man_4="Man_4",e.Man_5="Man_5",e.Man_6="Man_6",e.Man_7="Man_7",e.Man_8="Man_8",e.Man_9="Man_9",e.Man_buyao1="Man_buyao1",e.Man_buyao2="Man_buyao2",e.Man_buyao3="Man_buyao3",e.Man_buyao4="Man_buyao4",e.Man_dui1="Man_dui1",e.Man_dui10="Man_dui10",e.Man_dui11="Man_dui11",e.Man_dui12="Man_dui12",e.Man_dui13="Man_dui13",e.Man_dui2="Man_dui2",e.Man_dui3="Man_dui3",e.Man_dui4="Man_dui4",e.Man_dui5="Man_dui5",e.Man_dui6="Man_dui6",e.Man_dui7="Man_dui7",e.Man_dui8="Man_dui8",e.Man_dui9="Man_dui9",e.Man_feiji="Man_feiji",e.Man_jiabei="Man_jiabei",e.Man_liandui="Man_liandui",e.Man_NoOrder="Man_NoOrder",e.Man_Order="Man_Order",e.Man_sandaiyi="Man_sandaiyi",e.Man_sandaiyidui="Man_sandaiyidui",e.Man_shunzi="Man_shunzi",e.Man_sidaier="Man_sidaier",e.Man_sidailiangdui="Man_sidailiangdui",e.Man_tuple1="Man_tuple1",e.Man_tuple10="Man_tuple10",e.Man_tuple11="Man_tuple11",e.Man_tuple12="Man_tuple12",e.Man_tuple13="Man_tuple13",e.Man_tuple2="Man_tuple2",e.Man_tuple3="Man_tuple3",e.Man_tuple4="Man_tuple4",e.Man_tuple5="Man_tuple5",e.Man_tuple6="Man_tuple6",e.Man_tuple7="Man_tuple7",e.Man_tuple8="Man_tuple8",e.Man_tuple9="Man_tuple9",e.Man_wangzha="Man_wangzha",e.Man_zhadan="Man_zhadan",e.Woman_1="Woman_1",e.Woman_10="Woman_10",e.Woman_11="Woman_11",e.Woman_12="Woman_12",e.Woman_13="Woman_13",e.Woman_14="Woman_14",e.Woman_15="Woman_15",e.Woman_2="Woman_2",e.Woman_3="Woman_3",e.Woman_4="Woman_4",e.Woman_5="Woman_5",e.Woman_6="Woman_6",e.Woman_7="Woman_7",e.Woman_8="Woman_8",e.Woman_9="Woman_9",e.Woman_buyao1="Woman_buyao1",e.Woman_buyao2="Woman_buyao2",e.Woman_buyao3="Woman_buyao3",e.Woman_buyao4="Woman_buyao4",e.Woman_dui1="Woman_dui1",e.Woman_dui10="Woman_dui10",e.Woman_dui11="Woman_dui11",e.Woman_dui12="Woman_dui12",e.Woman_dui13="Woman_dui13",e.Woman_dui2="Woman_dui2",e.Woman_dui3="Woman_dui3",e.Woman_dui4="Woman_dui4",e.Woman_dui5="Woman_dui5",e.Woman_dui6="Woman_dui6",e.Woman_dui7="Woman_dui7",e.Woman_dui8="Woman_dui8",e.Woman_dui9="Woman_dui9",e.Woman_feiji="Woman_feiji",e.Woman_liandui="Woman_liandui",e.Woman_NoOrder="Woman_NoOrder",e.Woman_Order="Woman_Order",e.Woman_Rob1="Woman_Rob1",e.Woman_Rob2="Woman_Rob2",e.Woman_Rob3="Woman_Rob3",e.Woman_sandaiyi="Woman_sandaiyi",e.Woman_sandaiyidui="Woman_sandaiyidui",e.Woman_shunzi="Woman_shunzi",e.Woman_sidaier="Woman_sidaier",e.Woman_sidailiangdui="Woman_sidailiangdui",e.Woman_tuple1="Woman_tuple1",e.Woman_tuple10="Woman_tuple10",e.Woman_tuple11="Woman_tuple11",e.Woman_tuple12="Woman_tuple12",e.Woman_tuple13="Woman_tuple13",e.Woman_tuple2="Woman_tuple2",e.Woman_tuple3="Woman_tuple3",e.Woman_tuple4="Woman_tuple4",e.Woman_tuple5="Woman_tuple5",e.Woman_tuple6="Woman_tuple6",e.Woman_tuple7="Woman_tuple7",e.Woman_tuple8="Woman_tuple8",e.Woman_tuple9="Woman_tuple9",e.Woman_wangzha="Woman_wangzha",e.Woman_zhadan="Woman_zhadan",e.sheet_exchange="sheet_exchange",e.cc_font_num_10="cc_font_num_10",e.cc_font_num_12="cc_font_num_12",e.ani_coin_png="ani_coin_png",e.ani_coin_json="ani_coin_json",e.bgm_play="bgm_play",e.bgm_room="bgm_room",e.effect_gold_rain="cc_effect_gold_rain",e
}();__reflect(CCGlobalResNames.prototype,"CCGlobalResNames");var CCGlobalSceneNames=function(){function e(){}return e.LOADING="loading",e.MOST_TOP="mostTop",e.EFFECT="effect",e.EFFECT2="effect2",e.COMMON="common",e.COVER="cover",e.MENU="menu",e.GUIDE="guide",e.ROOM="room",e.LEVEL="level",e.LOADING_TIP="loadingTip",e.LOGIN="login",e.PLAY="play",e.RESULT="result",e.COLLECTIONS="collections",e.GIFT="gift",e.RECHARGE="recharge",e}();__reflect(CCGlobalSceneNames.prototype,"CCGlobalSceneNames");var _encrypt=CCalien.Encrypt.encryptStr,_decrypt=CCalien.Encrypt.encryptStr,CCGlobalUserData=function(e){function t(){var t=e.call(this)||this;return t.name="user",t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this.prefix=e},t.prototype._setValue=function(e,t,i){void 0===i&&(i=!1);var n=_encrypt(e),o=_encrypt(t);this.setItem(n,o,i)},t.prototype._getValue=function(e){var t=_encrypt(e),i=this.save[t]||null;return i&&(i=_decrypt(i)),i},t.prototype.saveLocalPhone=function(e,t){if(void 0===t&&(t=!1),e&&11==e.length){var i="phone",n=e;this.setBindPhone(!0),this._setValue(i,n,t)}},t.prototype.saveLocalAli=function(e,t,i){void 0===i&&(i=!0);var n="ali",o=e+"|"+t;this._setValue(n,o,i)},t.prototype.setBindWx=function(e){var t="bindWx",i="0";e&&(i="1"),this._setValue(t,i)},t.prototype.hasBindWx=function(){var e="bindWx",t=this._getValue(e);return t&&"1"==t?!0:!1},t.prototype.setBindAli=function(e){var t="bindAli",i="0";e&&(i="1"),this._setValue(t,i)},t.prototype.hasBindAli=function(){var e="bindAli",t=this._getValue(e);return t&&"1"==t?!0:!1},t.prototype.setBindPhone=function(e){var t="bindPhone",i="0";e&&(i="1"),this._setValue(t,i)},t.prototype.hasBindPhone=function(){var e="bindPhone",t=this._getValue(e);return t&&"1"==t?!0:!1},t.prototype.getLocalAli=function(){var e="ali",t=this._getValue(e);if(t){var i=t,n=i.split("|");if(n.length<2)return null;var o=n[0],a=n[1];return{account:o,name:a}}return null},t.prototype.getLocalPhone=function(){var e="phone";return this._getValue(e)},t.prototype.setToken=function(e,t){void 0===t&&(t=!1);var i="token",n=e;this._setValue(i,n,t)},t.prototype.setUid=function(e,t){void 0===t&&(t=!1);var i="uid",n=e;this._setValue(i,n,t)},t.prototype.setSk=function(e,t){void 0===t&&(t=!1);var i="sk",n=e;this._setValue(i,n,t)},t.prototype.getToken=function(){var e="token";return this._getValue(e)},t.prototype.getUid=function(){var e="uid";return this._getValue(e)},t.prototype.getSk=function(){var e="sk";return this._getValue(e)},t.prototype.setHasClickNewYearGift=function(){this._setValue("newYearGift","1",!0)},t.prototype.hasClickNewYearGift=function(){var e=this._getValue("newYearGift");return e&&"1"==e?!0:!1},t.prototype.setHasClickNewYearWork=function(){this._setValue("newYearWork","1",!0)},t.prototype.hasClickNewYearWork=function(){var e=this._getValue("newYearWork");return e&&"1"==e?!0:!1},t.prototype.setHasClickNewYearTask=function(){this._setValue("newYearTask","1",!0)},t.prototype.hasClickNewYearTask=function(){var e=this._getValue("newYearTask");return e&&"1"==e?!0:!1},t}(CCGlobalDataStorage);__reflect(CCGlobalUserData.prototype,"CCGlobalUserData");var CCGlobalUserInfoData=function(){function e(){this._sysTalkMaxN=10,this._hornTalkRecMaxN=20,this.newGiftBuyCount=0,this.newYearTaskInfo=[],this.newYearLoginInfo=[],this.newYearWorkInfo=[],this.otherrcchance=[],this.poolreward=[0,0],this._payCount=0,this._bRealname=!1,this.clean()}return Object.defineProperty(e.prototype,"realName",{get:function(){return this._bRealname},set:function(e){this._bRealname=e},enumerable:!0,configurable:!0}),e.prototype.hasRecorder=function(){return this.cardsRecorder&&this.cardsRecorder.length>=7&&this.cardsRecorder[6]>0?!0:!1},e.prototype.todayHasBuyRevive=function(){return this.diamondrelive>=1?!0:!1},e.prototype.setTodayHasBuyRevive=function(){this.diamondrelive+=1},e.prototype.getTodayBuyDiamondReviveNum=function(){return this.diamondrelive||0},e.prototype.getTodayBuyGoldReviveNum=function(){return this.goldrelive||0},e.prototype.isMaxBuyDiamondRevive=function(){var e=this.getDiamondReviveMaxBuy();return this.diamondrelive>=e?!0:!1},e.prototype.isMaxBuyGoldRevive=function(){var e=CCGlobalGameConfig.getGoldReviveMaxBuy();return this.goldrelive>=e?!0:!1},e.prototype.getDiamondReviveMaxBuy=function(){return 9999},e.prototype.todayHasBuyGoldRevive=function(){return this.goldrelive>=1?!0:!1},e.prototype.setTodayHasBuyGoldRevive=function(){this.goldrelive+=1},e.prototype.initData=function(t){var i=this;t.cardsRecorder&&t.cardsRecorder.length<1&&(t.cardsRecorder=null),CCalien.CCDDZUtils.injectProp(this,t,function(t,n,o){"nickname"==n?o&&("参赛玩家"!=o?t.nickname=CCDDZBase64.decode(o):t.nickname=o):"sex"==n?e.updateSex(t,o):"gold"==n||"redcoingot"==n||"totalwincnt"==n||"totallosecnt"==n||"totaldrawcnt"==n||"diamondgiftgot"==n||"diamondrelive"==n||"godlrelive"==n?(t[n]=parseInt(o),"redcoingot"==n&&(t[n]=t[n]/100)):"frechargerewardday"==n?(o>=1&&9>=o||-1==o)&&(t[n]=parseInt(o),-1!=o&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.FRECHARGE_HASUPDATE)):"showredpoint"==n?o&&o.length>=1&&(t[n]=o):"otherrcchance"==n?o&&o.length>=2&&(t[n]=o):"poolreward"==n?o&&o.length>=2&&(t[n]=o):"wincnt"==n?o&&o.length>=1&&(t[n]=o):"daytaskprogress"==n?o.length>=1&&(t[n]=o):"daytaskstatus"==n?o&&o.length>=CCGlobalGameConfig.getDayTaskList().length&&(t[n]=o,i._calculateOverTaskNum(o)):"invitetaskstatus"==n?o&&o.length>=2&&(t[n]=o):"imageid"==n?o&&0==o.indexOf("head")&&o.length<=10?t[n]="cc_icon_head_default":t[n]=o:"praise"==n?o&&o>=5&&(t[n]=o):"ivtrwddayrcd"==n?o&&o.length>=2&&(t[n]=o):"primarydmrcge"==n?o&&o.length>=1&&(t[n]=o):"vipdata"==n?o&&o.length>=1&&(t[n]=o,i._calcuateVipLevel()):"params"==n?o.length>=1&&(i.monthcardinfo=o):"playrecords"==n?o&&o.length>=1&&(i.playrecords=o):t[n]=o}),0==this.sex&&e.updateSex(this,0),0!=this.recorderfirstrewardgot||t.recorderfirstrewardgot||(this.recorderfirstrewardgot=null)},e.updateSex=function(e,t){void 0===t&&(t=0),e.sex=t,e.sexStr=lang.sex[e.sex],e.sexVoiceStr=lang.sexVoice[e.sex]},e.prototype._calculateOverTaskNum=function(e){for(var t=CCGlobalGameConfig.getCfgByField("newTaskInfo"),i=0,n=0;n<e.length;++n)if(1==e[n]){var o=n+1;2==t[o].tp||t[o].hide||(i+=1)}var a=this._dayTaskOverNum;this._dayTaskOverNum=i,a!=this._dayTaskOverNum&&CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_DTREWARD_GET_SUCC)},e.prototype.getWinRate=function(){var e=this.totalwincnt+this.totaldrawcnt+this.totallosecnt;return 0==e||0==this.totalwincnt?0:this.totalwincnt/e},e.prototype.getGold=function(){return this.gold},e.prototype.addGold=function(e){var t=this.gold+e;this.gold=t,0>t&&(this.gold=0)},e.prototype.getInviteTaskPre=function(){return this.invitetaskstatus[0]},e.prototype.getInviteTaskStatus=function(){return this.invitetaskstatus},e.prototype.getDayTaskPre=function(){return this.daytaskprogress},e.prototype.getDayTaskAllTStatus=function(){return this.daytaskstatus},e.prototype.getDayTaskOverCount=function(){return this._dayTaskOverNum},e.prototype.isNotBuyFRecharge=function(){return-1==this.frechargerewardday?!0:!1},e.prototype.isNotBuyDiaFirRecharge=function(){return!1},e.prototype.checkMonthCardRevival=function(){var e=1e3*this.monthcardinfo[3],t=1e3*this.monthcardinfo[1],i=ccserver.getServerStamp();return t>i&&(0==e||0==CCDDZUtils.isTwoStampSameDay(e,i))?(CCDDZAlert.show("是否使用月卡复活机会？",0,function(e){if("confirm"==e){var t={optype:10};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,t)}else"close"==e&&CCDDZMainLogic.backToRoomScene()}),!0):!1},e.prototype.checkMonthCardFreeDiamond=function(){var e=0==this.monthcardinfo[4]?0:1e3*this.monthcardinfo[4],t=0==this.monthcardinfo[2]?0:1e3*this.monthcardinfo[2],i=ccserver.getServerStamp();return t>i&&(0==e||0==CCDDZUtils.isTwoStampSameDay(e,i))?!0:!1},e.prototype.checkMonthCardEndTime=function(){var e=0==this.monthcardinfo[1]?0:1e3*this.monthcardinfo[1],t=0==this.monthcardinfo[2]?0:1e3*this.monthcardinfo[2];if(0==e&&0==t)return!0;var i=ccserver.getServerStamp(),n=Number(CCDDZUtils.getTimeStampDiff(i,e,"day")),o=Number(CCDDZUtils.getTimeStampDiff(i,t,"day"));return console.log("checkMonthCardEndTime-------1->",e,t,i,n,o),n>=3||o>=3?!1:3>n&&0!=e||3>o&&0!=t?!0:!1},e.prototype.isHadGetFRechargeRew=function(){return this.frechargerewardday>=2&&this.frechargerewardday<=9?!0:!1},e.prototype.isGetTodayFRechargeRew=function(){return 8==this.frechargerewardday?!0:!1},e.prototype.isFRechargeRewGetOver=function(){return this.frechargerewardday>=1&&this.frechargerewardday<=7?!1:!0},e.prototype.getFRechargeRewGetDay=function(){return this.frechargerewardday},e.prototype.setFRechargeTodayHasGet=function(){this.frechargerewardday=8,CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_FRREWARD_GET_SUCC)},e.prototype.isTodayHasSign=function(){return this.todayHasSign},e.prototype.setTodaySigned=function(e){this.todayHasSign=e},e.prototype.isSignGoldAddByFRecharge=function(){return this.signrewardaddremain&&this.signrewardaddremain>0?!0:!1},e.prototype.isNotGetFRechargeSignAdd=function(){return 7==this.signrewardaddremain?!0:!1},e.prototype.signSuccSubSignAddRemin=function(){!this.isNotBuyFRecharge()&&this.isHadGetFRechargeRew()&&this.signrewardaddremain&&(this.signrewardaddremain-=1,this.signrewardaddremain<0&&(this.signrewardaddremain=0))},e.prototype.setTaskHasGetRew=function(e){for(var t=0;t<this.daytaskstatus.length;++t)if(t+1==e){this.daytaskstatus[t]=2;break}this._calculateOverTaskNum(this.daytaskstatus)},e.prototype.setInviteTaskHasGetRew=function(e){for(var t=0;t<this.invitetaskstatus.length;++t)if(t==e){this.invitetaskstatus[t]=2;break}CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_DTREWARD_GET_SUCC)},e.prototype.addHornTalkRec=function(e){if(e&&e.nickname&&e.msg){var t=new Date(e.time),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();10>i&&(i="0"+i),10>n&&(n="0"+n),10>o&&(o="0"+o);var a=i+":"+n+":"+o,r={time:a,name:e.nickname,msg:e.msg,isUser:!0};this._hornTalkRec.length>=this._hornTalkRecMaxN&&this._hornTalkRec.shift(),this._hornTalkRec.push(r),this._hornTalkShowList.push(r),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HORN_TALK_RECORDS_CHANGE,r)}},e.prototype.addHornTalkRecByHttp=function(e){if(e&&e.nickname&&e.msg&&e.add_time){var t=e.add_time.substr(-8),i=e.nickname,n=e.msg,o={time:t,name:i,msg:n,isUser:!0};this._hornTalkRec.length>=this._hornTalkRecMaxN&&this._hornTalkRec.shift(),this._hornTalkRec.push(o)}},e.prototype.cleanLocalHornRecByHttp=function(){this._hornTalkRec=[]},e.prototype.setHornTalkRecMaxLen=function(e){this._hornTalkRecMaxN=e},e.prototype.getHornTalkRecList=function(){return this._hornTalkRec},e.prototype.getHornTalkShowLen=function(){return this._hornTalkShowList.length},e.prototype.getFrontHornTalkShow=function(){var e=null;return this._hornTalkShowList.length>0&&(e=this._hornTalkShowList[0],this._hornTalkShowList.shift()),e},e.prototype.addSysTalkRec=function(e){this._sysTalkRec[0]={msg:e,isUser:!1},CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HORN_TALK_RECORDS_CHANGE)},e.prototype.getSysTalkRecList=function(){return this._sysTalkRec},e.prototype.setNationalActInfo=function(e){this._nationalInfo=e,CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.NATIONAL_INFO_CHANGE)},e.prototype.getNationalGetLoginRewDay=function(){return this._nationalInfo&&this._nationalInfo.getRewDay?this._nationalInfo.getRewDay:0},e.prototype.hasGetNationalTodayLoginRew=function(){return this._nationalInfo&&2==this._nationalInfo.todayGet?!0:!1},e.prototype.getNationalInviteNum=function(){return this._nationalInfo&&this._nationalInfo.inviteNum?this._nationalInfo.inviteNum:0},e.prototype.getNationalInviteRew=function(){return this._nationalInfo&&this._nationalInfo.inviteNum?CCGlobalGameConfig.getNationalInviteRewByNum(this._nationalInfo.inviteNum):0},e.prototype.hasGetNationalInviteRew=function(){return this._nationalInfo&&this._nationalInfo.getInviteRew&&2==this._nationalInfo.getInviteRew?!0:!1},e.prototype.hasGetNewDiamond=function(){return this.diamondgiftgot>=1?!0:!1},e.prototype.canGetNewDiamond=function(){return 1!=this.diamondgiftgot?!0:!1},e.prototype.setCanGetNewDiamond=function(){(null==this.diamondgiftgot||void 0==this.diamondgiftgot)&&(this.diamondgiftgot=-1)},e.prototype.setHasGetNewDiamond=function(){this.diamondgiftgot=1},e.prototype.setNationalGetLoginRewDay=function(e){this._nationalInfo.getRewDay=e,this._nationalInfo.todayGet=2},e.prototype.getFreeBrowCount=function(){return this.freeBrowCount},e.prototype.setFreeBrowCount=function(e){this.freeBrowCount=e},e.prototype.addFreeBrowCount=function(e){var t=this.freeBrowCount+e;t>=0?this.freeBrowCount=t:this.freeBrowCount=0},e.prototype.hasBuyOneDiaRevive=function(){var e=this.primarydmrcge;return e&&e.length>=1&&e[0]>=1?!0:!1},e.prototype.hasBuyThreeDiaRevive=function(){var e=this.primarydmrcge;return e&&e.length>=2&&e[1]>=1?!0:!1},e.prototype.shouldShowTaskRed=function(){return this.showredpoint&&this.showredpoint.length>=1&&1==this.showredpoint[0]?!0:!1},e.prototype.shouldShowActFirstRechareRedRed=function(){return this.showredpoint&&this.showredpoint.length>=2&&1==this.showredpoint[1]?!0:!1},e.prototype.shouldShowActDiaFirRechareRedRed=function(){return this.showredpoint&&this.showredpoint.length>=5&&1==this.showredpoint[4]?!0:!1},e.prototype.shouldShowActDownAppRed=function(){return this.showredpoint&&this.showredpoint.length>=3&&1==this.showredpoint[2]?!0:!1},e.prototype.shouldShowActThanksRed=function(){return this.showredpoint&&this.showredpoint.length>=4&&1==this.showredpoint[3]?!0:!1},e.prototype.setNotShowTaskRed=function(){this.showredpoint[0]=0},e.prototype.setNotShowActFirstRechargeRed=function(){this.showredpoint[1]=0,this.updateActRed()},e.prototype.setNotShowActDiaFirRechargeRed=function(){this.showredpoint[4]=0,this.updateActRed()},e.prototype.setNotShowActDownAppRed=function(){this.showredpoint[2]=0,this.updateActRed()},e.prototype.setNotShowActThanksRed=function(){this.showredpoint[3]=0,this.updateActRed()},e.prototype.setNotLoginApp=function(e){this.notLoginApp=e},e.prototype.shouldShowActRed=function(){if(this.showredpoint&&this.showredpoint.length>1)for(var e=1;e<this.showredpoint.length;++e)if(0!=this.showredpoint[e])return!0;return!1},e.prototype.updateActRed=function(){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.ACT_RED_CHANGE)},e.prototype.hasNotLoginApp=function(){return this.notLoginApp},e.prototype.getNorRoomRedNum=function(){var e=0;if(this.wincnt)for(var t=void 0,i=0;i<this.wincnt.length;++i)t=this.wincnt[i].roomid,1001!=t&&1002!=t&&8001!=t&&8002!=t&&(e+=this.wincnt[i].chance);return this.otherrcchance&&this.otherrcchance.length>=2&&(e+=this.otherrcchance[1]),this.poolreward,e},e.prototype.getRoomWinCntInfo=function(e){var t=null;if(this.wincnt)for(var i=this.wincnt.length,n=0;i>n;++n)if(this.wincnt[n].roomid==e){t=this.wincnt[n];break}return t},e.prototype.subNewGoldRedNum=function(){if(this.poolreward&&this.poolreward.length>=2){var e=this.poolreward[1];e-=1,0>e&&(e=0),this.poolreward[1]=e}},e.prototype.getNewGoldRed=function(){return this.poolreward||[0,0]},e.prototype.subWangZhaRedNum=function(){if(this.otherrcchance&&this.otherrcchance.length>=2){var e=this.otherrcchance[1];e-=1,0>e&&(e=0),this.otherrcchance[1]=e}},e.prototype.subInviteRedNum=function(){if(this.otherrcchance&&this.otherrcchance.length>=1){var e=this.otherrcchance[0];e-=1,0>e&&(e=0),this.otherrcchance[0]=e}},e.prototype.subInviteExtraRedNum=function(){if(this.otherrcchance&&this.otherrcchance.length>=3){var e=this.otherrcchance[2];e-=1,0>e&&(e=0),this.otherrcchance[2]=e}},e.prototype.getWangZhaRedNum=function(){return this.otherrcchance&&this.otherrcchance.length>=2?this.otherrcchance[1]:0},e.prototype.getInviteRedNum=function(){return this.otherrcchance&&this.otherrcchance.length>=1?this.otherrcchance[0]:0},e.prototype.getInviteExtraRedNum=function(){return this.otherrcchance&&this.otherrcchance.length>=3?this.otherrcchance[2]:0},e.prototype.getInviteRedGetRewNum=function(){var e=this.ivtrwddayrcd;return e&&e.length>=1?e[0]:0},e.prototype.changeInviteGetRedNum=function(e){var t=this.ivtrwddayrcd;t||(t=[0,0]),t[0]+=e?1:-1},e.prototype.getHasGetInvExtraRed=function(){var e=this.ivtrwddayrcd;return e&&e.length>=2?e[1]:0},e.prototype.changeInviteGetExtraRedNum=function(e){var t=this.ivtrwddayrcd;t||(t=[0,0]),t[1]+=e?1:-1},e.prototype.getRoomRedWinCnt=function(e){var t=3,i=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(e);return 1001==e||1002==e||8001==e||1006==e?t=1001==e?5:1002==e?3:1:i?1e3==e?i.getchance>=2?t=3:i.getchance>=1&&(t=2):8003==e&&(t=1):(1e3==e||8003==e)&&(t=1),t},e.prototype.getRoomNeedWinCntGetRed=function(e){var t=5;if((10002==e||10004==e)&&(t=3),10005==e&&(t=2),(10003==e||10006==e)&&(t=1),this.wincnt&&this.wincnt.length)for(var i=0;i<this.wincnt.length;i++)if(this.wincnt[i].roomid==e){var n=this.wincnt[i].cnt;return!n||0>=n?(n=0,t):t-n}return t},e.prototype.getOneNorRoomRedFromSmall=function(){if(this.wincnt)for(var e=void 0,t=0;t<this.wincnt.length;++t)if(this.wincnt[t].chance>0&&(e=this.wincnt[t].roomid,1001!=e&&1002!=e&&8001!=e&&1006!=e))return this.wincnt[t];return null},e.prototype.setNewYearGiftBuyCount=function(e){this.newGiftBuyCount=e||0},e.prototype.getNewYearGiftBuyCount=function(){return this.newGiftBuyCount},e.prototype.setNewYearTaskInfo=function(e){this.newYearTaskInfo=e||[]},e.prototype.getNewYearTaskInfo=function(){return this.newYearTaskInfo},e.prototype.setNewYearLoginInfo=function(e){e&&e.length>=10&&(this.newYearLoginInfo=e)},e.prototype.setNewYearTodayRewGet=function(){this.newYearLoginInfo[0]=1;var e=this.newYearLoginInfo[1];this.newYearLoginInfo[2+e]=1},e.prototype.isNewYearGetTodayRew=function(){var e=this.newYearLoginInfo;return e&&e.length>=1&&1==e[0]?!0:!1},e.prototype.getNewYearLoginInfo=function(){return this.newYearLoginInfo},e.prototype.setNewYearWorkInfo=function(e){this.newYearWorkInfo=e||[]},e.prototype.getNewYearWorkInfo=function(){return this.newYearWorkInfo},e.prototype.addPayCount=function(){this._payCount+=1},e.prototype.setPayCount=function(e){this._payCount=e},e.prototype.getPayCount=function(){return this._payCount},e.prototype.hasPayToday=function(){return this.todayPayRmb>0?!0:!1},e.prototype.setHasPayToday=function(e){this.todayPayRmb=e},e.prototype.initPraise=function(e){e.length<5||(this.praise=e)},e.prototype._calcuateVipLevel=function(){var e=CCGlobalGameConfig.getCfgByField("vip_config"),t=e.upgrade.length,i=0,n=0,o=this.vipdata;if(this._vipLevel=0,!(o&&o.length>=1&&(n=o[0],1>n))){if(n>=e.upgrade[t-1].exp)return void(this._vipLevel=t);for(;t-1>i;){if(this.vipdata[0]>=e.upgrade[i].exp&&this.vipdata[0]<e.upgrade[i+1].exp)return void(this._vipLevel=i+1);i++}}},e.prototype.getCurVipLevel=function(){return this._vipLevel},e.prototype.getCurExp=function(){var e=this.vipdata;return e&&e.length>=1?e[0]:0},e.prototype.hasGetTodayVipRew=function(){var e=this.vipdata;if(e&&e.length>=2){var t=ccserver.getServerStamp(),i=CCDDZUtils.isTwoStampSameDay(1e3*e[1],t);if(i)return!0}return!1},e.prototype.setHasGetTodayVipRew=function(){var e=this.vipdata,t=e.length,i=ccserver.tsServer;2>t?1>t?this.vipdata=[1,i]:this.vipdata.push(i):this.vipdata[1]=i},e.prototype.setHasTodayAppLucky=function(){var e=this.monthcardinfo,t=e.length,i=ccserver.tsServer;t>=6&&(e[5]=i)},e.prototype.getTodayVipLucky=function(){if(this.vipdata.length>=3){var e=1e3*this.vipdata[2],t=ccserver.getServerStamp();if(t>e){var i=CCGlobalGameConfig.getCfgByField("custom.vipLuckyCfg.hourRange"),n=i.split("|"),o=CCalien.CCDDZUtils.checkCurHourisInHourRange(Number(n[0]),Number(n[1]));if(0>=e)return{inTime:o};var a=CCalien.CCDDZUtils.checkTwoTimestampIsOtherDay(e,t);return a?{inTime:o}:{inTime:!1,hasLuck:!0}}}return{inTime:!1}},e.prototype.shouldShowMonday=function(){var e=this.monthcardinfo,t=0,i=ccserver.getServerStamp(),n=new Date(i).getDay();if(1!=n)return!1;if(!(e&&e.length>=7))return!0;t=1e3*e[6];var o=CCDDZUtils.isTwoStampSameDay(t,i);return o?!1:!0},e.prototype.noTodayAppLucky=function(){var e=this.monthcardinfo;if(e.length>=6){var t=1e3*e[5];if(0>=t)return!0;var i=ccserver.getServerStamp();if(i>t){var n=CCalien.CCDDZUtils.checkTwoTimestampIsOtherDay(t,i);return n}return!1}return!0},e.prototype.getRoomPlayCount=function(e){for(var t=this.playrecords,i=t.length,n=0;i>n;++n)if(t[n].roomid==e)return t[n].played;return 0},e.prototype.getRoomWinCount=function(e){for(var t=this.playrecords,i=t.length,n=0;i>n;++n)if(t[n].roomid==e)return t[n].win;return 0},e.prototype.getRoomCanGetRed=function(e){if(this.wincnt&&this.wincnt.length)for(var t=0;t<this.wincnt.length;t++)if(this.wincnt[t].roomid==e){var i=this.wincnt[t].chance;return!i||0>=i?!1:!0}return!1},e.prototype.clean=function(){this.playrecords=[],this.vipdata=[],this._vipLevel=0,this.primarydmrcge=[0,0],this.invitetaskstatus=[0,0],this.diamondrelive=0,this.goldrelive=0,this.showredpoint=[0,0,0,0],this.freeBrowCount=0,this._nationalInfo={getRewDay:0,todayGet:0,inviteNum:0,getInviteRew:0},this._hornTalkShowList=[],this._hornTalkRec=[],this._sysTalkRec=[],this.uid=0,this.nickname=null,this.diamondgiftgot=null,this.money=0,this.gold=0,this.exp=0,this.vipexp=0,this.sex=0,this.sexStr=null,this.sexVoiceStr=null,this.imageid=null,this.havesecondpwd=0,this.isbinding=0,this.wincnt=[],this.drawcnt=0,this.fakeuid=0,this.bindphone=null,this.redcoin=0,this.seatid=0,this.freshmanredcoinsent=0,this.beans=null,this.rcminexcexpiretime=0,this.rcminexcchanceused=null,this.freshrewardgot=null,this.redcoingot=0,this.totalwincnt=0,this.totallosecnt=0,this.totaldrawcnt=0,this.recorderfirstrewardgot=0,this.cardsRecorder=null,this._dayTaskOverNum=0,this.daytaskprogress=[0,0,0,0,0,0],this.praise=[0,0,-1,-1,-1],this.daytaskstatus=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.frechargerewardday=null,this.todayHasSign=null,this.signrewardaddremain=null,this.notLoginApp=!1,this.primarydmrcge=0,this.monthcardinfo=[0,0,0,0,0]},e}();__reflect(CCGlobalUserInfoData.prototype,"CCGlobalUserInfoData");var CCGlobalWxHelper=function(){function e(){}return e.share=function(e,t,i){if(void 0===i&&(i=[]),CCalien.Native.instance.isWXMP&&!ccserver._isInDDZ){var n=CCGlobalUserData.instance,o=n.getSk();o||(o="",CCDDZReportor.instance.reportCodeError("sk error share :"+CCalien.Native.instance.getChannelName()+"isApp:"+CCalien.Native.instance.isNative));var a={};a.imgUrl=CCGlobalGameConfig.RESOURCE_URL+"shareIcon.jpg",a.title1=lang.thirdPartWxMp.title2,a.link1=CCGlobalGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+o,e==this.SHARE_FREE_GAME?(a.title2=lang.thirdPartWxMp.title3,a.desc2=CCalien.StringUtils.format(lang.thirdPartWxMp.desc3,i[2],i[0],i[1]),a.link2=CCGlobalGameConfig.WX_LOGIN_URL+"?state=3&share_room="+i[2]):(a.title2=lang.thirdPartWxMp.title2,a.desc2=lang.thirdPartWxMp.desc2,a.link2=CCGlobalGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+o),CCalien.Native.instance.share(a,t)}},e.shareDownApp=function(e){var t={},i=CCGlobalUserData.instance,n=i.getSk();t.title=lang.thirdPartWxMp.title2,t.description=lang.thirdPartWxMp.desc2,t.shareType=0,t.sharePlatform=2,t.url="https://wx.yiyuc.com/appshare/qrcode.php?sk="+n,CCalien.Native.instance.share(t,e)},e._onShareRet=function(e){var t=!1;3==e.code&&(t=!0,CCDDZPanelShare.instance.close()),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.USER_SHARE_RESULT,{shareSucc:t})},e.doWebH5ShareCfg=function(){e.share(2,e._onShareRet.bind(e))},e.doNativeShare=function(){e.shareForNative(2,e._onShareRet.bind(e))},e.shareForNative=function(e,t,i){void 0===i&&(i=[]);var n=2,o=CCGlobalUserData.instance,a=o.getSk();a||(a="");var r=!0,s=CCGlobalGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+a,c="https://m.hztangyou.com/down/",h="https://m.hztangyou.com/down/",l={};r?l.url=s:(l.url=h,"iOS"==egret.Capabilities.os&&(l.url=c)),l.title=lang.thirdPartWxMp.title2,l.description=lang.thirdPartWxMp.desc2,e==this.SHARE_FREE_GAME&&(l.title=lang.thirdPartWxMp.title3,l.description=CCalien.StringUtils.format(lang.thirdPartWxMp.desc3,i[2],i[0],i[1]),l.url=CCGlobalGameConfig.WX_LOGIN_URL+"?state=3&share_room="+i[2]),l.shareType=0,l.sharePlatform=n,CCalien.Native.instance.share(l,t)},e.shareImageNative=function(e,t,i){if(void 0===i&&(i=[]),!CCalien.Native.instance.isNative)return void console.log("shareImageNative not native!");var n=2;switch(e){case this.SHARE_IMAGE_TO_FRIENDS:n=2;break;case this.SHARE_IMAGE_TO_TIMELINE:default:n=3}var o={};o.title=lang.thirdPartWxMp.title2,o.shareType=1,o.url=i[0],o.sharePlatform=n,o.description="",CCalien.Native.instance.share(o,t)},e.shareForPhone=function(){ccddzwebService.getShareImgUrlByScene(function(e){var t=JSON.parse(e);0==t.code&&(window.top.location.href=t.url)},1)},e.shareForAndroidApp=function(){var e=this;ccddzwebService.getShareImgUrlByScene(function(t){var i=JSON.parse(t);0==i.code&&e.shareImageNative(e.SHARE_IMAGE_TO_FRIENDS,null,[i.imgurl])},1)},e.NATIVE_SHARE_SUCC=0,e.SHARE_FREE_GAME=1,e.SHARE_GAME=2,e.SHARE_IMAGE_BASE=10,e.SHARE_IMAGE_TO_TIMELINE=11,e.SHARE_IMAGE_TO_FRIENDS=12,e}();__reflect(CCGlobalWxHelper.prototype,"CCGlobalWxHelper");var CCDDZNormalButton=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bgRes="",t}return __extends(t,e),Object.defineProperty(t.prototype,"bgUp",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_n")?"_n":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgDown",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_h")?"_h":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgDisabled",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_d")?"_d":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgRes",{get:function(){return this._bgRes},set:function(e){this._bgRes=e,this.bgDisplay&&(this.bgDisplay.source=this.bgUp)},enumerable:!0,configurable:!0}),t}(eui.Button);__reflect(CCDDZNormalButton.prototype,"CCDDZNormalButton"),window.CCDDZNormalButton=CCDDZNormalButton;var CCDDZStateButton=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelIconDisplay=null,t._labelIcon="",t.bgImg=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"iconUp",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_n")?"_n":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconDown",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_h")?"_h":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconDisabled",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_d")?"_d":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelIcon",{get:function(){return this._labelIcon},set:function(e){this._labelIcon=e,this.iconDisplay&&(this.iconDisplay.source=this.iconUp)},enumerable:!0,configurable:!0}),t}(eui.Button);__reflect(CCDDZStateButton.prototype,"CCDDZStateButton"),window.CCDDZStateButton=CCDDZStateButton;var CCDDZAssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(CCDDZAssetAdapter.prototype,"CCDDZAssetAdapter",["eui.IAssetAdapter"]);var CCDDZThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(CCDDZThemeAdapter.prototype,"CCDDZThemeAdapter",["eui.IThemeAdapter"]);var ACT_ID_DELEGATE=0,ACT_ID_FIRSTR=1,ACT_ID_APP=2,ACT_ID_BIND=4,ACT_ID_INVITE=7,ACT_ID_FFF=8,ACT_ID_DIAFIRREC=9,ACT_ID_REALNAME=10,ACT_ID_APPLUCKY=11,CCDDZActList=function(e){function t(){var t=e.call(this)||this;return t._lastSelectIdx=0,t._labels=[],t._selfData=CCDDZMainLogic.instance.selfData,t._enableFuncs={},t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.init=function(){this.skinName=components.CCDDZActList},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI();var t=this;this._enableFuncs=(i={},i[ACT_ID_DELEGATE]=t._enableDelegateActShow.bind(t),i[ACT_ID_FIRSTR]=t._enableFrechargeShow.bind(t),i[ACT_ID_DIAFIRREC]=t._enableDiaFirrechargeShow.bind(t),i[ACT_ID_APP]=t._enableAppActShow.bind(t),i[ACT_ID_BIND]=t._enableBindPhoneShow.bind(t),i[ACT_ID_INVITE]=t._enableInvaiteActShow.bind(t),i[ACT_ID_FFF]=t._enableFFFActShow.bind(t),i[ACT_ID_REALNAME]=t._enableRealNameActShow.bind(t),i[ACT_ID_APPLUCKY]=t._enableAppLuckyShow.bind(t),i);var i},t.prototype.onAddToStage=function(e){this._initEvent()},t.prototype._onFRechargeUpdate=function(){if(!this._selfData.isNotBuyFRecharge()){for(var e=0;e<this._labels.length;++e)if(1==this._labels[e].id){this._labels.splice(e,1);break}this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh(),this._frechargeNode&&(CCDDZPanelFirstRecharge.nullInstance(),this._frechargeNode=null),this._selectItem&&1==this._selectItem.id?this._changeSelectByIdx(-1):this._lastSelectIdx>=1&&this._changeSelectByIdx(this._lastSelectIdx-1)}},t.prototype._onLoginAppUpdate=function(){if(!CCalien.Native.instance.isNative&&this._selfData.hasNotLoginApp()){for(var e=this._selfData.shouldShowActDownAppRed(),t=this._labels,i=t.length,n=0;i>n;++n)if(t[n].id==ACT_ID_APP)return;this._labels.push({tit:"APP福利",id:ACT_ID_APP,sel:!1,"new":e,cb:this._onClickAPPAct.bind(this)}),this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh()}},t.prototype._initEvent=function(){this._enableEvent(!0),this.leftLabelList.addEventListener(egret.Event.CHANGE,this._onSelectItem,this);var e=CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.FRECHARGE_HASUPDATE,this._onFRechargeUpdate,this),CCDDZEventManager.instance.enableOnObject(this)},t.prototype._setNotRedById=function(e){for(var t=0;t<this._labels.length;++t)if(this._labels[t].id==e){this._labels[t]["new"]=!1,this._leftLabelsDataProvider.itemUpdated(this._labels[t]);break}},t.prototype._getIdxById=function(e){for(var t=0;t<this._labels.length;++t)if(this._labels[t].id==e)return t;return-1},t.prototype._setNotShowFirstRechargeRed=function(){this._selfData.shouldShowActFirstRechareRedRed()&&(this._selfData.setNotShowActFirstRechargeRed(),ccserver.reqClickFirstRecharge(),this._setNotRedById(ACT_ID_FIRSTR))},t.prototype._setNotShowDiaFirRechargeRed=function(){this._selfData.shouldShowActDiaFirRechareRedRed()&&(this._selfData.setNotShowActDiaFirRechargeRed(),ccserver.reqClickFirstRecharge(),this._setNotRedById(ACT_ID_DIAFIRREC))},t.prototype._setNotShowThanksRed=function(){this._selfData.shouldShowActThanksRed()&&(this._selfData.setNotShowActThanksRed(),ccserver.reqClickThanksgiving(),this._setNotRedById(3))},t.prototype._setNotShowDownAppRed=function(){this._selfData.shouldShowActDownAppRed()&&(this._selfData.setNotShowActDownAppRed(),ccserver.reqClickDownApp(),this._setNotRedById(ACT_ID_APP))},t.prototype._setNotShowNewYearGiftRed=function(){this._setNotRedById(5)},t.prototype._setNotShowNewYearWorkRed=function(){this._setNotRedById(6)},t.prototype._onGetWatchWXHttpRep=function(e){if(e&&0==e.code&&e.data&&1!=e.data.has_subscribe){var t={tit:"关注福利",sel:!1,id:4,"new":!1,cb:this._onClickWatch.bind(this)};this._labels.push(t),this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh()}},t.prototype._saveHasClickInviteAct=function(){CCalien.CCDDZlocalStorage.setItem("hasClickInvite","1")},t.prototype._hasClickInviteAct=function(){var e=!1,t=CCalien.CCDDZlocalStorage.getItem("hasClickInvite");return"1"==t&&(e=!0),e},t.prototype._initLeftBtns=function(){var e={tit:"首充活动",id:ACT_ID_FIRSTR,sel:!1,"new":!1,cb:this._onClickFirstRecharge.bind(this)};
if(this._selfData.isNotBuyFRecharge()){var t=this._selfData.shouldShowActFirstRechareRedRed();e["new"]=t,this._labels.push(e)}var i=CCGlobalGameConfig.getCfgByField("webCfg.appLucky");if(i&&1==i.status&&this._labels.push({tit:"每日福利",id:ACT_ID_REALNAME,sel:!1,"new":!1,cb:this._showAppLucky.bind(this)}),!CCalien.Native.instance.isNative){var n=this._selfData.shouldShowActDownAppRed();this._labels.push({tit:"APP福利",id:ACT_ID_APP,sel:!1,"new":n,cb:this._onClickAPPAct.bind(this)})}this._labels.push({tit:"推广福利",sel:!1,"new":!1,id:ACT_ID_DELEGATE,cb:this._onClickDelegate.bind(this)});var o=CCGlobalUserData.instance.hasBindPhone();o||this._labels.push({tit:"绑定福利",sel:!1,"new":!0,id:ACT_ID_BIND,cb:this._onClickBindPhone.bind(this)});var a={tit:"钻石首充",id:ACT_ID_DIAFIRREC,sel:!1,"new":!1,cb:this._onClickDiaFirstRecharge.bind(this)};if(this._selfData.isNotBuyDiaFirRecharge()){var r=this._selfData.shouldShowActDiaFirRechareRedRed();a["new"]=r,this._labels.push(a)}this._selfData.realName||this._labels.push({tit:"实名认证",id:ACT_ID_REALNAME,sel:!1,"new":!1,cb:this._showRealName.bind(this)})},t.prototype._onClickInviteAct=function(){this._showInviteAct()},t.prototype._onClickNewYearGift=function(){this._showNewYearGift()},t.prototype._updateNewYearWorkData=function(){var e=CCGlobalGameConfig.newYearCfg.yearWork;if(e.play){var t=e.play[0],i=t.progress,n=t.rwd.split("|"),o=n[0].split(":"),a=n[1].split(":"),r=[{id:o[0],num:o[1]},{id:a[0],num:a[1]}],s=this._selfData.getNewYearWorkInfo(),c=0;s.length>=1&&(c=s[0]);var h={rew:r,taskDesc1:"任意场完成"+i+"次对局",taskDesc2:"(自由组局除外)",condition:4,id:4,status:0,type:3,total:i,num:c,subId:1};h.status=s[1]||0,this._newYearGiftNode.updateWork(h)}},t.prototype._onClickNewYearWork=function(){this._showNewYearWork(),this._updateNewYearWorkData()},t.prototype._initUI=function(){this._labels=[],this._initLeftBtns(),this.leftLabelList.itemRenderer=CCDDZActListItem,this.leftLabelList.dataProvider=this._leftLabelsDataProvider=new eui.ArrayCollection(this._labels),this.leftLabelList.selectedIndex=0,this.leftLabelList.validateNow()},t.prototype._changeSelectByIdx=function(e){var t=this;(e>=this.leftLabelList.$children.length||0>e)&&(e=0);var i=e;this._lastSelectIdx>=0&&this._lastSelectIdx<this._leftLabelsDataProvider.source.length&&(this._leftLabelsDataProvider.source[this._lastSelectIdx].sel=0,this._leftLabelsDataProvider.itemUpdated(this._labels[this._lastSelectIdx])),this._lastSelectIdx=i;var n=this.leftLabelList.getChildAt(i);this._selectCb&&egret.setTimeout(function(){var e=n.localToGlobal(.5*n.width,.5*n.height);t._selectCb({item:n,pos:e})},this,50);for(var o=0;o<this._leftLabelsDataProvider.length;++o)if(o==i){this._leftLabelsDataProvider.source[o].sel=!0,this._leftLabelsDataProvider.itemUpdated(this._labels[i]);break}this._selectItem=this._labels[i],this._labels[i].cb(),egret.callLater(function(){t.leftLabelList.selectedIndex=-1},this)},t.prototype._onSelectItem=function(){this._changeSelectByIdx(this.leftLabelList.selectedIndex)},t.prototype._onClickThanksgiving=function(){this._showThanksgiving()},t.prototype._onClickFirstRecharge=function(){this._showFirstRecharge()},t.prototype._onClickDiaFirstRecharge=function(){this._showDiaFirRecharge()},t.prototype._onClickAPPAct=function(){this._showAPPAct()},t.prototype._onClickDelegate=function(){this._showDelegate()},t.prototype._onClickWatch=function(){this._showWatchWX()},t.prototype._onClickDayBuy=function(){this._showDayBuy()},t.prototype._onClickBindPhone=function(){this._showBindPhone()},t.prototype._onClickFFF=function(){this._showFFF()},t.prototype._checkDayBuy=function(){this._dayBuygNode||(this._dayBuygNode=CCDDZPanelDayBuy.getInstance(),this.parent.addChild(this._dayBuygNode))},t.prototype._checkWatchWX=function(){this._watchWXNode||(this._watchWXNode=CCDDZPanelWatchWX.getInstance(),this.parent.addChild(this._watchWXNode))},t.prototype._checkThanksgiving=function(){this._thanksgivingNode||(this._thanksgivingNode=CCDDZPanelThanksgiving.getInstance(),this.parent.addChild(this._thanksgivingNode))},t.prototype._checkBindPhone=function(){this._bindPhoneNode||(CCDDZPanelBindPhone.nullInstance(),this._bindPhoneNode=CCDDZPanelBindPhone.getInstance(),this.parent.addChild(this._bindPhoneNode))},t.prototype._checkFFF=function(){this._fffActNode||(CCDDZPanelFFFAct.nullInstance(),this._fffActNode=CCDDZPanelFFFAct.getInstance(),this.parent.addChild(this._fffActNode))},t.prototype._checkRealName=function(){this._realActNode||(CCDDZPanelRealName.nullInstance(),this._realActNode=CCDDZPanelRealName.getInstance(),this.parent.addChild(this._realActNode))},t.prototype._checkAppLucky=function(){this._appLuckyActNode||(CCDDZPanelActAppLucky.nullInstance(),this._appLuckyActNode=CCDDZPanelActAppLucky.getInstance(),this.parent.addChild(this._appLuckyActNode))},t.prototype._checkNewYearGift=function(){this._newYearGiftNode||(this._newYearGiftNode=CCDDZPanelNewYear.getInstance(),this.parent.addChild(this._newYearGiftNode))},t.prototype._checkInviteAct=function(){this._inviteActNode||(this._inviteActNode=CCDDZPanelInviteAct.getInstance(),this.parent.addChild(this._inviteActNode))},t.prototype._onBindPhoneOk=function(){for(var e=this._labels,t=e.length,i=0;t>i;++i)if(4==e[i].id){e.splice(i,1);break}this._leftLabelsDataProvider.source=e,this._leftLabelsDataProvider.refresh(),this._lastSelectIdx=-1,this._changeSelectByIdx(0)},t.prototype._onFRLightLoadOver=function(e){},t.prototype._checkFrecharge=function(){},t.prototype._checkDiaFirecharge=function(){},t.prototype._checkAppAct=function(){this._appNode||(this._appNode=CCDDZPanelDownApp.getInstance(),this.parent.addChild(this._appNode))},t.prototype._checkDelegate=function(){this._delegateNode||(this._delegateNode=CCDDZPanelDelegate.getInstance(),this.parent.addChild(this._delegateNode))},t.prototype._enableThanksShow=function(e){this._thanksgivingNode&&(this._thanksgivingNode.visible=e,e&&ccserver.reqThanksBuyCounts())},t.prototype._enableFrechargeShow=function(e){this._frechargeNode&&(this._frechargeNode.visible=e)},t.prototype._enableDiaFirrechargeShow=function(e){this._diaFirRechargeNode&&(this._diaFirRechargeNode.visible=e)},t.prototype._enableAppActShow=function(e){this._appNode&&(this._appNode.visible=e)},t.prototype._enableDelegateActShow=function(e){this._delegateNode&&(this._delegateNode.visible=e)},t.prototype._enableDayBuyShow=function(e){this._dayBuygNode&&(this._dayBuygNode.visible=e)},t.prototype._enableWatchWXShow=function(e){this._watchWXNode&&(this._watchWXNode.visible=e)},t.prototype._enableBindPhoneShow=function(e){this._bindPhoneNode&&(this._bindPhoneNode.visible=e,this._bindPhoneNode.showBindAct(this._onBindPhoneOk.bind(this)))},t.prototype._enableInvaiteActShow=function(e){this._inviteActNode&&(this._inviteActNode.visible=e)},t.prototype._enableFFFActShow=function(e){this._fffActNode&&(this._fffActNode.visible=e)},t.prototype._enableRealNameActShow=function(e){this._realActNode&&(this._realActNode.visible=e)},t.prototype._enableAppLuckyShow=function(e){this._appLuckyActNode&&(this._appLuckyActNode.visible=e)},t.prototype._enableNewYearShow=function(e){this._newYearGiftNode&&(this._newYearGiftNode.visible=e)},t.prototype._showThanksgiving=function(){this._checkThanksgiving(),this._setNotShowThanksRed()},t.prototype._showFirstRecharge=function(){this._checkFrecharge(),this._enableShowById(ACT_ID_FIRSTR),this._setNotShowFirstRechargeRed()},t.prototype._showDiaFirRecharge=function(){this._checkDiaFirecharge(),this._enableShowById(ACT_ID_DIAFIRREC),this._setNotShowDiaFirRechargeRed()},t.prototype._showAPPAct=function(){this._checkAppAct(),this._enableShowById(ACT_ID_APP),this._setNotShowDownAppRed()},t.prototype._showDelegate=function(){this._checkDelegate(),this._enableShowById(ACT_ID_DELEGATE)},t.prototype._showDayBuy=function(){this._checkDayBuy()},t.prototype._showWatchWX=function(){this._checkWatchWX()},t.prototype._showBindPhone=function(){this._checkBindPhone(),this._enableShowById(ACT_ID_BIND)},t.prototype._showFFF=function(){this._checkFFF(),this._enableShowById(ACT_ID_FFF)},t.prototype._showRealName=function(){this._checkRealName(),this._enableShowById(ACT_ID_REALNAME)},t.prototype._showAppLucky=function(){this._checkAppLucky(),this._enableShowById(ACT_ID_APPLUCKY)},t.prototype._showNewYearGift=function(){this._checkNewYearGift(),this._newYearGiftNode.showGift(),CCGlobalUserData.instance.setHasClickNewYearGift(),this._setNotShowNewYearGiftRed()},t.prototype._showNewYearWork=function(){this._checkNewYearGift(),this._newYearGiftNode.showWork(),CCGlobalUserData.instance.setHasClickNewYearWork(),this._setNotShowNewYearWorkRed()},t.prototype._showInviteAct=function(){this._saveHasClickInviteAct(),this._setNotRedById(ACT_ID_INVITE),this._checkInviteAct(),this._enableShowById(ACT_ID_INVITE)},t.prototype._enableShowById=function(e){var t=this._enableFuncs,i=0;for(var n in t)i=Number(n),i==e?t[i](!0):t[i](!1)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),this.leftLabelList.removeEventListener(egret.Event.CHANGE,this._onSelectItem,this),CCalien.CCDDZEventManager.instance.disableOnObject(this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.refreshActlist=function(){this._initUI()},t.prototype.setShowInviteAct=function(){this.setShowById(ACT_ID_INVITE)},t.prototype.setShowById=function(e){var t=this._getIdxById(e);0>t&&(t=0),this._changeSelectByIdx(t)},t.prototype.setShowBindAct=function(){this.setShowById(ACT_ID_BIND)},t.prototype.setShowNewYearGift=function(){var e=this,t=this._getIdxById(5);0>t&&(this._labels.push({tit:"新年礼盒",sel:!1,"new":!0,id:5,cb:this._onClickNewYearGift.bind(this)}),this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh(),this.leftLabelList.validateNow(),t=this._labels.length-1),egret.setTimeout(function(){e._changeSelectByIdx(t)},this,50)},t.prototype.setShowAppAct=function(){var e=this._getIdxById(2);0>e&&(e=0),this._changeSelectByIdx(e)},t.prototype.setShowFirstRecharge=function(){var e=this._getIdxById(1);0>e&&(e=0),this._changeSelectByIdx(e)},t.prototype.setShowThanksgiving=function(){var e=this._getIdxById(3);0>e&&(e=0),this._changeSelectByIdx(e)},t.prototype.setSelectChangeFunc=function(e){this._selectCb=e},t}(eui.Component);__reflect(CCDDZActList.prototype,"CCDDZActList"),window.CCDDZActList=CCDDZActList;var CCDDZActListItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalColor=8866329,t.selColor=14770739,t.normalBg="cc_common_btn1_n",t.selBg="cc_common_btn1_h",t}return __extends(t,e),t.prototype._showFlagImg=function(e){this.flagImg.visible=e},t.prototype._setTit=function(e){this.titLabel.text=e},t.prototype._setSelect=function(){this.bgImg.source=this.selBg,this.titLabel.textColor=this.selColor},t.prototype._setNormal=function(){this.bgImg.source=this.normalBg,this.titLabel.textColor=this.normalColor},t.prototype._setActFlag=function(){this.data.act?this.actImg.visible=!0:this.actImg.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this._setTit(this.data.tit),this.data.sel?this._setSelect():this._setNormal(),this._setActFlag(),this.data["new"]?this._showFlagImg(!0):this._showFlagImg(!1)},t}(eui.ItemRenderer);__reflect(CCDDZActListItem.prototype,"CCDDZActListItem");var CCDDZAvatar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefault(),this._initTouchEvent(),this.imgAvatar.source="cc_icon_head_default",this.imgMask&&(this.imgAvatar.mask=this.imgMask)},t.prototype.getHeadCenGlobalPos=function(){if(!this._headCGlobalPos){var e=this.imgAvatar.x,t=this.imgAvatar.y,i=this.imgAvatar.width,n=this.imgAvatar.height;new egret.Point(0,0);this._headCGlobalPos=this.imgAvatar.localToGlobal(e+.5*i,t+.5*n)}return this._headCGlobalPos},t.prototype._initDefault=function(){this._headTouchFunc=null,this.bg_img.touchEnabled=!1,this._showVipGrp(!1)},t.prototype._initTouchEvent=function(){this.bg_img.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTouchHead,this)},t.prototype._onTouchHead=function(){this._headTouchFunc&&this._headTouchFunc()},t.prototype.setHeadTouchFunc=function(e){this._headTouchFunc=e},t.prototype.setHeadTouch=function(e){this.bg_img.touchEnabled=e},t.prototype.setQuitFlagVisible=function(e){this.quitFlag.visible=e},t.prototype.setOwnerFlagVisible=function(e){this.ownerFlag.visible=e},t.prototype._showVipGrp=function(e){this.vipGrp.visible=e},t.prototype.setVipLevel=function(e){this._vipLevel=e;var t=!1;e>=1&&(t=!0,this.vipLabel.text="VIP"+e),this._showVipGrp(t)},Object.defineProperty(t.prototype,"imageId",{set:function(e){var t=e;e&&e!=this.imgAvatar.source&&(-1!=e.indexOf("http://")&&(t=e.replace("http://","https://")),this.imgAvatar.source=t)},enumerable:!0,configurable:!0}),t.prototype.clean=function(){this.imgAvatar.source=null,this._showVipGrp(!1)},t}(eui.Component);__reflect(CCDDZAvatar.prototype,"CCDDZAvatar"),window.CCDDZAvatar=CCDDZAvatar;var CCDDZButtonBar=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this)},t.prototype.onGrpButtonTap=function(e){var t={},i=e.target.name;i.indexOf("score")>=0?(t.action="setScore",t.score=parseInt(i.substr(6,1))):t.action=i,this.dispatchEventWith(CCGlobalEventNames.BUTTON_BAR_TAP,!1,t)},t.prototype.switchState=function(e,t){if(void 0===t&&(t=-1),this.currentState=e,t>=0)for(var i=1;3>=i;i++){var n=this["score_"+i];n.enabled=i>t,1==ccserver.isCoupleGame&&(n.enabled=!0)}},t.prototype.modifyButton=function(e,t){var i=this;egret.callLater(function(){var n=i.grpButton.getChildByName(e);n&&(n.enabled=t)},this)},t}(eui.Component);__reflect(CCDDZButtonBar.prototype,"CCDDZButtonBar"),window.CCDDZButtonBar=CCDDZButtonBar;var CCDDZButtonDoTaskSkin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaultUI(),this._enableEvent(!0)},t.prototype._initEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this.mNormal_img[t](egret.TouchEvent.TOUCH_BEGIN,this._onTouchNormalBegin,this),this.mNormal_img[t](egret.TouchEvent.TOUCH_END,this._onTouchNormalEnd,this),this.mNormal_img[t](egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTouchNormalCancel,this),this.mNormal_img[t](egret.TouchEvent.TOUCH_CANCEL,this._onTouchNormalCancel,this)},t.prototype._onAddToStage=function(){this._initEvent(!0)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._onTouchNormalBegin=function(){this.mNormal_img.source=this._press},t.prototype._onTouchNormalEnd=function(){this.mNormal_img.source=this._noraml,this._clickFunc&&this._clickFunc()},t.prototype._onTouchNormalCancel=function(){this.mNormal_img.source=this._noraml},t.prototype._initDefaultUI=function(){this._noraml=this.mNormal_img.source,this._press=this.mPress_img.source,this.mNormal_img.visible=!0,this.mPress_img.visible=!1},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),this._initEvent(!1)},t.prototype.setClickFunc=function(e){e&&(this._clickFunc=e)},t.prototype.setPngs=function(e,t){this._noraml=e,this._press=t,this.mNormal_img.source=this._noraml},t.prototype.enableTouch=function(e){this.mNormal_img.touchEnabled=e},t.prototype.setOnePngAndForbidTouch=function(e){this.mNormal_img.source=e,this.enableTouch(!1)},t}(eui.Component);__reflect(CCDDZButtonDoTaskSkin.prototype,"CCDDZButtonDoTaskSkin"),window.CCDDZButtonDoTaskSkin=CCDDZButtonDoTaskSkin;var CCDDZCDClock=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.start=function(e,t){void 0===t&&(t=null),this.labNum.text=e.toString(),this._endTime=ccserver.tsServer+e,this._timer=CCDDZCountDownService.register(e,this.renderTime.bind(this),t),this.visible=!0},t.prototype.stop=function(e){void 0===e&&(e=!1),this.labNum.text="",CCDDZCountDownService.unregister(this._timer),e&&(this.visible=!1)},t.prototype.renderTime=function(e){this.labNum.text=e.toString()},t}(eui.Component);__reflect(CCDDZCDClock.prototype,"CCDDZCDClock"),window.CCDDZCDClock=CCDDZCDClock;var CCDDZCDProgressBar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._offset=-Math.PI/2,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addChild(this._mask=new egret.Shape),this.thumb.mask=this._mask;var t=this.thumb.width,i=this.thumb.height;this._radius=Math.sqrt(t*t+i*i)/2,this._center={x:this.thumb.width/2,y:this.thumb.height/2}},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value!=e&&this._setValue(this._value=e)},enumerable:!0,configurable:!0}),t.prototype._setValue=function(e){var t=this._mask.graphics,i=e,n=this._radius,o=this._center.x,a=this._center.y;t.clear(),t.beginFill(16711680),t.moveTo(o,a),t.drawArc(o,a,n,i,2*Math.PI+this._offset),t.lineTo(o,a),t.endFill()},t.prototype.onSecond=function(e){this.labelDisplay&&(this.labelDisplay.text=e.toString())},t.prototype.play=function(e,t){void 0===t&&(t=0),this.value=this._offset,this._tween=egret.Tween.get(this).wait(t).to({value:2*Math.PI+this._offset},1e3*e),this._timer>0&&egret.clearInterval(this._timer),this._timer=CCDDZCountDownService.register(e,this.onSecond.bind(this)),this.visible=!0},t.prototype.stop=function(){this._tween&&this._tween.setPaused(!0),this._timer>0&&egret.clearInterval(this._timer),this.visible=!1},t}(eui.Component);__reflect(CCDDZCDProgressBar.prototype,"CCDDZCDProgressBar"),window.CCDDZCDProgressBar=CCDDZCDProgressBar;var CCDDZChatBubble=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.play=function(e){var t=this;this.labContent.text=e,this.visible=!0,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},200).wait(5e3).to({alpha:0},200).call(function(){t.visible=!1})},t}(eui.Component);__reflect(CCDDZChatBubble.prototype,"CCDDZChatBubble");var CCDDZChatList=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=components.CCDDZChatListSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZIRUpDownIcon,this.list.dataProvider=new eui.ArrayCollection(lang.chatList),this.list.addEventListener(egret.Event.CHANGE,this.onSelectItem,this)},t.prototype.onSelectItem=function(e){var t=this;this._callback(this.list.selectedIndex),egret.callLater(function(){t.list.selectedIndex=-1},this),this.close()},t.prototype.show=function(e){this._callback=e,egret.Tween.get(this.grp,null,null,!0).to({scrollV:0},200,egret.Ease.cubicIn)},t.prototype.close=function(e){void 0===e&&(e=!0),e?egret.Tween.get(this.grp,null,null,!0).to({scrollV:-this.height},200,egret.Ease.cubicIn):this.grp.scrollV=-this.height},t}(eui.Component);__reflect(CCDDZChatList.prototype,"CCDDZChatList");var CCDDZExchangeShowInfo=function(e){function t(){var t=e.call(this)||this;return t._exchageViews=[],t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeFromStage,t),t}return __extends(t,e),t.prototype.createChildren=function(){this._exservice=CCDDZExchangeService.instance;for(var e=0;3>e;e++){var t=new ExchangeShowInfoView;t.touchChildren=!1,t.touchEnabled=!1,t.alpha=0,this.addChild(t),this._exchageViews.push(t)}},t.prototype.addToStage=function(e){this.onShow()},t.prototype.removeFromStage=function(e){this.onHide()},t.prototype.onShow=function(){this._timer||(this._timer=new egret.Timer(1e3,0)),this._showOne=!0,this._timer.addEventListener(egret.TimerEvent.TIMER,this.showing,this),this._timer.start()},t.prototype.onHide=function(){null!=this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.showing,this),this._timer=null)},t.prototype.showing=function(){var e=this._exchageViews.pop();if(e){var t=this._exservice.getOneChouInfoFromFront(!0);!t&&this._showOne&&(this._showOne=!1,t=this._exservice.getOneChouMaxInfo()),t?(e.setData(t),e.x=0,e.y=0,e.alpha=1,egret.Tween.get(e).to({x:0,y:-50},1e3).to({x:0,y:-150,alpha:0},2e3).call(this.showend,this,[e])):this._exchageViews.push(e)}},t.prototype.showend=function(e){this._exchageViews.push(e)},t}(eui.Component);__reflect(CCDDZExchangeShowInfo.prototype,"CCDDZExchangeShowInfo");var ExchangeShowInfoView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.skinName=components.CCDDZExchangeShowInfoSkin},t.prototype.setData=function(e){e.hasOwnProperty("nickname")?this.lbl_name.text=e.nickname:this.lbl_name.text="",this.lbl_coin.textFlow=(new egret.HtmlTextParser).parser("抽得<font color='#F0FF00'>"+CCDDZUtils.exchangeRatio(e.money,!0)+"</font> 奖杯")},t}(eui.Component);__reflect(ExchangeShowInfoView.prototype,"ExchangeShowInfoView"),window.CCDDZExchangeShowInfo=CCDDZExchangeShowInfo;var _allCfg=(_a={},_a[3]="{0}钻石兑换码",_a[4]="{0}元话费",_a[5]="{0}元京东卡",_a[6]="{0}元话费充值卡",_a[7]="{0}奖杯",_a[8]="{0}奖杯",_a),_stCfg=(_b={},_b[3]="领取",_b[4]="已领取",_b[5]="充值中",_b[6]="充值失败",_b[7]="邮件补发",_b),_courseCfg=(_c={},_c[4]={text:"查询教程",func:function(e){e.setHasShowGetCourse(),CCGlobalGameConfig.toFeiUrl()}},_c[5]={text:"使用教程",func:function(e){e.setHasShowGetCourse(),CCGlobalGameConfig.toJDCardUrl()}},_c[6]={text:"使用教程",func:function(e){e.setHasShowGetCourse(),CCGlobalGameConfig.toFeiCardUrl()}},_c[7]={text:"查询教程",func:function(e){e.setHasShowGetCourse(),CCGlobalGameConfig.toAliRedUrl()}},_c[8]={text:"查询教程",func:function(e){e.setHasShowGetCourse(),CCGlobalGameConfig.toFeiUrl()}},_c),CCDDZFeiHistoryItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),null!=this.data){var t=new Date(1e3*this.data.recordtime),i=CCalien.TimeUtils.timeFormatForEx(t,"-","-","",!1);this.exTimeLabel.text="兑换日期:  "+i,this.typeImg.source=3==this.data.goodsid?"cc_room_3":"exchange_"+this.data.goodsid,this.courseBgImg.visible=3==this.data.goodsid?!1:!0,this.courseLabel.visible=3==this.data.goodsid?!1:!0,this._initDesc(),this._initStatus(),this.statusBgImg.addClickListener(this._onClickStatus,this,!1),this.courseBgImg.addClickListener(this._onClickCourse,this,!1)}},t.prototype._showCourse=function(e){this.courseImg.visible=e;var t=91;e&&(t=133),this.data.showCourse=e,this.rootGroup.height=t},t.prototype._showGetCourse=function(){this.data.showCourse&&3!=this.data.goodsid?this._showCourse(!0):this._showCourse(!1)},t.prototype.setHasShowGetCourse=function(){CCDDZPanelExchange2.setHasShowClickCourse(),this._showCourse(!1)},t.prototype._initStatus=function(){var e=this.data,t=e.status,i=this.data.goodsid;this._showGetCourse(),3==t?(this.statusBgImg.source="cc_common_btn_orange3",this.statusBgImg.touchEnabled=!0):4==t&&(5==i||6==i||3==i)?(this.statusBgImg.source="cc_common_btn_orange3",this.statusBgImg.touchEnabled=!0):(this.statusBgImg.source="cc_common_btn_orange2_gray",this.statusBgImg.touchEnabled=!1),_stCfg[t]&&(this.exStatusLabel.text=_stCfg[t],4==t&&(5==i||6==i?this.exStatusLabel.text="查看卡密":4==i?this.exStatusLabel.text="充值成功":3==i&&(this.exStatusLabel.text="查看兑换码")))},t.prototype._initDesc=function(){var e=this.data;if(_allCfg[e.goodsid]){var t=_allCfg[e.goodsid];t=t.replace("{0}",e.goodsamount),this.exDescLabel.text=t,3!=e.goodsid&&(this.courseLabel.text=_courseCfg[e.goodsid].text)}},t.prototype.updateInfo=function(e){this.data=e},t.prototype._onClickStatus=function(){var e=this.data;e.item=this;var t=e.status;(3==t||4==t)&&CCDDZPanelFeiEx.getInstance().show(e)},t.prototype._onClickCourse=function(){var e=this.data,t=e.goodsid;_courseCfg[t].func(this)},t}(eui.ItemRenderer);__reflect(CCDDZFeiHistoryItem.prototype,"CCDDZFeiHistoryItem");var _a,_b,_c,ccddz_otherGameCfg=(_a={},_a[5]={name:"fish",gameId:5,ddzProto:[]},_a[9]={name:"pdk",gameId:9,ddzProto:["user.CheckReconnectRep","user.BagInfoRep","user.RedCoindLotteryRep","user.RedcoinExchangeGoodsRep","user.UserInfoResonpse","user.RechargeResultNotify"]},_a),_a,CCDDZGCardsGold=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(e){e&&null!=e||(e=0),this.gold.text=e},t}(eui.Component);__reflect(CCDDZGCardsGold.prototype,"CCDDZGCardsGold"),window.CCDDZGCardsGold=CCDDZGCardsGold;var CCDDZGold=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRechargeTap,this)},t.prototype.onBtnRechargeTap=function(e){"withButton"==this.currentState?CCDDZPanelExchange2.instance.show():"diamondBuy"==this.currentState&&CCDDZPanelExchange2.instance.show(1)},t.prototype._formatGold=function(e){this.nGold=e;var t=""+e;return e>=1e6?t=t.substring(0,t.length-4)+"万":e>1e5&&(t=t.substr(0,2)+"."+t.substr(2,1)+"万"),t},t.prototype.updateGold=function(e){if(this.labGold){if(null==e)e=0;else if(void 0==e)return;this.labGold.text=this._formatGold(e),this.commitProperties()}},t.prototype.getGold=function(){return this.nGold},t.prototype.setEmpty=function(){this.labGold.text=""},t.prototype.showDiamond=function(){this.imgIcon.source="cc_icon_diamond"},t.prototype.setType=function(e,t){if(void 0===t&&(t=0),this._isMatch=e)switch(t){case 0:this.imgIcon.source=CCGlobalResNames.cc_icon_score;break;case 1:this.imgIcon.source=CCGlobalResNames.cc_icon_gold}else this.imgIcon.source=CCGlobalResNames.cc_icon_gold;this.btnRecharge.visible=!e},t}(eui.Component);__reflect(CCDDZGold.prototype,"CCDDZGold"),window.CCDDZGold=CCDDZGold;var CCDDZGoldRainEffectLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.play=function(){var e=this;if(!this._goldItems){this._goldItems=[];for(var t=new egret.MovieClipDataFactory(RES.getRes(CCGlobalResNames.ani_coin_json),RES.getRes(CCGlobalResNames.ani_coin_png)),i=0;35>i;i++){var n=new GoldItem(t);this._goldItems.push(n)}}this._goldItems.forEach(function(t){e.addChild(t),t.playFall()}),CCalien.CCDDZSoundManager.instance.playEffect(CCGlobalResNames.effect_gold_rain)},t}(eui.Group);__reflect(CCDDZGoldRainEffectLayer.prototype,"CCDDZGoldRainEffectLayer");var GoldItem=function(e){function t(t){var i=e.call(this)||this;return i._mc=new egret.MovieClip(t.generateMovieClipData("coin")),i.addChild(i._mc),i._mc.scaleX=i._mc.scaleY=.8,i}return __extends(t,e),t.prototype.playFall=function(){var e=this;this.x=Math.random()*this.stage.stageWidth,this.y=-70,this.alpha=1,this._mc.play(-1),egret.Tween.get(this,null,null,!0).wait(1e3*Math.random()).to({y:this.stage.stageHeight-53},1500,egret.Ease.bounceOut).to({alpha:0},200).call(function(){e.parent.removeChild(e)})},t}(egret.DisplayObjectContainer);__reflect(GoldItem.prototype,"GoldItem"),window.CCDDZGoldRainEffectLayer=CCDDZGoldRainEffectLayer;var CCDDZGoodsItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(e){1==e.id?this.numLabel.text=e.count:(this.numLabel.text="x"+e.count,2==e.id&&(this.numLabel.text="x"+e.count+"小时")),this.iconImg.source="room_"+e.id},t.parseUrl=function(e){return CCGlobalGameConfig.RESOURCE_URL+"goods-icon/goods_"+e+".png"},t}(eui.Component);__reflect(CCDDZGoodsItem.prototype,"CCDDZGoodsItem"),window.CCDDZGoodsItem=CCDDZGoodsItem;var CCDDZHornTalkItem=function(e){function t(){var t=e.call(this)||this;return t._enableEvent(!0),t}return __extends(t,e),t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this._initByData()},t.prototype._initByData=function(){var e=this.data,t="";if(e.isUser){var i=e.name.substr(0,9);t="<font color='#ffffff'>【"+i+"】:</font> <font color='#654116'>"+e.msg+"</font>"}else t="<font color='#FFEA00'>【 系统 】</font><font color='#FFEA00'>"+e.msg+"</font>";var n=(new egret.HtmlTextParser).parser(t);this.text_label.textFlow=n},t}(eui.ItemRenderer);__reflect(CCDDZHornTalkItem.prototype,"CCDDZHornTalkItem");var CCDDZInviteListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.itemIndex%2==0?this.bg.visible=!0:this.bg.visible=!1,"0"==this.data.status?this.status.source="cc_invite_6":this.status.source="cc_invite_5",this.data.nickname.length>6&&(this.data.nickname=this.data.nickname.substr(0,5),this.data.nickname=this.data.nickname+"..."),this.lbName.text=this.data.nickname,this.lbTime.text=this.data.add_time.substr(0,10)},t}(eui.ItemRenderer);__reflect(CCDDZInviteListItem.prototype,"CCDDZInviteListItem");var CCDDZLoading=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._count=8,t.R=50,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addChild(this._container=new egret.DisplayObjectContainer);for(var t=2*Math.PI/this._count,i=0;i<this._count;i++){var n=new LoadingItem;n.play(t*(this._count-i-1)),this._container.addChild(n),n.x=Math.cos(t*i)*this.R,n.y=Math.sin(t*i)*this.R}},t.prototype.play=function(){CCalien.CCDDZTickerManager.register(this)},t.prototype.stop=function(){CCalien.CCDDZTickerManager.unregister(this)},t.prototype.update=function(){CCalien.CCDDZUtils.enumChildren(this._container,function(e){e.update()})},t}(eui.Group);__reflect(CCDDZLoading.prototype,"CCDDZLoading",["CCalien.ITicker"]);var LoadingItem=function(e){function t(){var t=e.call(this,RES.getRes(CCGlobalResNames.loading_icon))||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.anchorOffsetX=this.anchorOffsetY=this.width/2},t.prototype.update=function(){this._radius+=.08,this.alpha=this.scaleX=this.scaleY=(Math.sin(this._radius+this._offset)+1)/2},t.prototype.play=function(e){this._offset=e,this._radius=0},t}(egret.Bitmap);__reflect(LoadingItem.prototype,"LoadingItem"),window.CCDDZLoading=CCDDZLoading;var CCDDZLoadingProcess=function(e){function t(){var t=e.call(this)||this;t.group=new eui.Group,t.group.width=584,t.group.height=93,t.addChild(t.group),t.back=new eui.Image(RES.getRes("loding_image_23")),t.back.scale9Grid=new egret.Rectangle(38,6,231,7),t.back.x=0,t.back.y=71,t.back.width=584,t.group.addChild(t.back),t.scroller1=new eui.Scroller,t.scroller1.width=0,t.scroller1.height=21,t.scroller1.x=0,t.scroller1.y=71;var i=new eui.Group;t.scroller1.viewport=i,t.pro=new eui.Image(RES.getRes("loding_image_24")),t.pro.scale9Grid=new egret.Rectangle(38,7,231,6),t.pro.width=584,i.addChild(t.pro);for(var n=18;560>n;n+=18){var o=new eui.Image(RES.getRes("loding_image_25"));o.x=n,o.y=5,i.addChild(o)}var a=new eui.Image(RES.getRes("loding_image_26"));a.scale9Grid=new egret.Rectangle(51,6,200,2),a.width=584,i.addChild(a);var r=new eui.Image(RES.getRes("loding_image_27"));return r.scale9Grid=new egret.Rectangle(38,11,231,3),r.width=584,i.addChild(r),t.group.addChild(t.scroller1),t.light=new eui.Image(RES.getRes("loding_image_28")),t.light.x=0,t.light.y=76,t.group.addChild(t.light),t.plane=new eui.Image(RES.getRes("loding_image_29")),t.plane.x=0,t.plane.y=29,t.group.addChild(t.plane),t.lab1=new eui.Label,t.lab1.size=18,t.lab1.text="加载中...",t.lab1.fontFamily="微软雅黑",t.lab1.horizontalCenter=0,t.lab1.y=7,t.lab1.textColor=354118,t.group.addChild(t.lab1),t
}return __extends(t,e),t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.setProcess=function(e,t){e>t&&(e=t),this.scroller1.width=e/t*this.pro.width,this.light.x=this.scroller1.width-this.light.width+4,this.light.x>this.pro.width-this.light.width-4&&(this.light.x=this.pro.width-this.light.width-4),this.plane.x=this.scroller1.width-this.plane.width+17,this.lab1.text=e+"/"+t},t}(eui.Component);__reflect(CCDDZLoadingProcess.prototype,"CCDDZLoadingProcess");var CCDDZMarqueeText=function(e){function t(){var t=e.call(this)||this;return t.announceonly=!1,t._bInLobby=!1,t._bScrolling=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.skinName=components.CCDDZMarqueeSkin,this.m_width=this.maskR.width,this.step=3,this.bg_img.addClickListener(this._onClickOpenHornTalk,this,!1)},t.prototype.clear=function(){this.stop()},t.prototype.addToStage=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth-this.width>>1,this.y=114,CCalien.CCDDZStageProxy.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.bg_img.addClickListener(this._onClickOpenHornTalk,this,!1)},t.prototype.removeFromStage=function(e){CCalien.CCDDZStageProxy.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.clear()},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth-this.width>>1},t.prototype.show=function(e){void 0===e&&(e=null),this._bScrolling||(this.announceonly=e,this.txt.text="",this.txt.x=this.maskR.x,this.checkNext())},t.prototype.onMouseOver=function(e){this.isMouseOver=!0},t.prototype.onMouseOut=function(e){this.isMouseOver=!1},t.prototype.deleteAnnounce=function(){CCDDZExchangeService.instance.deleteAnnounce(),this._bScrolling=!1,this.announceonly=!1},t.prototype._showOneMsgByHornRec=function(e){var t=e,i=t.name.substr(0,9),n={type:4,text:"",time:3e3};n.text="<font color='#ffffff'>【"+i+"】:</font> <font color='#F0FF00'>"+t.msg+"</font>",this.showOne(n,!1)},t.prototype._showOneMsgByChouRec=function(e){e.hasOwnProperty("nickname")||(e.nickname="");var t={type:3,text:"",time:4e3},i="金豆场";e.room_id&&(i=lang.exchange_roomid[e.room_id]),i||(i="金豆场"),t.text="恭喜<font color='#F0FF00'>"+e.nickname.substr(0,9)+"</font>在"+i+"抽得<font color='#F0FF00'>"+CCDDZUtils.exchangeRatio(e.money,!0)+"</font> 奖杯",this.showOne(t,!1)},t.prototype.showLast=function(e){void 0===e&&(e=1),this.txt.text="",this.txt.x=this.maskR.x,this.announceonly=!1,egret.Tween.removeTweens(this.txt);var t=CCDDZExchangeService.instance;if(t.announce&&t.announce.length>0){this.announceonly=!0;var i=this.getNextText();this.showOne(i)}else if(1==e){var n=CCDDZMainLogic.instance.selfData.getHornTalkRecList();if(n.length>0){var o=n[n.length-1];this._showOneMsgByHornRec(o)}}else if(2==e){var n=CCDDZExchangeService.instance.getOneChouMaxInfo();n&&this._showOneMsgByChouRec(n)}},t.prototype.showOne=function(e,t,i){var n=this;void 0===t&&(t=!0),void 0===i&&(i=null),this.visible=!0,this.txt.text="",this.txt.textColor=16777215,this.txt.textFlow=(new egret.HtmlTextParser).parser(e.text),this.txt.x=this.m_width;var o=-this.txt.width,a=50*Math.floor((this.txt.x-o)/this.step);this.txt.alpha=1,this.txt.validateNow(),this.announceonly?(this._bScrolling=!0,egret.Tween.get(this.txt).to({x:o},a).call(this.deleteAnnounce.bind(this))):(this._bScrolling=!0,1==e.type?egret.Tween.get(this.txt).to({x:o},a).call(this.checkNext.bind(this,!0)):(this.txt.x=.5*(this.m_width-this.txt.measuredWidth),this.txt.visible=!1,this.txt.alpha=0,egret.Tween.get(this.txt).set({visible:!0}).to({alpha:1},200).wait(e.time).to({alpha:0},1e3).wait(1e3).call(function(){t&&n.checkNext(!0),i&&i()})))},t.prototype.checkNext=function(e){void 0===e&&(e=!1),e&&CCDDZExchangeService.instance.deleteAnnounce(),this.announceonly=!1;var t=this.getNextText();""==t.text?this.stop():this.showOne(t)},t.prototype.getNextText=function(){var e=CCDDZExchangeService.instance,t=CCDDZMainLogic.instance.selfData,i={type:1,text:"",time:3e3};if(e.announce&&e.announce.length>0){this.imgRedCoin.visible=!1,this.imgTrumpet.visible=!0,this.txt.textColor=16047376;var n=e.announce;i.type=1,i.text="<font color='#FFEA00'>【 系统 】</font><font color='#FFEA00'>"+n+"</font>"}else if(e._showInfoQueen&&e._showInfoQueen.length){this.imgRedCoin.visible=!0,this.imgTrumpet.visible=!1;var o=e.getOneChouInfoFromFront(!0);if(i.type=3,i.time=4e3,o){o.hasOwnProperty("nickname")||(o.nickname="");var a="",r="金豆场";o.room_id&&(r=lang.exchange_roomid[o.room_id]),r||(r="金豆场"),a+="恭喜<font color='#F0FF00'>"+o.nickname.substr(0,9)+"</font>在"+r+"抽得<font color='#F0FF00'>"+CCDDZUtils.exchangeRatio(o.money,!0)+"</font>奖杯",i.text=a}else i.text=""}else if(e.lottery&&e.lottery.nickname&&e.lottery.c_rewarddes)i.type=5,i.text="恭喜<font color='#F0FF00'>"+e.lottery.nickname.substr(0,9)+"</font>夺宝获得<font color='#F0FF00'>"+e.lottery.c_rewarddes+"</font>",e.delLottery();else if(t.getHornTalkShowLen()>0){var s=t.getFrontHornTalkShow();if(!s||!s.name||!s.msg)return"";i.type=4,i.text="<font color='#FFFFFF'>【"+s.name.substr(0,9)+"】:</font>  <font color='#F0FF00'>"+s.msg+"</font>"}else if(e.matchChampionMsg&&e.matchChampionMsg.length){this.imgRedCoin.visible=!0,this.imgTrumpet.visible=!1;var o=e.matchChampionMsg.shift();if(i.type=2,i.time=4e3,o){var c=o.content.split("|");3==c.length?i.text="<font color='#F0FF00'>"+c[0]+"</font>  "+c[1]+"<font color='#F0FF00'>"+c[2]+"</font>":i.text=o.content}else i.text=""}return i},t.prototype.stop=function(){this._bScrolling=!1,egret.Tween.removeTweens(this.txt)},t.prototype.setInLobby=function(e){this._bInLobby=e},t.prototype.enableSendHorn=function(e){this.bg_img.touchEnabled=e,this.openHorn_img.visible=e},t.prototype._onClickOpenHornTalk=function(){CCDDZPanelHornTalk.getInstance().show()},t.prototype._getRankNext=function(){var e=this.inviteRankList||[],t=e.shift();if(t){var i={type:4,text:"",time:3e3};i.text="<font color='#F0FF00'>"+t.nickname+" </font>通过邀请已累计获得<font color='#F0FF00'>"+t.coin+"</font>钻石",this.showOne(i,!1,this._getRankNext.bind(this))}else this.stop()},t.prototype.showByInviteRankList=function(e){this.inviteRankList=e,this._bScrolling||this._getRankNext()},t}(eui.Component);__reflect(CCDDZMarqueeText.prototype,"CCDDZMarqueeText"),window.CCDDZMarqueeText=CCDDZMarqueeText;var CCDDZMasterCards=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);for(var t=0;3>t;t++){var i=CCDDZCard.create({pid:0});i.scaleX=i.scaleY=.4,i.x=62*t,this.container.addChild(i)}},t.prototype.initData=function(){var e=this;[0,0,0].forEach(function(t,i){var n=e.container.getChildAt(i);n.showBack()}),this.updateScore(0,1)},t.prototype.showCards=function(e,t){var i=this;e.forEach(function(e,n){var o=i.container.getChildAt(n);o.pokerId=e,o.showFront(!t)})},t.prototype.updateScore=function(e,t){var i=""+e;e>=1e4&&(i=""+e/1e4+"万"),this.labBase.text=i,this.labMultiple.text=t.toString()},t.prototype.updateMultiple=function(e){0>e||(this.labMultiple.text=""+e)},t}(eui.Component);__reflect(CCDDZMasterCards.prototype,"CCDDZMasterCards"),window.CCDDZMasterCards=CCDDZMasterCards;var NavigationPage=CCalien.NavigationPage,CCDDZPage=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=components.CCDDZPageSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100},t.prototype.beforeShow=function(e,t){"push"==e&&(this.label.text=t.label,this.bg.fillColor=Math.floor(16777215*Math.random()))},t}(NavigationPage);__reflect(CCDDZPage.prototype,"CCDDZPage");var CCDDZQProgressBar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._maximum=100,t._minimum=0,t._value=0,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpThumb.mask=this.imgThumbMask,this._maxWidth=this.grpThumb.width},t.prototype.startAnimation=function(){this.imgRepeat.play()},t.prototype.stopAnimation=function(){this.imgRepeat.stop()},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=Math.max(Math.min(e,this.maximum),0),this.updateValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximum",{get:function(){return this._maximum},set:function(e){this._maximum=e,this.updateValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimum",{get:function(){return this._minimum},set:function(e){this._minimum=e,this.updateValue()},enumerable:!0,configurable:!0}),t.prototype.updateValue=function(){this.labelDisplay.text=this._value+"/"+this._maximum;var e=this._maxWidth*(this._value/this._maximum);egret.Tween.get(this.grpThumb,null,null,!0).to({width:e},100),egret.Tween.get(this.imgThumbMask,null,null,!0).to({width:e},100)},t}(eui.Component);__reflect(CCDDZQProgressBar.prototype,"CCDDZQProgressBar"),window.CCDDZQProgressBar=CCDDZQProgressBar;var CCDDZRedPacketProcess=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.light.visible=1==this.data},t.prototype.getLightImg=function(){return this.light},t}(eui.ItemRenderer);__reflect(CCDDZRedPacketProcess.prototype,"CCDDZRedPacketProcess");var CCDDZRobot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),new CCalien.CCDDZWave(this.eye,1e3,t.eyeAni)},t.eyeAni=function(e){return{alpha:(Math.sin(e)+1)/2}},t}(eui.Component);__reflect(CCDDZRobot.prototype,"CCDDZRobot"),window.CCDDZRobot=CCDDZRobot;var CCDDZShopItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnConfirmTap,this)},t.prototype._refreshLeftTime=function(){var e=CCalien.CCDDZUtils.getCurTimeStamp(),t=CCDDZUtils.getTimeStampDiff(e,this.data.timeStamp,"minute");t=Math.floor(t);var i=t/60;return i=Math.floor(i),t%=60,0==i&&0==t?(this._showPreAndTime(!1),void CCDDZPanelExchange2.instance.onTimeExpired([this.data.goodsid])):void(this.labAddition.text="剩"+i+"小时")},t.prototype._clearRepeatInterval=function(){this.mTimeInterval&&(egret.clearInterval(this.mTimeInterval),this.mTimeInterval=0)},t.prototype._showPreAndTime=function(e){var t=this;e?(this._clearRepeatInterval(),this._refreshLeftTime(),this.mTimeInterval=egret.setInterval(function(){t._refreshLeftTime()},this,6e4)):this._clearRepeatInterval(),this.grpAddition.visible=e,this.mPre_img.visible=e},t.prototype._doExchange=function(){var e,t=this;if(CCDDZPanelExchange2.instance.lv_goods.selectedItem){var i=CCDDZPanelExchange2.instance.lv_goods.selectedItem,n=this;if(0!=i.product_id){var o=CCGlobalUserData.instance.hasBindPhone();if(!o)return void CCDDZPanelBindPhone.getInstance().show(2,{showClose:!0},function(){n._doExchange()})}var a=null,r=i.amount;if(0==i.goodsid)e=CCalien.StringUtils.format(lang.exchange_redcoin_gold,r);else if(1==i.goodsid)e=CCalien.StringUtils.format(lang.exchange_redcoin_red,r);else if(4==i.goodsid){var s="确定兑换{0}元话费？";e=CCalien.StringUtils.format(s,i.amount)}else if(6==i.goodsid){var s="确定兑换{0}元话费充值卡？\n兑换成功后不可退换\n\r";e=CCalien.StringUtils.format(s,i.amount),10==i.amount?a=(new egret.HtmlTextParser).parser(e+"\n<font color='#FF0000'>10元充值卡目前仅支持电信</font>"):30==i.amount&&(a=(new egret.HtmlTextParser).parser(e+"\n<font color='#FF0000'>30元充值卡目前仅支持联通和电信</font>"))}else if(5==i.goodsid){var s="确定兑换{0}元京东卡？\n兑换成功后不可退换";e=CCalien.StringUtils.format(s,i.amount)}else if(7==i.goodsid){var s="确定兑换{0}支付宝红包？";e=CCalien.StringUtils.format(s,i.amount)}else if(0==i.product_id){var s="确定兑换{0}";1==i.item_type?s+="金豆？":3==i.item_type&&(s+="钻石？兑换成功后不可退换"),e=CCalien.StringUtils.format(s,i.num)}CCDDZAlert.show(e,1,function(e){if("confirm"==e){var n=0;if(i.money>0||i.coin>0){i.money>0?n=i.money:i.coin>0&&(n=i.coin/100);var o=(CCDDZMainLogic.instance.selfData.redcoin||0)/100;if(n>o)return void egret.setTimeout(function(){CCDDZAlert.show("奖杯不足！")},t,300)}else if(i.diamond&&i.diamond>0){n=i.diamond;var o=CCDDZBagService.instance.getItemCountById(3);if(n>o)return void egret.setTimeout(function(){CCDDZAlert.show("钻石不足！")},t,300)}CCDDZExchangeService.instance.doRedExchange(i)}},"center",a)}},t.prototype._doBuy=function(){CCDDZRechargeService.instance.doRecharge(this.data.product_id)},t.prototype.onBtnConfirmTap=function(e){this.data.amount?this._doExchange():0==this.data.product_id?this._doExchange():this._doBuy()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=!1,i="金豆",n=0,o="";this.data.item_type?1==this.data.item_type||(2==this.data.item_type?(n=1,i="话费",o=""):3==this.data.item_type&&(n=3,i="钻石")):n=this.data.goodsid;var a="",r=lang.currency;a=4==this.data.goodsid?this.data.amount+"元话费":5==this.data.goodsid?this.data.amount+"元京东卡":6==this.data.goodsid?this.data.amount+"元话费卡":7==this.data.goodsid?CCDDZUtils.exchangeRatio(this.data.amount,!0):this.data.num+i,0==this.data.product_id&&(r="");var s=0;this.data.money&&this.data.money>0?(this.exchange_img.source="cc_icon_redcoin",s=this.data.money):this.data.coin&&this.data.coin>0?(s=this.data.coin/100,this.exchange_img.source="cc_icon_redcoin"):this.data.diamond&&this.data.diamond>0&&(s=this.data.diamond,this.exchange_img.source="cc_icon_diamond"),this.labGold.text=a,this.imgIcon.source=CCDDZGoodsItem.parseUrl(n),this.btnConfirm.money_label.text=o+s+r,this.data.addition>0&&(this.labAddition.text=lang.format(lang.id.recharge_addition,this.data.addition)),this.btnConfirm.skin._Image1.source="cc_common_btn_orange2_n",this.data.amount?(this.mPre_img.visible=!0,this.exchange_img.visible=!0,0==this.data.goodsid?this.labGold.text=this.data.amount+lang.gold:1==this.data.goodsid||4==this.data.goodsid?(this.labGold.text=o+CCDDZUtils.exchangeRatio(this.data.amount,!0),this.data.first&&this.data.timeStamp&&(t=!0)):6==this.data.goodsid?(this.mPre_img.source="cc_exchange_pre2",t=!0):7==this.data.goodsid&&(this.data.first?(this.mPre_img.source="cc_exchange_pre",t=!0):t=!1),this._showPreAndTime(t),this.btnConfirm.money_label.text=o+this.data.coin/100,this.btnConfirm.money_label.horizontalCenter=10):(this.mPre_img.visible=!1,this.exchange_img.visible=!1,this.btnConfirm.money_label.horizontalCenter=0,0==this.data.product_id&&(this.btnConfirm.skin._Image1.source="cc_common_btn_orange3",this.data.money>0||this.data.coin>0?this.mPre_img.source="cc_exchange_pre1":this.data.diamond>0&&(this.mPre_img.source="cc_exchange_pre3"),this.mPre_img.visible=!0,this.exchange_img.visible=!0,this.btnConfirm.money_label.horizontalCenter=10)),this.grpAddition.visible=this.data.addition>0||this.data.first},t}(eui.ItemRenderer);__reflect(CCDDZShopItem.prototype,"CCDDZShopItem");var CCDDZToast=function(){function e(){}return e.show=function(e,t,i){void 0===t&&(t=-1),void 0===i&&(i=0),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.SHOW_TOAST,{content:e,color:t,delay:i})},e}();__reflect(CCDDZToast.prototype,"CCDDZToast");var CCDDZUserInfoView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.updateHeadImage(e.imageid),this.updateNickname(e),isNaN(e.gold)||this.updateGold(e.gold)},t.prototype.updateNickname=function(e){var t=CCDDZMainLogic.instance.selfData;if(e.uid==t.uid){if(t.nickname){var i=t.nickname.substr(0,10);this.labNickName.text=i+"("+t.fakeuid+")"}}else this.labNickName.text=e.nickname},t.prototype.updateHeadImage=function(e){e&&e!=this.avatar.imageId&&(this.avatar.imageId=e)},t.prototype.clean=function(){this.avatar.clean(),this.labNickName.text="",this.gold.setEmpty()},t.prototype.getAvatarPos=function(){return this._globalPos||(this._globalPos=this.localToGlobal(this.avatar.x+this.avatar.width/2-20,this.avatar.y+this.avatar.height/2-20)),this._globalPos},t.prototype.updateGold=function(e){this.gold.updateGold(e)},t.prototype.updateDiamond=function(e){this.diamond.updateGold(e)},t.prototype.hideGuessRight=function(){this.grpGRLight.visible=!1},t.prototype.playWinGoldAnimate=function(){this.grpGRLight.visible=!0,this.grpAnimate.visible=!0,this.star0.visible=!1,this.star1.visible=!1,this.star2.visible=!1,egret.Tween.get(this.light).set({loop:!0,visible:!0,rotation:0}).to({rotation:360},2e3).to({visible:!1}).wait(1700).call(this.hideGuessRight,this),egret.Tween.get(this.star0).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).to({alpha:1,x:17,y:-9,scale:1.3},800).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:34,y:-11,scale:1.3},1e3).to({alpha:0},100),egret.Tween.get(this.star1).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).wait(200).to({alpha:1,x:5,y:74,scale:1.3},1e3).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:8,y:86,scale:1.3},1e3).to({alpha:0},100),egret.Tween.get(this.star2).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).wait(300).to({alpha:1,x:85,y:28,scale:1.3},1e3).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:70,y:74,scale:1.3},1e3).to({alpha:0},100)},t}(eui.Component);__reflect(CCDDZUserInfoView.prototype,"CCDDZUserInfoView"),window.CCDDZUserInfoView=CCDDZUserInfoView;var CCDDZDayTaskItemInfo=function(e){function t(){var t=e.call(this)||this;return t._enableEvent(!0),t}return __extends(t,e),t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._onAddToStage=function(){ccserver.addEventListener(CCGlobalEventNames.USER_GET_TASKREW_REP,this._onRecvGetRewRep,this)},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},t.prototype.setData=function(e){this._data=e,this._data&&this._initByData()},t.prototype.updateInfo=function(e){this._data=e,this._initByData()},t.prototype._initByData=function(){this.info_group.visible=!0,this._tStatusFunc=(i={},i[0]=this._onNotOverBtn.bind(this),i[1]=this._onHasOverBtn.bind(this),i[2]=this._onHasGetRewardBtn.bind(this),i),this._data.total<=0&&(this._data.total=1);var e=this._data;if(e.rew&&1==e.rew.length||2==e.rew.length){var t=e.num;t>e.total&&(t=e.total),1==e.rew.length?this.currentState="one":this.currentState="two",this.validateNow(),this._nMinWidth=this.mPro_img.texture.textureWidth,this._fMinPro=this._nMinWidth/this.mProBg_img.width,this._initRewPng(e.rew),this._initProgress(t,e.total),this._initTaskDesc(e.taskDesc1),this._initRewSucc(),this._initDescExt(e.taskDesc2),this._initBtnAndFunc(e.status)}var i},t.prototype._initRewSucc=function(){var e=(c={},c[0]="金豆x{0}",c[41003]="奖杯x{0}个",c[2]="记牌器x{0}小时",c[1]="奖杯x{0}",c[3]="钻石x{0}",c),t=this._data.rew[0].id,i=this._data.rew[0].num,n=e[t];if("two"==this.currentState){var o=this._data.rew[1].id,a=this._data.rew[1].num,r=e[o],s="";s=0!=i?"\n1."+n.replace("{0}",i)+"  2."+r.replace("{0}",a):""+r.replace("{0}",a),this._data.rewDesc=s}else this._data.rewDesc=""+n.replace("{0}",i);var c},t.prototype._initRew0ByIdAndNum=function(e,t){41003==e?(this.mReward0High_img.visible=!0,this.mReward0_img.source="cc_task_red1",this.mReward0Num_label.text="x"+t):0==e&&(this.mReward0_img.source="cc_room_0",this.mReward0Num_label.text=""+t,this.mReward0High_img.visible=!1)},t.prototype._initRew1ByIdAndNum=function(e,t){1==e?(this.mReward1_img.source="cc_task_re2",this.mReward1Num_label.text=""+t):2==e?(this.mReward1_img.source="cc_room_2",this.mReward1Num_label.text=t+"小时"):0==e?(this.mReward1_img.source="cc_room_0",this.mReward1Num_label.text=""+t):3==e&&(this.mReward1_img.source="cc_room_3",this.mReward1Num_label.text=""+t)},t.prototype._initRewPng=function(e){1==e.length?this._initRew1ByIdAndNum(e[0].id,e[0].num):2==e.length&&(this._initRew0ByIdAndNum(e[0].id,e[0].num),this._initRew1ByIdAndNum(e[1].id,e[1].num))},t.prototype._initTaskDesc=function(e){this.mTaskDesc_label.text=e,this.info_group.validateNow()},t.prototype._initDescExt=function(e){this.mTaskDesc1_label.text=e,this.mTaskDesc1_label.x=this.mTaskDesc_label.x+this.mTaskDesc_label.width+5},t.prototype._onPlayNormalMatch=function(e){CCDDZPanelDayTask.getInstance().close(),CCalien.CCDDZPopUpManager.instance.removeAllPupUp();var t=null;e?e[1e3]?t={toDiamond:!0}:e[4001]?t={toNiu:!0}:e[1001]||e[1005]?t={toGold:!0}:e[9e3]||e[9001]||e[9002]?t={toPdk:!0}:(e[3002]||e[3003]||e[3004])&&(t={toFish:!0}):14==this._data.id?t={toFFF:!0}:15==this._data.id&&(t={toLLT:!0}),CCalien.CCDDZSceneManager.instance.show(CCGlobalSceneNames.ROOM,t)},t.prototype._onInviteFriend=function(){if(CCalien.Native.instance.isNative){var e=CCGlobalWxHelper;e.shareForAndroidApp()}else CCGlobalWxHelper.shareForPhone()},t.prototype._onGetRewardReq=function(){var e={taskid:this._data.id};if(2==this._data.tp)e.optype=2;else if(1==this._data.tp&&3==this._data.id)return void ccserver.reqGetNewYearTaskRew(this._data.id,this._data.subId,this._data.type);ccserver.send(CCGlobalEventNames.USER_GET_TASKREW_REQ,e)},t.prototype._getTextByResult=function(e){var t=null;if(0==e)t="领取以下奖励成功:"+this._data.rewDesc;else{var i=(n={},n[1]=lang.taskNotExist,n[2]=lang.taskNotOver,n[3]=lang.taskHasGetRew,n);t=i[e]?i[e]:"领取奖励失败 "}return t;var n},t.prototype._onRecvGetRewRep=function(e){var t=e.data;if(t.taskid==this._data.id){var i=this._getTextByResult(t.result),n=t.result,o="center";null==n&&(o="left"),CCDDZAlert.show(i,0,null,o);var a=this._data.tp,r=CCDDZMainLogic.instance.selfData;0==e.data.result&&(1==a||3==a||4==a||5==a||99==a?r.setTaskHasGetRew(t.taskid):2==a&&r.setInviteTaskHasGetRew(t.taskid),egret.setTimeout(function(){this._onHasGetRewardBtn()},this,200))}},t.prototype._initProgress=function(e,t){var i=e/t;if(this.mPro_label.text=e+"/"+t,i<this._fMinPro){if(0==i)return void(this.mPro_img.visible=!1);this.mPro_img.width=this._nMinWidth}else i>=1?this.mPro_img.width=this.mProBg_img.width:this.mPro_img.width=i*this.mProBg_img.width;this.mPro_img.visible=!0},t.prototype._initBtnAndFunc=function(e){this._tStatusFunc[e]?this._tStatusFunc[e]():CCDDZLogUtil.info("_initBtnAndFunc=====error=======>",e)},t.prototype._onNotOverBtn=function(){this.mDoTask_btn.setPngs("cc_task_doTask_n","cc_task_doTask_p"),1==this._data.tp?this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this,{1001:1,1005:1})):2==this._data.tp?this.mDoTask_btn.setClickFunc(this._onInviteFriend.bind(this)):3==this._data.tp?this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this,this._data.roomid)):4==this._data.tp?this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this,this._data.roomid)):5==this._data.tp?this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this,this._data.roomid)):99==this._data.tp&&this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this)),this.mDoTask_btn.enableTouch(!0)},t.prototype._onHasOverBtn=function(){if(this.mDoTask_btn.setPngs("cc_task_getReward_n","cc_task_getReward_p"),this.mDoTask_btn.enableTouch(!0),this._data.diamond){var e=CCalien.Native.instance;e.isNative||!e.isWXMP&&!e.isAli()&&"iOS"==egret.Capabilities.os?this.mDoTask_btn.setClickFunc(this._onGetRewardReq.bind(this)):this.mDoTask_btn.setClickFunc(function(){var e=CCDDZPanelAlert.instance;e.show("奖励需在APP端领取，是否下载APP？",0,function(e){"confirm"==e&&CCGlobalGameConfig.downApp()},"center"),e.btnConfirm.bgImg.visible=!1,e.btnConfirm.scaleX=1.5,e.btnConfirm.scaleY=1.5,e.btnConfirm.labelIcon="cc_go_down"})}else this.mDoTask_btn.setClickFunc(this._onGetRewardReq.bind(this))},t.prototype._onHasGetRewardBtn=function(){this.mDoTask_btn.setOnePngAndForbidTouch("cc_task_get")},t}(eui.Component);__reflect(CCDDZDayTaskItemInfo.prototype,"CCDDZDayTaskItemInfo"),window.CCDDZDayTaskItemInfo=CCDDZDayTaskItemInfo;var CCalien;!function(e){var t=function(){function e(e){void 0===e&&(e=1),this._all=[],this.interval=e}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval!=e&&(this._interval=e)},enumerable:!0,configurable:!0}),e.prototype.register=function(e){this._all.indexOf(e)<0&&this._all.push(e)},e.prototype.unregister=function(e){var t=this._all.indexOf(e);t>=0&&this._all.splice(t,1)},e.prototype.activate=function(){this._intervalCount=0,egret.startTick(this.onTicker,this)},e.prototype.sleep=function(){egret.stopTick(this.onTicker,this)},e.prototype.onTicker=function(e){this._intervalCount++,this._intervalCount<this._interval||(this._intervalCount=0,this._all.forEach(function(e){e.update()}))},Object.defineProperty(e,"interval",{get:function(){return this.instance.interval},set:function(e){this.instance.interval=e},enumerable:!0,configurable:!0}),e.register=function(e){this.instance.register(e)},e.unregister=function(e){this.instance.unregister(e)},e.activate=function(){this.instance.activate()},e.sleep=function(){this.instance.sleep()},e}();e.CCDDZTickerManager=t,__reflect(t.prototype,"CCalien.CCDDZTickerManager")}(CCalien||(CCalien={}));var CCDDZDragonGameChunTian=function(e){function t(){var t=e.call(this,"cc_gm_chuntian")||this;return t.armature=t.addArmature("cc_gm_chuntian"),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.y=CCalien.CCDDZStageProxy.stage.stageHeight>>1},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("cc_gm_chuntian",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_gm_chuntian",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameChunTian.prototype,"CCDDZDragonGameChunTian");var CCDDZDragonGameFeiJi=function(e){function t(){var t=e.call(this,"cc_gm_feiji")||this;return t.armature=t.addArmature("cc_gm_feiji"),t.armature.animation.timeScale=.75,t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.y=CCalien.CCDDZStageProxy.stage.stageHeight>>1},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("cc_gm_feiji",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_gm_feiji",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameFeiJi.prototype,"CCDDZDragonGameFeiJi");var CCDDZDragonGameLianDui=function(e){function t(t){var i=e.call(this,"cc_gm_shunziliandui")||this;return i.needMinnor=t,i.armature=i.addArmature("shunziliandui"),i.armature.display.scaleX=1.2,i.armature.display.scaleY=1.2,i.armature.animation.timeScale=.6,i}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("liandui",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("liandui",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameLianDui.prototype,"CCDDZDragonGameLianDui");var CCDDZDragonGameShunZi=function(e){function t(t){var i=e.call(this,"cc_gm_shunziliandui")||this;return i.needMinnor=t,i.armature=i.addArmature("shunziliandui"),i.armature.display.scaleX=1.2,i.armature.display.scaleY=1.2,i.armature.animation.timeScale=.6,i}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("shunzi",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("shunzi",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameShunZi.prototype,"CCDDZDragonGameShunZi");var CCDDZDragonGameWangZha=function(e){function t(){var t=e.call(this,"cc_gm_wangzha")||this;return t.armature=t.addArmature("cc_gm_wangzha"),t.armature.animation.timeScale=.8,t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.y=CCalien.CCDDZStageProxy.stage.stageHeight>>1},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("cc_gm_wangzha",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_gm_wangzha",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameWangZha.prototype,"CCDDZDragonGameWangZha");var CCDDZDragonGameZhaDan=function(e){function t(){var t=e.call(this,"cc_gm_zhadan")||this;return t.armature=t.addArmature("cc_gm_zhadan"),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.y=CCalien.CCDDZStageProxy.stage.stageHeight>>1},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("cc_gm_zhadan",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_gm_zhadan",1,1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonGameZhaDan.prototype,"CCDDZDragonGameZhaDan");var CCDDZDragonHongBao=function(e){function t(){var t=e.call(this,"cc_hongbao")||this;return t.armature1=t.addArmature("cc_hongbao"),t.armature2=t.addArmature("cc_hongbao"),t.btn=new CCDDZStateButton,t.btn.skinName=ui.CCDDZPlayOrangeButtonSkin,t.btn.labelIcon="play_btn_13",t.btn.x=-100,t.btn.y=203,t.addChild(t.btn),t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.btn.visible=!1,t.stop1(),t.stop2(),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t)},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t)},t.prototype.onResize=function(e){this.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.y=CCalien.CCDDZStageProxy.stage.stageHeight>>1},t.prototype.stop1=function(){this.armature1.removeEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this),this.armature1.animation.gotoAndStop("cc_hongbao1",1),this.armature1.display.visible=!1
},t.prototype.stop2=function(){this.armature2.removeEventListener(egret.Event.COMPLETE,this.onComplete2.bind(this),this),this.armature2.animation.gotoAndStopByFrame("cc_hongbao2",1),this.armature2.display.visible=!1},t.prototype.play1=function(e){this.stop2(),this.armature1.display.visible=!0,this.btn.visible=!1,e?(this.armature1.animation.gotoAndPlayByFrame("cc_hongbao1",1,1),this.armature1.addEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this)):this.armature1.animation.gotoAndPlayByFrame("cc_hongbao1",55,1)},t.prototype.play2=function(){this.stop1(),this.armature2.display.visible=!0,this.btn.visible=!1,this._closeImg=new eui.Image("cc_common_close_n"),this.addChild(this._closeImg),this._closeImg.addClickListener(this._onTouchClose,this),this.parent&&(this._closeImg.x=.5*this.parent.width-400,this._closeImg.y=.5*-this.parent.height+180),this.armature2.addEventListener(egret.Event.COMPLETE,this.onComplete2.bind(this),this),this.armature2.animation.gotoAndPlayByFrame("cc_hongbao2",1,1)},t.prototype.onComplete1=function(e){this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},t.prototype.onComplete2=function(e){this.btn.visible=!0},t.prototype.onTap=function(e){this.stop1(),this.stop2(),this.parent&&this.parent.removeChild(this),ccserver.reqWangZhaRedRew()},t.prototype._onTouchClose=function(){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonHongBao.prototype,"CCDDZDragonHongBao");var CCDDZDragonHongBaoWarn=function(e){function t(){var t=e.call(this,"cc_hongbaodonghua")||this;return t.armature1=t.addArmature("cc_hongbaodonghua"),t.armature2=t.addArmature("cc_hongbaodonghua"),t.stop1(),t.stop2(),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.onResize(t)},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t)},t.prototype.onResize=function(e){this.x=.5*CCalien.CCDDZStageProxy.stage.stageWidth+424,this.y=.5*CCalien.CCDDZStageProxy.stage.stageHeight+16},t.prototype.stop1=function(){this.armature1.removeEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this),this.armature1.animation.gotoAndStop("cc_hongbaodonghua1",1),this.armature1.display.visible=!1},t.prototype.stop2=function(){this.armature2.animation.gotoAndStopByFrame("cc_hongbaodonghua2",1),this.armature2.display.visible=!1},t.prototype.play1=function(){this.stop2(),this.armature1.display.visible=!0,this.armature1.animation.gotoAndPlayByFrame("cc_hongbaodonghua1",1,1),this.armature1.addEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this)},t.prototype.play2=function(){this.rect||(this.rect=new eui.Rect(this.armature2.display.width,this.armature2.display.height),this.rect.x=-this.rect.width>>1,this.rect.y=-this.rect.height>>1,this.rect.alpha=.01,this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addChild(this.rect)),this.stop1(),this.armature2.display.visible=!0,this.armature2.animation.gotoAndPlayByFrame("cc_hongbaodonghua2",1,-1)},t.prototype.onComplete1=function(e){this.stop1(),this.play2()},t.prototype.onTap=function(e){},t}(CCDDZDragonBase);__reflect(CCDDZDragonHongBaoWarn.prototype,"CCDDZDragonHongBaoWarn");var CCDDZDragonJingDeng=function(e){function t(){var t=e.call(this,"cc_jingdeng")||this;return t.armature=t.addArmature("cc_jingdeng"),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("cc_jingdeng",1)},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_jingdeng",1,-1)},t.prototype.onComplete=function(e){this.parent&&this.parent.removeChild(this)},t}(CCDDZDragonBase);__reflect(CCDDZDragonJingDeng.prototype,"CCDDZDragonJingDeng");var CCDDZDragonManager=function(){function e(){this.dragonbonesFactory=new dragonBones.EgretFactory,this.register()}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.addDragon=function(e,t,i){this.dragonbonesFactory.getDragonBonesData(e.name)||(this.dragonbonesFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),this.dragonbonesFactory.addTextureAtlasData(this.dragonbonesFactory.parseTextureAtlasData(i,t)))},e.prototype.getDragon=function(e){return this.dragonbonesFactory.buildArmature(e)},e.prototype.register=function(){egret.Ticker.getInstance().register(function(e){dragonBones.WorldClock.clock.advanceTime(.02)},this)},e}();__reflect(CCDDZDragonManager.prototype,"CCDDZDragonManager");var CCDDZDragonSign=function(e){function t(){var t=e.call(this,"cc_sign")||this;return t.armature=t.addArmature("cc_sign"),t}return __extends(t,e),t.prototype.addToStage=function(t){e.prototype.addToStage.call(this,t),this.play()},t.prototype.removeFromStage=function(t){e.prototype.removeFromStage.call(this,t),this.stop()},t.prototype.stop=function(){this.timeOutId&&egret.clearTimeout(this.timeOutId),this.armature.removeEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndStop("cc_sign")},t.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("cc_sign",1,1)},t.prototype.onComplete=function(e){this.armature.animation.gotoAndPlayByFrame("cc_sign",30,1)},t}(CCDDZDragonBase);__reflect(CCDDZDragonSign.prototype,"CCDDZDragonSign");var CCDDZIRButton=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgIcon.source=this.iconUp,this.imgBg.source=this.bgUp},Object.defineProperty(t.prototype,"iconUp",{get:function(){return this.data?this.data.icon+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconDown",{get:function(){return this.data?this.data.icon+"_h":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgUp",{get:function(){return this.data?this.data.bg+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bgDown",{get:function(){return this.data?this.data.bg+"_h":""},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(CCDDZIRButton.prototype,"CCDDZIRButton");var CCDDZIRContainer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.item.setData(this.data)},t}(eui.ItemRenderer);__reflect(CCDDZIRContainer.prototype,"CCDDZIRContainer");var CCDDZIRUpDownIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.img.source=this.iconUp},Object.defineProperty(t.prototype,"iconUp",{get:function(){return this.data?this.data.icon+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconDown",{get:function(){return this.data?this.data.icon+"_h":""},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(CCDDZIRUpDownIcon.prototype,"CCDDZIRUpDownIcon");var CCDDZCreateTable=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t.infoList=[],t.basescore=[],t.maxodd=[],t.roundcnt=[],t.scorelimit=[],t.createcost=[],t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=components.CCDDZCreateTableSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);CCDDZEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreate,this),ccserver.addEventListener(CCGlobalEventNames.CREATE_PERSONAL_GAME_REP,this.onCreateRep,this)},t.prototype.updateCreateCost=function(e){var t=0;e&&this.createcost&&this.createcost[e]&&(t=this.createcost[e]),t&&t>0?this.lbcreatecost.text="创建费用: "+t:this.lbcreatecost.text="创建费用: 免费"},t.prototype.onCreateRep=function(e){var t=e.data;if(0!=t.result)7==t.result||11==t.result||4==t.result?CCDDZPanelRechargeTips.instance.show():CCDDZImgToast.instance.show(this,lang.createPGameErr[t.result]);else{var i={roomID:t.roomid,maxodd:this.maxodd[this.info2.Index],maxround:this.roundcnt[this.info1.Index],baseScore:this.basescore[this.info3.Index],matchType:1,personalgame:!0,enterTableData:this.enterTableData,owner:ccserver.uid};CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,i,CCalien.CCDDZsceneEffect.CCDDFade),this.dealAction()}},t.prototype.onCreate=function(e){var t=CCDDZMainLogic.instance.selfData.gold;return t<this.scorelimit[this.info4.Index]?void CCDDZPanelRechargeTips.instance.show():void ccserver.CreatePersonalGameReq(1,this.basescore[this.info3.Index],this.roundcnt[this.info1.Index],this.maxodd[this.info2.Index],this.scorelimit[this.info4.Index])},t.prototype.show=function(e){if(void 0===e&&(e=null),!this.basescore||this.basescore.length<1){var t=CCGlobalGameConfig.personalGameConfig.ddz;this.basescore=t.basescore,this.maxodd=t.maxodd,this.roundcnt=t.roundcnt,this.scorelimit=t.scorelimit,this.createcost=t.createcost}this.info1.setData(this.roundcnt),this.info2.setData(this.maxodd),this.info3.setData(this.basescore,this),this.info4.setData(this.scorelimit),this._callback=e,this.popup()},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZCreateTable.prototype,"CCDDZCreateTable");var CCDDZCreateTableInfo=function(e){function t(){var t=e.call(this)||this;return t.data=[],t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);for(var t=0;4>t;++t)this["img"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.radioClicked,this)},t.prototype.radioClicked=function(e){var t=Number(e.currentTarget.name);(0>t||t>this.data.length)&&(t=0),this.setIndex(t)},t.prototype.setData=function(e,t){void 0===t&&(t=null),this.data=e,this.parent_view=t;for(var i=0;4>i;++i)i<e.length?(this["img"+i].visible=!0,this["lb"+i].visible=!0,"0"==this.data[i].toString()?this["lb"+i].text="无限制":this["lb"+i].text=this.data[i].toString()):(this["img"+i].visible=!1,this["lb"+i].visible=!1);this.setIndex(0)},t.prototype.setIndex=function(e){e||(e=0);for(var t=0;4>t;++t)t==e?(this["img"+t].source="cc_personal_radio_c",this["lb"+t].textColor=16774656):(this["img"+t].source="cc_personal_radio_n",this["lb"+t].textColor=16777215);this.index=e,this.parent_view&&this.parent_view.updateCreateCost(this.index)},Object.defineProperty(t.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(CCDDZCreateTableInfo.prototype,"CCDDZCreateTableInfo"),window.CCDDZCreateTableInfo=CCDDZCreateTableInfo;var CCDDZDetailItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(e,t){this.lbName.text=e,t&&null!=t||(t=0),t>=0?(this.lbGold.text="+"+t,this.lbGold.textColor=6875916):(this.lbGold.text=t,this.lbGold.textColor=16586519)},t}(eui.Component);__reflect(CCDDZDetailItem.prototype,"CCDDZDetailItem"),window.CCDDZDetailItem=CCDDZDetailItem;var CCDDZHistoryItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.lbOwner.text=this.data.owner_cn,this.lbTime.text=this.data.createtime,this.lbCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CheckDetailClick,this)},t.prototype.CheckDetailClick=function(e){CCDDZPersonalDetail.instance.show(this.data.gameinfo)},t}(eui.ItemRenderer);__reflect(CCDDZHistoryItem.prototype,"CCDDZHistoryItem");var CCDDZHistoryRecord=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=components.CCDDZHistoryRecordSkin,this.list.itemRenderer=CCDDZHistoryItem,this._dataProvide||(this._dataProvide=new eui.ArrayCollection([]),this.list.dataProvider=this._dataProvide)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZHistoryItem,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.scroll2end,this),CCDDZPersonalGameHistory.instance.addEventListener(CCGlobalEventNames.PGAME_RECORD_DATA_REFRESH,this.onGameRecordDataUpdate,this)},t.prototype.onGameRecordDataUpdate=function(e){var t=e.data;this._dataProvide.source=t,this._dataProvide.refresh()},t.prototype.scroll2end=function(e){CCDDZPersonalGameHistory.instance.getDataList()},t.prototype.show=function(e,t){void 0===t&&(t=null),this._dataProvide.source=e,this._dataProvide.refresh(),this.scroller.viewport.scrollV=0,this._callback=t,this.popup()},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZHistoryRecord.prototype,"CCDDZHistoryRecord");var CCDDZImgToast=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=personal.CCDDZToastSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.enableTouch=function(e){this.touchEnabled=e,this.lb.touchEnabled=e,this.bgImg.touchEnabled=e},t.prototype.show=function(e,t){var i=this;e.contains(this)&&e.removeChild(this),e.addChild(this),this.x=e.width/2-this.width/2,this.y=e.height/2-this.height/2,this.lb.text=t,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},300).wait(1500).to({alpha:0},300).call(function(){e.contains(i)&&e.removeChild(i)})},t}(eui.Component);__reflect(CCDDZImgToast.prototype,"CCDDZImgToast");var CCDDZImgWordBtn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setTit=function(e){this.titImg.source=e,this.newSrc=e},t.prototype.useNewTit=function(){this.newSrc&&(this.titImg.source=this.newSrc)},t.prototype.setDisable=function(){this.infoGroup.touchEnabled=!1,this.touchEnabled=!1,this.bgImg.source="cc_common_btn_orange2_gray",this.useNewTit()},t.prototype.setEnable=function(){this.bgImg.source="cc_common_btn_orange2_n",this.infoGroup.touchEnabled=!0,this.touchEnabled=!0,this.useNewTit()},t}(eui.Component);__reflect(CCDDZImgWordBtn.prototype,"CCDDZImgWordBtn"),window.CCDDZImgWordBtn=CCDDZImgWordBtn;var CCDDZJoinTable=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=personal.CCDDZJoinTableSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this);for(var t=0;12>t;++t)this["btn"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNumberClick,this);this.roomid=0,ccserver.addEventListener(CCGlobalEventNames.JOIN_PGAME_REP,this.onJoinRep,this)},t.prototype.onNumberClick=function(e){var t=Number(e.currentTarget.name);if(10>t){if(!(this.roomid<1e5))return;this.roomid=10*this.roomid+t}else 10==t?this.roomid=Math.floor(this.roomid/10):11==t&&(this.roomid=0);this.lbRoomID.text=0==this.roomid?"":this.roomid.toString()},t.prototype.onJoinRep=function(e){var t=e.data;0!=t.result&&(2==t.result?CCDDZPanelRechargeTips.instance.show():CCDDZImgToast.instance.show(this,lang.joinPGameErr[t.result]))},t.prototype.onShare=function(e){},t.prototype.onSearch=function(e){ccserver.QueryRoomInfoReq(this.roomid)},t.prototype.onJoin=function(e){ccserver.JoinPGameReq(this.roomid)},t.prototype.setPlayerInfo=function(e,t,i){this["player"+e].imageId=t,this["PInfo"+e].setName(i)},t.prototype.show=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.roomid=0,this.lbOwner.text="",this.lbRoomID.text="",this._callback=e,this.popup(),t&&(this.roomid=t,this.lbRoomID.text=String(t),ccserver.JoinPGameReq(t))},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZJoinTable.prototype,"CCDDZJoinTable");var CCDDZPersonalDetail=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=personal.CCDDZDetailSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this)},t.prototype.show=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n=null),e&&e.length>0)for(var o=0;3>o;++o)e[o]&&this["item"+(o+1)].setData(e[o].nickname,e[o].gold);this.lbLeave.visible=!1,this.imgPoint.visible=!1,this.btnLeave.visible=!1,i&&(this.btnLeave.visible=!0,this.btnLeave.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this)),n&&(this.lbLeave.visible=!0,this.imgPoint.visible=!0,this.lbLeave.text="因"+n+"中途退出，游戏终止"),this._callback=t,this.popup()},t.prototype.onBtnCloseClick=function(e){this._callback&&this._callback("confirm"),this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPersonalDetail.prototype,"CCDDZPersonalDetail");var CCDDZPersonalGame=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=personal.CCDDZPersnalGameSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreate,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this),this.btnHistory.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHitory,this)},t.prototype.beforeShow=function(t){e.prototype.beforeShow.call(this,t)},t.prototype.onCreate=function(e){CCDDZCreateTable.instance.show()},t.prototype.onJoin=function(e){CCDDZJoinTable.instance.show()},t.prototype.onHitory=function(e){CCDDZPersonalGameHistory.instance.clearDataList(),CCDDZPersonalGameHistory.instance.getDataList(),CCDDZHistoryRecord.instance.show(CCDDZPersonalGameHistory.instance.source)},t}(CCalien.NavigationPage);__reflect(CCDDZPersonalGame.prototype,"CCDDZPersonalGame");var CCDDZPInfItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setName=function(e){this.lbName.text=e},t}(eui.Component);__reflect(CCDDZPInfItem.prototype,"CCDDZPInfItem"),window.CCDDZPInfItem=CCDDZPInfItem;var CCDDZTableInfo=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=personal.CCDDZTableInfoSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStart,this),this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShare,this),ccserver.addEventListener(CCGlobalEventNames.START_PGAME_REP,this.onStartGameRep,this)},t.prototype.onJoinRep=function(e){var t=e.data;0!=t.result&&CCDDZPanelAlert.instance.show("错误编号"+t.result,0)},t.prototype.onStartGameRep=function(e){var t=e.data;0!=t.result?CCDDZPanelAlert.instance.show("错误编号"+t.result,0):CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,this.roominfo,CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype.onShare=function(e){},t.prototype.onStart=function(e){ccserver.StartPGameReq(this.roomid)},t.prototype.setPlayerInfo=function(e,t,i){this["player"+e].imageId=t,this["PInfo"+e].setName(i)},t.prototype.show=function(e,t){void 0===t&&(t=null),this.roomid=e.roomid,this.lbRoomid.text=e.roomid,this.lbLimit.text=e.maxodd,this.lbRound.text=e.roundcnt,this.lbBScore.text=e.basescore,this.roominfo={roomid:e.roomid,maxOdds:e.maxodd,roundcnt:e.roundcnt,baseScore:e.basescore,matchType:1,personalgame:!0},e.owner&&this.setPlayerInfo(1,e.owner.imageId,e.owner.nickname),this._callback=t,this.popup()},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZTableInfo.prototype,"CCDDZTableInfo");var CCDDZRedRank=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveFromStage,t),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.arr=[],this.dataProvider=new eui.ArrayCollection(this.arr),this.list.itemRenderer=CCDDZRedRankInfo,this.list.dataProvider=this.dataProvider;var t=CCalien.CCDDZEventManager.instance;t.registerOnObject(this,ccserver,CCGlobalEventNames.USER_REDCOIN_RANKING_LIST_REP,this.onRedcoinRankingListRep,this)},t.prototype.onAddToStage=function(e){CCalien.CCDDZEventManager.instance.enableOnObject(this),ccserver.getRedcoinRankingListReq()},t.prototype.onRemoveFromStage=function(e){CCalien.CCDDZEventManager.instance.disableOnObject(this)},t.prototype._checkDataFormat=function(){for(var e=null,t={score:null,nickname:null,ranking:null,uid:0},i=[],n=0;n<this.arr.length;++n)e=this.arr[n],e&&e.score&&e.ranking&&(t=e,t.nickname=t.nickname||"",i.push(t));this.arr=i},t.prototype.onRedcoinRankingListRep=function(e){this.arr=e.data.list;var t={ranking:0};!this.arr||this.arr.length<1||(this.arr[0].uid==CCDDZMainLogic.instance.selfData.uid&&(t=this.arr.shift()),0==t.ranking?(this.myRank.visible=!1,this.rankScroller.height=450,this.rankScroller.y=55):(this.myRank.visible=!0,this.myRank.data=t,this.rankScroller.height=400,this.rankScroller.y=100),this.validateNow(),this._checkDataFormat(),this.dataProvider.source=this.arr,this.dataProvider.refresh())},t}(eui.Component);__reflect(CCDDZRedRank.prototype,"CCDDZRedRank"),window.CCDDZRedRank=CCDDZRedRank;var CCDDZRedRankInfo=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){this.data.score=this.data.score||0,this.data.ranking=this.data.ranking||0;var t=this.data.uid,i=this.data.ranking;t==CCDDZMainLogic.instance.selfData.uid?(this.score.textColor=15859456,this.nickname.textColor=15859456,this.rank.textColor=15859456):(this.score.textColor=16777215,this.nickname.textColor=16777215,this.rank.textColor=16777215),this.score.text=CCDDZUtils.exchangeRatio(this.data.score/100,!0),this.nickname.text=this.data.nickname,this.nickname.text=this.nickname.text.substr(0,10),this.rank1.visible=1==i,this.rank2.visible=2==i,this.rank3.visible=3==i,this.back1.visible=1==i,this.back2.visible=2==i,this.back3.visible=3==i,0==i?this.rank.text="--":this.rank.text=i+"",this.rank.visible=i>3||1>i,this.back.visible=i>3||1>i}},t}(eui.ItemRenderer);__reflect(CCDDZRedRankInfo.prototype,"CCDDZRedRankInfo"),window.CCDDZRedRankInfo=CCDDZRedRankInfo;var CCalien;!function(e){var t;!function(t){var i=function(){function e(){}return e.centerPopUp=function(e){e.horizontalCenter=e.verticalCenter=0},e.centerHorizontal=function(e){e.horizontalCenter=0},e.centerVertical=function(e){e.verticalCenter=0},e.notCenterPopUp=function(e){e.horizontalCenter=e.verticalCenter=0/0},e.getCenterPos=function(e){var t=0,i=0,n=e.parent;return n&&(t=.5*(n.width-e.width),i=.5*(n.height-e.height)),{x:t,y:i}},e.transDirection=function(e){var t;switch(e){case"up":t=0;break;case"right":t=1;break;case"bottom":t=2;break;case"left":t=3}return t},e}();t.CCDDZUtils=i,__reflect(i.prototype,"CCalien.CCDDZpopupEffect.CCDDZUtils");var n=function(){function e(){}return e.prototype.show=function(e,t,n,o,a){t.addChild(e),i.centerPopUp(e)},e.prototype.hide=function(e,t,i,n,o){t.removeChild(e)},e}();t.None=n,__reflect(n.prototype,"CCalien.CCDDZpopupEffect.None",["CCalien.CCDDZpopupEffect.IDialogEffect"]);var o=function(){function e(){}return e.prototype.show=function(t,n,o,a,r){t.alpha=0,n.addChild(t),i.centerPopUp(t);var s=r&&r.duration||e.DEFAULT_DURATION;egret.Tween.get(t).to({alpha:1},s)},e.prototype.hide=function(t,i,n,o,a){var r=a&&a.duration||e.DEFAULT_DURATION;egret.Tween.get(t).to({alpha:0},r).call(function(){i.removeChild(t)},this)},e.DEFAULT_DURATION=200,e}();t.CCDDFade=o,__reflect(o.prototype,"CCalien.CCDDZpopupEffect.CCDDFade",["CCalien.CCDDZpopupEffect.IDialogEffect"]);var a=function(){function t(){}return t.prototype.show=function(n,o,a,r,s){t.outPos||(t.outPos=[{x:0,y:-e.CCDDZStageProxy.height},{x:e.CCDDZStageProxy.width,y:0},{x:0,y:e.CCDDZStageProxy.height},{x:-e.CCDDZStageProxy.width,y:0}]),o.addChild(n),i.notCenterPopUp(n);var c=s.startPos||t.outPos[i.transDirection(s.direction)],h=s.endPos||i.getCenterPos(n);n.x=c.x||h.x,n.y=c.y||h.y;var l=s&&s.duration||t.DEFAULT_DURATION,u={x:h.x,y:h.y};egret.Tween.get(n).to(u,l,s?s.ease:null),s&&s.withFade&&egret.Tween.get(n).to({alpha:1},l)},t.prototype.hide=function(e,n,o,a,r){var s=t.outPos[i.transDirection(r.direction)],c=r.endPos||i.getCenterPos(e),h=r&&r.duration||t.DEFAULT_DURATION,l={x:s.x||c.x,y:s.y||c.y};egret.Tween.get(e).to(l,h,r?r.ease:null).call(function(){n.removeChild(e),i.centerPopUp(e)},this),r&&r.withFade&&egret.Tween.get(e).to({alpha:0},h)},t.DEFAULT_DURATION=300,t}();t.Flew=a,__reflect(a.prototype,"CCalien.CCDDZpopupEffect.Flew",["CCalien.CCDDZpopupEffect.IDialogEffect"]);var r=function(){function e(){}return e.prototype.show=function(t,n,o,a,r){var s=r&&r.duration||e.DEFAULT_DURATION;t.scaleX=t.scaleY=0;var c={scaleX:1,scaleY:1};n.addChild(t),i.centerPopUp(t),egret.Tween.get(t).to(c,s,r?r.ease:null),r&&r.withFade&&egret.Tween.get(t).to({alpha:1},s)},e.prototype.hide=function(t,i,n,o,a){var r=a&&a.duration||e.DEFAULT_DURATION;t.scaleX=t.scaleY=1;var s={scaleX:0,scaleY:0};egret.Tween.get(t).to(s,r,a?a.ease:null).call(function(){i.removeChild(t),t.scaleX=t.scaleY=1},this),a&&a.withFade&&egret.Tween.get(t).to({alpha:0},r)},e.DEFAULT_DURATION=200,e}();t.Scale=r,__reflect(r.prototype,"CCalien.CCDDZpopupEffect.Scale",["CCalien.CCDDZpopupEffect.IDialogEffect"])}(t=e.CCDDZpopupEffect||(e.CCDDZpopupEffect={}))}(CCalien||(CCalien={}));var CCDDZPageChannels=function(e){function t(){var t=e.call(this)||this;return t.goldRooms=CCGlobalGameConfig.getCfgByField("goldRooms"),t.diamondRooms=CCGlobalGameConfig.getCfgByField("diamondRooms"),t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=pages.CCDDZPageChannelSkin,t._ins=this},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize(null),CCDDZMainLogic.instance.resetChannelClick()},t.prototype._initFish=function(){var e="cc_room_center1",t=CCGlobalGameConfig.getCfgByField("webCfg.fish");t&&1==t.status?e="cc_room_fish":(t=CCGlobalGameConfig.getCfgByField("webCfg.dzpk"),t&&1==t.status&&(e="cc_room_center")),this.enter_lottery.source=e},t.prototype._showPaiLiDownload=function(){var e=CCGlobalGameConfig.wxService,t="招募推广员,加微信:"+e+"\n(点击确定即可复制微信号)";CCDDZPanelAlert3.instance.show(t,0,function(){CCGlobalGameConfig.copyText(this.parent,e,"微信号("+e+")")})},t.prototype.onToNewGold=function(){CCalien.CCDDZPopUpManager.removeAllPupUp(),CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_NGOLD),ccserver.checkReconnect()},t.prototype.onToRedNormal=function(e){void 0===e&&(e=!0),CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_DIAMOND),ccserver.checkReconnect()},t.prototype.onToGoldGame=function(){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_GOLD),ccserver.checkReconnect()},t.prototype.onToDzpk=function(){CCDDZMainLogic.instance.checkPoker(function(){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_DZPK),ccserver.checkReconnect()})},t.prototype.onToFish=function(){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_FISH),ccserver.checkReconnect()},t.prototype.toGoldPage=function(){var e=[].concat(this.diamondRooms,this.goldRooms);this.navigation.push(CCDDZPageNormalChannel,!0,{roomList:e,scale:.8,colNum:3,gapV:50})},t.prototype.toDiamondPage=function(){this.navigation.push(CCDDZPageNormalChannel,!0,{roomList:this.diamondRooms,scale:1,colNum:2,gapV:40})},t.prototype.toPdk=function(){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_P_DK),ccserver.checkReconnect()},t.prototype.onSelectChannel=function(e){var t=e.currentTarget.name;switch(CCDDZMainLogic.instance.resetChannelClick(),t){case"enter_pdk":this.toPdk();break;case"normal":this.toGoldPage();break;case"match":this.navigation.push(CCDDZPageMatchChannel);break;case"diy":this.navigation.push(CCDDZPersonalGame);break;case"lottery":var i=e.currentTarget.source;"cc_room_fish"==i?this.onToFish():"cc_room_center"==i?this.onToDzpk():"cc_room_center1"==i&&CCDDZPanelLottery.instance.show();break;case"red":this.toDiamondPage();break;case"niu":this.onToSmallGame();break;case"gold":this.onToGoldGame()}},t.prototype.onToSmallGame=function(){CCDDZPanelSmallGame.instance.show()},t.prototype.beforeShow=function(e){this.enter_pdk.addClickListener(this.onSelectChannel,this),this.enter_normal.addClickListener(this.onSelectChannel,this),this.enter_match.addClickListener(this.onSelectChannel,this),this.enter_diy.addClickListener(this.onSelectChannel,this),this.enter_niu.addClickListener(this.onSelectChannel,this),this.enter_lottery.addClickListener(this.onSelectChannel,this),this.enter_red.addClickListener(this.onSelectChannel,this),CCDDZEventManager.instance.enableOnObject(this),CCDDZMainLogic.instance.hideIndexDownAndRefresh(),this._initFish()},t.prototype.beforeHide=function(){CCDDZEventManager.instance.disableOnObject(this)},t.prototype.onResize=function(e){},t.defName="CCDDZPageChannels",t._ins=null,t}(CCalien.NavigationPage);__reflect(CCDDZPageChannels.prototype,"CCDDZPageChannels");var CCDDZIRChannel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgIcon.source="room_channel_icon_"+this.data.id,this.imgLabel.source="room_channel_lab_"+this.data.id,1==this.data.id},t.prototype.playOpenAnimate=function(){this.openFlag.visible=!0,egret.Tween.get(this.openFlag).set({visible:!0,y:87}).to({y:77},446).to({y:87},446).call(this.playOpenAnimate,this)},t}(eui.ItemRenderer);__reflect(CCDDZIRChannel.prototype,"CCDDZIRChannel");var CCDDZPageMatchChannel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=pages.CCDDZPageMatchChannelSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZIRContainer
},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.REFRESH_MATCH_LIST,this.onRefreshMatchList,this)},t.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),ccserver.removeEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),CCalien.CCDDZDispatcher.removeEventListener(CCGlobalEventNames.REFRESH_MATCH_LIST,this.onRefreshMatchList,this)},t.prototype.onMatchSignUpInfoRep=function(e){var t=e.data,i=null;if(this._roomList.some(function(e){return e.matchId==t.matchid?(i=e,!0):void 0}),i){i.is_signup=null==t.is_signup?0:t.is_signup,i.today_cnt=null==t.today_cnt?0:t.today_cnt,i.signup_cnt=null==t.signup_cnt?0:t.signup_cnt,i.signUpCountTest=i.signup_cnt+lang.people,i.todayCountText=i.today_cnt+"/"+i.maxDayPlayCnt;for(var n=this._dataProvide.source,o=n.length,a=0;o>a;++a)for(var r=0;r<n[a].length;++r)if(n[a][r].matchId==t.matchid)return void this._dataProvide.itemUpdated(n[a])}},t.prototype.onRefreshMatchList=function(e){this._dataProvide.refresh()},t.prototype._setShareSuccGames=function(e){CCalien.CCDDZlocalStorage.setItem("shareSucc",""+e)},t.prototype._getShareSuccGames=function(){var e=CCalien.CCDDZlocalStorage.getItem("shareSucc");return e?Number(e):-1},t.prototype._shouldShareForFree=function(){return!1},t.prototype._onWXShareRet=function(e){var t=e.data.shareSucc;t&&(this.selectedRoom&&this.selectedRoom.matchId&&this._setShareSuccGames(this.selectedRoom.matchId),CCalien.CCDDZDispatcher.removeEventListener(CCGlobalEventNames.USER_SHARE_RESULT,this._onWXShareRet,this)),CCDDZPanelShare.instance.close()},t.prototype._onFreePopShare=function(){var e=this;CCDDZAlert.show("成功分享游戏后即可报名免费赛",0,function(){CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.USER_SHARE_RESULT,e._onWXShareRet,e),CCDDZPanelShare.instance.showInviteFriend()})},t.prototype._onJoinMatch=function(){if(this.selectedRoom.ads);else{for(var e=0;e<CCGlobalGameConfig.roomList.length;++e)if(2==CCGlobalGameConfig.roomList[e].is_signup)return void ccserver.checkReconnect();if(this.selectedRoom.is_signup)1==this.selectedRoom.is_signup?CCDDZPanelMatchCountDown.instance.show(this.selectedRoom):2==this.selectedRoom.is_signup&&ccserver.checkReconnect();else if(this.selectedRoom.maxOwnGoldLimit&&this.selectedRoom.maxOwnGoldLimit<CCDDZMainLogic.instance.selfData.gold)CCDDZAlert.show(CCalien.StringUtils.formatApply(lang.match_sign_up_result[16],[this.selectedRoom.maxOwnGoldLimit,this.selectedRoom.name]));else{var t=this._shouldShareForFree();t?this._onFreePopShare():CCDDZPanelMatchSignUp.instance.show(this.selectedRoom)}}},t.prototype.clickRoom=function(t){this.list.selectedItem=t,e.prototype.selectRoom.call(this,t),this._onJoinMatch()},t.prototype.dealRoomList=function(){e.prototype.dealRoomList.call(this),this._roomList.forEach(function(e){e.ads||ccserver.getMatchSignUpInfo(e.matchId)})},t.prototype.isAfterInNatonalLast500Match=function(){var e="2017-10-07 19:30:00",t=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),i=(new Date).getTime();return i>=t?!0:!1},t.prototype.beforeShow=function(t,i){e.prototype.beforeShow.call(this,t,i);var n=null,o=ccserver.getServerStamp();n=CCGlobalGameConfig.roomList.filter(function(e){var t=e.showTime,i=e.hideTime,n=!1;return 2==e.roomType&&(t=t.replace(/T/," "),i=i.replace(/T/," "),n=CCDDZUtils.isInTimeSection(t,i,o,!0,!1)),n}),n.sort(function(e,t){return e.sortid-t.sortid}),this._roomList=n,this.dealRoomList();var a=[],r=n.length,s=0,c=null,h=0;for(s=0;r>s;s=h)c={0:{},1:{},length:1,_p:this,spec:0},c[0]=n[s],401==c[0].matchId?(h=1,c.spec=1):(h+=2,r>s+1&&(c[1]=n[s+1],c.length=2)),a.push(c);this._dataProvide.source=a},t.defName="CCDDZPageMatchChannel",t}(CCDDZPageChannelBase);__reflect(CCDDZPageMatchChannel.prototype,"CCDDZPageMatchChannel");var CCDDZMatchRoom=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.onClickGroup=function(e){var t=e.target;t==this.item0Group?this._matchChannel.clickRoom(this._data[0]):t==this.item1Group&&this._matchChannel.clickRoom(this._data[1])},t.prototype.initDataByIdx=function(e,t){if(this["labName"+e].text=t.name,this["lbOpenTime"+e].text=t.shortName,t.hasOwnProperty("startDate")){var i=CCDDZMatchService.getNextTurn(t);this["labLimit"+e].text=t.limitText=i.nextTime,t.nextIndex=i.nextIndex}else this["labLimit"+e].text=t.limitText;switch(t.matchType){case 0:this["labReward"+e].text=t.rewardText;break;case 1:}this["imgSignUp"+e].visible=t.is_signup},t.prototype.setData=function(e){this.item0Group.addClickListener(this.onClickGroup,this,!1),this.item1Group.addClickListener(this.onClickGroup,this,!1),this.currentState="normal",this._matchChannel=e._p,this._data=e;var t=e.length;this.initDataByIdx(0,e[0]),2==t?(this.currentState="normal",this.item1Group.visible=!0,this.initDataByIdx(1,e[1])):(e.spec&&(this.currentState="spec"),this.item1Group.visible=!1)},t}(eui.Component);__reflect(CCDDZMatchRoom.prototype,"CCDDZMatchRoom"),window.CCDDZMatchRoom=CCDDZMatchRoom;var CCDDZPageNormalChannel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=pages.CCDDZPageNormalChannelSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZIRNormalRoom},t.prototype.addListeners=function(){e.prototype.addListeners.call(this),ccserver.addEventListener(CCGlobalEventNames.USER_PLAYERS_AMOUNT_REP,this.onPlayersAmount,this)},t.prototype.removeListeners=function(){e.prototype.removeListeners.call(this),ccserver.removeEventListener(CCGlobalEventNames.USER_PLAYERS_AMOUNT_REP,this.onPlayersAmount,this)},t.prototype.selectRoom=function(t){return e.prototype.selectRoom.call(this,t),this.selectedRoom&&this.selectedRoom.showDownApp?void CCDDZPanelActAndNotice.getInstance().showAPPAct():void ccserver.checkReconnect()},t.prototype.onPlayersAmount=function(e){var t=this,i=e.data,n=CCGlobalGameConfig.getCfgByField("custom.onLineCnt");n&&(i.info.forEach(function(e,i){var n=t.getRoomById(e.room_id);n&&(n.amount=e.amount)}),this._dataProvide.refresh())},t.prototype.fastJoin=function(){},t.prototype.navigateToUrl=function(){this.followCourse()},t.prototype._foramtRoomList=function(e){for(var t=e.roomList.length,i=[],n=0;t>n;++n){var o=e.roomList[n];o.scale=e.scale,i.push(o)}return i},t.prototype.beforeShow=function(t,i){if(e.prototype.beforeShow.call(this,t,i),console.log("beforeShow---111--->",i),i){var n=this._foramtRoomList(i);console.log("beforeShow---222--->",n),n.sort(function(e,t){return e.roomType==t.roomType&&t.roomID-e.roomID,t.roomType-e.roomType}),this.setRoomList(n);var o=this.list.layout;o.requestedColumnCount=i.colNum,o.verticalGap=i.gapV,3==i.colNum?o.horizontalGap=30:o.horizontalGap=65}ccserver.getPlayersAmount(1),ccserver.getPlayersAmount(8)},t.prototype.followCourse=function(){CCDDZPanelFollowCourse.instance.show()},t.prototype.beforeHide=function(e,t){void 0===t&&(t=null),this.removeListeners()},t.defName="CCDDZPageNormalChannel",t.roomWordImg=(_a={},_a[10001]="cc_room_word_0",_a[10002]="cc_room_word_1",_a[10003]="cc_room_word_2",_a[10004]="cc_room_word_0",_a[10005]="cc_room_word_1",_a[10006]="cc_room_word_2",_a),t}(CCDDZPageChannelBase);__reflect(CCDDZPageNormalChannel.prototype,"CCDDZPageNormalChannel");var CCDDZIRNormalRoom=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.runTipScale()},t.prototype.runTipScale=function(){this.stopTipsScale(),egret.Tween.get(this.grpTips).set({scaleX:0,scaleY:0,alpha:0}).wait(500).to({scaleX:1,scaleY:1,alpha:1},300)},t.prototype.stopTipsScale=function(){egret.Tween.removeTweens(this.grpTips)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;if(this.scaleX=this.scaleY=t.scale,t.showDownApp)return void(this.currentState="justBg");this.currentState="all",this.imgLevel.source=CCDDZPageNormalChannel.roomWordImg[t.roomID];var i="金豆",n=!1,o="cc_room_bean",a=!1;2==t.roomFlag&&(i="钻石",o="cc_room_diamond",n=!0,1e3==t.roomID&&(a=!0)),this.newDiaImg.visible=a,this.diaFlagImg.visible=n,this.imgIcon.source=o,t.maxScore>=99999999?this.labLimit.text=lang.format(lang.id.roomLimit2,CCDDZUtils.roomScoreFormat(CCDDZUtils.currencyRatio(t.baseScore)),CCDDZUtils.roomScoreFormat(CCDDZUtils.currencyRatio(t.minScore)),i):this.labLimit.text=lang.format(lang.id.roomLimit1,CCDDZUtils.roomScoreFormat(CCDDZUtils.currencyRatio(t.baseScore)),CCDDZUtils.roomScoreFormat(CCDDZUtils.currencyRatio(t.minScore)),CCDDZUtils.roomScoreFormat(CCDDZUtils.currencyRatio(t.maxScore)),i),this.grpName.visible=!1;var r=t.amount||0,s=CCGlobalGameConfig.getCfgByField("custom.onLineCnt");s?this.labOnlineCount.text=CCalien.StringUtils.format(lang.roomAmount,r):t.roomid2maxredcoin&&(this.labOnlineCount.text=t.roomid2maxredcoin),t.roomflagname?(this.grpTips.visible=!0,this.lblTips.text=t.roomflagname):this.grpTips.visible=!1},t}(eui.ItemRenderer);__reflect(CCDDZIRNormalRoom.prototype,"CCDDZIRNormalRoom");var _a,CCDDZPanelAct=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelActSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.actList.setSelectChangeFunc(this._onSelectChange.bind(this)),this._enableEvent(!0)},t.prototype._onSelectChange=function(e){var t=e.pos,i=this.infoGroup.globalToLocal(t.x,t.y);this.arrImg.y=i.y},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.refreshActList=function(){this.actList.refreshActlist()},t.prototype.setShowBindAct=function(){this.actList.setShowBindAct()},t.prototype.setShowInviteAct=function(){this.actList.setShowInviteAct()},t.prototype.setShowFFFAct=function(){this.actList.setShowById(ACT_ID_FFF)},t.prototype.setShowYearGift=function(){this.actList.setShowNewYearGift()},t.prototype.setShowAppAct=function(){this.actList.setShowAppAct()},t.prototype.setShowFirstRecharge=function(){this.actList.setShowFirstRecharge()},t.prototype.setShowThanksgiving=function(){this.actList.setShowThanksgiving()},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelAct.prototype,"CCDDZPanelAct");var CCDDZPanelActAndNotice=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelActAndNotice},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.actNormalGroup.addClickListener(this._onClickTitAct,this,!1),this.noticeNormalGroup.addClickListener(this._onClickTitNotice,this,!1)},t.prototype._initUI=function(){},t.prototype._checkAct=function(){this._act||(this._act=CCDDZPanelAct.getInstance(),this.addChild(this._act))},t.prototype._checkNotice=function(){this._notice||(this._notice=CCDDZPanelNotice.getInstance(),this.addChild(this._notice))},t.prototype._checkAdded=function(){this.parent||this.popup()},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._onClickTitAct=function(){this.showAct()},t.prototype._onClickTitNotice=function(){this.showNotice()},t.prototype.showFRecharge=function(){this.showAct(),this._act.setShowFirstRecharge()},t.prototype.showThanksgiving=function(){this.showAct(),this._act.setShowThanksgiving()},t.prototype.showAPPAct=function(){this.showAct(),this._act.setShowAppAct()},t.prototype.showBindAct=function(){this.showAct(),this._act.setShowBindAct()},t.prototype.showInviteAct=function(){this.showAct(),this._act.setShowInviteAct()},t.prototype.showFFFAct=function(){this.showAct(),this._act.setShowFFFAct()},t.prototype.showNewYearGift=function(){this.showAct(),this._act.setShowYearGift()},t.prototype._enableShowAct=function(e){this._act&&(this._act.visible=e)},t.prototype._enableShowNotice=function(e){this._notice&&(this._notice.visible=e)},t.prototype.showAct=function(){this.currentState="act",this._checkAct(),this._checkAdded(),this._enableShowAct(!0),this._enableShowNotice(!1)},t.prototype.showNotice=function(){this.currentState="notice",this._checkNotice(),this._checkAdded(),this._enableShowAct(!1),this._enableShowNotice(!0)},t.prototype.showRedExchange=function(){this.showNotice()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelActAndNotice.prototype,"CCDDZPanelActAndNotice");var CCDDZPanelActAppLucky=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelActAppLuckySkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.luckyBtn.addClickListener(this._onClickLucky,this)},t.prototype._onClickLucky=function(){var e=CCalien.Native.instance;e.isNative||!e.isNative&&"iOS"==egret.Capabilities.os&&!e.isWXMP?CCDDZPanelLucky.instance.show(2):CCDDZAlert.show("登录APP端才能抽奖，是否确定下载？",0,function(e){"confirm"==e&&CCGlobalGameConfig.downApp()})},t.prototype._initUI=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg.appLucky");e&&1==e.status&&(this.timeLabel.text="活动时间："+e.time)},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.nullInstance=function(){var e=t._instance;e&&e.close(!0),t._instance=null},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelActAppLucky.prototype,"CCDDZPanelActAppLucky");var CCDDZPanelAlert=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelAlertSkin,this._defaultConfirmString=this.btnConfirm.labelIcon,this._defaultCancelString=this.btnCancel.labelIcon},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.grpButtonShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dealAction.bind(this,"close"),this)},t.prototype.onGrpButtonTap=function(e){this.dealAction(e.target.name)},t.prototype.show=function(e,t,i,n,o){switch(void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n="center"),void 0===o&&(o=null),this.popup(),this.btnConfirm.labelIcon=this._defaultConfirmString,this.btnCancel.labelIcon=this._defaultCancelString,this.btnConfirm.scaleX=1,this.btnConfirm.scaleY=1,this.btnConfirm.bgImg.visible=!0,this.labContent.text=e,null==o&&(o=[{text:e}]),this.labContent.textFlow=o,this._callback=i,this.labContent.textAlign=n,this.grpButtonShare.visible=!1,this.grpButton.visible=!0,this.labContent.validateNow(),this.labContent.textHeight<this.ctxScroller.height?this.labContent.y=.5*(this.ctxScroller.height-this.labContent.textHeight):this.labContent.y=0,this.ctxScroller.stopAnimation(),this.ctxScroller.viewport.scrollV=0,this.ctxScroller.validateNow(),t){case 0:this.grpButton.contains(this.btnCancel)&&this.grpButton.removeChild(this.btnCancel);break;case 1:this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel);break;case 2:this.grpButtonShare.visible=!0,this.grpButton.visible=!1,this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel)}},t.getInstance=function(){return this._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelAlert.prototype,"CCDDZPanelAlert");var CCDDZAlert=function(){function e(){}return e.show=function(e,t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n="center"),void 0===o&&(o=null),CCDDZPanelAlert.instance.show(e,t,i,n,o)},e}();__reflect(CCDDZAlert.prototype,"CCDDZAlert");var CCDDZPanelAlert2=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelAlert2Skin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnConfirmTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},t.prototype.onBtnConfirmTap=function(e){this.dealAction(e.target.name)},t.prototype.onBtnCloseTap=function(e){this.dealAction()},t.prototype.show=function(e,t,i){void 0===i&&(i=null),this.popup(),this.labContent.text=e,this._callback=i,this.btnConfirm.bgRes=t},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelAlert2.prototype,"CCDDZPanelAlert2");var CCDDZAlert2=function(){function e(){}return e.show=function(e,t,i){void 0===i&&(i=null),CCDDZPanelAlert2.instance.show(e,t,i)},e}();__reflect(CCDDZAlert2.prototype,"CCDDZAlert2");var CCDDZPanelAlert3=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelAlertSkin,this._defaultConfirmString=this.btnConfirm.labelIcon,this._defaultCancelString=this.btnCancel.labelIcon},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dealAction.bind(this,"close"),this)},t.prototype.onGrpButtonTap=function(e){this.dealAction(e.target.name)},t.prototype.show=function(e,t,i,n){switch(void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=!1),this.popup(),this.btnConfirm.labelIcon=this._defaultConfirmString,this.btnCancel.labelIcon=this._defaultCancelString,this.btnClose.visible=n,this.labContent.textFlow=(new egret.HtmlTextParser).parser(e),this._callback=i,this.labContent.validateNow(),this.labContent.textHeight<this.ctxScroller.height?this.labContent.y=.5*(this.ctxScroller.height-this.labContent.textHeight):this.labContent.y=0,this.ctxScroller.stopAnimation(),this.ctxScroller.viewport.scrollV=0,this.ctxScroller.validateNow(),t){case 0:this.grpButton.contains(this.btnCancel)&&this.grpButton.removeChild(this.btnCancel);break;case 1:this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel)}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelAlert3.prototype,"CCDDZPanelAlert3");var CCDDZAlert3=function(){function e(){}return e.show=function(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=""),void 0===n&&(n=!1),CCDDZPanelAlert3.instance.show(e,0,t,n),CCDDZPanelAlert3.instance.btnConfirm.labelIcon=i},e}();__reflect(CCDDZAlert3.prototype,"CCDDZAlert3");var CCDDZPanelBeforeMatch=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Flew,{withFade:!0,ease:egret.Ease.backOut,direction:"up"},CCalien.CCDDZpopupEffect.Flew,{withFade:!0,ease:egret.Ease.backIn,direction:"up"})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelBeforeMatchSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.show=function(e,t,i){void 0===i&&(i=0),this.popup();var n;1==e?n=CCGlobalResNames.cc_match_word_4:(3==t&&(t=1),n=t>1?CCGlobalResNames.cc_match_word_6:CCGlobalResNames.cc_match_word_5),i>1&&(this.labCount.text=i.toString()),this.grpCount.visible=i>1,this.img.source=n,egret.setTimeout(this.dealAction,this,2e3)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelBeforeMatch.prototype,"CCDDZPanelBeforeMatch");var CCDDZPanelBindPhone=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelBindPhoneSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._nIntervalId=-1,this._okCallback=null,this.args={},this._showCountLabel(!1),this._resetCountNum(),this.phone.prompt=ccddz_phonePrompt,this.phone.maxChars=ccddz_phoneLen,this.code.maxChars=ccddz_codeLen,this.code.prompt=ccddz_codePrompt,this.phone.inputType=egret.TextFieldInputType.TEL,this.code.inputType=egret.TextFieldInputType.TEL},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.getCodeImg.addClickListener(this._onClickGetCode,this),this.bindNowImg.addClickListener(this._onClickBindNow,this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this._enableTouch(this.bindNowImg,e),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._checkPhone=function(){var e=this.phone.text;return e&&11==e.length?!0:!1},t.prototype._checkCode=function(){var e=this.code.text;return e?!0:!1},t.prototype._showCountLabel=function(e){this.countLabel.visible=e},t.prototype._resetCountNum=function(){this._nCountTime=60},t.prototype._clearCountInterval=function(){-1!=this._nIntervalId&&egret.clearInterval(this._nIntervalId),this._nIntervalId=-1},t.prototype._startCountDown=function(){var e=this;this._clearCountInterval(),this._resetCountNum(),this.countLabel.text=""+this._nCountTime,this._showCountLabel(!0),this._nIntervalId=egret.setInterval(function(){return e._nCountTime<1?(e._clearCountInterval(),e._showCountLabel(!1),void e._showGetCode(!0)):(e._nCountTime-=1,void(e.countLabel.text=""+e._nCountTime))},this,1e3)},t.prototype._showGetCode=function(e){this.getCodeImg.visible=e},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._onClickGetCode=function(){return this._checkPhone()?(ccddzwebService.getCode(this.phone.text,function(e){var t=(o={},o[0]="验证码发送成功",o[1e3]="参数错误",o[2015]="手机号码错误",o[2018]="发送失败",o[2019]="请稍后重试",o),i=e.code,n=t[i]||"验证码发送失败";CCDDZToast.show(n);var o}),this._showGetCode(!1),void this._startCountDown()):void CCDDZToast.show(ccddz_phonePrompt)},t.prototype._enableTouch=function(e,t){e.touchEnabled=t},t.prototype._onClickBindNow=function(){return this._checkPhone()&&this._checkCode()?void(1==this.bindType?this._bindByLogin():2==this.bindType&&this._bindByExchange()):void CCDDZToast.show("手机号或验证码错误")},t.prototype._bindByExchange=function(){var e=this,t=this.phone.text,i=this.code.text;this._enableTouch(this.bindNowImg,!1),ccddzwebService.bindPhoneByExchange(t,i,function(t){var i=t.code,n=t.message,o=t.data.phone;console.log("_bindByExchange==ret==>",o);var a=function(){var t=e._okCallback;CCGlobalUserData.instance.saveLocalPhone(o,!0),e.dealAction(),CCDDZMailService.instance.getMailList(0),t&&t()};0!=i&&(this._enableTouch(this.bindNowImg,!0),a=function(){}),CCDDZAlert3.show(n,a,"cc_common_btn_lab_confirm_n")}.bind(this))},t.prototype._bindByLogin=function(){var e=this.phone.text,t=this.code.text,i=this;this._enableTouch(this.bindNowImg,!1),ccddzwebService.bindPhoneByLogin(e,t,this.args.unid,this.args.share_sk,function(e){var t=e.code,n=e.message,o=e.data.phone;console.log("_bindByLogin====>",o);var a=function(){CCGlobalUserData.instance.saveLocalPhone(o,!0);var e=i._okCallback;CCDDZMailService.instance.getMailList(0),e&&e()};0!=t&&(this._enableTouch(this.bindNowImg,!0),a=function(){}),CCDDZAlert.show(n,0,a)}.bind(this))},t.prototype._onRemoveFromStage=function(){this._clearCountInterval(),this._enableEvent(!1),t._instance=null},t.prototype._showClose=function(e){this.closeImg.visible=e},t.prototype._initBindGold=function(){var e=CCGlobalGameConfig.getCfgByField("custom.bindPhoneGold");this.bindGoldLabel.text="首次绑定奖励"+e+"金豆"},t.prototype.show=function(e,t,i){void 0===i&&(i=null),this.currentState="exBind",this._initEvent(),this.popup(null,!0,{alpha:0});var n=CCalien.Native.instance,o=n.getUrlArg();this._okCallback=i,this.bindType=e,this.args=t,o.share_sk&&(this.args.share_sk=o.share_sk),t.actTipBind&&(this.descLabel.text="为了更方便您领取奖励，请绑定手机;",this._initBindGold()),this._showClose(t.showClose)},t.prototype.showBindAct=function(e){this._initEvent(),this.currentState="actBind";var t=CCalien.Native.instance.getUrlArg();this._okCallback=e,this.bindType=2,this.descLabel.text="为了更方便您领取奖励，请绑定手机;",this._initBindGold(),t.share_sk&&(this.args.share_sk=t.share_sk)},t.nullInstance=function(){var e=t._instance;e&&e.close(!0),t._instance=null},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelBindPhone.prototype,"CCDDZPanelBindPhone");var CCDDZPanelBuyRecorder=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelBuyRecorderSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this)},t.prototype.addListeners=function(){var e=CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),CCalien.CCDDZEventManager.instance.enableOnObject(this)},t.prototype.removeListeners=function(){CCalien.CCDDZEventManager.instance.disableOnObject(this)},t.prototype.onMyUserInfoUpdate=function(e){void 0===e&&(e=null);var t=e?e.data.userInfoData:CCDDZMainLogic.instance.selfData,i=0,n="";t.cardsRecorder&&t.cardsRecorder[6]>0&&(i=Math.ceil(t.cardsRecorder[6]/3600/24),n="(至"+t.cardsRecorder[0]+"年"+t.cardsRecorder[1]+"月"+t.cardsRecorder[2]+"日"+t.cardsRecorder[3]+":"+t.cardsRecorder[4]+")"),this.lbRemain.text=String(i),i>0?(this.lbRemain.textColor=2131744,egret.localStorage.setItem("opencardsrecorder","1"),egret.localStorage.removeItem("cardsrecorderexpirenotice")):this.lbRemain.textColor=16711680,this.lbExpire.text=n},t.prototype.show=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),CCDDZMainLogic.instance.refreshSelfInfo(),this.addListeners(),this._callback=e,this.onMyUserInfoUpdate(),this.popup()},t.prototype.onBuyClick=function(e){var t=Number(e.currentTarget.name)-1,i=CCGlobalGameConfig.cardsRecorderConfig[t];i&&i.id&&CCDDZRechargeService.instance.doRecharge(i.id)},t.prototype.onBtnCloseClick=function(e){this.removeListeners(),this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelBuyRecorder.prototype,"CCDDZPanelBuyRecorder");var CCDDZPanelChoosePay=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelChoosePay},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.wxGrp.addClickListener(this._onClickWX,this),this.aliGrp.addClickListener(this._onClickAli,this)},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._enableTouch=function(e,t){e.touchEnabled=t},t.prototype._onClickWX=function(){ccddzwebService.getRechargeCfgByWX(this._id)},t.prototype._onClickAli=function(){ccddzwebService.getRechargeCfgByAli(this._id)},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),t._instance=null},t.prototype.show=function(e){this.popup(null,!0,{alpha:0}),this._id=e},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close(),t._instance=null},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelChoosePay.prototype,"CCDDZPanelChoosePay");var CCDDZPanelDayBuy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelDayBuy},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.buyImg.addClickListener(this._onClickBuy,this)},t.prototype._onClickBuy=function(){CCDDZRechargeService.instance.doRecharge("10021")},t.prototype._initUI=function(){this.buyImg.setTit("cc_common_buy"),this.buyImg.setDisable()},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDayBuy.prototype,"CCDDZPanelDayBuy");var CCDDZPanelDayRed=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this
}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelInviteDayRed,this._okList=[],this._notOkList=[]},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._onTouchClose=function(){this._addListener(!1),this.dealAction()},t.prototype._initClick=function(){this.btnClose.addClickListener(this._onTouchClose,this),this.inviteImg0.addClickListener(this._onClickGetRed.bind(this,0),this),this.inviteImg1.addClickListener(this._onClickGetRed.bind(this,1),this),this.inviteImg2.addClickListener(this._onClickGetRed.bind(this,2),this),this.inviteImg3.addClickListener(this._onClickGetRed.bind(this,3),this),this.inviteImg4.addClickListener(this._onClickGetRed.bind(this,4),this),this.redBgImg0.addClickListener(this._onClickGetRed.bind(this,0),this),this.redBgImg1.addClickListener(this._onClickGetRed.bind(this,1),this),this.redBgImg2.addClickListener(this._onClickGetRed.bind(this,2),this),this.redBgImg3.addClickListener(this._onClickGetRed.bind(this,3),this),this.redBgImg4.addClickListener(this._onClickGetRed.bind(this,4),this),this.extraImg.addClickListener(this._onClickGetExtra,this)},t.prototype._addListener=function(e){var t="addEventListener";e||(t="removeEventListener"),CCDDZInviteService.instance[t](CCGlobalEventNames.INVITE_DATA_REFRESH,this.onInviteDataUpdate,this),ccserver[t](CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetRewRep,this)},t.prototype._showGetRedByResult=function(e){var t=null;if(4==e.optype||6==e.optype){if(0==e.result||null==e.result){var i=CCDDZMainLogic.instance.selfData;if(4==e.optype?(i.subInviteRedNum(),i.changeInviteGetRedNum(!0)):6==e.optype&&(i.subInviteExtraRedNum(),i.changeInviteGetExtraRedNum(!0)),e.params&&e.params.length>=1){var n=CCDDZUtils.exchangeRatio(e.params[0]/100,!0);CCDDZAlert.show("恭喜获得"+n+"奖杯！")}this._updateUI()}else if(1==e.result)t="活动不存在";else{if(2==e.result){if(4==e.optype){var o=CCGlobalGameConfig.getCfgByField("custom").inviteRedNum;CCGlobalGameConfig.setCfgByField("hasGetIRedNum",o),this._showChouMax()}else CCDDZToast.show("已领取");return}3==e.result&&(t="奖励已领取")}t&&CCDDZAlert.show(t)}},t.prototype._onRecvGetRewRep=function(e){var t=e.data;this._showGetRedByResult(t)},t.prototype._initUI=function(){for(var e=0;5>e;++e)this["statusLabel"+e].visible=!1,this["friendGrp"+e].visible=!1,this["headIcon"+e].mask=this["headMask"+e];this.hasGetImg.visible=!1;var t=CCGlobalGameConfig.getCfgByField("custom");this.descLabel.text="成功邀请好友并赢5局游戏后，即可领取随机奖杯，每日最多领取"+t.inviteRedNum+"次！"},t.prototype._updateUI=function(){var e=this._notOkList.length,t=CCDDZMainLogic.instance.selfData,i=t.getInviteRedNum(),n=t.getInviteRedGetRewNum(),o=t.getHasGetInvExtraRed();o?(this.extraImg.touchEnabled=!1,this.hasGetImg.visible=!0):(this.hasGetImg.visible=!1,this.extraImg.touchEnabled=!0);for(var a=0;5>a;++a)this["redBgImg"+a].touchEnabled=!0,this["inviteImg"+a].touchEnabled=!0,i+n>a?(this["inviteImg"+a].visible=!0,this["statusLabel"+a].visible=!1,n>a?(this["friendGrp"+a].visible=!1,this["redBgImg"+a].source="cc_invite_day_red",this["inviteImg"+a].source="cc_invite_day_hasget",this["inviteImg"+a].touchEnabled=!1,this["redBgImg"+a].touchEnabled=!1):(this["friendGrp"+a].visible=!1,this["redBgImg"+a].source="cc_invite_day_red",this["inviteImg"+a].source="cc_invite_day_get")):(this["inviteImg"+a].source="cc_invite_day_get1",e>a?(this["nameLabel"+a].text=this._notOkList[a].nickname.substr(0,6),this["headIcon"+a].source=this._notOkList[a].headimgurl2,this["redBgImg"+a].source="cc_invite_day_bg",this["statusLabel"+a].visible=!0,this["friendGrp"+a].visible=!0,this["inviteImg"+a].visible=!1):(this["inviteImg"+a].visible=!0,this["friendGrp"+a].visible=!1,this["redBgImg"+a].source="cc_invite_day_red1",this["statusLabel"+a].visible=!1))},t.prototype.onInviteDataUpdate=function(e){for(var t=e.data,i=t.length,n=[],o=[],a=0;i>a&&("1"==t[a].status?n.length<5&&n.push(t[a]):o.length<5&&o.push(t[a]),!(n.length>=5&&o.length>=5));++a);this._okList=n,this._notOkList=o,this._updateUI()},t.prototype._onClickGetRed=function(e){if("cc_invite_day_get"==this["inviteImg"+e].source){var t=CCDDZMainLogic.instance.selfData.getInviteRedNum(),i=CCDDZMainLogic.instance.selfData.getInviteRedGetRewNum(),n=CCGlobalGameConfig.getCfgByField("custom").inviteRedNum;t>0&&(n>i?ccserver.reqInviteRedRew():this._showChouMax())}else if(CCalien.Native.instance.isNative)CCGlobalWxHelper.shareForAndroidApp();else{var o=CCGlobalGameConfig.getMySelfUrl();CCGlobalGameConfig.copyText(null,o,"专属链接",!0)}},t.prototype._showChouMax=function(){var e=CCGlobalGameConfig.getCfgByField("custom").inviteRedNum,t="今日领取已达"+e+"次";CCDDZToast.show(t)},t.prototype._onClickGetExtra=function(e){if(this._okList.lenght<5)CCDDZToast.show("邀请5位好友并赢5局游戏后即可领取");else{var t=CCDDZMainLogic.instance.selfData,i=t.getInviteExtraRedNum(),n=t.getHasGetInvExtraRed();0>=n?i>=1?ccserver.reqInviteExtra():CCDDZToast.show("抽奖次数不足"):CCDDZToast.show("已领取")}},t.prototype._initTime=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg");this.timeLabel.text="活动时间:"+e.time},t.prototype.show=function(){this.popup(),this._initClick(),this._addListener(!0),this._initUI(),this._initTime()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDayRed.prototype,"CCDDZPanelDayRed");var CCDDZ_TASK_TYPEID_DIAMOND=1,CCDDZ_TASK_TYPEID_DAY=2,CCDDZ_TASK_TYPEID_YEAR=3,CCDDZPanelDayTask=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t._addListener(!0),t}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelDayTaskSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._rewHasDiamond=function(e){for(var t=e.length,i=0;t>i;++i)if(3==e[i].id)return!0;return!1},t.prototype._formatEveryTaskData=function(){var e=CCGlobalGameConfig.getDayTaskList();if(!e)return[];for(var t=CCDDZMainLogic.instance.selfData,i=t.getDayTaskPre(),n=t.getDayTaskAllTStatus(),o=[],a=[],r=[],s=null,c=0,h=0,l=[],u=[],p=0;p<e.length;++p)if(1!=e[p].hide){r=[],a=e[p].reward.split("|");for(var C=0;C<a.length;++C)o=a[C].split(":"),c=Number(o[0]),h=Number(o[1]),1==c&&(h/=100),r.push({id:c,num:h});if(s={},s.id=e[p].id,s.status=n[p]||0,s.tp=e[p].tp,s.total=e[p].progress,1==e[p].tp)s.num=i[0]||0,s.taskDesc1="胜利"+s.total+"局",s.taskDesc2="(自由组局除外)";else if(2==e[p].tp){if(s.num=i[1]||0,s.taskDesc1="邀请"+s.total+"位新好友",s.taskDesc2="(好友需赢5局)",1==e[p].week){var d=s.total-s.num;0>d&&(d=0),r.unshift({id:41003,num:d})}}else if(3==e[p].tp){if(e[p].roomid[1001])s.num=i[3]||0,s.taskDesc1="斗地主金豆场玩"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[1e3]||e[p].roomid[1006]||e[p].roomid[8003])s.num=i[5]||0,s.taskDesc1="斗地主钻石场玩"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[4001])s.num=t.getRoomPlayCount(4001),s.num=s.num||0,s.taskDesc1="找刺激玩"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[9002]&&e[p].roomid[9004]&&e[p].roomid[9005]&&!e[p].roomid[9e3]&&!e[p].roomid[9001]&&!e[p].roomid[9003]){var _=t.getRoomPlayCount(9002),g=t.getRoomPlayCount(9004),f=t.getRoomPlayCount(9005);s.num=_+g+f,s.taskDesc1="跑得快钻石场玩"+s.total+"局",s.taskDesc2=""}else if(e[p].roomid[9e3]&&e[p].roomid[9001]&&e[p].roomid[9002]&&e[p].roomid[9003]&&e[p].roomid[9004]&&e[p].roomid[9005]){var m=t.getRoomPlayCount(9e3),_=t.getRoomPlayCount(9001),g=t.getRoomPlayCount(9002),f=t.getRoomPlayCount(9003),v=t.getRoomPlayCount(9004),D=t.getRoomPlayCount(9005);s.num=m+_+g+f+v+D,s.taskDesc1="跑得快玩"+s.total+"局",s.taskDesc2=""}this._rewHasDiamond(r)&&(s.diamond=!0)}else if(4==e[p].tp){if(e[p].roomid[1001])s.num=i[3]||0,s.taskDesc1="金豆场胜利"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[1e3]||e[p].roomid[1006]||e[p].roomid[8003])s.num=i[5]||0,s.taskDesc1="钻石场胜利"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[4001])s.num=i[4]||0,s.taskDesc1="找刺激胜利"+s.total+"局",s.taskDesc2="";else if(e[p].roomid[9e3]||e[p].roomid[9001]||e[p].roomid[9003]){var m=t.getRoomWinCount(9e3),_=t.getRoomWinCount(9001),g=t.getRoomWinCount(9003);s.num=m+_+g,s.taskDesc1="跑得快金豆场胜利"+s.total+"局",s.taskDesc2=""}this._rewHasDiamond(r)&&(s.diamond=!0)}else 5==e[p].tp?(e[p].roomid[3002]&&e[p].roomid[3003]&&e[p].roomid[3004]&&(s.taskDesc1="捕鱼游戏中捕获1条鱼",s.taskDesc2="",s.num=0,s.total=1),(1==s.status||2==s.status)&&(s.num=1),this._rewHasDiamond(r)&&(s.diamond=!0)):99==e[p].tp&&(14==e[p].id?(s.taskDesc1="连连翻中翻到777图案1次",s.taskDesc2="",s.num=0,s.total=1):15==e[p].id&&(s.taskDesc1="连连探1局挖到5个及以上宝藏",s.taskDesc2="",s.num=0,s.total=1),(1==s.status||2==s.status)&&(s.num=1),this._rewHasDiamond(r)&&(s.diamond=!0));s.roomid=e[p].roomid,1==e[p].day&&2==e[p].tp&&(s.num=i[2]||0),s.rew=r,1==e[p].day?(1==e[p].tp||3==e[p].tp||4==e[p].tp||5==e[p].tp||99==e[p].tp)&&l.push(s):1==e[p].week}return{day:l,week:u}},t.prototype._initLeftBtns=function(){this._leftLabels=[{tit:"钻石任务",sel:!1,"new":!1,act:!1,id:CCDDZ_TASK_TYPEID_DIAMOND,cb:this._onClickDiamondTask.bind(this)},{tit:"金豆任务",sel:!1,"new":!1,act:!1,id:CCDDZ_TASK_TYPEID_DAY,cb:this._onClickDayTask.bind(this)}],this._leftLabelsDataProvider=new eui.ArrayCollection(this._leftLabels),this.leftLabelList.dataProvider=this._leftLabelsDataProvider,this.leftLabelList.itemRenderer=CCDDZActListItem},t.prototype._initYearTask=function(){this._yearArr=[],this._yearProvider=new eui.ArrayCollection(this._yearArr),this.yearList.itemRenderer=CCDDZIRContainer,this.yearList.dataProvider=this._yearProvider,this._initLeftBtns();var e=CCGlobalGameConfig.isInNewYearTask();if(e.isInTime){var t=CCGlobalUserData.instance.hasClickNewYearTask();this._leftLabels.push({tit:"五一福利",sel:!1,"new":!t,act:!1,id:CCDDZ_TASK_TYPEID_YEAR,cb:this._onClick51Task.bind(this)}),ccserver.isInNewyearTaskReqNewYear();var i=CCGlobalGameConfig.newYearCfg.yearTask,n=i.trigger_time,o=i.finish_time;this.yearTimeLabel.text="2018年"+n[1]+"月"+n[2]+"日0:00至2018年"+o[1]+"月"+o[2]+"日0:00"}},t.prototype._initDefaut=function(){this._allTaskInfo=this._formatEveryTaskData(),this._dataProvider=new eui.ArrayCollection,this.mTask_list.itemRenderer=CCDDZIRContainer,this.mTask_list.dataProvider=this._dataProvider},t.prototype._setLeftSelectById=function(e){for(var t=this._leftLabels,i=t.length,n=0;i>n;++n)if(t[n].id==e)return this.leftLabelList.selectedIndex=n,this.leftLabelList.selectedItem=t[n],void this._onSelectItem(null)},t.prototype._onSelectItem=function(e){var t=this.leftLabelList.selectedItem;this.taskScroller.stopAnimation(),this.taskScroller.viewport.scrollV=0;for(var i=this._leftLabels,n=this._leftLabels.length,o=0;n>o;++o)i[o].sel&&(i[o].sel=!1,this._leftLabelsDataProvider.itemUpdated(i[o]));this.leftLabelList.selectedItem.sel=!0;var a=this.leftLabelList.selectedIndex;this.arr_img.y=this.flagScroller.y+65*a+32.5,this._leftLabelsDataProvider.itemUpdated(t),t.cb&&t.cb()},t.prototype._onDayTaskRewGetSucc=function(){this._allTaskInfo=this._formatEveryTaskData();var e=this.leftLabelList.selectedItem;e&&(e.id==CCDDZ_TASK_TYPEID_DAY?this._showDayTask():e.id==CCDDZ_TASK_TYPEID_DIAMOND&&this._showDiamondTask())},t.prototype._toTaskTop=function(){this.taskScroller.stopAnimation(),this.taskScroller.viewport.scrollV=0,this.taskScroller.validateNow()},t.prototype._showDayTask=function(){this._showTaskScroller(!0),this._showYearScroller(!1);var e=[];this.mBottomDesc_label.text="每日任务每天24点重置",this._allTaskInfo.day&&this._allTaskInfo.day.length>=1&&(e=this._allTaskInfo.day.filter(function(e){return e.diamond?void 0:!0})),this._toTaskTop(),this._dataProvider.source=e,this._dataProvider.refresh()},t.prototype._showWeekTask=function(){var e=[];this._allTaskInfo.week&&this._allTaskInfo.week.length>=1&&(e=this._allTaskInfo.week),this._toTaskTop(),this._dataProvider.source=e,this._dataProvider.refresh()},t.prototype._showDiamondTask=function(){this._showTaskScroller(!0),this._showYearScroller(!1);var e=[];this.mBottomDesc_label.text="钻石任务每天24点重置",this._allTaskInfo.day&&this._allTaskInfo.day.length>=1&&(e=this._allTaskInfo.day.filter(function(e){return e.diamond?(e.taskDesc2="(APP端领取)",!0):void 0})),this._toTaskTop(),this._dataProvider.source=e,this._dataProvider.refresh()},t.prototype._showYearScroller=function(e){this.yearScroller.visible=e},t.prototype._showTaskScroller=function(e){this.taskScroller.visible=e},t.prototype._showYearTask=function(){this._showTaskScroller(!1),this._showYearScroller(!0),this.yearScroller.stopAnimation(),this.yearScroller.viewport.scrollV=0,this.yearScroller.viewport.validateNow();for(var e=CCDDZMainLogic.instance.selfData,t=e.getNewYearTaskInfo(),i=t.length,n=null,o=null,a=0;i>a;++a)1==t[a].ct?n=t[a]:2==t[a].ct&&(o=t[a]);var r=CCGlobalGameConfig.getNewYearTask(),s=r.specialct,c=s.length,h=null,l=null;this._yearArr=[];for(var u=0;c>u;++u)for(var p=0;p<s[u].length;++p)l=s[u][p].rwd.split(":"),h={},h.rew=[{id:l[0],num:l[1]}],h.subId=p+1,h.condition=3,h.id=3,h.tp=1,0==u?(h.num=n.progress,h.taskDesc1="任意场打出"+s[u][p].progress+"个顺子",h.taskDesc2="(自由组局除外)",h.type=1,h.status=n.status[p]):1==u&&(h.num=o.progress,h.taskDesc1="任意场打出"+s[u][p].progress+"个飞机",h.taskDesc2="(自由组局除外)",h.type=2,h.status=o.status[p]),h.total=s[u][p].progress,this._yearArr.push(h);this._yearProvider.source=this._yearArr,this._yearProvider.refresh()},t.prototype._onClickWeekTask=function(){this._showWeekTask()},t.prototype._onClickDiamondTask=function(){this._showDiamondTask()},t.prototype._onClickDayTask=function(){this._showDayTask()},t.prototype._onClick51Task=function(){CCGlobalUserData.instance.setHasClickNewYearTask(),this._showYearTask()},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._initClickListener=function(){this.mClose_btn.addClickListener(this._onTouchClose,this)},t.prototype._onAddToStage=function(){this._initClickListener();var e=CCalien.CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this._userinfoUpdate,this),e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this),e.registerOnObject(this,ccserver,CCGlobalEventNames.USER_OPERATE_REP,this._onRecvUserOperateRep,this),e.enableOnObject(this),this._initDefaut(),this._initYearTask()},t.prototype._onRemovedToStage=function(){this._addListener(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._addListener=function(e){var t="addEventListener";e||(t="removeEventListener"),this.leftLabelList[t](egret.Event.CHANGE,this._onSelectItem,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._userinfoUpdate=function(){this._allTaskInfo=this._formatEveryTaskData();var e=this.leftLabelList.selectedItem;e.id==CCDDZ_TASK_TYPEID_DAY?this._showDayTask():e.id==CCDDZ_TASK_TYPEID_DIAMOND||e.id==CCDDZ_TASK_TYPEID_YEAR&&this._showYearTask()},t.prototype._onRecvUserOperateRep=function(e){var t=CCDDZMainLogic.instance.selfData,i=e.data;if(4==i.optype||10==i.optype)if(4==i.optype)null==i.result&&t.setNewYearTaskInfo(i.params2);else if(10==i.optype)if(null==i.result&&i.params&&3==i.params.length){for(var n=t.getNewYearTaskInfo(),o=i.params[1],a=i.params[2],r=n.length,s=0;r>s;++s)if(n[s].ct==o){n[s].status[a-1]=2,t.setNewYearTaskInfo(n);for(var c=this._yearArr,h=c.length,l=0;h>l;++l)if(c[l].type==o&&c[l].subId==a){this._yearArr[l].status=2;var u="领取以下奖励成功:"+c[l].rewDesc;return CCDDZAlert.show(u,0,null,"center"),this._yearProvider.source=this._yearArr,void this._yearProvider.itemUpdated(this._yearArr[l])}return}}else CCDDZAlert.show("领取奖励失败|result:"+i.result)},t.prototype.show=function(){CCDDZMainLogic.instance.refreshSelfInfo(),this.popup(null,!0,{alpha:0}),this._setLeftSelectById(CCDDZ_TASK_TYPEID_DIAMOND)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDayTask.prototype,"CCDDZPanelDayTask");var CCDDZPanelDelegate=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelDelegateSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent(),this._showDelegate()},t.prototype._initEvent=function(){this._enableEvent(!0),this.wxCp_img.addClickListener(this._onClickCopyKeFuWX,this),this.publicCp_img.addClickListener(this._onClickCopyPublicWX,this)},t.prototype._initUI=function(){},t.prototype._onClickCopyKeFuWX=function(){var e=CCGlobalGameConfig.extendWX;CCGlobalGameConfig.copyText(this,e,"微信号("+e+")")},t.prototype._onClickCopyPublicWX=function(){var e="好手气斗地主";CCGlobalGameConfig.copyText(this.parent,e,"公众号("+e+")")},t.prototype._onScrollTop=function(){this.content_scroller.stopAnimation(),this.content_scroller.viewport.scrollV=0,this.content_scroller.viewport.validateNow()},t.prototype._showDelegate=function(){this._onScrollTop(),this.info_label.text="联系客服，开通更多邀请奖励：\r\n				1、每个有效用户2奖杯。\n				2、永久享有充值邀请奖励。\n				3、如有其它合作方式请联系客服微信。\n\r详情添加客服微信："+CCGlobalGameConfig.extendWX,this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="cc_notice_delegate_tit"},t.prototype._showCopyWX=function(e){this.wxCp_img.visible=e,this.publicCp_img.visible=e},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDelegate.prototype,"CCDDZPanelDelegate");var CCDDZPanelDiaFirRecharge=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},t.prototype.init=function(){this.skinName=panels.CCDDZPanelDiaFirRecharge},t.prototype._onMyUserInfoUpdate=function(){this._initGoRechargeBtn()},t.prototype._onGoRecharge=function(){var e="10042";CCDDZRechargeService.instance.doRecharge(e)},t.prototype._initUI=function(){this._initGoRechargeBtn()},t.prototype._initGoRechargeBtn=function(){var e=CCDDZMainLogic.instance.selfData.monthcardinfo,t=!0;e&&0==e[0]&&(t=!1),this._hasBuy=t,this._hasBuy?this.btnGoRecharge.visible=!1:(this.btnGoRecharge.visible=!0,this.btnGoRecharge.setPngs("cc_frecharge_gopay_n","cc_frecharge_gopay_p"),this.btnGoRecharge.setClickFunc(this._onGoRecharge.bind(this)))},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._onAddToStage=function(){var e=CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this._onMyUserInfoUpdate,this),CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),t._instance=null,CCDDZEventManager.instance.disableOnObject(this)},t.prototype.show=function(){this.popup(null,!0,{alpha:0})},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.nullInstance=function(){if(t._instance){var e=this._instance;e.parent.removeChild(e)}},t.setDisableGet=function(){t._instance&&(t._instance.btnGoRecharge.visible=!1)},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDiaFirRecharge.prototype,"CCDDZPanelDiaFirRecharge");var CCDDZPanelDownApp=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelDownAppSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.down_img.addClickListener(this._onClickDownApp,this)},t.prototype._initDownGold=function(){var e=CCGlobalGameConfig.getCfgByField("custom.downAppGold");this.item3Num_label.text=e},t.prototype._onClickDownApp=function(){CCGlobalGameConfig.downApp()},t.prototype._initUI=function(){this._initDownGold()},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelDownApp.prototype,"CCDDZPanelDownApp");var CCDDZ_EX_ID_GOLD=1,CCDDZ_EX_ID_DIAMOND=2,CCDDZ_EX_ID_WXRED=3,CCDDZ_EX_ID_FEI=4,CCDDZ_EX_ID_JD=5,CCDDZ_EX_ID_CODE=6,CCDDZ_EX_ID_HISTORY=7,CCDDZ_EX_ID_AliRED=8,CCDDZPanelExchange2=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.CCDDFade,{},CCalien.CCDDZpopupEffect.CCDDFade,{})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelExchange2Skin,this._self=CCDDZMainLogic.instance.selfData,this._flagsDataProvider=new eui.ArrayCollection,this.flagList.dataProvider=this._flagsDataProvider,this.flagList.itemRenderer=CCDDZActListItem,this._initFlags()},t.prototype._inWXRedTime=function(e){var t=!1,i=CCGlobalGameConfig.getCfgByField("webCfg.red");if(i&&i.status>=1){if(1==i.status&&CCalien.Native.instance.isWXMP)return t;t=!0,this.wxTitLabel.text=i.title,this.yearTimeLabel.text=i.time,this.wxDescLabel.text=i.content}return t},t.prototype._inAliRedTime=function(){return CCalien.Native.instance.isWXMP?!1:!0},t.prototype._initFlags=function(){var e=[{tit:"金豆",sel:!1,"new":!1,act:!1,id:CCDDZ_EX_ID_GOLD,cb:this._onClickGoldGroup.bind(this)},{tit:"钻石",sel:!1,"new":!1,act:!1,id:CCDDZ_EX_ID_DIAMOND,cb:this._onClickDiamondGroup.bind(this)}],t=[{tit:"兑换码",sel:!1,"new":!1,act:!1,id:CCDDZ_EX_ID_CODE,cb:this._onClickCodeExchange.bind(this)},{tit:"兑换记录",sel:!1,"new":!1,act:!1,id:CCDDZ_EX_ID_HISTORY,cb:this._onClickExHistory.bind(this)}];this._inWXRedTime(!0)&&e.push({tit:"奖杯",sel:!1,act:!0,"new":!1,id:CCDDZ_EX_ID_WXRED,cb:this._onClickRed.bind(this)}),e.push({tit:"话费",sel:!1,"new":!1,act:!0,id:CCDDZ_EX_ID_FEI,cb:this._onClickExchangeGroup.bind(this)});for(var i=CCGlobalGameConfig.exchangeConfig,n=0;n<i.length;++n)if(5==i[n].goodsid){e.push({tit:"京东",sel:!1,act:!0,"new":!1,id:CCDDZ_EX_ID_JD,cb:this._onClickJD.bind(this)});break}e=e.concat(t),this._flagsDataProvider.source=e,this._flagsDataProvider.refresh()},t.prototype._filterTimeStampByGoodsId=function(e){var t=CCDDZMainLogic.instance.selfData.rcminexcexpiretime;if(t){var i=CCalien.CCDDZUtils.getCurTimeStamp(),n=1e3*t;n>i?this._showBefore(n,e):this._showAfter(e)}else this._showAfter(e)},t.prototype.updateExchangeList=function(){"card"==this.currentState&&(this._filterTimeStampByGoodsId([4,6]),this._dataProvide.source=this.itemList,this._dataProvide.refresh())},t.prototype.updateRedList=function(){if("red"==this.currentState){this._filterTimeStampByGoodsId([1,7]);var e=this._inAliRedTime();e?this._toBottom():(this._toTop(),this.itemList=this.itemList.filter(function(e){return 7!=e.goodsid})),this._dataProvide.source=this.itemList,this._dataProvide.refresh()}},t.prototype.updateJDList=function(){"jd"==this.currentState&&(this.itemList=CCGlobalGameConfig.exchangeConfig.filter(function(e){return 5==e.goodsid}),this._dataProvide.source=this.itemList,this._dataProvide.refresh())},t.prototype._initH5=function(){var e=CCalien.Native.instance;e.isNative?this._clickRedFunc=this._showRed.bind(this):(this.redLabel.text="更多奖品",this._clickRedFunc=function(){var e="更多奖品兑换请下载APP\n下载就送<font color='#FF0000'>钻石礼包</font>！",t=(new egret.HtmlTextParser).parser(e),i=CCDDZPanelAlert.instance;i.show("",0,function(e){"confirm"==e&&CCGlobalGameConfig.downApp()},"center",t),i.btnConfirm.bgImg.visible=!1,i.btnConfirm.scaleX=1.5,i.btnConfirm.scaleY=1.5,i.btnConfirm.labelIcon="cc_go_down"})},t.prototype._showAfter=function(e){this.itemList=CCGlobalGameConfig.exchangeConfig.filter(function(t){t.timeStamp=0;for(var i=!1,n=e.length,o=0;n>o;++o)t.goodsid==e[o]&&1!=t.hide&&(i=!0);return null==t.first&&i})},t.prototype._showBefore=function(e,t){this.itemList=CCGlobalGameConfig.exchangeConfig.filter(function(i){i.timeStamp=e;for(var n=!1,o=0;o<t.length;++o)i.goodsid==t[o]&&1!=i.hide&&(n=!0);return null==i.after&&n})},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.exCodeInput.prompt=ccddz_exCodePrompt,this.lv_goods.dataProvider=this._dataProvide=new eui.ArrayCollection,this.lv_history.dataProvider=this._historyProvide=new eui.ArrayCollection,this.lv_history.itemRenderer=CCDDZFeiHistoryItem,this._isReqHistory=!1,this.hisoryInfoScroller.addEventListener(egret.Event.CHANGE,this._onHistoryScroll,this),this.onResize(null),this.lv_goods.itemRenderer=CCDDZShopItem;var t=CCDDZEventManager.instance;t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),t.registerOnObject(this,this.btn_history,egret.TouchEvent.TOUCH_TAP,this.onHistory,this),t.registerOnObject(this,this.close_group,egret.TouchEvent.TOUCH_TAP,this.onClose,this),t.registerOnObject(this,this.btn_recorder,egret.TouchEvent.TOUCH_TAP,this.onRecorderClick,this),t.registerOnObject(this,this.exCodeImg,egret.TouchEvent.TOUCH_TAP,this._onClickCodeExNow,this),t.registerOnObject(this,CCalien.CCDDZStageProxy.stage,egret.Event.RESIZE,this.onResize,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),t.registerOnObject(this,this.grpRedcoin,egret.TouchEvent.TOUCH_TAP,this._showWxRed.bind(this),this),this.flagList.addEventListener(egret.Event.CHANGE,this._onSelectItem,this)},t.prototype._setSelFlag=function(e){for(var t=this._flagsDataProvider.source,i=t.length,n=0;i>n;++n)if(t[n].id==e)return this.flagList.selectedIndex=n,this.flagList.selectedItem=t[n],void this._onSelectItem(null)},t.prototype._onSelectItem=function(e){var t=this.flagList.selectedItem;this.itemInfoScroller.stopAnimation(),this.itemInfoScroller.viewport.scrollV=0;for(var i=this._flagsDataProvider.source.length,n=this._flagsDataProvider.source,o=0;i>o;++o)n[o].sel&&(n[o].sel=!1,this._flagsDataProvider.itemUpdated(n[o]));this.flagList.selectedItem.sel=!0;var a=this.flagList.selectedIndex;this.arr_img.y=this.flagScroller.y+65*a+32.5,this._flagsDataProvider.itemUpdated(t),t.cb&&t.cb()},t.prototype.onResize=function(e){},t.prototype._setExCode=function(e){var t=e;this.exCodeInput.text=t.code},t.prototype._onClickCodeExchange=function(){this._toTop(),this.currentState="exCode"},t.prototype._onClickCodeExNow=function(){var e=this.exCodeInput.text;if(!e||e.length<1)CCDDZToast.show("兑换码不能为空");else{var t=CCGlobalUserData.instance.getUid();ccddzwebService.doCodeExchange({uid:t,code:e,type:CCGlobalGameConfig.SERVER_URL_TAIL},function(e){CCDDZAlert.show(e.message)})}},t.prototype._showGold=function(){this.currentState="gold";for(var e=[],t=CCGlobalGameConfig.rechargeConfig,i=CCDDZMainLogic.instance.selfData.getPayCount(),n=0;n<t.length;++n)t[n].firstrecharge||1!=t[n].item_type||t[n].hide&&1==t[n].hide||(t[n].minPay?i>=t[n].minPay&&i<=t[n].maxPay&&e.push(t[n]):e.push(t[n]));this._dataProvide.source=e,this._dataProvide.refresh()},t.prototype._showDiamond=function(){for(var e=[],t=CCGlobalGameConfig.rechargeConfig,i=0;i<t.length;++i)10009==t[i].product_id||3!=t[i].item_type||t[i].hide&&1==t[i].hide||e.push(t[i]);this._dataProvide.source=e,this._dataProvide.refresh(),this.currentState="diamond"},t.prototype._showExchange=function(){this.currentState="card",this.updateExchangeList()},t.prototype._showJD=function(){this.currentState="jd",this.updateJDList()},t.prototype._onClickGoldGroup=function(){this._toTop(),this._showGold()},t.prototype._onClickDiamondGroup=function(){this._toTop(),this._showDiamond()},t.prototype._onClickExchangeGroup=function(){this._toTop(),this._showExchange()},t.prototype.onHistory=function(){CCDDZPanelExchange3.instance.show()},t.prototype.onClose=function(){this.close()},t.prototype.onMyUserInfoUpdate=function(e){void 0===e&&(e=null);var t=e?e.data.userInfoData:this._self,i=CCDDZBagService.instance.getItemCountById(3);if(this.gold.updateGold(t.gold),this.diamond.updateGold(i),this.avatar.imageId=t.imageid,this.avatar.setVipLevel(t.getCurVipLevel()),t.nickname){var n=t.nickname.substr(0,10);this.labNickName.text=n+"("+t.fakeuid+")"}this._self.redcoin=CCDDZMainLogic.instance.selfData.redcoin,this.updateExchangeList(),this.flashData(!1)},t.prototype._onClickExchange=function(){this._showRed()},t.prototype._onClickJD=function(){this._toTop(),this._showJD()},t.prototype._toTop=function(){this.itemInfoScroller.stopAnimation(),this.itemInfoScroller.viewport.scrollV=0},t.prototype._toBottom=function(){this.itemInfoScroller.stopAnimation(),this.itemInfoScroller.viewport.scrollV=.3*this.itemInfoScroller.height},t.prototype._onClickRed=function(){this._showRed()},t.prototype._onClickExHistory=function(){this._showExHistory()},t.prototype.flashData=function(e){if(void 0===e&&(e=!1),this.lbRedCoin.text=""+(null==this._self.redcoin?"0.00":CCDDZUtils.exchangeRatio(this._self.redcoin/100,!0)),e){for(var t=0;t<this.itemList.length;++t)if(this.itemList[t].first){this.itemList.splice(t,1);break}this._dataProvide.source=this.itemList,this._dataProvide.refresh()}},t.prototype._showWxRed=function(){for(var e=this._flagsDataProvider.source,t=e.length,i=0;t>i;++i)if(e[i].id==CCDDZ_EX_ID_WXRED)return void this._setSelFlag(CCDDZ_EX_ID_WXRED);this._setSelFlag(CCDDZ_EX_ID_FEI)},t.prototype._showAliRed=function(){for(var e=this._flagsDataProvider.source,t=e.length,i=0;t>i;++i)if(e[i].id==CCDDZ_EX_ID_AliRED)return void this._setSelFlag(CCDDZ_EX_ID_AliRED);this._setSelFlag(CCDDZ_EX_ID_FEI)},t.prototype.show=function(e,t,i){var n=this;void 0===e&&(e=0),void 0===t&&(t=null),void 0===i&&(i=null),CCDDZMainLogic.instance.setScreenLandScape(1280,640),this.popup(),this._closeCb=t,CCDDZEventManager.instance.enableOnObject(this),egret.setTimeout(function(){n.onMyUserInfoUpdate(),1==e?n._setSelFlag(CCDDZ_EX_ID_DIAMOND):2==e?n._setSelFlag(CCDDZ_EX_ID_FEI):3==e?n._setSelFlag(CCDDZ_EX_ID_JD):4==e?n._showWxRed():5==e?n._setSelFlag(CCDDZ_EX_ID_HISTORY):6==e?(n._setSelFlag(CCDDZ_EX_ID_CODE),n._setExCode(i)):n._setSelFlag(CCDDZ_EX_ID_GOLD)},this,50)},t.prototype._showRed=function(){this.currentState="red",this.updateRedList()},t.prototype._showExHistory=function(){var e=this,t=this;ccddzwebService.getExHistory(1,function(i){if(t.currentState="history",0==i.code){var n=i.data.items;e._historyInfo=i.data,t._initExRecordInfo(n),e.hisoryInfoScroller.viewport.scrollV=0}})},t.prototype._onHistoryScroll=function(e){var t=this;if(this.hisoryInfoScroller.viewport.scrollV>=this.hisoryInfoScroller.height){var i=this._historyInfo.current_page,n=this;i<this._historyInfo.total_page&&!n._isReqHistory&&(n._isReqHistory=!0,ccddzwebService.getExHistory(i+1,function(e){if(n._isReqHistory=!1,0==e.code){e.data.items;n._historyInfo.items=t._historyInfo.items.concat(e.data.items),n._historyInfo.current_page=e.data.current_page,n._initExRecordInfo(n._historyInfo.items)}}))}},t.setHasShowClickCourse=function(){CCalien.CCDDZlocalStorage.setItem("tipCourse","1")},t.prototype._hasShowClickCourse=function(){var e=CCalien.CCDDZlocalStorage.getItem("tipCourse");
return"1"!=e?!1:!0},t.prototype._initExRecordInfo=function(e){e&&e.length>0&&!this._hasShowClickCourse()&&(e[0].showCourse=!0),this._historyProvide.source=e,this._historyProvide.refresh()},t.prototype.close=function(t){void 0===t&&(t=!1),t?CCalien.CCDDZPopUpManager.removePopUp(this):e.prototype.close.call(this),CCDDZEventManager.instance.disableOnObject(this),this._closeCb&&this._closeCb()},t.prototype.onTimeExpired=function(e){this._showAfter(e),this._dataProvide.source=this.itemList,this._dataProvide.refresh()},t.prototype._onBagRefresh=function(){var e=CCDDZBagService.instance.getItemCountById(3);this.diamond.updateGold(e)},t.prototype.onRecorderClick=function(e){CCDDZPanelBuyRecorder.instance.show()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelExchange2.prototype,"CCDDZPanelExchange2");var CCDDZPanelExchange3=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.CCDDFade,{},CCalien.CCDDZpopupEffect.CCDDFade,{})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelExchange3Skin,this._self=CCDDZMainLogic.instance.selfData},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.lv_list1.itemRenderer=CCDDZIRExchangeHistory,this.lv_list2.itemRenderer=CCDDZIRExchangeDetail,this.list1=new eui.ArrayCollection,this.list2=new eui.ArrayCollection,this.lv_list1.dataProvider=this.list1,this.lv_list2.dataProvider=this.list2;var t=CCDDZEventManager.instance;t.registerOnObject(this,this.btn_close,egret.TouchEvent.TOUCH_TAP,this.onClose,this),t.registerOnObject(this,this.btn_changetype,egret.TouchEvent.TOUCH_TAP,this.onChangeType,this)},t.prototype.onChangeType=function(){"detail"==this.skin.currentState?this.skin.currentState="hirstory":this.skin.currentState="detail"},t.prototype.loadConfigs=function(e){var t=this;ccddzwebService.getRedcoinHistory(this._self.uid,function(e){if(e&&e.data){var i=e.data.concat(),n=[];if(null!=e.data)for(var o=0;o<e.data.length;o++)"2"==e.data[o].type&&n.push(e.data[o]);t.list1.source=i,t.list1.refresh(),t.list2.source=n,t.list2.refresh()}})},t.prototype.onClose=function(){this.close()},t.prototype.show=function(){this.popup(),CCDDZEventManager.instance.enableOnObject(this),this.loadConfigs(null)},t.prototype.close=function(){e.prototype.close.call(this),CCDDZEventManager.instance.disableOnObject(this)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelExchange3.prototype,"CCDDZPanelExchange3");var CCDDZIRExchangeHistory=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),null!=this.data){if(this.data.recordtime){var t=new Date(1e3*this.data.recordtime),i=CCalien.TimeUtils.timeFormatForEx(t);this.lbl_time.text=i}"1"==this.data.type?("0"==this.data.roomid?this.lbl_dis.text="金豆场奖杯":this.lbl_dis.text=lang.exchange_roomid[this.data.roomid]+"奖杯",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"2"==this.data.type?(this.lbl_dis.text="兑换"+this.data.goodsamount+CCGlobalGameConfig.exchangeGoodsConfig[this.data.goodsid].describe,this.lbl_change.text="-"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=5142788):"3"==this.data.type?(this.lbl_dis.text=lang.match_reward,this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"4"==this.data.type?(this.lbl_dis.text="每日任务奖励",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"78"==this.data.type?(this.lbl_dis.text="极速场奖杯",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"82"==this.data.type?(this.lbl_dis.text="邮件奖励",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"70"==this.data.type?(this.lbl_dis.text="王炸奖励",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"26"==this.data.type||"35"==this.data.type?(this.lbl_dis.text="邀请奖励",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"95"==this.data.type?(this.lbl_dis.text="幸运抽奖",this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):(this.lbl_dis.text="奖励类型:"+this.data.type,this.lbl_change.text="+"+CCDDZUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400)}},t}(eui.ItemRenderer);__reflect(CCDDZIRExchangeHistory.prototype,"CCDDZIRExchangeHistory");var CCDDZIRExchangeDetail=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data.goodsid&&(this.lbl_dis.text="兑换"+this.data.goodsamount+CCGlobalGameConfig.exchangeGoodsConfig[this.data.goodsid].describe),this.data.recordtime){var t=new Date(1e3*this.data.recordtime),i=CCalien.TimeUtils.timeFormatForEx(t);this.lbl_time.text=i}switch(this.data.status){case"1":this.lbl_status.text="审核中...";break;case"2":this.lbl_status.text="审核失败";break;case"3":1==this.data.goodsid?this.lbl_status.text="前往公众号领取":this.lbl_status.text="兑换记录领取";break;case"4":this.lbl_status.text="已领取";break;case"7":this.lbl_status.text="邮件补发"}},t}(eui.ItemRenderer);__reflect(CCDDZIRExchangeDetail.prototype,"CCDDZIRExchangeDetail");var CCDDZPanelFeiEx=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelFeiExSkin,this._exchangeFunc=null,this._okFunc=null,this._feiKaCfg={yd:{50:1,100:1,func:this._onSelectYD.bind(this)},lt:{30:1,50:1,100:1,func:this._onSelectLT.bind(this)},dx:{10:1,30:1,50:1,100:1,func:this._onSelectDX.bind(this)},10:{text:"10元充值卡目前仅支持电信",func:this._onSelectDX.bind(this)},30:{text:"30元充值卡目前仅支持联通和电信",func:this._onSelectDX.bind(this)}}},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._enableEvent(!0),this._initSpInfo(),this.closeBtn.addClickListener(this._onClickClose,this),this.exCodeImg.addClickListener(this._clickExchange,this),this.okImg.addClickListener(this._onClickOK,this)},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._enableTouch=function(e,t){e.touchEnabled=t},t.prototype._onAlertFei=function(){var e=this.info.id,t=this.input2.text,i=this,n="确认充值 <font color='#FF0000'>"+this.info.goodsamount+"</font> 元话费 到  <font color='#FF0000'>"+t+"</font>",o=(new egret.HtmlTextParser).parser(n);CCDDZAlert.show("",0,function(n){"confirm"==n&&ccddzwebService.goRechageFei({uid:ccserver.uid,coinid:e,phone:t},function(e){CCDDZAlert3.show(e.message,null,"cc_common_btn_lab_confirm_n"),0==e.code?(i.info.status=5,i.info.item&&i.info.item.updateInfo(i.info),i.close(!0)):50005==e.code&&(i.info.status=7,CCDDZMailService.instance.getMailList(),i.info.item&&i.info.item.updateInfo(i.info),i.close(!0))})},"center",o)},t.prototype._onAlertAli=function(){var e=this.info.id,t=this.input1.text,i=this,n=this.input2.text,o="确认兑换 <font color='#FF0000'>"+this.info.goodsamount+"</font> 元支付宝红包\n支付宝账号:<font color='#FF0000'>"+n+"</font>",a=(new egret.HtmlTextParser).parser(o);CCDDZAlert.show("",0,function(o){"confirm"==o&&ccddzwebService.goRechageFei({uid:ccserver.uid,coinid:e,account:n,account_name:t},function(e){0==e.code?(i.info.status=4,CCGlobalUserData.instance.saveLocalAli(n,t),CCDDZAlert3.show("兑换"+i.info.goodsamount+"元支付宝红包成功",null,"cc_common_btn_lab_confirm_n"),i.info.item&&i.info.item.updateInfo(i.info),i.close(!0)):CCDDZAlert3.show(e.message,null,"cc_common_btn_lab_confirm_n")})},"center",a)},t.prototype._clickExchange=function(){this._exchangeFunc&&this._exchangeFunc()},t.prototype._onClickOK=function(){this._okFunc&&this._okFunc()},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._initFei=function(){var e=this,t=CCGlobalUserData.instance.getLocalPhone();t&&11==t.length&&(this.input2.text=t),this.input2.enabled=!0,this.currentState="fei",this._okFunc=function(){var t=e.input2.text;t&&11==t.length?e._onAlertFei():CCDDZToast.show("请输入11位的手机号码")}.bind(this)},t.prototype._initSpInfo=function(){this.liantong.labelDisplay.text="中国联通",this.dianxin.labelDisplay.text="中国电信",this.yidong.value="10086",this.yidong.value="10010",this.yidong.value="10000",this._defSelChannel(),this.yidong.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectChannel.bind(this,"yd"),this),this.liantong.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectChannel.bind(this,"lt"),this),this.dianxin.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectChannel.bind(this,"dx"),this)},t.prototype._showFeiKaSp=function(){this.currentState="sp";var e=this;this._okFunc=function(){e._curSpNum&&5==e._curSpNum.length&&ccddzwebService.goRechageFei({uid:ccserver.uid,coinid:e.info.id,sp:e._curSpNum},function(t){e._onGetCardRet(t)})}},t.prototype._onSelectChannel=function(e){var t=this.info.goodsamount;this._feiKaCfg[e][t]?this._feiKaCfg[e].func():CCDDZToast.show(this._feiKaCfg[t].text)},t.prototype._defSelChannel=function(){var e=this.info.goodsamount;return this._feiKaCfg.yd[e]||6!=this.info.goodsid?(this._curSpNum="10086",this.yidong.currentState="downAndSelected",this.liantong.currentState="up",void(this.dianxin.currentState="up")):void this._feiKaCfg[e].func()},t.prototype._onSelectYD=function(){this._curSpNum="10086",this.yidong.currentState="downAndSelected",this.liantong.currentState="up",this.dianxin.currentState="up"},t.prototype._onSelectLT=function(){this._curSpNum="10010",this.yidong.currentState="up",this.liantong.currentState="downAndSelected",this.dianxin.currentState="up"},t.prototype._onSelectDX=function(){this._curSpNum="10000",this.yidong.currentState="up",this.liantong.currentState="up",this.dianxin.currentState="downAndSelected"},t.prototype._copyCardInfo=function(){var e=this.input1.text,t=this.input2.text,i="卡号:"+e+"卡密:"+t;CCGlobalGameConfig.copyText(this,i,i,!0)},t.prototype._initFeiKa=function(){var e=this;if(3==this.info.status)return void this._showFeiKaSp();4==this.info.status&&(this.currentState="card");var t=this.info.send_listid,i=t.cards.card,n=i.cardno,o=i.cardpws,a=i.expiretime;this.input1.text=n,this.input2.text=o,this.input3.text=a;var r=this.info.sp||t.cardname;this.input1.touchEnabled=!1,this.input2.touchEnabled=!1,this.input3.touchEnabled=!1,egret.setTimeout(function(){e.descLabel.text="您已成功领取"+r,e.descLabel.textAlign="center"},this,50),this._okFunc=this._copyCardInfo.bind(this)},t.prototype._initAli=function(){this.currentState="ali";var e=this,t=CCGlobalUserData.instance.getLocalAli();t&&t.name&&t.account?(this.input1.text=t.name,this.input2.text=t.account,this.input1.enabled=!1,this.input2.enabled=!1):(this.input1.enabled=!0,this.input2.enabled=!0),this._okFunc=function(){var t=this.input2.text,i=e.input1.text;i&&i.length>1&&t&&t.length>1?e._onAlertAli():CCDDZToast.show("请输入姓名和支付宝账号")}},t.prototype._onGetCardRet=function(e){var t=this,i=e.data;0==e.code?(t.info.status=4,5==t.info.goodsid?(t.info.send_listid=this.info.send_listid||{},t.info.send_listid.cardno=i.cardnum,t.info.send_listid.cardpwd=i.cardpwd,t.info.send_listid.expiretime=i.expiretime,t.info.money=i.money,this._initJD()):6==t.info.goodsid?(t.info.send_listid=this.info.send_listid||{cards:{card:{}}},t.info.send_listid.cards.card.cardno=i.cardno,t.info.send_listid.cards.card.cardpws=i.cardpws,t.info.send_listid.cards.card.expiretime=i.expiretime,t.info.sp=i.sp,t.info.money=i.money,t._initFeiKa()):3==t.info.goodsid&&(t.info.send_listid=this.info.send_listid||{cards:{card:{}}},t.info.send_listid.cards.card.code=i.code,t.info.order_id=i.code,t._initDiamond()),t.info.item&&t.info.item.updateInfo(t.info)):CCDDZAlert3.show(e.message,null,"cc_common_btn_lab_confirm_n")},t.prototype._initDiamond=function(){var e=this;this.currentState="diamond";var t=this;if(3==t.info.status)return void ccddzwebService.goRechageFei({uid:ccserver.uid,coinid:t.info.id},function(e){t._onGetCardRet(e)});if(4==t.info.status){var i=t.info,n=i.order_id;egret.setTimeout(function(){e.descLabel.text="您已成功领取"+i.goodsamount+"钻石兑换码",e.descLabel.textAlign="center"},this,50),this.input2.text=n,this.input2.touchEnabled=!1,this._exchangeFunc=function(){this.dealAction(),CCDDZPanelExchange2.instance.show(6,null,{code:n})},this._okFunc=function(){var e=this.input2.text;CCGlobalGameConfig.copyText(this,e,e,!1)}}},t.prototype._initJD=function(){var e=this;this.currentState="card";var t=this;if(3==t.info.status)return void ccddzwebService.goRechageFei({uid:ccserver.uid,coinid:t.info.id},function(e){t._onGetCardRet(e)});if(4==t.info.status){var i=this.info.send_listid,n=i.cardno||i.cardnum,o=i.cardpwd,a=i.expiretime,r=this.info.goodsamount||this.info.money;egret.setTimeout(function(){e.descLabel.text="您已成功领取"+r+"元京东E卡",e.descLabel.textAlign="center"},this,50),this.input1.text=n,this.input2.text=o,this.input3.text=a,this.input1.touchEnabled=!1,this.input2.touchEnabled=!1,this.input3.touchEnabled=!1,this._okFunc=this._copyCardInfo.bind(this)}},t.prototype.show=function(e){this._bShow||(this._bShow=!0,this.info=e,"4"==e.goodsid?this._initFei():"7"==e.goodsid||"8"==e.goodsid?this._initAli():"6"==e.goodsid?this._initFeiKa():"5"==e.goodsid?this._initJD():"3"==e.goodsid&&this._initDiamond(),this.popup(null,!0,{alpha:0}))},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFeiEx.prototype,"CCDDZPanelFeiEx");var CCDDZPanelFFFAct=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelFFF},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._enableEvent(!0),this._initTime()},t.prototype.show=function(){this.popup()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.playImg[t](egret.TouchEvent.TOUCH_TAP,this._onClickPlayFFF,this)},t.prototype._onAddToStage=function(){},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._initTime=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg.fff");this.actTimeLabel1.text=e.time},t.prototype._onClickPlayFFF=function(){CCDDZPanelActAndNotice.remove();var e=CCGlobalGameConfig.getCfgByField("drawcard_conf");CCalien.CCDDZSceneManager.show("SceneFffPlay",{roomInfo:e.turn})},t.getInstance=function(){return t.instance},t.nullInstance=function(){var e=t._instance;e&&e.close(!0),t._instance=null},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFFFAct.prototype,"CCDDZPanelFFFAct");var CCDDZPanelFirstRecharge=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},t.prototype.init=function(){this.skinName=panels.CCDDZPanelFirstRecharge},t.prototype._onMyUserInfoUpdate=function(){this._initGoRechargeBtn()},t.prototype._onGoRecharge=function(){var e=CCGlobalGameConfig.getFRechargeInfo();e&&CCDDZRechargeService.instance.doRecharge(e.product_id)},t.prototype._onGetRew=function(){CCDDZMainLogic.instance.onGoGetRewardReq(),this.dealAction()},t.prototype._initUI=function(){this._initGoRechargeBtn(),this._playMaskAni(),this._playFontLightAni(),this._playItemLightAni()},t.prototype._initGoRechargeBtn=function(){var e=CCDDZMainLogic.instance.selfData,t=!e.isNotBuyFRecharge();this._hasBuy||(this._hasBuy=t,t?(this.mGoRecharge_btn.setPngs("cc_frecharge_get_n","cc_frecharge_get_p"),this.mGoRecharge_btn.setClickFunc(this._onGetRew.bind(this))):(this.mGoRecharge_btn.setPngs("cc_frecharge_gopay_n","cc_frecharge_gopay_p"),this.mGoRecharge_btn.setClickFunc(this._onGoRecharge.bind(this))))},t.prototype._playMaskAni=function(){this.mMoneyLight_img.mask=this.mMoneyLight_mask;var e=this.mMoneyLight_mask.x,t=this.mMoneyLight_mask.y,i=this.mMoneyLight_img.x+this.mMoneyLight_img.width+10,n=null;(n=function(o){egret.Tween.get(o.mMoneyLight_mask).to({x:i,y:t},1e3).wait(500).to({x:e,y:t},500).call(function(){n(o)})})(this)},t.prototype._playFontLightAni=function(){var e=this,t=null;this.mLight2_img.visible=!1,this.mLight3_img.visible=!1,t=function(e,i,n,o,a,r){i.scaleX=n,i.scaleY=n,egret.Tween.get(i).to({scaleX:a,scaleY:a},800).wait(500).to({scaleX:n,scaleY:o},500).call(function(){t(e,i,n,o,a,r)})},t(this,this.mLight1_img,0,0,this.mLight1_img.scaleX,this.mLight1_img.scaleY),egret.setTimeout(function(){e.mLight2_img.visible=!0,t(e,e.mLight2_img,0,0,e.mLight2_img.scaleX,e.mLight2_img.scaleY)},this,600),egret.setTimeout(function(){e.mLight3_img.visible=!0,t(e,e.mLight3_img,0,0,e.mLight3_img.scaleX,e.mLight3_img.scaleY)},this,1e3)},t.prototype._playLightOnTarget=function(e){var t=RES.getRes("cc_frLightAni_json"),i=RES.getRes("cc_frLightAni_png"),n=new egret.MovieClipDataFactory(t,i),o=new egret.MovieClip(n.generateMovieClipData("frlight"));return o.anchorOffsetX=57,o.anchorOffsetY=60,o.gotoAndPlay(1,-1),o.x=e.x,o.y=e.y,e.parent.addChild(o),o},t.prototype._playItemLightAni=function(){this._playLightOnTarget(this.item1Img),this._playLightOnTarget(this.item2Img),this._playLightOnTarget(this.item3Img),this._playLightOnTarget(this.item4Img)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._onAddToStage=function(){var e=CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this._onMyUserInfoUpdate,this),CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),t._instance=null,CCDDZEventManager.instance.disableOnObject(this)},t.prototype.show=function(){this.popup(null,!0,{alpha:0})},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.nullInstance=function(){if(t._instance){var e=this._instance;e.parent.removeChild(e)}},t.setDisableGet=function(){t._instance&&(t._instance.mGoRecharge_btn.visible=!1)},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFirstRecharge.prototype,"CCDDZPanelFirstRecharge");var CCDDZPanelFollowCourse=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelFollowCourseSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._enableEvent(!0)},t.prototype.playAnimate=function(){for(var e=1;7>e;++e)egret.Tween.get(this["step"+e]).set({visible:!0,alpha:0}).wait(1200*(e-1)).to({alpha:1},1200)},t.prototype.setStepVisible=function(e){for(var t=1;7>t;++t)this["step"+t].visible=e},t.prototype.stopAnimate=function(){for(var e=1;7>e;++e)egret.Tween.removeTweens(this["step"+e]);this.setStepVisible(!0)},t.prototype.show=function(){this.setStepVisible(!1),this.playAnimate(),this.popup()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.copyWX_img[t](egret.TouchEvent.TOUCH_TAP,this._onClickCopyWX,this),this.btnClose[t](egret.TouchEvent.TOUCH_TAP,this._onTouchClose,this)},t.prototype._onTouchClose=function(){this.stopAnimate(),this.dealAction()},t.prototype._onAddToStage=function(){},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._onClickCopyWX=function(){CCGlobalGameConfig.copyText(this.parent,"好手气斗地主","公众号(好手气斗地主)")},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFollowCourse.prototype,"CCDDZPanelFollowCourse");var CCDDZPanelFreshManReward=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelFreshManRewardSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),ccserver.addEventListener(CCGlobalEventNames.GET_FRESHMAN_REWARD_REP,this.onGetRewardRep,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),this.item2Num_label.text=CCGlobalGameConfig.getCfgByField("dbs_config.freshman_gold_reward")},t.prototype.onGetRewardRep=function(e){var t=e.data;0==t.result?(CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.GOLD_RAIN_EFFECT),CCDDZPanelAlert3.instance.show("成功领取新手奖励: "+t.gold+"金豆,记牌器在游戏中开启"),ccserver.removeEventListener(CCGlobalEventNames.GET_FRESHMAN_REWARD_REP,this.onGetRewardRep,this),CCDDZMainLogic.instance.selfData.freshrewardgot=2,this.close()):CCDDZAlert.show("领取失败，错误编号:"+t.result)},t.prototype.show=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._callback=t,this.popup()},t.prototype.onGetClick=function(e){ccserver.GetFreshManReward()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFreshManReward.prototype,"CCDDZPanelFreshManReward");var CCDDZPanelFRGetRew=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelFRGetRewardSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._enableEvent(!0)},t.prototype._enableEvent=function(e){var t="addEventListener";0==e&&(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.mGet_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchGetRewBtn,this)},t.prototype._onTouchGetRewBtn=function(){CCDDZMainLogic.instance.onGoGetRewardReq(),this.dealAction()},t.prototype.show=function(){this._day=CCDDZMainLogic.instance.selfData.getFRechargeRewGetDay(),this.popup(null,!0,{alpha:0})},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelFRGetRew.prototype,"CCDDZPanelFRGetRew");var CCDDZPanelGetItems=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelGetItemsSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.dragon||(this.dragon=new CCDDZDragonSign,this.dragon.x=this.group.width>>1,this.dragon.y=this.group.height>>1,this.dragon.stop()),this.list.itemRenderer=CCDDZIRGoodsGet,this.list.dataProvider=this._dataProvider=new eui.ArrayCollection,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){this.dealAction()},t.prototype.show=function(e){this.popup(this.dealAction.bind(this)),this.group.addChildAt(this.dragon,1);var t=e.count;CCDDZMainLogic.instance.selfData.isSignGoldAddByFRecharge()&&(t+=.2*t);var i=CCalien.Native.instance;(i.isNative||!i.isWXMP&&!i.isAli()&&"iOS"==egret.Capabilities.os)&&(t+=.1*t),this.msg.text="×"+t,this.playMsg()},t.prototype.playMsg=function(){egret.Tween.removeTweens(this.msg),this.msg.alpha=0,egret.Tween.get(this.msg).wait(300).to({alpha:1},300)},t.prototype.close=function(){e.prototype.close.call(this)},t.lightWave=function(e){return{r:360*e/Math.PI/2}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelGetItems.prototype,"CCDDZPanelGetItems");var CCDDZIRGoodsGet=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=CCDDZGoodsManager.instance.getGoodsById(this.data.id);this.labGoodsName.text=t.name+"x"+this.data.count,this.imgGoodsIcon.source=CCDDZGoodsItem.parseUrl(this.data.id)},t}(eui.ItemRenderer);__reflect(CCDDZIRGoodsGet.prototype,"CCDDZIRGoodsGet");var CCDDZPanelGetRed=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelGetRedSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefault(),this._initEvent()},t.prototype._initDefault=function(){this._allBigStars=[];for(var e=0;5>e;++e)this._allBigStars[e]=this["lightStar"+(e+1)+"_img"];this._allBigStarHide(),this._showGetRed(!1),this._showStarBg(!0)},t.prototype._showGetRed=function(e){this.getRed_img.visible=e},t.prototype._showStarGroup=function(e){this.lightStar_group.visible=e},t.prototype._showStarBg=function(e){this.mBgStar_img.visible=e},t.prototype._allBigStarHide=function(){for(var e=0;5>e;++e)this._allBigStars[e].visible=!1},t.prototype._initEvent=function(){this._enableEvent(!0)},t.prototype._onAddToStage=function(){this.getRed_img.addClickListener(this._onClickGetRed,this),this.close_img.addClickListener(this._onTouchClose,this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._onClickGetRed=function(){CCDDZExchangeService.instance.doChou(this._roomId)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._onAniStarOver=function(){var e=this;egret.Tween.get(this.lightStar_group).wait(300).to({alpha:0},100).call(function(){e.lightStar_group.visible=!1,e.lightStar_group.alpha=1,egret.Tween.get(e.getRed_img).set({scaleX:.1,scaleY:.1,visible:!0}).to({scaleX:1,scaleY:1},100)})},t.prototype._onAllStarMoveOver=function(){var e=this,t=egret.Tween;egret.setTimeout(function(){e._showStarBg(!1);var i=0,n=null,o=e;(n=function(){t.get(o._allBigStars[i]).to({scaleX:1.5,scaleY:1.5},100).to({scaleX:1,scaleY:1},50).call(function(){return i>=4?void o._onAniStarOver():(i++,void n())})})()},this,50)},t.prototype._bottomToBig=function(e,t){var i=this,n=this._allBigStars[t],o=n.x,a=n.y;e.visible=!1;var r=e.localToGlobal(e.x,e.y);r=this.lightStar_group.globalToLocal(r.x,r.y);var s=new eui.Image("play_star_big");this.lightStar_group.addChild(s);var c=e.width/s.width,h=e.height/s.height;s.x=r.x+.5*e.width,s.y=r.y+.5*e.height,s.anchorOffsetX=.5*s.width,s.anchorOffsetY=.5*s.height,s.scaleX=c,s.scaleY=h,egret.Tween.get(s).to({x:o,y:a,scaleX:1,scaleY:1},500).call(function(){i.lightStar_group.removeChild(s),i._allBigStars[t].visible=!0,4==t&&i._onAllStarMoveOver()})},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype.show=function(e,t){var i=this;this._roomId=e;var n=t;this.popup(null,!0),egret.setTimeout(function(){var e=i,t=0,o=0,a=null;a=function(){t>=n.length?o&&(egret.clearInterval(o),o=0):(e._bottomToBig(n[t],t),t++)},a(),o=egret.setInterval(function(){a()},i,100)},this,500)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelGetRed.prototype,"CCDDZPanelGetRed");var CCDDZPanelHornTalk=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelHornTalk},t.prototype._setChatCost=function(){var e=CCGlobalGameConfig.getChatCostInfoByType(2),t=0;e&&3==e.id&&(t=e.cost),this._costNum=t,this.costGold_label.text=""+t},t.prototype._onClickSendMsg=function(){var e=CCDDZMainLogic.instance.selfData,t=CCDDZBagService.instance.getItemCountById(3);if(this._hasSendMsg)CCDDZToast.show("消息发送中");else if(this._nCurCoolTime>-1)CCDDZToast.show("发送消息过于频繁");else if(t<this._costNum)CCDDZToast.show("钻石不足");else if(this.talk_editText.text&&this.talk_editText.text.length>=1){var i=this._onReplaceSensitive(this.talk_editText.text);ccserver.sendHornMsg(2,i),this.talk_editText.text="";var n={time:(new Date).getTime(),nickname:e.nickname,msg:i};e.addHornTalkRec(n),this._setHasSendMsg(!0)}else CCDDZToast.show("消息不能为空")},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaut(),this._initEvent(),CCDDZEventManager.instance.enableOnObject(this)},t.prototype._formatTalk=function(){var e=CCDDZMainLogic.instance.selfData,t=e.getHornTalkRecList(),i=e.getSysTalkRecList(),n=[];return n=n.concat(t),n=n.concat(i)},t.prototype._initDefaut=function(){this._hasSendMsg=!1,this._nDefaultCoolTime=5,this._nIntervalRepeatId=-1,this._dataArr=this._formatTalk(),this._dataProvider=new eui.ArrayCollection(this._dataArr),this.talkRec_list.itemRenderer=CCDDZHornTalkItem,this.talkRec_list.dataProvider=this._dataProvider,this._onScrollToBottom(),this._setChatCost()},t.prototype._setHasSendMsg=function(e){this._hasSendMsg=e},t.prototype._onHornRecChange=function(e){var t=e.data;t&&(this._dataArr.push(t),this._dataProvider.source=this._dataArr,this._dataProvider.refresh(),this._onScrollToBottom())},t.prototype._onScrollToBottom=function(){var e=this;egret.setTimeout(function(){e.horn_scroller.viewport.contentHeight<e.horn_scroller.height||(e.horn_scroller.viewport.scrollV=e.horn_scroller.viewport.contentHeight-e.horn_scroller.height,e.horn_scroller.viewport.validateNow())},this,100)},t.prototype._initEvent=function(){this._enableEvent(!0),this.close_img.addClickListener(this._onTouchClose,this),this.sendMsg_img.addClickListener(this._onClickSendMsg,this);var e=CCalien.CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this)},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),ccserver[t](CCGlobalEventNames.USER_PAY_TO_CHAT_REP,this._onRecvHornRep,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)
},t.prototype._onRecvHornRep=function(e){var t=e.data,i=CCDDZMainLogic.instance.selfData.nickname;if(t)if(null==t.result)for(var n=t.chatinfo,o=0;o<n.length;++o)CCDDZBase64.decode(n[o].nickname)==i&&(this._hasSendMsg&&this._startCool(),this._setHasSendMsg(!1));else this._setHasSendMsg(!1)},t.prototype.show=function(){this.popup(null,!0,{alpha:0})},t.prototype._onReplaceSensitive=function(e){for(var t=CCDDZUtils.getSensitiveWord(),i=e,n=0;n<t.length;++n)i=i.replace(new RegExp(t[n],"g"),"*");return i},t.prototype._clearRepeatInterval=function(){this._nIntervalRepeatId>0&&(egret.clearInterval(this._nIntervalRepeatId),this._nIntervalRepeatId=-1)},t.prototype._startCool=function(){this._clearRepeatInterval(),this._nCurCoolTime=this._nDefaultCoolTime,this._nIntervalRepeatId=egret.setInterval(this._coolUpdate,this,1e3)},t.prototype._stopCool=function(){this._clearRepeatInterval()},t.prototype._coolUpdate=function(){this._nCurCoolTime-=1,this._nCurCoolTime>=0||this._stopCool()},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelHornTalk.prototype,"CCDDZPanelHornTalk");var CCDDZPanelInviteAct=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelInviteActSkin},t.prototype.initUI=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg");this.actRuleLabel.text=e.rule,this.actTimeLabel.text=e.time,this.actDescLabel.text=e.content},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaut(),this.initUI(),this._enableEvent(!0)},t.prototype._formatEveryTaskData=function(){var e=CCGlobalGameConfig.getDayTaskList();if(!e)return[];var t=CCGlobalGameConfig.getCfgByField("dbs_config.invite_active"),i=CCDDZMainLogic.instance.selfData,n=(i.getDayTaskPre(),i.getInviteTaskStatus()),o=[],a=[],r=[],s=null,c=0,h=0,l=[],u=t.task;if(u)for(var p=u.length,C=0;p>C;++C){r=[],a=u[C].reward.split("|");for(var d=0;d<a.length;++d)o=a[d].split(":"),c=Number(o[0]),h=Number(o[1]),1==c&&(h/=100),r.push({id:c,num:h});s={},s.id=u[C].id,n.length>=u[C].id+1?s.status=n[u[C].id]||0:s.status=0,s.tp=2,s.num=n[0],s.total=u[C].progress,s.taskDesc1="邀请"+s.total+"位新好友",s.taskDesc2="(好友需赢5局)";var _=s.total-s.num;0>_&&(_=0),r.unshift({id:41003,num:_}),s.rew=r,l.push(s)}return{invite:l}},t.prototype._initDefaut=function(){this._allTaskInfo=this._formatEveryTaskData(),this._dataArr=this._allTaskInfo.invite,!this._dataArr||this._dataArr.length<1||(this._dataProvider=new eui.ArrayCollection(this._dataArr),this.taskList.itemRenderer=CCDDZIRContainer,this.taskList.dataProvider=this._dataProvider,ccserver.isInNewyearTaskReqNewYear())},t.prototype._initEvent=function(){var e=CCalien.CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this._userinfoUpdate,this),e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this),ccserver.addEventListener(CCGlobalEventNames.USER_OPERATE_REP,this._onRecvUserOperateRep,this)},t.prototype._onRecvUserOperateRep=function(e){var t=CCDDZMainLogic.instance.selfData,i=e.data;if(4==i.optype)null==i.result&&t.setNewYearTaskInfo(i.params2);else if(10==i.optype)if(null==i.result&&i.params&&3==i.params.length){for(var n=t.getNewYearTaskInfo(),o=i.params[1],a=i.params[2],r=n.length,s=0;r>s;++s)if(n[s].ct==o){n[s].status[a-1]=2,t.setNewYearTaskInfo(n);for(var c=this._dataArr,h=c.length,l=0;h>l;++l)if(c[l].type==o&&c[l].subId==a){this._dataArr[l].status=2;var u="领取以下奖励成功:"+c[l].rewDesc;return CCDDZAlert.show(u,0,null,"left"),this._dataProvider.source=this._dataArr,void this._dataProvider.itemUpdated(this._dataArr[l])}return}}else CCDDZAlert.show("领取奖励失败|result:"+i.result)},t.prototype._onDayTaskRewGetSucc=function(){this._allTaskInfo=this._formatEveryTaskData(),this._showInviteActInfo()},t.prototype._toTaskTop=function(){this.taskScroller.stopAnimation(),this.taskScroller.viewport.scrollV=0,this.taskScroller.validateNow()},t.prototype._showInviteActInfo=function(){var e=[];this._allTaskInfo.week&&this._allTaskInfo.week.length>=1&&(e=this._allTaskInfo.week),this._dataProvider.source=e,this._dataProvider.refresh()},t.prototype._onAddToStage=function(){this._initEvent(),CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._userinfoUpdate=function(){this._allTaskInfo=this._formatEveryTaskData(),this._showInviteActInfo()},t.prototype.show=function(){this.popup(null,!0,{alpha:0})},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelInviteAct.prototype,"CCDDZPanelInviteAct");var CCDDZPanelInviteJustList=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelInviteJustListSkin,this.list.itemRenderer=CCDDZInviteListItem,this._dataProvide||(this._dataProvide=new eui.ArrayCollection([]),this.list.dataProvider=this._dataProvide)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);CCDDZEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.scroll2end,this),CCDDZInviteService.instance.addEventListener(CCGlobalEventNames.INVITE_DATA_REFRESH,this.onInviteDataUpdate,this),this._showNoInviteTipGroup(!0)},t.prototype.onInviteDataUpdate=function(e){var t=e.data;this._dataProvide.source=t,this._dataProvide.refresh(),this._showNoInviteByInviteList()},t.prototype._showNoInviteByInviteList=function(){this._dataProvide.source.length>0?this._showNoInviteTipGroup(!1):this._showNoInviteTipGroup(!0)},t.prototype.scroll2end=function(e){CCDDZInviteService.instance.getInvitePlayersList()},t.prototype._showNoInviteTipGroup=function(e){this.noInviteGroup.visible=e},t.prototype.show=function(){this.popup(),CCDDZInviteService.instance.getInvitePlayersList()},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelInviteJustList.prototype,"CCDDZPanelInviteJustList");var CCDDZPanelInviteList=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelInvateListSkin,CCDDZInviteService.instance.addEventListener("INVITE_RANK_LIST",this.onInviteRankUpdate,this),CCDDZInviteService.instance.getInviteRankList()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);CCDDZEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this)},t.prototype.onInviteRankUpdate=function(e){var t=e.data;CCDDZInviteService.instance.removeEventListener("INVITE_RANK_LIST",this.onInviteRankUpdate,this),this.rollMsg.showByInviteRankList(t)},t.prototype._initClickListener=function(){this.inviteGroup.addClickListener(this._onClickInvite,this),this.chouImg.addClickListener(this._onClickChou,this),this.ruleImg.addClickListener(this._onClickRule,this),this.rankImg.addClickListener(this._onClickRank,this)},t.prototype._initDesc=function(){this.actDescLabel.text="1.邀请好友完成赢5局任务，可获得10-100随机钻石奖励。\n2、联系客服，开通更多邀请奖励：\n				1）每个有效用户2奖杯。\n				2）永久享有充值邀请奖励。\n				3）详情添加客服微信："+CCGlobalGameConfig.extendWX},t.prototype._initBtnCopyPng=function(){var e="cc_invite_url";CCalien.Native.instance.isNative&&(e="cc_invite_do1"),this.inviteDescImg.source=e},t.prototype._onClickInvite=function(){this._doInvite()},t.prototype._doInvite=function(){if(CCalien.Native.instance.isNative)CCGlobalWxHelper.shareForAndroidApp();else{var e=CCGlobalGameConfig.getMySelfUrl();CCGlobalGameConfig.copyText(null,e,"专属链接",!0)}},t.prototype._initRedCount=function(){var e=CCDDZMainLogic.instance.selfData.getInviteRedNum(),t="<font color='#F7D87C'>可抽</font> "+e+" <font color='#F7D87C'>次</font>";this.countLabel.textFlow=(new egret.HtmlTextParser).parser(t)},t.prototype._showChouMax=function(){var e=CCGlobalGameConfig.getCfgByField("custom").inviteRedNum,t="今日已达"+e+"次";CCDDZToast.show(t)},t.prototype._onClickChou=function(){var e=this,t=CCDDZMainLogic.instance.selfData.getInviteRedNum();if(t>0){var i=CCGlobalGameConfig.getCfgByField("custom"),n=CCGlobalGameConfig.getCfgByField("hasGetIRedNum");!n||n<i.inviteRedNum?ccserver.reqInviteRedRew():this._showChouMax()}else CCDDZAlert.show("次数不足，是否立刻邀请好友？",0,function(t){"confirm"==t&&e._doInvite()})},t.prototype._onClickRank=function(){CCDDZPanelInviteRank.instance.show()},t.prototype._onClickRule=function(){CCDDZPanelInviteJustList.instance.show()},t.prototype._showGetRed=function(e,t){var i=this;if(void 0===t&&(t=""),this.redLabel.visible=e,e&&t){var n=213;this.redLabel.text="+"+t,egret.Tween.removeTweens(this.redLabel),this.chouImg.touchEnabled=!1,egret.Tween.get(this.redLabel).set({y:n}).to({y:n-20},500).wait(500).call(function(){i.redLabel.visible=!1,i.chouImg.touchEnabled=!0})}else egret.Tween.removeTweens(this.redLabel)},t.prototype._onRecvGetRewRep=function(e){var t=e.data,i=null;if(4==t.optype){if(0==t.result||null==t.result){if(CCDDZMainLogic.instance.selfData.subInviteRedNum(),this._initRedCount(),t.params&&t.params.length>=2){var n=t.params[1];this._showGetRed(!0,n)}}else if(1==t.result)i="活动不存在";else{if(2==t.result){var o=CCGlobalGameConfig.getCfgByField("custom").inviteRedNum;return CCGlobalGameConfig.setCfgByField("hasGetIRedNum",o),void this._showChouMax()}3==t.result&&(i="奖励已领取")}i&&CCDDZAlert.show(i)}},t.prototype._initTime=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg");this.actTimeLabel.text=e.time},t.prototype.show=function(e,t){void 0===t&&(t=null),this.popup(),this.rollMsg.stop(),this.rollMsg.enableSendHorn(!1),this._initBtnCopyPng(),this._initClickListener(),this._initDesc(),this._showGetRed(!1),this._initTime(),this._initRedCount(),ccserver.addEventListener(CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetRewRep,this)},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelInviteList.prototype,"CCDDZPanelInviteList");var CCDDZPanelInviteRank=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelInviteRankSkin,this.list.itemRenderer=CCDDZInviteRankListItem,this._dataProvide=new eui.ArrayCollection([]),this.list.dataProvider=this._dataProvide},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);CCDDZEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.scroll2end,this),CCDDZInviteService.instance.addEventListener("INVITE_RANK_LIST",this.onInviteRankUpdate,this)},t.prototype.onInviteRankUpdate=function(e){var t=e.data;this._dataProvide.source=t,this._dataProvide.refresh()},t.prototype.scroll2end=function(e){},t.prototype.show=function(){this.scroller.viewport.scrollV=0,this.popup(),CCDDZInviteService.instance.getInviteRankList()},t.prototype.onBtnCloseClick=function(e){this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelInviteRank.prototype,"CCDDZPanelInviteRank");var CCDDZInviteRankListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.itemIndex%2==0?this.bg.visible=!0:this.bg.visible=!1,this.lbName.text=t.nickname.substr(0,6),this.lbRed.text=t.coin,t.ranking<=3?(this.rankIdxLabel.visible=!1,this.rankIdxImg.source="invite_"+t.ranking):(this.rankIdxLabel.text=t.ranking,this.rankIdxImg.visible=!1)},t}(eui.ItemRenderer);__reflect(CCDDZInviteRankListItem.prototype,"CCDDZInviteRankListItem");var CCDDZPanelItems=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelItemsSkin,this._defaultConfirmString=this.btnConfirm.labelIcon,this._defaultCancelString=this.btnCancel.labelIcon},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.dealAction.bind(this,"close"),this),this.goodsList.itemRenderer=CCDDZGoodsItemRender,this.goodsDataProvider=new eui.ArrayCollection,this.goodsList.dataProvider=this.goodsDataProvider},t.prototype.onGrpButtonTap=function(e){this.dealAction(e.target.name)},t.prototype.show=function(e,t,i,n,o,a,r,s,c){switch(void 0===t&&(t=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=null),void 0===s&&(s="center"),void 0===c&&(c=null),this.popup(),this.btnConfirm.labelIcon=this._defaultConfirmString,this.btnCancel.labelIcon=this._defaultCancelString,this.btnConfirm.scaleX=1,this.btnConfirm.scaleY=1,this.btnConfirm.bgImg.visible=!0,this.labContent.text=n,this.labContent.textColor=o,null==c&&(c=[{text:n}]),this.labTit.text=e,this.labTit.textColor=t,this.labContent.textFlow=c,this._callback=r,this.labContent.textAlign=s,this.goodsDataProvider.source=i,this.grpButton.visible=!0,this.labContent.validateNow(),this.labContent.textHeight<this.ctxScroller.height?this.labContent.y=.5*(this.ctxScroller.height-this.labContent.textHeight):this.labContent.y=0,this.ctxScroller.stopAnimation(),this.ctxScroller.viewport.scrollV=0,this.ctxScroller.validateNow(),a){case 0:this.grpButton.contains(this.btnCancel)&&this.grpButton.removeChild(this.btnCancel);break;case 1:this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel)}},t.getInstance=function(){return this._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelItems.prototype,"CCDDZPanelItems");var CCDDZGoodsItemRender=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.goodsItem.setData(t)},t}(eui.ItemRenderer);__reflect(CCDDZGoodsItemRender.prototype,"CCDDZGoodsItemRender");var CCDDZPanelLogin=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Flew,{direction:"up",ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Flew,{direction:"up",ease:egret.Ease.backIn})||this;return t.addExcludeForClose(["confirm"]),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLoginSkin},t.prototype.addListeners=function(){this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},t.prototype.removeListeners=function(){this.grpButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},t.prototype.onGrpButtonTap=function(e){switch(e.target.name){case"forgot":break;case"register":break;case"confirm":var t=this.tiID.text,i=this.tiPassword.text,n=!0;CCGlobalGameData.instance.setItem("id",t,!0),this.dealAction("confirm",{id:t,password:i,autoLogin:n})}},t.prototype.onBtnCloseTap=function(e){this.dealAction()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.show=function(e){this._callback=e,this.popup(),this.tiID.text=CCGlobalGameData.instance.getItem("id"),this.tiPassword.text="",this.addListeners()},t.prototype.close=function(){e.prototype.close.call(this),this.removeListeners()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLogin.prototype,"CCDDZPanelLogin");var CCDDZPanelLottery=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.CCDDFade,{},CCalien.CCDDZpopupEffect.CCDDFade,{})||this;return t._allCfg=null,t._interReqStatus=null,t._formatLotteryCfg(),t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLotterySkin,this._self=CCDDZMainLogic.instance.selfData},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._dataProvide=new eui.ArrayCollection,this.itemList.itemRenderer=CCDDZLotteryItem,this.itemList.dataProvider=this._dataProvide,this.percentWidth=100,this.percentHeight=100,ccserver.addEventListener(CCGlobalEventNames.USER_USER_INFO_RESPONSE,this.onMyUserInfoUpdate,this);var t=CCDDZEventManager.instance;t.registerOnObject(this,this.close_group,egret.TouchEvent.TOUCH_TAP,this.dealAction,this),t.registerOnObject(this,this.ruleImg,egret.TouchEvent.TOUCH_TAP,this.onRuleClick,this),t.registerOnObject(this,this.btnMy,egret.TouchEvent.TOUCH_TAP,this.onMyClick,this),t.registerOnObject(this,this.redExchangeImg,egret.TouchEvent.TOUCH_TAP,this._onClickExchange,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._clearInternalReqStatus=function(){this._interReqStatus&&egret.clearInterval(this._interReqStatus),this._interReqStatus=null},t.prototype._initInternalReqStatus=function(){this._interReqStatus||(this._interReqStatus=egret.setInterval(function(){ccserver.reqAllLotteryStatus()},this,5e3))},t.prototype._onAddToStage=function(e){this.keFuBtn.addClickListener(this._onClickKeFu,this,!1),ccserver.addEventListener(CCGlobalEventNames.USER_CoinLottery_REP,this.onLotteryStatusRep,this),CCalien.CCDDZEventManager.instance.enableOnObject(this),ccserver.reqAllLotteryStatus(),this._clearInternalReqStatus(),this._initInternalReqStatus()},t.prototype._onRemovedToStage=function(){ccserver.removeEventListener(CCGlobalEventNames.USER_CoinLottery_REP,this.onLotteryStatusRep,this),ccserver.removeEventListener(CCGlobalEventNames.USER_USER_INFO_RESPONSE,this.onMyUserInfoUpdate,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this._clearInternalReqStatus(),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._onClickKeFu=function(){CCGlobalGameConfig.showKeFu()},t.prototype._onSelectItem=function(e){},t.prototype._formatServerLotteryStatus=function(e){for(var t=e,i=t.length,n=null,o=null,a=null,r=0;i>r;++r){o=t[r],n=o.id,this._allCfg[n].title=o.rewarddes,this._allCfg[n].enddate=1e3*o.enddate,o.phase!=this._allCfg[n].phase&&(this._allCfg[n].code=[],this._allCfg[n].codeIdx={},CCDDZMailService.instance.getMailList(),console.log("_formatServerLotteryStatus===>",n,o.phase,-1)),this._allCfg[n].phase=o.phase,this._allCfg[n].poll=o.poll||0,this._allCfg[n].minpoll=o.minpoll,a=o.price.split(":"),this._allCfg[n].price={id:a[0],num:a[1]/100},a=o.reward&&""!=o.reward&&"nil"!=o.reward?o.reward.split("|"):o.redreward.split("|"),this._allCfg[n].reward=[];for(var s=0;s<a.length;++s){var c=a[s].split(":");this._allCfg[n].reward.push({id:c[0],num:c[1]})}if(o.code)for(var h=o.code,l=h.length,s=0;l>s;++s)this._allCfg[n].codeIdx[h[s]]||(this._allCfg[n].codeIdx[h[s]]=1,this._allCfg[n].code.push(h[s]))}},t.prototype._addLotteryCountByMyJoinSucc=function(e,t,i){for(var n=this._allCfg[e].code,o=this._allCfg[e].codeIdx,a=0;t>a;++a)o[i[a]]||(this._allCfg[e].poll+=1,o[i[a]]=1,n.push(i[a]));this._dataProvide.itemUpdated(this._allCfg[e])},t.prototype._formatLotteryCfg=function(){var e=CCGlobalGameConfig.getCfgByField("red_coin_lottery_config");if(!e)return void CCDDZReportor.instance.reportCodeError("red_coin_lottery_config null");var t=null;if(!e._formatData){var i=e.length,n=null;t={_arr_:[]};for(var o=0;i>o;++o)n=e[o],t[n.id]=n,t[n.id].codeIdx={},t[n.id].code=[],t._arr_.push(n.id);t._formatData=!0,CCGlobalGameConfig.setCfgByField("red_coin_lottery_config",t),e=t}this._allCfg=e},t.prototype.onLotteryStatusRep=function(e){var t=e.data;if(null==t.result){if(1==t.optype)t.lotteryinfo&&t.lotteryinfo.length>0&&(this._formatServerLotteryStatus(t.lotteryinfo),this._updateUI());else if(2==t.optype){if(!t.params||t.params.length<2)return;CCDDZToast.show("参与成功");var i=t.params[0],n=t.params[1];if(t.params.length>=2+n){var o=t.params.slice(2,2+n);this._addLotteryCountByMyJoinSucc(i,n,o),CCDDZPanelLotteryDetail.updateDetail(4,this._allCfg[i])}}}else 5==t.result&&2==t.optype&&ccserver.reqAllLotteryStatus()},t.prototype.onMyUserInfoUpdate=function(e){void 0===e&&(e=null);var t=e?e.data:this._self,i=this._self,n=CCDDZBagService.instance.getItemCountById(3);if(this.gold.updateGold(i.gold),this.diamond.updateGold(n),this.avatar.imageId=i.imageid,i.nickname){var o=i.nickname.substr(0,10);this.labNickName.text=o+"("+i.fakeuid+")"}this._self.redcoin=t.redcoin||0,CCDDZMainLogic.instance.selfData.redcoin=t.redcoin||0,this.lbRedCoin.text=""+CCDDZUtils.exchangeRatio(this._self.redcoin/100,!0)},t.prototype.show=function(){this.popup(),this.onMyUserInfoUpdate()},t.prototype._updateUI=function(){for(var e=[],t=this._allCfg._arr_,i=t.length,n=0;i>n;++n)e.push(this._allCfg[t[n]]);console.log("_updateUI======>",e.length),this._dataProvide.source=e,this._dataProvide.refresh()},t.prototype._onBagRefresh=function(){var e=CCDDZBagService.instance.getItemCountById(3);this.diamond.updateGold(e)},t.prototype._onClickExchange=function(){CCDDZPanelExchange2.instance.show(4)},t.prototype.onMyClick=function(e){CCDDZPanelLotteryMyRec.getInstance().show()},t.prototype.onRuleClick=function(){CCDDZPanelLotteryCode.getInstance().show(2,null)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLottery.prototype,"CCDDZPanelLottery");var CCDDZLotteryItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=10,t._lessTime=100,t._endWaitTime=100,t._isReqLuck=!1,t._tickOver=!1,t._reqCurInter=null,t._lastUpStamp=0,t._curData=null,t._curStatusCode=-1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.itemBgImg.addClickListener(this._onClickBgImg,this,!1)},t.prototype._onClickBgImg=function(){console.log("_onClickBgImg======>",this._curData.id,this._curData.phase,this._curStatusCode),CCDDZPanelLotteryDetail.getInstance().show(1,this._curData)},t.prototype._clearInterval=function(){this._interval&&egret.clearInterval(this._interval),this._interval=null},t.prototype._clearReqCurInter=function(){this._reqCurInter&&egret.clearInterval(this._reqCurInter),this._reqCurInter=null},t.prototype._onRemovedToStage=function(){this._clearInterval(),this._clearReqCurInter(),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._initFlag=function(){var e=this._curData;1==e.flag?(this.flagImg.source="cc_lotteryFlag",this.flagImg.visible=!0):this.flagImg.visible=!1},t.prototype._onIntervalOver=function(){var e=this;if(!this._tickOver){this._tickOver=!0,this._curStatusCode=10,this._curData.statusCode=this._curStatusCode,this._clearInterval(),this._onWaitLuck(),console.log("_onIntervalOver==========>",this._curData.id,this._curData.phase,this._curStatusCode);var t=this._lessTime+this._endWaitTime;egret.setTimeout(function(){e._reqCurLuck()},this,t)}},t.prototype._onWaitLuck=function(){this.stateLabel.text="等待开奖",CCDDZPanelLotteryDetail.updateDetail(1,this._curData)},t.prototype._reqCurLuck=function(){var e=this;this._isReqLuck||(this._isReqLuck=!0,console.log("_reqCurLuck===============>",this._id,this._phase),ccddzwebService.getLotteryCurLuck(this._id,this._phase,function(t){e._isReqLuck=!1,e._onGetLuck(t)}))},t.prototype._onGetLuck=function(e){var t=this,i=e.data||{};if(i.id=this._curData.id,1==e.code){this._curStatusCode=1,this._curData.statusCode=this._curStatusCode,this.stateLabel.text=e.message,this._clearReqCurInter(),CCDDZPanelLotteryDetail.updateDetail(2,i);var n=egret.setTimeout(function(){1==t._curStatusCode&&(t._curStatusCode=-1),egret.clearTimeout(n)},this,1e3)}else if(0==e.code){this._curStatusCode=0,this._curData.statusCode=this._curStatusCode,this._luckData=i,this._curData.luckData=i;var o=egret.setTimeout(function(){0==t._curStatusCode&&(t._curStatusCode=-1),egret.clearTimeout(o)},this,1e3);this._clearReqCurInter(),CCDDZPanelLotteryDetail.updateDetail(3,i)}else 10==e.code&&(this._reqCurInter||(this._reqCurInter=egret.setInterval(function(){t._reqCurLuck()},this,1e3)));console.log("_onGetLuck======>",this._id,this._phase,this._curStatusCode),CCDDZPanelLotteryMyRec.updateOneInfo(this._curData)},t.prototype._onIntervalEvent=function(){this.count-=1;var e=this._curData.times;if(this.showTimes[4]&&(this.showTimes[4].text=""+(this.count<0?0:this.count)),this.count<=0){if(this.count=10,e.seconds<=0){if(e.seconds=59,e.minutes<=0){if(e.minutes=59,e.hours<=0){if(e.hours=23,e.days<=0)return void this._onIntervalOver();e.days-=1,this.showTimes[0]&&(this.showTimes[0].text=""+e.days)}else e.hours-=1;this.showTimes[1]&&(this.showTimes[1].text=""+e.hours)}else e.minutes-=1;this.showTimes[2]&&(this.showTimes[2].text=""+e.minutes)}else e.seconds-=1;this.showTimes[3]&&(this.showTimes[3].text=""+e.seconds)}},t.prototype.dataChanged=function(){var t=this;if(0!=this._curStatusCode&&10!=this._curStatusCode&&1!=this._curStatusCode){if(this._lastUpStamp){var i=(new Date).getTime();if(i-this._lastUpStamp<1e3/this.stage.frameRate)return;this._lastUpStamp=i}else this._lastUpStamp=(new Date).getTime();this._luckData=null;var n=this.data;this._id=n.id,this._phase=n.phase,this._curData=n,this._curData.statusCode=-1,console.log("dataChanged=====>",this._id,this._phase,this._curStatusCode),CCDDZPanelLotteryDetail.updateDetail(5,n),e.prototype.dataChanged.call(this),this._initFlag();var o=n.price.num,a=1e3*ccserver.tsServer,r=n.enddate;a>r&&CCDDZReportor.instance.reportCodeError("lottery startTime > endTime id:"+this._id+"|phase:"+this._phase),r-=this._lessTime,console.log("id:"+n.id+"|phase:"+n.phase,"|code:",this._curStatusCode,"--dataChanged---->当前时间:",CCalien.TimeUtils.timeFormatForEx(new Date(a),"-","-","",!0,!0),"|本期结束时间:",CCalien.TimeUtils.timeFormatForEx(new Date(r),"-","-","",!0,!0));var s={days:0,hours:0,minutes:0,seconds:0,milliseconds:0};this._curData.poll>=this._curData.minpoll&&1==this._curData.type&&(r=a),a>=r?(this.count=0,-1==this._curStatusCode&&this._onIntervalOver()):(s=CCDDZUtils.getTimeStampDiff(a,r,"all"),this._interval||(this._interval=egret.setInterval(function(){t._onIntervalEvent()},this,100)),1==n.type?(this.stateLabel.text="已抢"+n.poll+"/"+n.minpoll+"次",this._lessTime=100,this._endWaitTime=100):2==n.type&&(this.stateLabel.text="已抢"+n.poll+"次",this._lessTime=1e4,this._endWaitTime=5e3)),this._curData.times=s,s.days>0||s.hours>0?s.days>0?(this.leftHLabel.text="天",this.leftHLabel1.text=s.days,this.leftMLabel.text="时",this.leftMLabel1.text=s.minutes,this.leftSLabel.text="分",this.showTimes=[this.leftHLabel1,this.leftMLabel1,this.leftSLabel1,null,null],this.leftSLabel.visible=!0):(this.leftHLabel.text="时",this.leftHLabel1.text=s.hours,this.leftMLabel.text="分",this.leftMLabel1.text=s.minutes,this.leftSLabel.text="秒",this.leftSLabel1.text=s.seconds,this.leftSLabel.visible=!0,this.showTimes=[null,this.leftHLabel1,this.leftMLabel1,this.leftSLabel1,null]):(this.leftHLabel.text="分",this.leftHLabel1.text=s.minutes,this.leftMLabel.text="秒",this.leftMLabel1.text=s.seconds,this.showTimes=[null,null,this.leftHLabel1,this.leftMLabel1,this.leftSLabel1],this.leftSLabel1.text=""+this.count,this.leftSLabel.visible=!1),this.titLabel.text=n.title,this.moneyLabel.text=CCalien.CCDDZUtils.flatToString(o,2),this.itemImg.source=CCDDZGoodsItem.parseUrl(n.reward[0].id),this._tickOver=!1;var c=n.code.length;c>0?(this.hasLabel.text="我有"+c+"个夺宝码",this.hasLabel.visible=!0):this.hasLabel.visible=!1}},t.WIDTH=218,t}(eui.ItemRenderer);__reflect(CCDDZLotteryItem.prototype,"CCDDZLotteryItem");var CCDDZPanelLotteryCode=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLotteryCodeSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},t.prototype._initEvent=function(){this.btnClose.addClickListener(this._onTouchClose,this,!1)},t.prototype._initUI=function(){this.codeList.itemRenderer=CCDDZCodeItem,this.codeList.dataProvider=this._dataProvider=new eui.ArrayCollection},t.prototype._onTouchClose=function(){this.dealAction("close")},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._onAddToStage=function(e){this._initEvent()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype.show=function(e,t){this.popup(),1==e?this._showMyCode(t):2==e&&this._showLotteryRule()},t.prototype._showMyCode=function(e){for(var t=e.length,i=Math.floor(t/3),n=0,o=[],a=null,r=0;i>r;++r)a={1:e[n],2:e[n+1],3:e[n+2]},o.push(a),n+=3;for(var s={},r=n;t>r;++r)s[r-n+1]=e[r];o.push(s),this.currentState="code",this._dataProvider.source=o,this._dataProvider.refresh()},t.prototype._showLotteryRule=function(){this.currentState="rule";var e="选择期待中奖的物品，投入一定数量的奖杯进行夺宝。玩家每一次投入都会获得1个“夺宝码”。只要最终开奖时产生的“幸运码”与自己拥有的“夺宝码”一致，该玩家就是获得该奖品的幸运儿！投入越多，中奖机会越大！\n每一次投入最大次数限制为"+CCGlobalGameConfig.lotteryMaxNum+"次，可重复投入。\n每期夺宝只会产生1个“幸运码”。夺宝码与幸运码为8位数字。\n夺宝开奖方式分为3种：\n	1）【满人次开奖】：每期达到指定次数即可开奖；\n	2）【定时开奖】：达到指定的开奖时间即可开奖；届时，若本期未达成最低的夺宝次数，则本期奖品流拍，已投入的奖杯将通过邮件返还于您，请及时查收邮件；\n	3）【满人次开奖】或【定时开奖】：只要达到其中一个开奖条件就会立即开奖。\n中奖后，请尽快确认个人领奖信息；其中，中奖奖品请在邮件中领取。以免奖品过期！\n幸运码产生方式：\n    最后50条购买记录的时间戳总和（得出数值A），数值A+最近一次比特币交易hash码的末尾8位数（得出数值B），数值B除以购买总次数取模（得出数值C），数值C加上夺宝码起始值，最终得到幸运码。";this.ruleLabel.text=e,this._toScrollerTop()},t.prototype._toScrollerTop=function(){this.codeScroller.stopAnimation(),this.codeScroller.viewport.scrollV=0,this.codeScroller.viewport.validateNow()
},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLotteryCode.prototype,"CCDDZPanelLotteryCode");var CCDDZCodeItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.code1.text=t[1],t[2]?this.code2.text=t[2]:this.code2.visible=!1,t[3]?this.code3.text=t[3]:this.code3.visible=!1},t}(eui.ItemRenderer);__reflect(CCDDZCodeItem.prototype,"CCDDZCodeItem");var CCDDZPanelLotteryDetail=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLotteryDetail,this._isReqLuckList=!1,this._recList=[],this._recIdPhaseList={},this._curPage=0},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},t.prototype._initEvent=function(){this.btn_close.addClickListener(this._onTouchClose,this),this.detailTitLabel.addClickListener(this._onClickDetail,this,!1),this.luckTitLabel.addClickListener(this._onClickLuck,this,!1),this.buyGroup.addClickListener(this._onClickJoinLottery,this),this.haveBgImg.addClickListener(this._onClickHaveCode,this,!1),this.subImg.addClickListener(this._onAddJoinNum.bind(this,-1),this),this.addGroup.addClickListener(this._onAddJoinNum.bind(this,1),this),this.numInput.addEventListener(egret.Event.CHANGE,this._onInputChange,this),this._onMyInfoChange()},t.prototype._initUI=function(){this.luckList.dataProvider=this._dataProvider=new eui.ArrayCollection(this._recList),this.luckList.itemRenderer=CCDDZLuckItem,this.numInput.textDisplay.textAlign="center"},t.prototype._calculateRightNum=function(){var e=CCDDZMainLogic.instance.selfData.redcoin/CCGlobalGameConfig.exchangeRatio/100,t=this._detailData.price.num||1,i=e/t,n=CCalien.CCDDZUtils.flatToString(i,0);return n},t.prototype._isSingleMaxNum=function(e){return e>CCGlobalGameConfig.lotteryMaxNum?!0:!1},t.prototype._showMaxSingleInfo=function(){CCDDZToast.show("单次最大投入"+CCGlobalGameConfig.lotteryMaxNum)},t.prototype._onInputChange=function(e){var t=e.target.text,i=parseInt(t);if(isNaN(i))return CCDDZToast.show("最少1次"),void(i=1);1>i?i=1:this._isSingleMaxNum(i)&&(this._showMaxSingleInfo(),i=CCGlobalGameConfig.lotteryMaxNum);var n=i*this._detailData.price.num,o=this._isEnoughRedCoin(n),a=i;o||(a=this._calculateRightNum(),1>a&&(a=1)),this.numInput.text=a,this._initTotMoney(),console.log("_onInputChange=================>",a)},t.prototype._onAddJoinNum=function(e){console.log("_onAddJoinNum=================>",e);var t=parseInt(this.numInput.text);if(t+=e,!(1>t)){this._isSingleMaxNum(t)&&(this._showMaxSingleInfo(),t=CCGlobalGameConfig.lotteryMaxNum);var i=this._detailData.price.num,n=t*i,o=this._isEnoughRedCoin(n);o&&(this.numInput.text=""+t,this._initTotMoney())}},t.prototype._onClickHaveCode=function(){CCDDZPanelLotteryCode.getInstance().show(1,this._detailData.code)},t.prototype._onTouchClose=function(){this.dealAction("close")},t.prototype._onClickDetail=function(){this.currentState="detail",this.detailTitLabel.touchEnabled=!1,this.luckTitLabel.touchEnabled=!0},t.prototype._onClickLuck=function(){this.detailTitLabel.touchEnabled=!0,this.luckTitLabel.touchEnabled=!1,this.showHistoryLuck()},t.prototype._isEnoughRedCoin=function(e){var t=CCDDZMainLogic.instance.selfData,i=t.redcoin/CCGlobalGameConfig.exchangeRatio/100;return i>=e?!0:!1},t.prototype._onClickJoinLottery=function(){var e=this._detailData.price.num,t=this._isEnoughRedCoin(e);if(t){var i=parseInt(this.numInput.text),n=this._detailData.id;ccserver.reqBuyLotteryById(n,i)}else CCDDZAlert.show("奖杯不足,前往游戏赢取奖杯",0,function(e){"confirm"==e&&CCalien.CCDDZSceneManager.instance.show(CCGlobalSceneNames.ROOM,{toGold:!0})})},t.prototype._initTotMoney=function(){var e=parseInt(this.numInput.text);this._isSingleMaxNum(e)&&(this._showMaxSingleInfo(),e=CCGlobalGameConfig.lotteryMaxNum),this.moneyLabel.text=""+CCalien.CCDDZUtils.flatToString(this._detailData.price.num*e,2)},t.prototype._onMyInfoChange=function(){CCDDZMainLogic.instance.selfData;if(this._detailData){var e=this._detailData.price.num,t=this._isEnoughRedCoin(e);t?(this.numInput.touchEnabled=!0,this.subImg.touchEnabled=!0,this.addGroup.touchEnabled=!0):(this.numInput.touchEnabled=!1,this.subImg.touchEnabled=!1,this.addGroup.touchEnabled=!1)}},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.MY_USER_INFO_UPDATE,this._onMyInfoChange,this),this.getScroller[t](egret.Event.CHANGE,this._onListScroll,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._onAddToStage=function(e){this._initEvent()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype.show=function(e,t){this.popup(),1==e?this.showDetail(t):2==e&&this.showHistoryLuck()},t.prototype.showDetail=function(e){console.log("showDetail=============>",e.id,e.phase,e.statusCode),this.currentState="detail",this._detailData=e,this._isReqLuckList=!1,this.titLabel.text=e.title,this.typeLabel.text=1==e.type?"满人":"定时",this.orderLabel.text="【第"+e.phase+"期】",this.timeLabel.text=CCalien.TimeUtils.timeFormatForEx(new Date(e.enddate),"-","-","",!0)+"开奖",this.itemImg.source=CCDDZGoodsItem.parseUrl(e.reward[0].id),this._updateMyCode(e.code),this._updateAllJoinCount(),this._showThisLuckGroup(!1),this._showStatusGroup(!1),this._showFailTip(!1),this._initTotMoney(),this._showJoinGroup(!0),10==e.statusCode?(this._showJoinGroup(!1),this._showStatusGroup(!0)):1==e.statusCode?(this._showFailTip(!0),this._showJoinGroup(!1)):0==e.statusCode&&(this._showJoinGroup(!1),this._showThisLuckGroup(!0),this._updateThisLuckByData(e.luckData))},t.prototype._updateAllJoinCount=function(){var e=this._detailData,t="已抢<font color='#333333'>"+e.poll+"</font>次,至少"+e.minpoll+"次开奖";this.doLabel.textFlow=(new egret.HtmlTextParser).parse(t)},t.prototype._updateMyCode=function(e){if(e&&e.length>0){var t=e.length;this.haveLabel.text="我有"+t+"个夺宝码>>",this._showMyHaveCode(!0)}else this._showMyHaveCode(!1)},t.prototype._onListScroll=function(e){var t=this.getScroller.viewport.scrollV+this.getScroller.height;t>=this.getScroller.viewport.contentHeight&&this._totalPage>this._curPage&&this._reqLuckHistory(this._curPage+1)},t.prototype._addLuckItem=function(e){var t=e.id,i=e.phase;this._recIdPhaseList[t]=this._recIdPhaseList[t]||{};var n=this._recList,o=n.length,a=0;if(this._recIdPhaseList[t][i]){if(a=this._recIdPhaseList[t][i].idx,a+1>o)return;n[a]=e}else a=o,this._recIdPhaseList[t][i]={idx:a},n.push(e)},t.prototype._reqLuckHistory=function(e){var t=this;void 0===e&&(e=0),this._isReqLuckList||(this._isReqLuckList=!0,ccddzwebService.getLotteryLuckHistory(e,this._detailData.id,function(e){if(t._isReqLuckList=!1,0==e.code){var i=e.data,n=i.items,o=n.length;if(1>o)return;t._curPage=i.page,t._totalPage=i.total_pages;for(var a=0;o>a;++a)n[a].id=n[a].lotteryid,t._addLuckItem(n[a]);t._updateLuckHistory()}}))},t.prototype._updateLuckHistory=function(){this.getScroller.stopAnimation(),this._dataProvider.source=this._recList,this._dataProvider.refresh()},t.prototype.showHistoryLuck=function(){this.currentState="luck",this._reqLuckHistory()},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t.prototype._showStatusGroup=function(e){this.statusImg.visible=e,this.statusLabel.visible=e},t.prototype._showFailTip=function(e){this.failLabel.visible=e},t.prototype._showJoinGroup=function(e){this.doGroup.visible=e,this.numInput.textDisplay.visible=e},t.prototype._showMyHaveCode=function(e){this.haveBgImg.visible=e,this.haveLabel.visible=e},t.prototype._showThisLuckGroup=function(e){this.thisLuckGroup.visible=e},t.prototype._updateThisLuck=function(e){this.luckUserLabel.text=e.nickname,this.luckInfoLabel.textFlow=(new egret.HtmlTextParser).parse("参加<font color='#BA2E2E'>"+e.count+"</font>次"),this.luckCodeLabel.text="幸运码:"+e.winningcode},t.prototype._updateThisLuckByData=function(e){var t=e;return t.nickname&&t.count&&t.winningcode?(this._updateThisLuck(e),void this._showThisLuckGroup(!0)):void console.log("_updateThisLuckByData==========>",e)},t.updateDetail=function(e,i){var n=t._instance;if(n){if(!n._detailData||i.id!=n._detailData.id||"detail"!=n.currentState)return;console.log("updateDetail==1====>",e,i.id,i.phase,i.statusCode),n._showFailTip(!1),n._showThisLuckGroup(!1),1==e?(n._showJoinGroup(!1),n._showStatusGroup(!0)):2==e?(n._showStatusGroup(!1),n._showJoinGroup(!1),n._showFailTip(!0)):3==e?(n._showStatusGroup(!1),n._detailData.statusCode=0,n._showJoinGroup(!1),n._updateThisLuckByData(i)):4==e?(n._detailData.poll=i.poll,n._detailData.code=i.code,n._updateAllJoinCount(),n._updateMyCode(i.code)):5==e&&-1==n._detailData.statusCode&&n.showDetail(i)}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLotteryDetail.prototype,"CCDDZPanelLotteryDetail");var CCDDZLuckItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.orderLabel.text="第"+t.phase+"期",this.timeLabel.textFlow=(new egret.HtmlTextParser).parse("<font color='#333333'>"+t.enddate+"结束</font>"),this.userLabel.text=t.nickname,this.numLabel.textFlow=(new egret.HtmlTextParser).parse("参加<font color='#BA2E2E'>"+t.poll+"</font>次"),this.luckCodeLabel.text="幸运码:"+t.winningcode},t}(eui.ItemRenderer);__reflect(CCDDZLuckItem.prototype,"CCDDZLuckItem");var CCDDZPanelLotteryMyRec=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLotteryMyRecSkin,this._isReqRecList=!1,this._recList=[],this._recIdPhaseList={},this._curPage=0},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},t.prototype._initEvent=function(){this.btn_close.addClickListener(this._onTouchClose,this,!1)},t.prototype._initUI=function(){this.recList.dataProvider=this._dataProvider=new eui.ArrayCollection,this.recList.itemRenderer=CCDDZMyLottryRecItem},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this.recScroller[t](egret.Event.CHANGE,this._onListScroll,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._onAddToStage=function(e){this._initEvent()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype.show=function(){this.popup(),this._showEmptyTip(!1),this._reqRecHistory()},t.prototype._showEmptyTip=function(e){this.emptyGroup.visible=e},t.prototype._onListScroll=function(e){var t=this.recScroller.viewport.scrollV+this.recScroller.height;t>=this.recScroller.viewport.contentHeight&&this._totalPage>this._curPage&&this._reqRecHistory(this._curPage+1)},t.prototype._addRecItem=function(e){var t=e.id,i=e.phase;this._recIdPhaseList[t]=this._recIdPhaseList[t]||{};var n=this._recList,o=n.length,a=0;if(this._recIdPhaseList[t][i]){if(a=this._recIdPhaseList[t][i].idx,a+1>o)return;n[a]=e}else a=o,this._recIdPhaseList[t][i]={idx:a},n.push(e)},t.prototype._reqRecHistory=function(e){var t=this;if(void 0===e&&(e=0),!this._isReqRecList){this._isReqRecList=!0;var i=CCDDZMainLogic.instance.selfData.uid;ccddzwebService.getDoLotteryRec(i,e,function(e){if(t._isReqRecList=!1,0==e.code){var i=e.data,n=i.items,o=n.length;if(1>o)return void(t._recList.length<1&&t._showEmptyTip(!0));t._curPage=i.page,t._totalPage=i.total_pages;for(var a=0;o>a;++a)n[a].id=n[a].lotteryid,t._addRecItem(n[a]);t._updateMyRec()}})}},t.prototype._updateMyRec=function(){var e=this._recList.length;return 1>e?void this._showEmptyTip(!0):(this._showEmptyTip(!1),this.recScroller.stopAnimation(),this._dataProvider.source=this._recList,void this._dataProvider.refresh())},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t.updateOneInfo=function(e){var i=t._instance;if(i){1==e.statusCode&&(e.status_cn="流拍");for(var n=i._dataProvider.source,o=n.length,a=0;o>a;++a)if(n[a].id==e.id&&n[a].phase==e.phase)return i._recIdPhaseList[e.id][e.phase]=e,i._dataProvider.source[a]=e,void i._dataProvider.itemUpdated(e)}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLotteryMyRec.prototype,"CCDDZPanelLotteryMyRec");var CCDDZMyLottryRecItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.recItemGroup.addClickListener(this._onClickItem,this,!1),this.haveBgImg.addClickListener(this._onClickHaveCode,this,!1),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._onClickItem=function(){},t.prototype._onRemovedToStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._showHaveCode=function(e){this.haveBgImg.visible=e,this.haveLabel.visible=e},t.prototype._onClickHaveCode=function(){CCDDZPanelLotteryCode.getInstance().show(1,this.data.code_list)},t.prototype._showLuck=function(e){this.luckBgImg.visible=e,this.arrImg.visible=e,this.luckUserLabel.visible=e,this.luckCodeLabel.visible=e},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=(CCGlobalGameConfig.getCfgByField("red_coin_lottery_config"),this.data);this.statusLabel.text=t.status_cn,this.timeLabel.text=t.enddate+"结束",this.titLabel.textFlow=(new egret.HtmlTextParser).parse("<font color='#BA2E2E'size=24>"+t.c_rewarddes+"</font>【第"+t.phase+"期】"),t.code_list&&t.code_list.length>0?(this.haveLabel.text="我有"+t.code_list.length+"个夺宝码>>",this._showHaveCode(!0)):this._showHaveCode(!1),t.winningcode&&t.winninguid_nick?(this.luckCodeLabel.text="幸运码:"+t.winningcode,this.luckUserLabel.text=t.winninguid_nick,this._showLuck(!0)):this._showLuck(!1)},t}(eui.ItemRenderer);__reflect(CCDDZMyLottryRecItem.prototype,"CCDDZMyLottryRecItem");var CCDDZPanelLucky=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelLuckySkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._onTouchClose=function(){this._addListener(!1),this._clearShowTime(),this._clearStepTime(),this.dealAction()},t.prototype._initClick=function(){this.btnClose.addClickListener(this._onTouchClose,this),this.chouGrp.addClickListener(this._clickLucky,this),this.ruleImg.addClickListener(this._clickRule,this)},t.prototype._addListener=function(e){var t="addEventListener";e||(t="removeEventListener"),ccserver[t](CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetRewRep,this)},t.prototype._onRecvGetRewRep=function(e){var t=e.data;(7==t.optype||8==t.optype||12==t.optype||13==t.optype)&&(0==t.result||null==t.result?7==t.optype||12==t.optype||13==t.optype?t.strreward?(this._rewInfo=t.strreward.split(":"),this._rewInfo&&this._rewInfo.length>=2?(this._hasLuckNum||(this._hasLuckNum=0),this._hasLuckNum+=1,"app"==this.currentState&&(CCDDZMainLogic.instance.selfData.setHasTodayAppLucky(),this._setLeftLukyInfo(this._luckyCfg.dayMax-this._hasLuckNum)),this._beginLottery()):console.error("_onRecvGetRewRep-2->",t)):console.error("_onRecvGetRewRep-1->",t):8==t.optype&&t.params&&t.params.length>=1&&(this._shouldStart=!1,this._hasLuckNum=t.params[0],this._shouldStart&&this._clickLucky()):2==t.result?CCDDZAlert.show("有游戏未结束"):CCDDZAlert.show("请稍后重试，result:"+t.result))},t.prototype._initLight=function(){for(var e="cc_lucky_light2",t=0;52>t;++t)e=t%2==1?"cc_lucky_light1":"cc_lucky_light2",this["lightImg"+t].source=e},t.prototype._initCost=function(){var e,t=this._luckyCfg,i=t.cost.id,n=t.cost.num;0==i?e="cc_icon_gold2":3==i&&(e="cc_icon_diamond"),this.costTypeImg.source=e,this.numLabel.text=n},t.prototype._initItem=function(){for(var e=this._luckyCfg,t=e.rew,i=t.length,n=0,o=0,a="",r=0;i>r;++r)o=Number(t[r].id),n=Number(t[r].num),a="",this["itemImg"+r].source="lucky_"+o,1==o?n/=100:2==o&&(a="小时"),this["itemNLabel"+r].text="x"+n+a},t.prototype._showGoldNotEnough=function(e){var t=this;CCDDZAlert.show("金豆不足"+e+"，是否前往商城购买？",1,function(e){"confirm"==e?CCDDZPanelExchange2.instance.show(0):t._onTouchClose()})},t.prototype._showNotVip=function(){var e=this;CCDDZAlert.show("您还未成为VIP用户，是否前往充值获取抽奖机会？",1,function(t){"confirm"==t&&(e._onTouchClose(),CCDDZPanelExchange2.instance.show(1))})},t.prototype._clickLucky=function(){if("app"==this.currentState){var e=CCalien.Native.instance;if(!e.isNative&&(e.isNative||"iOS"!=egret.Capabilities.os||e.isWXMP))return void CCDDZAlert.show("登录APP端才能抽奖，是否确定下载？",0,function(e){"confirm"==e&&CCGlobalGameConfig.downApp()})}if(this._inLucky)return void CCDDZToast.show("抽奖中。。。");var t=CCDDZMainLogic.instance.selfData,i=this._luckyCfg,n=i.cost.id,o=i.cost.num,a=t.getCurVipLevel();if(this._destIdx>=0&&this._destIdx<=9&&(this["itemBgImg"+this._destIdx].source="cc_lucky_nor"),isNaN(this._hasLuckNum)){if(this._shouldStart=!0,"lucky"==this.currentState)return void ccserver.reqLuckyInfo();if("vip"==this.currentState){if(1>a)return void this._showNotVip();var r=t.getTodayVipLucky();if(r.hasLuck)return void CCDDZToast.show("今日抽奖已达"+i.dayMax+"次上限！");if(!r.inTime){var s=this._luckyCfg.hours,c=s[0],h=s[1];return c>12&&(c-=12),h>12&&(h-=12),void CCDDZToast.show("免费抽奖每晚"+c+"点到"+h+"点开放，VIP有一次免费抽奖机会。")}}else if("app"==this.currentState){var l=t.noTodayAppLucky();if(!l)return void CCDDZToast.show("今日抽奖已达"+i.dayMax+"次上限！")}}if(this._hasLuckNum>=i.dayMax)return void CCDDZToast.show("今日抽奖已达"+i.dayMax+"次上限！");if(0==n){var u=t.getGold();if(o>u)return this._showGoldNotEnough(o)}var p=7;"vip"==this.currentState?p=12:"app"==this.currentState&&(p=13),ccserver.reqLucky(p)},t.prototype._clearStepTime=function(){egret.clearTimeout(this._timeId)},t.prototype._clearShowTime=function(){egret.clearTimeout(this._showTime)},t.prototype._clickRule=function(){var e,t=this._luckyCfg,i=t.cost.id;0==i?e="金豆":3==i&&(e="钻石");var n="1)抽奖1次消耗"+t.cost.num+e+"，每日限抽"+t.dayMax+"次，今日剩余"+(t.dayMax-this._hasLuckNum)+"次。\n2)奖励领取直接到账，如显示不及时，可退出重新登录刷新。\n3)概率公示：奖杯&钻石（"+t.coin+"）、金豆（"+t.gold+"）、记牌器（"+t.recorder+"）。\n";CCDDZAlert.show(n,0,null,"left")},t.prototype._runNextStep=function(e){var t=this;this._clearStepTime(),this._curSelNum+=1,this._timeId=egret.setTimeout(function(){var i=t._curSelNum%10,n=i-1;if(t["itemBgImg"+i].source="cc_lucky_sel",-1==n&&(n=9),t["itemBgImg"+n].source="cc_lucky_nor",t._curSelNum<=10)e+=-30;else if(t._curSelNum<=40)e+=-40;else if(t._curSelNum>=60&&t._curSelNum<=t._minSelNum)e+=20;else if(t._curSelNum>t._minSelNum&&(e+=100,t._destIdx==i))return void(t._showTime=egret.setTimeout(function(){t._endLottery()},t,1e3));40>=e?e=40:e>=3e3&&(e=3e3),t._runNextStep(e)},this,e)},t.prototype._beginLottery=function(){this._curSelNum=0;var e=this._luckyCfg.rew,t=e.length;this._destIdx=-1,this._inLucky=!0;for(var i=0;t>i;++i)if(e[i].id==this._rewInfo[0]&&e[i].num==this._rewInfo[1]){this._destIdx=i;break}return-1==this._destIdx?void console.error("_beginLottery---------------->",this._rewInfo):(this._minSelNum=60+this._destIdx-5,this._clearShowTime(),this.itemBgImg0.source="cc_lucky_sel",void this._runNextStep(200))},t.prototype._endLottery=function(){this._inLucky=!1,this._showGetReward(),this._clearStepTime(),this._clearShowTime()},t.prototype._showGetReward=function(){var e=(o={},o[0]="金豆x{0}",o[1]="奖杯x{0}",o[2]="记牌器x{0}小时",o[3]="钻石x{0}",o),t=Number(this._rewInfo[0]),i=e[t];if(i){var n=Number(this._rewInfo[1]);1==t&&(n/=100),i=i.replace("{0}",n),CCDDZAlert.show("恭喜获得:"+i)}var o},t.prototype._setLeftLukyInfo=function(e){this.numLabel.text="剩余"+e+"次"},t.prototype.show=function(e){this.popup(),this._shouldStart=!1,this._inLucky=!1,this._hasLuckNum=void 0;var t;if(0==e?(this._luckyCfg=CCGlobalGameConfig.getCfgByField("custom.luckyCfg"),this.currentState="lucky",t=CCGlobalGameConfig.getCfgByField("webCfg.luck"),this._initCost()):1==e?(this._luckyCfg=CCGlobalGameConfig.getCfgByField("custom.vipLuckyCfg"),this._luckyCfg.hours=this._luckyCfg.hourRange.split("|"),t=CCGlobalGameConfig.getCfgByField("webCfg.vip"),this.currentState="vip"):2==e&&(this._luckyCfg=CCGlobalGameConfig.getCfgByField("custom.appLuckyCfg"),t=CCGlobalGameConfig.getCfgByField("webCfg.appLucky"),this.currentState="app"),this.validateNow(),"app"==this.currentState){var i=CCDDZMainLogic.instance.selfData.noTodayAppLucky();i||this._setLeftLukyInfo(0)}this.timeLabel.text="活动时间:"+t.time,this._initClick(),this._initLight(),this._initItem(),this._addListener(!0),0==e&&ccserver.reqLuckyInfo()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelLucky.prototype,"CCDDZPanelLucky");var CCDDZPanelMail=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t.skinName=panels.CCDDZPanelMailSkin,t}return __extends(t,e),t.getInstance=function(){return void 0==this._instance&&(this._instance=new t),this._instance},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZIRContainer,this.list.dataProvider=this._dataProvider=new eui.ArrayCollection(CCDDZMailService.instance.source),this._initEvent()},t.prototype.addListener=function(){this.list.addEventListener(egret.Event.CHANGE,this.onSelectItem,this),this.mailScroller.addEventListener(egret.Event.CHANGE,this._onListScroll,this),CCDDZMailService.instance.addEventListener(CCGlobalEventNames.MAIL_LIST_REFRESH,this.onMailListRefresh,this)},t.prototype.removeListener=function(){this.list.removeEventListener(egret.Event.CHANGE,this.onSelectItem,this),CCDDZMailService.instance.removeEventListener(CCGlobalEventNames.MAIL_LIST_REFRESH,this.onMailListRefresh,this)},t.prototype._onListScroll=function(e){this.mailScroller.viewport.scrollV>=this.mailScroller.height&&CCDDZMailService.instance.shouldLoadMore()},t.prototype.onSelectItem=function(e){var t=this,i=this.list.selectedItem;this.tipOpenMailItem(i),egret.callLater(function(){t.list.selectedIndex=-1},this)},t.prototype.tipOpenMailItem=function(e){if(CCDDZPanelMailDetails.getInstance().show(e),0==e.status){if(e.attachment&&e.attachment.length>0)return;CCDDZMailService.instance.openMail(e.id)}},t.prototype.onMailListRefresh=function(e){var t=CCDDZMailService.instance;this._dataProvider.source=t.source,this._dataProvider.refresh(),t.source.length<=0?this._showNoMail(!0):this._showNoMail(!1)},t.prototype._showNoMail=function(e){this.noMailGroup.visible=e},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.show=function(){this.popup(),this.addListener(),this._dataProvider.refresh(),CCDDZMailService.instance.source.length<=0?this._showNoMail(!0):this._showNoMail(!1)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMail.prototype,"CCDDZPanelMail");var CCDDZMailItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(e){this._data=e,0==e.status?this.currentState="new":this.currentState="read",this.title_label.text=e.title,this.time_label.text=CCalien.TimeUtils.tsToDateString(e.sendtime)},t.states=["new","read"],t}(eui.Component);__reflect(CCDDZMailItem.prototype,"CCDDZMailItem"),window.CCDDZMailItem=CCDDZMailItem;var CCDDZPanelMailDetails=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.getInstance=function(){return void 0==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){this.skinName=panels.CCDDZPanelMailDetailsSkin},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._initEvent(),this.goodsList.itemRenderer=CCDDZMailGoodsItem,this.goodsList.dataProvider=this._goodsData=new eui.ArrayCollection},t.prototype._onClickGetRew=function(){return 5==this._mailData.type?void CCDDZPanelExchange2.instance.show(5):void(this._canGetReward&&CCDDZMailService.instance.getReward(this._mailData.id))},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.getImg.addClickListener(this._onClickGetRew,this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.show=function(e){this._mailData=e,this.popup(),this.content_label.text=e.content,this._goodsData.source=e.attachment,this._canGetReward=!1,e.attachment&&e.attachment.length>0?2!=e.status?(this.getImg.source="cc_room_get",this.getImg.touchEnabled=!0,this._canGetReward=!0):(this.getImg.source="cc_room_getGray",this.getImg.touchEnabled=!1):this.getImg.visible=!1,5==this._mailData.type&&(this.getImg.source="cc_room_get",this.getImg.touchEnabled=!0,this._canGetReward=!0,this.getImg.visible=!0)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMailDetails.prototype,"CCDDZPanelMailDetails");var CCDDZMailGoodsItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.goodsItem.setData(t)},t}(eui.ItemRenderer);__reflect(CCDDZMailGoodsItem.prototype,"CCDDZMailGoodsItem");var CCDDZPanelMatch9GetRew=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t._isShow=!1,t}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatch9GRew},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},t.prototype._initDefaut=function(){var e=0;this.rank_bitmap.text="",this.get_label.text="";for(var t=0;3>t;++t)e=t+1,this["name"+e+"_label"].text="",this["turn1_"+e+"label"].text="",this["turn2_"+e+"label"].text="",this["turn3_"+e+"label"].text="",this["turn4_"+e+"label"].text=""},t.prototype._initEvent=function(){this.getRew_img.addClickListener(this._onClickGetRew,this),this._enableEvent(!0);CCalien.CCDDZEventManager.instance},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onAddToStage=function(){CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._onClickGetRew=function(){CCDDZAlert.show("领取奖励："+this.get_label.text+" 成功",0,function(){ccserver.playing||CCalien.CCDDZSceneManager.instance.currentSceneName!=CCGlobalSceneNames.ROOM&&CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,null,CCalien.CCDDZsceneEffect.CCDDFade,null,null,!1,CCGlobalSceneNames.LOADING)}),this.dealAction(),CCDDZBagService.instance.refreshBagInfo()},t.prototype._initByData=function(e,t){if(t){var i=0,n="",o=0,a=t.resultInfo,r=t.params[0];this.rank_bitmap=r;var s=CCDDZMatchService.getRewardStringByRank(e,r,"");this.get_label.text=s;for(var c=0;c<a.length;++c)i=c+1,o=a[c].params[0]+a[c].params[1]+a[c].params[2],n=CCDDZBase64.decode(a[c].nickname),this["name"+i+"_label"].text=n.substr(0,4),this["turn1_"+i+"label"].text=a[c].params[0],this["turn2_"+i+"label"].text=a[c].params[1],this["turn3_"+i+"label"].text=a[c].params[2],this["turn4_"+i+"label"].text=o}},t.prototype.show=function(e,t){this.popup(null,!0,{alpha:0}),this._isShow=!0,this._initByData(e,t)},t.prototype.isShow=function(){return this._isShow},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatch9GetRew.prototype,"CCDDZPanelMatch9GetRew");var CCDDZPanelMatch9Info=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatch9Info},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},t.prototype._initDefaut=function(){for(var e=1;4>e;e++)this["turn"+e+"_label"].visible=!1,this["turn"+e+"_1label"].text="",this["turn"+e+"_2label"].text="",this["turn"+e+"_3label"].text=""},t.prototype._initEvent=function(){this._enableEvent(!0);CCalien.CCDDZEventManager.instance},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onAddToStage=function(){CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype.show=function(e){this.popup(this.dealAction.bind(this),!0,{alpha:0}),this._initByData(e)},t.prototype._initByData=function(e){if(e)for(var t=1,i=0;i<e.length;++i)t=e[i].round,-1==e[i].aver?(this["turn"+t+"_2label"].text="正在统计..",this["turn"+t+"_3label"].text=""):(this["turn"+t+"_2label"].text=e[i].aver||0,this["turn"+t+"_3label"].text=e[i].score||0),this["turn"+t+"_label"].visible=!0,this["turn"+t+"_1label"].text=e[i].change||0},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatch9Info.prototype,"CCDDZPanelMatch9Info");var CCDDZPanelMatchCountDown=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchCountDownSkin
},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButtons.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},t.prototype.onGrpButtonsTap=function(e){var t;switch(e.target.name){case"reward_intro":t=CCGlobalGameConfig.getMatchConfigById(this.roomInfo.matchId),CCDDZPanelMatchIntro.instance.show(lang.match_title_reward_intro,t.reward);break;case"match_intro":t=CCGlobalGameConfig.getMatchConfigById(this.roomInfo.matchId),CCDDZPanelMatchIntro.instance.show(lang.match_title_match_intro,t.des);break;case"close":this.dealAction();break;case"cancel":CCDDZMatchService.instance.cancelMatch(this.roomInfo)}},t.prototype.show=function(e){this.popup(),this.roomInfo=e,this.labTitle.text=e.name,this.labReward.text=e.masterReward;var t=ccserver.tsNow,i=CCDDZMatchService.getNextTurn(e),n=i.nextTs;this._updateSignNum(0),ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),ccserver.getMatchSignUpInfo(e.matchId),this._timer=CCDDZCountDownService.register(n-t,this.onTimer.bind(this))},t.prototype.close=function(){e.prototype.close.call(this),CCDDZCountDownService.unregister(this._timer),egret.clearTimeout(this.matchinforeqTick),ccserver.removeEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this)},t.prototype.onTimer=function(e){this.labCD.text=CCalien.TimeUtils.timeFormat(e,"{2}:{1}:{0}")},t.prototype._updateSignNum=function(e){this.sign_label.text="已报名人数："+e+"人"},t.prototype.onMatchSignUpInfoRep=function(e){var t=e.data;t&&t.matchid==this.roomInfo.matchId&&t.signup_cnt&&t.signup_cnt>0&&1==t.is_signup&&(this._updateSignNum(t.signup_cnt),this.matchinforeqTick=egret.setTimeout(function(){this.roomInfo&&this.roomInfo.matchId&&ccserver.getMatchSignUpInfo(this.roomInfo.matchId)},this,1e5))},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchCountDown.prototype,"CCDDZPanelMatchCountDown");var CCDDZPanelMatchIntro=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchIntroSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},t.prototype.onBtnCloseTap=function(e){this.dealAction()},t.prototype.show=function(e,t){this.popup(this.dealAction.bind(this)),this.info_scroller.viewport.scrollV=0,this.info_scroller.viewport.validateNow(),this.labTitle.text=e,"string"==typeof t?this.labContent.text=t:this.labContent.text=t.join("\n")},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchIntro.prototype,"CCDDZPanelMatchIntro");var CCDDZPanelMatchNotice=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t._matchTopNotify=CCalien.CCDDZUtils.parseColorTextFlow(lang.match_notice_alert),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchNoticeSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnCancelMatch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelMatchTap,this)},t.prototype.onGrpButtonTap=function(e){this.dealAction(e.target.name)},t.prototype.onBtnCancelMatchTap=function(e){CCDDZMatchService.instance.cancelMatch(this.roomInfo),this.dealAction(e.target.name)},t.prototype.show=function(e,t){void 0===t&&(t=30),this.popup(),this.roomInfo=e,this._matchTopNotify[1].text=this.roomInfo.name,this._timer=CCDDZCountDownService.register(t,this.onTimer.bind(this))},t.prototype.close=function(){e.prototype.close.call(this),CCDDZCountDownService.unregister(this._timer)},t.prototype.onTimer=function(e){this._matchTopNotify[3].text=e.toString(),this.labContent.textFlow=this._matchTopNotify},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchNotice.prototype,"CCDDZPanelMatchNotice");var CCDDZPanelMatchResult=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchResultSkin,this.list.itemRenderer=CCDDZRankItem,this.list.dataProvider=this._dataProvide=new eui.ArrayCollection,this._switchTimer||(this._switchTimer=new egret.Timer(2e3),this._switchTimer.addEventListener(egret.TimerEvent.TIMER,this.switchGroup,this),this._switchTimer.start())},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelTap,this),this.btnGetReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelTap,this),this.grpRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSwitch,this),this.grpResult.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSwitch,this)},t.prototype.clickSwitch=function(){this.switchGroup(null),this._switchTimer.reset(),this._switchTimer.start()},t.prototype.switchGroup=function(e){this.grpRank.visible=!this.grpRank.visible,this.grpResult.visible=!this.grpResult.visible},t.prototype.onBtnCancelTap=function(e){this.rewardContent&&this.rewardContent.length>0&&(CCalien.Native.instance.isNative?CCDDZAlert.show("领取奖励："+this.rewardContent+" 成功"):CCDDZAlert.show("领取奖励："+this.rewardContent+" 成功")),this.dealAction()},t.prototype.onAlertBtn=function(e,t){if("cancel"==e){var i=this.rank;204==this.matchId?i+=200:201==this.matchId&&(i+=500);var n=CCDDZShareImageManager.instance.getShareScene(CCDDZShareImageManager.GAME_TYPE_MATCH,i);CCDDZShareImageManager.instance.start(ccserver.uid,n)}},t.prototype._formatRewInfo=function(e){var t=(r={},r[0]="金豆:{0}",r[1]="奖杯:{0}",r[2]="记牌器:{0}小时",r[101]="表情免费次数:{0}次",r),i=function(e,i){var n=i;return t[e]?(1==e&&(n=i/100),t[e].replace("{0}",n)):void 0},n=e.split("|"),o="";if(n[0]){var a=n[0].split(":");a&&(o=i(Number(a[0]),Number(a[1])))}return o;var r},t.prototype.show=function(e,t){this._callback=t,this.popup(),this.grpRank.visible=!1,this.grpResult.visible=!0,this.matchId=e.matchid,this.rank=e.params[0];var i=CCDDZMainLogic.instance.selfData;this.labPlayerName.text=i.nickname+":",this.labMatchName.text=lang.format(lang.id.match_result_match_name,ccserver.roomInfo.name);var n=e.params[0];this.labNumber.text=n.toString(),this.labPraise.text=lang.match_result_praise[n>3?2:n>1?1:0];var o="";o=e.strreward?this._formatRewInfo(e.strreward):CCDDZMatchService.getRewardStringByRank(ccserver.roomInfo,n,"\n"),this.rewardContent=o,o?(this.labReward.text=o,this.btnConfirm.visible=!1,this.btnGetReward.visible=!0):(this.btnConfirm.visible=!0,this.btnGetReward.visible=!1),this.grpReward.visible=!!o,this._dataProvide.source=e.rankInfo},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchResult.prototype,"CCDDZPanelMatchResult");var CCDDZRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.rank.text=this.data.rank,this.score.text=null==this.data.score?0:this.data.score,this.data.inmatch&&1==this.data.inmatch?(this.inmatch.visible=!0,this.score.visible=!1):(this.inmatch.visible=!1,this.score.visible=!0),this.nickName.text=CCDDZBase64.decode(this.data.nickname),CCDDZMainLogic.instance.selfData.uid==this.data.uid?(this.rank.textColor=16770048,this.nickName.textColor=16770048,this.score.textColor=16770048):(this.rank.textColor=16777215,this.nickName.textColor=16777215,this.score.textColor=16777215)},t}(eui.ItemRenderer);__reflect(CCDDZRankItem.prototype,"CCDDZRankItem");var CCDDZPanelMatchRevive=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchRevive},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onTouchClose,this),this.reviveImg.addClickListener(this._onClickReviveImg,this),this.giveUpImg.addClickListener(this._onClickGiveUpImg,this)},t.prototype._onClickReviveImg=function(){this._reviveFunc&&this._reviveFunc()},t.prototype._onClickGiveUpImg=function(){this._giveUpFunc&&this._giveUpFunc()},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.updateCountDown=function(e){this.reviveLabel.text="("+e+")"},t.prototype.setRankSub=function(e){this.rankLabel.text=""+e},t.prototype.setReviveCost=function(e){this.costLabel.text=""+e},t.prototype.show=function(e,t){this._giveUpFunc=t,this._reviveFunc=e,this.popup(null,!0,{alpha:0})},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchRevive.prototype,"CCDDZPanelMatchRevive");var CCDDZPanelMatchSignUp=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t._count=0,t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchSignUpSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButtons.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},t.prototype.onGrpButtonsTap=function(e){var t;switch(e.target.name){case"reward_intro":t=CCGlobalGameConfig.getMatchConfigById(this.roomInfo.matchId),CCDDZPanelMatchIntro.instance.show(lang.match_title_reward_intro,t.reward);break;case"match_intro":t=CCGlobalGameConfig.getMatchConfigById(this.roomInfo.matchId),CCDDZPanelMatchIntro.instance.show(lang.match_title_match_intro,t.des);break;case"close":this.dealAction();break;case"sign_up":var i=0,n=this.paySelect[this.ddPay.index];"number"!=typeof n.data&&(i=n.data.id),CCDDZMatchService.instance.signUp(this.roomInfo,i)}},t.prototype.show=function(e){this.popup(),this.roomInfo=e,this.labTitle.text=e.name,this.labLimit.text=e.limitText,this.labAmount.text=e.signUpCountTest,this.labSignUpCount.text=e.todayCountText;var t=this.paySelect=[{text:e.entryMoneyText,data:e.entryMoney}],i=CCDDZGoodsManager.instance.getGoodsById(e.ticketId),n=CCDDZBagService.instance.getItemCountById(e.ticketId)>0&&!!i;if(i&&t.push({text:i.name+"x"+e.entryTicket,data:i,disable:!n}),this.ddPay.items=t,n&&(this.ddPay.index=1),e.hasOwnProperty("startDate")){var o=CCDDZMatchService.getNextTurn(e);this.labLimit.text=e.limitText=o.nextTime,ccserver.getMatchSignUpInfo(e.matchId)}else this.labLimit.text=e.limitText,this._timer=egret.setInterval(this.fakeAmount,this,1e3)},t.prototype.close=function(){e.prototype.close.call(this),this._timer>0&&egret.clearInterval(this._timer)},t.prototype.fakeAmount=function(){var e=Math.ceil((this.roomInfo.maxPlayer-this._count)/2);this._count+=CCalien.MathUtils.makeRandomInt(e+1),this.labAmount.text=this._count+lang.people,this._count>=this.roomInfo.maxPlayer&&(this._count=0)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchSignUp.prototype,"CCDDZPanelMatchSignUp");var CCDDZPanelMatchWaiting=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchWaitingSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._isShow=!1,this.btnCancelMath.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelMatchTap,this)},t.prototype.onMatchSignUpInfoRep=function(e){var i=e.data;i&&i.matchid==this.roomInfo.matchId&&i.signup_cnt&&i.signup_cnt>0&&(this.progressBar.value=i.signup_cnt,1==i.is_signup&&(this.matchinforeqTick=egret.setTimeout(function(){t.instance.roomInfo&&t.instance.roomInfo.matchId&&ccserver.getMatchSignUpInfo(t.instance.roomInfo.matchId)},this,5e3)))},t.prototype.onBtnCancelMatchTap=function(e){this.dealAction(),CCDDZMatchService.instance.cancelMatch(this.roomInfo)},t.prototype.show=function(e){var t=this;this.popup(),this.roomInfo=e,this._isShow=!0,this.labReward.text=e.masterReward,this.progressBar.maximum=e.maxPlayer,this.labTitle.text=this.roomInfo.name,this.roomInfo.forbidRobot&&1==this.roomInfo.forbidRobot?(this.progressBar.value=1,ccserver.addEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),ccserver.getMatchSignUpInfo(e.matchId)):(this.progressBar.value=0,this.fakeCount=CCalien.MathUtils.split(e.maxPlayer,CCalien.MathUtils.makeRandomInt(e.startTimeout[1],e.startTimeout[0])),this._timer=egret.setInterval(function(){t.progressBar.value+=t.fakeCount.pop()||0},this,1e3))},t.prototype.close=function(){e.prototype.close.call(this),this._isShow=!1,egret.clearTimeout(this.matchinforeqTick),ccserver.removeEventListener(CCGlobalEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),this._timer>0&&(egret.clearInterval(this._timer),this._timer=0)},t.prototype.isWaitingShow=function(){return this._isShow},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchWaiting.prototype,"CCDDZPanelMatchWaiting");var CCDDZPanelMatchWaitingInner=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMatchWaitingInnerSkin,this._tf=CCalien.CCDDZUtils.parseColorTextFlow(lang.match_get_in)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._wave=new CCalien.CCDDZWave(this.lab,2e3,function(e){return{alpha:.3+.5*(Math.sin(e)+1)*.7}},0,!1)},t.prototype.show=function(e){void 0===e&&(e=-1),console.log("CCDDZPanelMatchWaitingInner.show:"+e),this.popup(null,!1,{alpha:0}),0>e?this.lab.text=lang.match_waiting_other_desk_2:0==e?this.lab.text=lang.match_waiting_other_desk_1:(this._tf[1].text=e+"",this.lab.textFlow=this._tf),this._wave.play()},t.prototype.close=function(){e.prototype.close.call(this),this._wave&&this._wave.stop()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMatchWaitingInner.prototype,"CCDDZPanelMatchWaitingInner");var CCDDZPanelModifyNickname=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=CCalien.CCDDZEventManager.instance;t.registerOnObject(this,ccserver,CCGlobalEventNames.USER_MODIFY_USER_INFO_REP,this.onModifyUserInfoRep,this),t.registerOnObject(this,this.grpButtons,egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},t.prototype.onGrpButtonsTap=function(e){switch(e.target.name){case"close":this.dealAction();break;case"confirm":var t=0,i=this.tiNickname.text,n=CCalien.CCDDZUtils.getByteLen(i);if(4>n||n>16?t=5:CCDDZUtils.regNickname(i)&&(t=1001),t>0)this.labErr.text=lang.modify_profile_err[t];else{this.labErr.text="";var o={nickname:CCDDZBase64.encode(i)};ccserver.modifyUserInfo(o),this._submitData=o}}},t.prototype.onModifyUserInfoRep=function(e){var t=e.data,i=t.rname||0;0==i?(CCDDZMainLogic.instance.selfData.initData(this._submitData),CCDDZToast.show(lang.modify_profile_err[0]),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.MY_USER_INFO_UPDATE),this.dealAction()):this.labErr.text=lang.modify_profile_err[t.rname]},t.prototype.show=function(){this.skinName||(this.skinName=panels.CCDDZPanelModifyNicknameSkin),this.popup(),this.labErr.text="",CCalien.CCDDZEventManager.instance.enableOnObject(this)},t.prototype.close=function(){e.prototype.close.call(this),CCalien.CCDDZEventManager.instance.disableOnObject(this)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelModifyNickname.prototype,"CCDDZPanelModifyNickname");var CCDDZPanelMonday=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMondaySkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.btnClose[t](egret.TouchEvent.TOUCH_TAP,this._onClickClose,this),this.buyMondayGrp.addClickListener(this._onClickBuyMonday,this)},t.prototype._onAddToStage=function(){this._enableEvent(!0)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),t._instance=null},t.prototype.show=function(){this.popup(this.dealAction.bind(this))},t.nullInstance=function(){var e=t._instance;e&&e.close(!0),t._instance=null},t.prototype._onClickClose=function(e){this.close()},t.prototype._onClickBuyMonday=function(){CCDDZRechargeService.instance.doRecharge("10046")},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMonday.prototype,"CCDDZPanelMonday");var CCDDZPanelMonthCard=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMonthCardSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.btnClose[t](egret.TouchEvent.TOUCH_TAP,this._onClickClose,this),this.buyCard1.addClickListener(this._onClickBuyCard1,this),this.buyCard2.addClickListener(this._onClickBuyCard2,this)},t.prototype._onAddToStage=function(){this._enableEvent(!0)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),t._instance=null},t.prototype.show=function(){this.popup(this.dealAction.bind(this)),this._refreshMonthCardInfo()},t.prototype._onClickClose=function(e){this.close()},t.prototype._onClickBuyCard1=function(){console.log("_onClickBuyCard1"),this._onBuyMonthCard(1)},t.prototype._onClickBuyCard2=function(){console.log("_onClickBuyCard2"),this._onBuyMonthCard(2)},t.prototype._onBuyMonthCard=function(e){var t=1==e?"10043":"10044";CCDDZRechargeService.instance.doRecharge(t)},t.prototype._refreshMonthCardInfo=function(){if(t._instance){var e=CCDDZMainLogic.instance.selfData.monthcardinfo,i=1e3*e[1],n=1e3*e[2];0==i&&(i=946656e6),0==n&&(n=946656e6);var o=ccserver.getServerStamp();if(o>i)this.lblCard1.visible=!1;else{var a=CCDDZUtils.getTimeStampDiff(o,i,"day");this.lblCard1.visible=!0,1>i&&(this.lblCard1.visible=!1);var r=CCDDZUtils.formatDate(i,"（至yyyy年MM月dd日 hh:mm）"),s="月卡时间可累计，有效期剩余<font color='0x33AB30'>"+Math.floor(a)+"</font>天\n"+r,c=(new egret.HtmlTextParser).parser(s);this.lblCard1.textFlow=c}if(o>n)this.lblCard2.visible=!1;else{var a=CCDDZUtils.getTimeStampDiff(o,n,"day");this.lblCard2.visible=!0,1>n&&(this.lblCard2.visible=!1);var r=CCDDZUtils.formatDate(n,"（至yyyy年MM月dd日 hh:mm）"),s="月卡时间可累计，有效期剩余<font color='0x33AB30'>"+Math.floor(a)+"</font>天\n"+r,c=(new egret.HtmlTextParser).parser(s);this.lblCard2.textFlow=c}}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMonthCard.prototype,"CCDDZPanelMonthCard");var CCDDZPanelNewYear=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelNewYear},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._formatSignRew(),this._initUI(),this._initEvent()},t.prototype._formatSignRew=function(){for(var e=CCGlobalGameConfig.getNewYearGift(),t=e.rwd_aft_rec,i="",n=null,o={},a=1;8>a;++a){i=t[a],n=i.split("|");var r=n[0].split(":"),s=n[1].split(":");o[a]=(c={},c[0]={id:r[0],num:r[1]},c[1]={id:s[0],num:s[1]},c)}this._signRew=o;var c},t.prototype._enableTouch=function(e,t,i){void 0===i&&(i=!1),e.touchEnabled=t,i?e.source="cc_common_btn_orange2_gray":e.source="cc_common_btn_orange3"},t.prototype._initEvent=function(){var e=this;this._enableEvent(!0),this.ruleImg.addClickListener(this._onClickRule,this,!1),this.buyImg.addClickListener(this._onClickBuy,this,!1),this.getImg.addClickListener(this._onClickGet,this,!1);for(var t=function(t){i["_onClickIdx"+t]=function(){e._onClickIdxBgImg(t)},i["bgImg"+t].addClickListener(i["_onClickIdx"+t],i,!1)},i=this,n=1;8>n;++n)t(n);ccserver.addEventListener(CCGlobalEventNames.USER_RECHARGE_RESULT_NOTIFY,this._onRechargeResultNotify,this)},t.prototype._onRechargeResultNotify=function(e){var t=e.data;if(0==t.result){var i=t.productid;CCGlobalGameConfig.getNewYearGift();10021==i&&ccserver.isInNewyearGiftReqNewYear(),CCDDZPanelChoosePay.remove()}},t.prototype._onClickIdxBgImg=function(e){this._setSelectSignIdx(e);var t=0,i=CCDDZMainLogic.instance.selfData.getNewYearLoginInfo();i.length>=10&&(t=i[2+e]),0==t&&e<i[1]&&(t=2),this._setGetBtnByState(t)},t.prototype.updateGift=function(){if("gift"==this.currentState){var e=CCDDZMainLogic.instance.selfData,t=e.getNewYearGiftBuyCount(),i=e.getNewYearLoginInfo();if(this._buyCount=t,t>=1){if(this._enableTouch(this.buyImg,!1,!0),i&&i.length>=10){var n=i[1],o=i[0];i[1]>i[2]&&(n=i[2],o=i[2+n],1!=o&&(o=2)),this._setSelectSignIdx(n),this._setGetBtnByState(o)}}else this._enableTouch(this.buyImg,!0),this._setSelectSignIdx(1),this._setGetBtnByState(0)}},t.prototype.showGift=function(){this.currentState="gift",this.scroller.stopAnimation(),this.scroller.viewport.scrollV=0,this.scroller.viewport.validateNow(),this.updateGift()},t.prototype.showWork=function(){this.currentState="work"},t.prototype._setGetBtnByState=function(e){var t=this,i=(n={},n[0]={text:"未领取",png:"cc_common_btn_orange3",func:function(){t._enableTouch(t.getImg,!0)}.bind(t)},n[1]={text:"已领取",png:"cc_common_btn_orange2_gray",func:function(){t._enableTouch(t.getImg,!1,!0)}.bind(t)},n[2]={text:"已过期",png:"cc_common_btn_orange2_gray",func:function(){t._enableTouch(t.getImg,!1,!0)}.bind(t)},n);i[e]&&(this.getLabel.text=i[e].text,this.getImg.source=i[e].png,i[e].func());var n},t.prototype._setSelectSignIdx=function(e){var t="0xB83600",i="cc_newyear_bg2",n="0xFFFFFF",o="cc_newyear_bg3",a=n,r=o;this._selIdx=e,console.log("_setSelectSignIdx=========>",e);for(var s=1;8>s;++s)e==s?(a=n,r=o,this.item1Label.text="金豆x"+this._signRew[s][0].num):(a=t,r=i),this["bgImg"+s].source=r,this["label"+s].textColor=a},t.prototype._onClickRule=function(){var e="1）新年礼盒购买即得100000金豆和100钻石;\n2）连续7天登录奖励包含20996金豆和7天记牌器;\n3）7天登录中，如果某日未登录游戏，奖励不可领取\n4）购买活动持续4天，签到奖励自购买当日起至第七日结束;\n ";CCDDZAlert.show(e,0,null,"left")},t.prototype._onClickBuy=function(){CCGlobalGameConfig.getNewYearGift();CCDDZRechargeService.instance.doRecharge("10021")},t.prototype._onClickGet=function(){var e=CCDDZMainLogic.instance.selfData.getNewYearLoginInfo();return this._buyCount<1?void CCDDZAlert.show("您还未购买新年礼盒,不可领取奖励!"):this._selIdx>e[1]?void CCDDZAlert.show("未到领取奖励时间!"):void ccserver.reqGetNewYearLoginRew()},t.prototype._initUI=function(){},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.updateWork=function(e){this.workComponent.updateInfo(e)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelNewYear.prototype,"CCDDZPanelNewYear");var CCDDZPanelNotice=function(e){function t(){var t=e.call(this)||this;return t._lastSelectIdx=0,t._labels=[],t}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelNoticeSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent(),egret.setTimeout(this.setShowRedExchange,this,100)},t.prototype._initEvent=function(){this._enableEvent(!0),this.wxCp_img.addClickListener(this._onClickCopyKeFuWX,this),this.publicCp_img.addClickListener(this._onClickCopyPublicWX,this),this.leftLabelList.addEventListener(egret.Event.CHANGE,this._onSelectItem,this)},t.prototype._initUI=function(){this._labels=[{tit:"健康声明",sel:!1,"new":!1,cb:this._onClickGameNotice.bind(this)}],this.leftLabelList.itemRenderer=CCDDZActListItem,this.leftLabelList.dataProvider=this._leftLabelsDataProvider=new eui.ArrayCollection(this._labels)},t.prototype._changeSelectByIdx=function(e){var t=this,i=e;this._leftLabelsDataProvider.source[this._lastSelectIdx].sel=0,this._leftLabelsDataProvider.itemUpdated(this._labels[this._lastSelectIdx]),this._lastSelectIdx=i;var n=this.leftLabelList.getChildAt(i),o=n.localToGlobal(.5*n.width,.5*n.height),a=this.infoGroup.globalToLocal(o.x,o.y);this.arrImg.y=a.y;for(var r=0;r<this._leftLabelsDataProvider.length;++r)if(r==i){this._leftLabelsDataProvider.source[r].sel=!0,this._leftLabelsDataProvider.itemUpdated(this._labels[i]);break}this._labels[i].cb(),egret.callLater(function(){t.leftLabelList.selectedIndex=-1},this)},t.prototype._onSelectItem=function(){this._changeSelectByIdx(this.leftLabelList.selectedIndex)},t.prototype._onClickCopyKeFuWX=function(){var e=CCGlobalGameConfig.wxService;"delegate"==this.currentState&&(e=CCGlobalGameConfig.extendWX),CCGlobalGameConfig.copyText(this,e,"微信号("+e+")")},t.prototype._onClickCopyPublicWX=function(){var e="好手气斗地主";CCGlobalGameConfig.copyText(this.parent,e,"公众号("+e+")")},t.prototype._onScrollTop=function(){this.content_scroller.stopAnimation(),this.content_scroller.viewport.scrollV=0,this.content_scroller.viewport.validateNow()},t.prototype._showRedExchange=function(){this._onScrollTop(),this.info_label.text='兑换流程：\n    1、在游戏商城中兑换奖励\n    2、关注"好手气斗地主"公众号\n    3、2)	点击、"确定"，直接领取 \r\r\n如有疑问请添加客服微信！',this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="cc_notice_red_tit"},t.prototype.setShowRedExchange=function(){this._changeSelectByIdx(0)},t.prototype._onClickRedExchange=function(){this._showRedExchange()},t.prototype._showDelegate=function(){this._onScrollTop(),this.info_label.text="一大波福利正在袭来！！！",this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="cc_notice_delegate_tit"},t.prototype._onClickDelegate=function(){this._showDelegate()},t.prototype._showCopyWX=function(e){this.wxCp_img.visible=e,this.publicCp_img.visible=e},t.prototype.showGameNotice=function(){this._onScrollTop(),this.info_label.text="亲爱的玩家：\n    好手气斗地主一直致力于打造一个公平公正、绿色健康的游戏环境，为保证玩家的利益，好手气斗地主运营团队听取各方面意见并经过多次讨论后，郑重决定通过封号等措施，全面打击非正常游戏的行为。具体措施如下：\n一、非正常游戏的行为包括但不限于:\n    1、安装使用会影响好好手气斗地主游戏平衡的第三方软件；\n    2、利用游戏漏洞采用盗刷金豆等方式，谋取游戏利益、破坏游戏的公平秩序\n    3、对局中打伙牌、故意输赢等；\n    4、在游戏内传播宣扬淫秽、色情、赌博、暴力，或者教唆犯罪等信息。\n（好手气运营团队根据监测到的游戏数据对以上行为进行独立自主的判断，从而判定是否构成非正常游戏行为。）\r\r\n二、处罚力度包括但不限于：\n    凡是监测出非正常游戏的行为，将视情节严重程度取消该游戏账号由此获得的相关奖励，并作出暂时或永久性的禁止登陆、删除游戏账号及游戏数据等处理措施；情节严重的将移交有关行政管理机关给予行政处罚，或者追究刑事责任。\n希望玩家朋友们注意保护自己的账号安全。同时也号召大家对非正常游戏账号开展举报（游戏过程中，如发现非正常账号，则可点击对方头像，点击“举报”按钮进行举报），我们一起为净化游戏环境共同努力。\r\r\r\n                  本通知自发布之日（即2017年10月27日）起生效。\n",this.content_scroller.scrollPolicyV="on",this._showCopyWX(!1),this.noticeFlag_img.source="cc_notice_game_tit"},t.prototype._onClickGameNotice=function(){this.showGameNotice()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelNotice.prototype,"CCDDZPanelNotice");var CCDDZPanelPhoneLogin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelPhoneLoginSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initEvent(),this.unid="",this.sk="",this._nIntervalId=-1,this.phoneLabel.prompt=ccddz_phonePrompt,this.phoneLabel.maxChars=ccddz_phoneLen,this.codeLabel.maxChars=ccddz_codeLen,this.codeLabel.prompt=ccddz_codePrompt,this._showCountLabel(!1),this._initPhone(),this._resetCountNum(),this.phoneLabel.inputType=egret.TextFieldInputType.TEL,this.codeLabel.inputType=egret.TextFieldInputType.TEL},t.prototype._initPhone=function(){var e=CCGlobalUserData.instance.getLocalPhone();e&&11==e.length&&(this.phoneLabel.text=e)},t.prototype._checkPhone=function(e){var t=e;return t&&11==t.length?!0:!1},t.prototype._checkCode=function(e){var t=e;return t?!0:!1},t.prototype._showCountLabel=function(e){this.countLabel.visible=e},t.prototype._resetCountNum=function(){this._nCountTime=60},t.prototype._clearCountInterval=function(){-1!=this._nIntervalId&&egret.clearInterval(this._nIntervalId),this._nIntervalId=-1},t.prototype._startCountDown=function(){var e=this;this._clearCountInterval(),this._resetCountNum(),this.countLabel.text=""+this._nCountTime,this._showCountLabel(!0),this._nIntervalId=egret.setInterval(function(){return e._nCountTime<1?(e._clearCountInterval(),e._showCountLabel(!1),void e._showGetCode(!0)):(e._nCountTime-=1,void(e.countLabel.text=""+e._nCountTime))},this,1e3)},t.prototype._showGetCode=function(e){this.getCodeImg.visible=e},t.prototype._onClickGetCode=function(){var e=this.phoneLabel.text;if(!this._checkPhone(e))return void CCDDZToast.show(ccddz_phonePrompt);var t=(i={},i[0]="验证码发送成功",i[1e3]="参数错误",i[2015]="手机号码错误",i[2018]="发送失败",i[2019]="请稍后重试",i);
ccddzwebService.getCode(this.phoneLabel.text,function(e){var i=e.code,n=t[i]||"验证码发送失败";CCDDZToast.show(n)}),this._showGetCode(!1),this._startCountDown();var i},t.prototype._enableTouch=function(e,t){e.touchEnabled=t},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.getCodeImg.addClickListener(this._onClickGetCode,this),this.loginImg.addClickListener(this._onClickLogin,this)},t.prototype._onClickLogin=function(){var e=this.phoneLabel.text,t=this.codeLabel.text,i=this;if(!i._checkPhone(e))return void CCDDZToast.show(ccddz_phonePrompt);if(!i._checkCode(t))return void CCDDZToast.show(ccddz_codePrompt);i._enableTouch(i.loginImg,!1);var n=CCalien.Native.instance,o=n.getUrlArg();o.share_sk&&(i.sk=o.share_sk),ccddzwebService.loginByPhone(e,t,i.unid,i.sk,function(e){i.dealAction(),CCLoginService.instance.onVerifyResponse(e)}.bind(i))},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._clearCountInterval(),this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype.show=function(){this.popup(null,!0,{alpha:0})},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelPhoneLogin.prototype,"CCDDZPanelPhoneLogin");var CCDDZPanelPlayerInfo=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t._cleanData(),t._browData=new CCGlobalBrowData,t}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelPlayerInfo},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initTouchEvent(),this._initDefault()},t.prototype._cleanData=function(){this._browData=null,t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";0==e&&(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.brow1_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow1Btn,this),this.brow2_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow2Btn,this),this.brow3_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow3Btn,this),this.brow4_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow4Btn,this),this.brow5_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow5Btn,this),this.report_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchReportBtn,this),this.close_btn[t](egret.TouchEvent.TOUCH_TAP,this._onTouchCloseBtn,this),this.coolImg[t](egret.TouchEvent.TOUCH_TAP,this._onTouchCool,this),this.shitImg[t](egret.TouchEvent.TOUCH_TAP,this._onTouchShit,this)},t.prototype._initTouchEvent=function(){this._enableEvent(!0)},t.prototype._initFreeBrow=function(){var e=CCDDZMainLogic.instance.selfData.getFreeBrowCount(),t=!1;e>0&&(t=!0);for(var i=0,n=0;5>n;++n)i=n+1,this["brow"+i+"Gold_img"].visible=!t,this["brow"+i+"Price_img"].visible=!t,this["brow"+i+"Free_img"].visible=t;this.mFLeft_label.visible=t,this.mFLeft_label.text="剩余免费次数:"+e},t.prototype._onTouchCool=function(){ccserver.reqPlayerPraise(this._seatId,1)},t.prototype._onTouchShit=function(){ccserver.reqPlayerPraise(this._seatId,0)},t.prototype._initDefault=function(){this.head_img.mask=this.headMask_img,this._initFreeBrow()},t.prototype._setNick=function(e){this.nick_label.text=e},t.prototype._setGames=function(e){this.games_label.text=""+e},t.prototype._setGold=function(e){var t=CCDDZUtils.getFormatGold(e);this.gold_label.text=t},t.prototype._setWinRate=function(e){this.winRate_label.text=e},t.prototype._setHeadImg=function(e){var t=e;e&&-1!=e.indexOf("http://")&&(t=e.replace("http://","https://")),this.head_img.source=t},t.prototype._setRedBeg=function(e){this.redbeg_label.text=e.toFixed(1).toString()},t.prototype._onBuyBrow=function(e){if(this._uid!=ccserver.uid){this.dealAction();var t=this._browData.getBrowCostGold(e);if(t){var i=CCDDZMainLogic.instance.selfData.getFreeBrowCount(),n=CCDDZMainLogic.instance.selfData.getGold()||0;return 0>i&&t>n?CCDDZImgToast.instance.show(this,lang.browNoGold):void(this._browData.checkCanBuyByBrowId(e)&&(this._browData.startCDByBrowId(e),ccserver.send(CCGlobalEventNames.GAME_OPERATE_REQ,{optype:5,params:[this._seatId,e]})))}}},t.prototype._onTouchBrow1Btn=function(){var e=CCGlobalBrowData.BrowID.BROW_666;this._onBuyBrow(e)},t.prototype._onTouchBrow2Btn=function(){var e=CCGlobalBrowData.BrowID.BROW_TORTISE;this._onBuyBrow(e)},t.prototype._onTouchBrow3Btn=function(){var e=CCGlobalBrowData.BrowID.BROW_TOMATO;this._onBuyBrow(e)},t.prototype._onTouchBrow4Btn=function(){var e=CCGlobalBrowData.BrowID.BROW_LOVE;this._onBuyBrow(e)},t.prototype._onTouchBrow5Btn=function(){var e=CCGlobalBrowData.BrowID.BROW_GOOD;this._onBuyBrow(e)},t.prototype._onReportRet=function(e){e&&(0==e.code?CCDDZImgToast.instance.show(this,lang.reportSucc):30001==e.code&&CCDDZImgToast.instance.show(this,lang.repeatReport))},t.prototype._onTouchReportBtn=function(){if(this._uid!=ccserver.uid){var e=CCGlobalUserData.instance.getToken(),t=ccserver.uid,i=1,n=ccserver.getRoomId(),o=ccserver.getTableId(),a=this._uid;ccddzwebService.reportUser(e,t,i,n,o,a,this._onReportRet.bind(this))}},t.prototype._showBrowAndReport=function(e){this.browAndReport_group.visible=e},t.prototype._onTouchCloseBtn=function(){this.dealAction()},t.prototype._formatPraiseNum=function(e){var t=""+e;if(e>1e5){var i=t.substr(0,t.length-3),n=i.length,o=i.substr(n-1);t=i.substr(0,n-1)+"."+o+"万"}return t},t.prototype._initPraise=function(e){if(e&&e.length>=1&&(this.coolLabel.text=this._formatPraiseNum(e[0]),e.length>=2)){this.shitLabel.text=this._formatPraiseNum(e[1]);for(var t=e.slice(2)||[],i=t.length,n=0;i>n;++n)n+1==this._seatId&&this._uid!=ccserver.uid&&(1==t[n]?(this.coolImg.source="cc_pinfo_a",this.shitImg.source="cc_pinfo_b",this.coolImg.touchEnabled=!1,this.shitImg.touchEnabled=!1):0==t[n]?(this.coolImg.source="cc_pinfo_b",this.shitImg.source="cc_pinfo_a",this.coolImg.touchEnabled=!1,this.shitImg.touchEnabled=!1):(this.coolImg.source="cc_pinfo_b",this.shitImg.source="cc_pinfo_b",this.coolImg.touchEnabled=!0,this.shitImg.touchEnabled=!0))}},t.prototype._chagePraise=function(e){var t=this.shitLabel,i=this.shitImg;1==e&&(t=this.coolLabel,i=this.coolImg);var n=Number(t.text);n+=1,t.text=""+n,i.source="cc_pinfo_a",this.coolImg.touchEnabled=!1,this.shitImg.touchEnabled=!1},t.prototype.show=function(e){this._uid=e.uid,this._seatId=e.seatId,this._setNick(e.nick),this._setGold(e.gold),this._setGames(e.game),this._setWinRate(e.winRate),this._setRedBeg(e.redBeg),this._setHeadImg(e.head),this._initPraise(e.praise),ccserver.isMatch&&this._uid!=ccserver.uid&&this._hidePlayerInfo(),this._uid==ccserver.uid&&(this.coolImg.touchEnabled=!1,this.shitImg.touchEnabled=!1),this.popup(this.dealAction.bind(this),!0,{alpha:0})},t.prototype._hidePlayerInfo=function(){this.nick_label.text="***",this.gold_label.text="***",this.games_label.text="***",this.winRate_label.text="***",this.redbeg_label.text="***",this.head_img.source="cc_icon_head_default"},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),this._cleanData()},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.onPraise=function(e,i){var n=t._instance;n&&n._seatId==e&&n._chagePraise(i)},t.onPlayerLeave=function(e){var i=t._instance;i&&i._seatId==e&&i.close()},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelPlayerInfo.prototype,"CCDDZPanelPlayerInfo");var CCDDZPanelProfile=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelProfileSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=CCalien.CCDDZEventManager.instance;t.registerOnObject(this,ccserver,CCGlobalEventNames.USER_MODIFY_USER_INFO_REP,this.onModifyUserInfoRep,this),t.registerOnObject(this,this.rbBoy,egret.TouchEvent.TOUCH_TAP,this.onRbBoyTap,this),t.registerOnObject(this,this.rbGirl,egret.TouchEvent.TOUCH_TAP,this.onRbGirlTap,this),t.registerOnObject(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),t.registerOnObject(this,this.avatar,egret.TouchEvent.TOUCH_TAP,this.onBtnPickAvatarTap,this)},t.prototype.onModifyUserInfoRep=function(e){var t=e.data;switch(t.result){case 0:CCDDZMainLogic.instance.selfData.initData(this._submitData),this.updateProfile();break;case 1:break;case 2:}},t.prototype.onRbBoyTap=function(e){var t={sex:1};ccserver.modifyUserInfo(t),this._submitData=t},t.prototype.onRbGirlTap=function(e){var t={sex:2};ccserver.modifyUserInfo(t),this._submitData=t},t.prototype.updateProfile=function(){var e=CCDDZMainLogic.instance.selfData;this.avatar.imageId=e.imageid,this.labNickname.text=e.nickname,this.labGold.text=CCDDZUtils.currencyRatio(e.gold),this.labID.text=e.fakeuid+"",this.avatar.setVipLevel(e.getCurVipLevel()),this.rbBoy.selected=0==e.sex||1==e.sex,this.rbGirl.selected=2==e.sex},t.prototype.onBtnCloseTap=function(e){this.dealAction()},t.prototype.onBtnPickAvatarTap=function(e){},t.prototype.onPanelSelectAvatarResult=function(e,t){"select"==e&&ccserver.modifyUserInfo(this._submitData={imageid:t.url})},t.prototype.show=function(e){this.popup(this.dealAction.bind(this)),this._callback=e,this.updateProfile(),CCalien.CCDDZEventManager.instance.enableOnObject(this)},t.prototype.close=function(){e.prototype.close.call(this),CCalien.CCDDZEventManager.instance.disableOnObject(this)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelProfile.prototype,"CCDDZPanelProfile");var CCDDZPanelRealName=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelRealName},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.nameInput.prompt=ccddz_namePrompt,this.nameInput.maxChars=ccddz_nameLen,this.idInput.maxChars=ccddz_idLen,this.idInput.prompt=ccddz_idPrompt,this.nameInput.inputType=egret.TextFieldInputType.TEXT,this.currentState="act",this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.commitBtn.addClickListener(this._onClickCommitNow,this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._checkName=function(e){var t=this.nameInput.text;return t?!0:(e&&CCDDZToast.show("姓名不能为空"),!1)},t.prototype._checkID=function(e){var t=this.idInput.text;return t?(t.length<18&&e&&CCDDZToast.show("请输入18位身份证号码"),!0):(e&&CCDDZToast.show("身份证号码不能为空"),!1)},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._onClickCommitNow=function(){if(this._checkName(!0)&&this._checkID(!0)){var e=this.nameInput.text,i=this.idInput.text;ccddzwebService.postRealNameAuth(e,i,function(e){0==e.code&&t.nullInstance(),CCDDZToast.show(e.message)})}},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1),t._instance=null},t.prototype.show=function(){this.currentState="single",this._initEvent(),this.popup(null,!0,{alpha:0})},t.nullInstance=function(){var e=t._instance;e&&e.close(!0),t._instance=null},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelRealName.prototype,"CCDDZPanelRealName");var CCDDZPanelRechargeTips=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelRechargeTipsSkin,CCalien.Native.instance.isNative?this.currentState="phone":this.currentState="withMatch"},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExchangeClick,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRechargeClick,this),this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareClick,this),this.btnMatch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onToMatch,this)},t.prototype.show=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._callback=e,this.popup()},t.prototype.onExchangeClick=function(){ccserver._isInDDZ?this.openDDZShop():CCDDZPanelExchange2.instance.show(0),this.close()},t.prototype.onRechargeClick=function(){ccserver._isInDDZ?this.openDDZShop():CCDDZPanelExchange2.instance.show(),this.close()},t.prototype.openDDZShop=function(e){void 0===e&&(e=0),ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:e})},t.prototype.onToMatch=function(){CCalien.CCDDZSceneManager.instance.show(CCGlobalSceneNames.ROOM,{jump2match:!0}),this.close()},t.prototype.onShareClick=function(){CCalien.Native.instance.isNative?CCGlobalWxHelper.doNativeShare():CCalien.Native.instance.isWXMP||CCalien.Native.instance.isAli()||CCGlobalWxHelper.shareForPhone(),this.close()},t.prototype.onBtnCloseClick=function(e){this._callback&&this._callback("confirm"),this.dealAction()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelRechargeTips.prototype,"CCDDZPanelRechargeTips");var CCDDZPanelReviveBag=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t._type=0,t._buyInfo={goods:null,send:null,productId:0,currentState:"",cfg:null},t}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelReviveSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0);var e="addClickListener";this.close_img[e](this._onTouchClose,this),this.buyGrp[e](this._onClickBuyRevive,this),this.moreGrp[e](this._onClickMoreDiscount,this)},t.prototype._onClickMoreDiscount=function(){CCDDZPanelExchange2.instance.show(1)},t.prototype._updateUI=function(){if(this.currentState=this._buyInfo.currentState,this.validateNow(),"fullDiamondNoRecorder"==this.currentState||"fullDiamondHasRecorder"==this.currentState){var e="钻石不足,购买{0}元礼包,补充到{1}钻";e=e.replace("{0}",this._buyInfo.cfg.money);var t=Number(this._buyInfo.goods[1]);this._buyInfo.send&&this._buyInfo.send.length>=1&&this._buyInfo.send[0][0]==this._buyInfo.goods[0]&&(t+=Number(this._buyInfo.send[0][1])),e=e.replace("{1}",""+t),this.diamoneTip_label.text=e}else{var i="金豆",n="";2==this._room.roomFlag&&(i="钻石",n="颗");var o=CCDDZUtils.getFormatGold(this._limitNum),e="抱歉，您的"+i+"少于{0}"+n+"，无法继续游戏，您可以通过以下方式复活。";this.diamoneTip_label.text=e.replace("{0}",o);var a=this._buyInfo;if(this.item1Num_label.text="x"+CCDDZUtils.getFormatGold(a.goods[1]),a.send&&(this.item2Num_label.text="x"+CCDDZUtils.getFormatGold(a.send[0][1]),a.send.length>=2)){var r=a.send[1][1]+"小时";a.send[1][1]%24==0&&(r=a.send[1][1]/24+"天"),this.item3Num_label.text=r}}this.moneyLabel.text=this._buyInfo.cfg.money+"元"},t.prototype._onTouchClose=function(){this.dealAction(),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.CLOSE_REVIVE_PANEL)},t.prototype._onClickBuyRevive=function(){ccserver._isInDDZ?ccserver.ddzDispatchEvent(1,"",{type:5,productID:this._buyInfo.productId}):CCDDZRechargeService.instance.doRecharge(this._buyInfo.productId)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.prototype._onBagRefresh=function(){if(2==this._type){var e=CCDDZBagService.instance.getItemCountById(3);e>=this._limitNum&&(this.dealAction(),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BUY_REVIVE_SUCC))}},t.prototype._onMyInfoUpdate=function(){if(1==this._type){var e=CCDDZMainLogic.instance.selfData.gold;e>=this._limitNum&&(this.dealAction(),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BUY_REVIVE_SUCC))}},t.prototype._splitRechareInfo=function(e){if(this._buyInfo=null,e){var t=e.goods.split(":"),i=null,n=[];if(e.addition_goods&&(i=e.addition_goods.split("|")),i){for(var o=i.length,a=0;o>a;++a)n.push(i[a].split(":"));this._buyInfo={goods:t,send:n}}else this._buyInfo={goods:t}}},t.prototype._initRechargeInfo=function(){var e=0,t=this._room.roomID,i="";if(1==this._room.roomFlag){var n=CCDDZMainLogic.instance.selfData.getTodayBuyGoldReviveNum();1001==t?(e=10035,i="noRecorderGold",1>n&&(e=10034,i="hasRecorderGold")):1002==t?(e=10037,i="noRecorderGold",1>n&&(e=10036,i="hasRecorderGold")):8001==t?(e=10039,i="noRecorderGold",1>n&&(e=10038,i="hasRecorderGold")):8002==t&&(i="noRecorderGold",e=10041,1>n&&(e=10040,i="hasRecorderGold"))}else if(2==this._room.roomFlag){var o=CCDDZMainLogic.instance.selfData,a=o.getTodayBuyDiamondReviveNum(),r=o.hasBuyOneDiaRevive(),s=o.hasBuyThreeDiaRevive();1e3==t?r?s?(e=10026,i="noRecorderDiamond",1>a&&(e=10029,i="hasRecorderDiamond")):(e=10025,i="fullDiamondNoRecorder",1>a&&(e=10033,i="fullDiamondHasRecorder")):(e=10024,i="fullDiamondNoRecorder",1>a&&(e=10032,i="fullDiamondHasRecorder")):8003==t?(e=10051,i="noRecorderDiamond",1>a&&(e=10050,i="hasRecorderDiamond")):8004==t?(e=10028,i="noRecorderDiamond",1>a&&(e=10031,i="hasRecorderDiamond")):1006==t&&(e=10027,i="noRecorderDiamond",1>a&&(e=10030,i="hasRecorderDiamond"))}e||console.error("----------------------->");var c=CCGlobalGameConfig.getReviveBagInfo(e);this._splitRechareInfo(c),this._buyInfo.cfg=c,this._buyInfo.productId=e,this._buyInfo.currentState=i},t.prototype.show=function(e){this._room=e,this._limitNum=e.minScore,this._type=e.roomFlag,this.popup(),this._initRechargeInfo(),this._updateUI();var t=CCalien.CCDDZEventManager.instance;t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this._onMyInfoUpdate,this),CCalien.CCDDZEventManager.instance.enableOnObject(this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelReviveBag.prototype,"CCDDZPanelReviveBag");var CCDDZPanelSelectAvatar=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelSelectAvatarSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.list.itemRenderer=CCDDZIRAvatar;for(var t=[],i=1;8>=i;i++)t.push(i);this.list.dataProvider=new eui.ArrayCollection(t),this.list.addEventListener(egret.Event.CHANGE,this.onSelectAvatar,this),this.btnUpload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnUploadTap,this)},t.prototype.onBtnUploadTap=function(e){},t.prototype.onSelectAvatar=function(e){var t=this;this.dealAction("select",{url:"head"+this.list.selectedItem+".png"}),egret.callLater(function(){t.list.selectedIndex=-1},this)},t.prototype.show=function(e){this._callback=e,this.popup(this.dealAction.bind(this)),this.currentState=CCalien.Native.instance.isNative?"upload":"select"},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelSelectAvatar.prototype,"CCDDZPanelSelectAvatar");var CCDDZIRAvatar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.imgAvatar.source="icon_head"+this.data},t}(eui.ItemRenderer);__reflect(CCDDZIRAvatar.prototype,"CCDDZIRAvatar");var CCDDZPanelSetting=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelSettingSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),"true"==lang.debug&&(this.btnLogout.visible=!0),this.labVersion.text="v:"+CCalien.Native.instance.makeVersionString(ccddz_version)},t.prototype.onGrpButtonTap=function(e){switch(e.target.name){case"logout":CCDDZMainLogic.instance.stop(),CCGlobalUserData.instance.clearData(["id"]),CCDDZMainLogic.instance.showLogin(),this.dealAction();break;case"bind_weixin":break;case"music":CCalien.CCDDZSoundManager.instance.switchMusic();break;case"effect":CCalien.CCDDZSoundManager.instance.switchEffect();break;case"vibrate":CCalien.CCDDZSoundManager.instance.switchVibrate();break;case"report":CCDDZReportor.instance.toReportPage();break;case"help":""==this.labGz.text&&(this.labGz.textFlow=(new egret.HtmlTextParser).parser(lang.ddz_gz)),this.grpGz.visible=!0,this.grpButton.visible=!1}},t.prototype.onBtnCloseTap=function(e){this.labWxService.visible?(this.labWxService.visible=!1,this.grpButton.visible=!0):this.grpGz.visible?(this.grpGz.visible=!1,this.grpButton.visible=!0):this.dealAction()},t.prototype.show=function(){this.popup(this.dealAction.bind(this)),this.switchMusic.selected=!CCalien.CCDDZSoundManager.instance.musicMute,this.switchEffect.selected=!CCalien.CCDDZSoundManager.instance.effectMute,this.switchVibrate.selected=!CCalien.CCDDZSoundManager.instance.vibrateMute,this.btnLogout.enabled=!ccserver.playing,this.labWxService.visible=!1,this.grpGz.visible=!1,this.grpButton.visible=!0},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelSetting.prototype,"CCDDZPanelSetting");var CCDDZPanelShare=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelShareSkin},Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){this.parent&&this.close()},t.prototype.show=function(){this.popup()},t.prototype.showInviteFriend=function(){this.desc_img.source="cc_room_share2",this.show()},t.prototype.sendGameToFriend=function(){this.desc_img.source="cc_room_share1",this.show()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelShare.prototype,"CCDDZPanelShare");var CCDDZPanelSign=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelSign,this._signCount=0},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},t.prototype._initDefaut=function(){for(var e=CCDDZMainLogic.instance.selfData.getNationalGetLoginRewDay(),t=null,i=1;8>i;++i)t=this["state"+i+"_img"],e>=i?t.visible=!0:t.visible=!1},t.prototype._initEvent=function(){this.getRew_img.addClickListener(this._onClickGetRew,this),this.close_img.addClickListener(this._onClickClose,this),this._enableEvent(!0);var e=CCalien.CCDDZEventManager.instance;e.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.NATIONAL_INFO_CHANGE,this._updateByGetRewRep,this)},t.prototype._onClickClose=function(){this.dealAction()},t.prototype._onAddToStage=function(){CCDDZEventManager.instance.enableOnObject(this)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),CCalien.CCDDZEventManager.instance.disableOnObject(this),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),ccserver[t](CCGlobalEventNames.USER_DAY_SIGN_IN_REP,this._onSignInRep,this),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},t.prototype._onSignInRep=function(e){var t=e.data,i=CCDDZMainLogic.instance.selfData;switch(1==t.today&&i.setTodaySigned(!0),t.optype){case 1:this._signCount=t.total_day||0,this._updateSignInfo();break;case 2:if(0==t.result){var n=this._signCount;i.setTodaySigned(!0),this._signCount++,i.signSuccSubSignAddRemin(),CCDDZBagService.instance.refreshBagInfo(),this._updateSignInfo(),this._showGetSuccByIdx(n),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.GOLD_RAIN_EFFECT)}}},t.prototype._onClickGetRew=function(e){ccserver.getSignReward()},t.prototype._updateByGetRewRep=function(){for(var e=this._signCount,t=1;e>=t;++t)this["state"+t+"_img"].visible=!0},t.prototype._updateSignInfo=function(){var e=CCGlobalGameConfig.signInRewardConfig;if(this._signCount<=e.length)for(var t=0;t<this._signCount;++t)this["state"+(t+1)+"_img"].visible=!0;this._initTodayGet()},t.prototype._initTodayGet=function(){var e=CCDDZMainLogic.instance.selfData.isTodayHasSign();e||this._signCount>=7?(this.getRew_img.source="cc_room_getGray",this.getRew_img.touchEnabled=!1):(this.getRew_img.source="cc_room_get",this.getRew_img.touchEnabled=!0)},t.prototype._showGetSuccByIdx=function(e){var t=CCGlobalGameConfig.signInRewardConfig;if(e>=0&&t&&e<t.length){var i=t[e][0];CCDDZPanelGetItems.instance.show(i)}},t.prototype._initItemInfo=function(){for(var e=CCGlobalGameConfig.signInRewardConfig,t=0;t<e.length;++t){for(var i=e[t],n="",o=0;o<i.length;++o){if(n=i[o].count,2==i[o].id)n=i[o].count>=24?i[o].count/24+"天":i[o].count+"小时";else if(0==i[o].id){var a=i[o].count;CCDDZMainLogic.instance.selfData.isSignGoldAddByFRecharge()&&(a+=.2*a);var r=CCalien.Native.instance;(r.isNative||!r.isWXMP&&!r.isAli()&&"iOS"==egret.Capabilities.os)&&(a+=.1*a),n=""+parseInt(""+a)}this["itemNum"+t+"_"+o+"label"].text=n}this["state"+(t+1)+"_img"].visible=!1}},t.prototype.show=function(){this.popup(),this._initItemInfo(),ccserver.getSignInInfo()},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelSign.prototype,"CCDDZPanelSign");var CCDDZPanelSmallGame=function(e){function t(){return e.call(this,CCalien.CCDDZpopupEffect.CCDDFade,{},CCalien.CCDDZpopupEffect.CCDDFade,{})||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelSmallGameSkin,this._self=CCDDZMainLogic.instance.selfData},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.lvGames.dataProvider=this._dataProvide=new eui.ArrayCollection,this.lvGames.itemRenderer=CCDDZSmallGameItem,this.gold.bgImg.source="cc_smallgame_userData_bg",this.diamond.bgImg.source="cc_smallgame_userData_bg",this.avatar.bg_img.source="cc_smallgame_user_img_bg"},t.prototype._addClickEvent=function(){var e="addClickListener";this.close_group[e](this.onClose,this),this.gold[e](this._onClickGold,this),this.diamond[e](this._onClickDiamond,this),this.redExchangeImg[e](this._onClickExchange,this),this.grpRedcoin[e](this._onClickRed,this),this.rechargeGroup[e](this._onClickRecharge,this),this.signBtn[e](this._onClickSign,this),this.keFuBtn[e](this._onClickKefu,this),this.settingBtn[e](this._onClickSetting,this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this)},t.prototype._onClickSetting=function(){CCDDZPanelSetting.instance.show()},t.prototype._onClickSign=function(){CCDDZPanelSign.getInstance().show()},t.prototype._onClickKefu=function(){CCGlobalGameConfig.showKeFu()},t.prototype.onSelectGame=function(e){var t=this;this.lvGames.selectedItem;egret.callLater(function(){t.lvGames.selectedIndex=-1},this)},t.prototype.onClose=function(){this._enableEvent(!1),this.close()},t.prototype.onMyUserInfoUpdate=function(e){void 0===e&&(e=null);var t=e?e.data.userInfoData:this._self,i=CCDDZBagService.instance.getItemCountById(3);this.gold.updateGold(t.gold),this.diamond.updateGold(i),this.avatar.imageId=t.imageid,this.avatar.setVipLevel(t.getCurVipLevel()),t.nickname,this._self.redcoin=CCDDZMainLogic.instance.selfData.redcoin,this.lbRedCoin.text=""+(null==this._self.redcoin?"0.00":CCDDZUtils.exchangeRatio(this._self.redcoin/100,!0))},t.prototype._onClickExchange=function(){CCDDZPanelExchange2.instance.show(CCDDZ_EX_ID_WXRED)},t.prototype._onClickGold=function(){CCDDZPanelExchange2.instance.show()},t.prototype._onClickDiamond=function(){CCDDZPanelExchange2.instance.show(1)},t.prototype._toTop=function(){this.itemInfoScroller.stopAnimation(),this.itemInfoScroller.viewport.scrollV=0},t.prototype._toBottom=function(){this.itemInfoScroller.stopAnimation(),this.itemInfoScroller.viewport.scrollV=.3*this.itemInfoScroller.height},t.prototype._onClickRed=function(){CCDDZPanelExchange2.instance.show(CCDDZ_EX_ID_WXRED)},t.prototype._onClickRecharge=function(){CCDDZPanelExchange2.instance.show()},t.prototype._onBagRefresh=function(){var e=CCDDZBagService.instance.getItemCountById(3);this.diamond.updateGold(e)},t.prototype._toZCJ=function(){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_NIU),ccserver.checkReconnect()},t.prototype._toFFF=function(e){this.onClose(),CCDDZMainLogic.instance.toFFF()},t.prototype._toLLT=function(e){this.onClose(),CCDDZMainLogic.instance.toLLT()},t.prototype._toLLK=function(e){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_LLK),ccserver.checkReconnect()},t.prototype._to2048=function(e){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_2048),ccserver.checkReconnect()},t.prototype._toFFL=function(e){CCDDZMainLogic.instance.setWillToGame(CCDDZ_T_G_FFL),ccserver.checkReconnect()},t.prototype._initGameList=function(){var e=[],t=CCGlobalGameConfig.getRoomCfgFromAll(4001);t.roomIcon="cc_smallgame_game_excite",t.func=this._toZCJ.bind(this,t),e.push(t);var i=CCGlobalGameConfig.getCfgByField("webCfg.fff");if(i&&1==i.status){var n={};n.roomIcon="cc_smallgame_game_turn",n.func=this._toFFF.bind(this,n),e.push(n)}var o=CCGlobalGameConfig.getCfgByField("webCfg.llt");if(o&&1==o.status){var a={};a.roomIcon="cc_smallgame_game_explore",a.func=this._toLLT.bind(this,a),e.push(a)}var r=CCGlobalGameConfig.getRoomCfgFromAll(20001);r.roomIcon="cc_smallgame_game_link",r.func=this._toLLK.bind(this,r),e.push(r);var s=CCGlobalGameConfig.getRoomCfgFromAll(21001);
s.roomIcon="cc_smallgame_game_2048",s.func=this._to2048.bind(this,s),e.push(s);var c=CCGlobalGameConfig.getRoomCfgFromAll(22001);c.roomIcon="cc_smallgame_game_hturn",c.func=this._toFFL.bind(this,c),e.push(c),this._dataProvide.source=e},t.prototype.show=function(){var e=this;CCDDZMainLogic.instance.setScreenLandScape(1280,640),this.popup(),this._addClickEvent(),this._enableEvent(!0),this._initGameList(),CCDDZEventManager.instance.enableOnObject(this),egret.setTimeout(function(){e.onMyUserInfoUpdate()},this,50)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelSmallGame.prototype,"CCDDZPanelSmallGame");var CCDDZSmallGameItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onClickGame=function(){this.data&&this.data.func()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.addClickListener(this.onClickGame,this,!1),this.iconImg.source=t.roomIcon},t}(eui.ItemRenderer);__reflect(CCDDZSmallGameItem.prototype,"CCDDZSmallGameItem");var CCDDZPanelThanksgiving=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelThanksgivingSkin,this._signInfo=[0,0,0],this._buyCount=0},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initEvent(),this._initUI()},t.prototype._initEvent=function(){this._enableEvent(!0),this.buyImg.addClickListener(this._onClickBuyImg,this),this.getImg.addClickListener(this._onClickGetImg,this),ccserver.addEventListener(CCGlobalEventNames.USER_OPERATE_REP,this._onRecvUserOperateRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_RECHARGE_RESULT_NOTIFY,this._onRechargeResultNotify,this)},t.prototype._onRechargeResultNotify=function(e){var t=e.data;if(0==t.result){var i=t.productid;(10018==i||10019==i||10020==i)&&(this._buyCount+=1,this._initBuy())}},t.prototype._onRecvUserOperateRep=function(e){var t=e.data;if(4==t.optype)null==t.result&&t.params&&t.params.length>=6&&(this._buyCount=t.params[0],this._todaySign=t.params[1],this._signInfo=t.params.slice(3),this._initSignInfo(),this._initBuy());else if(6==t.optype&&null==t.result){this._signInfo[t.params[0]-1]=1;for(var i=0;i<this._signInfo.length;++i)1!=this._signInfo[i]&&i<t.params[0]-1&&(this._signInfo[i]=2);this._tipGetSignRewSucc(),this._todaySign=1,this._initSignInfo()}},t.prototype._tipGetSignRewSucc=function(){CCDDZAlert.show("领取成功")},t.prototype._initUI=function(){this.buyImg.setTit("cc_thanks_buy"),this.buyImg.setDisable(),this.getImg.setDisable()},t.prototype._onClickBuyImg=function(){var e="10018";this._buyCount<1?e="10018":this._buyCount<3?e="10019":this._buyCount<6&&(e="10020"),CCDDZRechargeService.instance.doRecharge(e)},t.prototype._onClickGetImg=function(){ccserver.reqThanksSign()},t.prototype._setBuyPro=function(e){this.buyProLabel.text=e},t.prototype._initBuy=function(){this._setBuyPro(this._buyCount+"/6"),this._buyCount>=6?this.buyImg.setDisable():this.buyImg.setEnable()},t.prototype._initSignInfo=function(){1==this._todaySign?this.getImg.setDisable():this.getImg.setEnable();for(var e=0;e<this._signInfo.length;++e)1==this._signInfo[e]?(this["get"+e+"Img"].visible=!0,this["get"+e+"Img"].source="cc_thanks_r"):0==this._signInfo[e]?this["get"+e+"Img"].visible=!1:(this["get"+e+"Img"].visible=!0,this["get"+e+"Img"].source="cc_thanks_w")},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelThanksgiving.prototype,"CCDDZPanelThanksgiving");var CCDDZPanelVip=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return t.STATE_BUY=1,t.STATE_GET=2,t.STATE_HASGET=3,t._stateFunc=(i={},i[t.STATE_BUY]={func:t._setStateBuy.bind(t),clickFunc:t._clickToBuy.bind(t)},i[t.STATE_GET]={func:t._setStateGet.bind(t),clickFunc:t._clickToGet.bind(t)},i[t.STATE_HASGET]={func:t._setStateHasGet.bind(t),clickFunc:t._clickHasGet.bind(t)},i),t;var i}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelVipSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initEvent(),this.levelList.itemRenderer=CCDDZVipLevelItemRender,this.goodsList.itemRenderer=CCDDZVipRewGoodsItemRender,this.vipDataProvider=new eui.ArrayCollection,this.goodsDataProvider=new eui.ArrayCollection,this.levelList.dataProvider=this.vipDataProvider,this.goodsList.dataProvider=this.goodsDataProvider,this.descLlabel.text="充值1元增加1点财富值，财富值每天会自然减少"+this._vipCfg.decline+"。"},t.prototype._initEvent=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},t.prototype._onAddToStage=function(){this._enableEvent(!0),this.arrLeftGrp.addClickListener(this._clickLeft,this),this.arrRightGrp.addClickListener(this._clickRight,this),this.btnClose.addClickListener(this._onTouchClose,this),this.buyGrp.addClickListener(this._onClickBuy,this)},t.prototype._clickToBuy=function(){CCDDZPanelExchange2.instance.show()},t.prototype._clickToGet=function(){ccserver.reqGetVipRew()},t.prototype._clickHasGet=function(){},t.prototype._showGoodsScroller=function(e){this.goodScroller.visible=e},t.prototype._showNoRew=function(e){this.noRewLabel.visible=e},t.prototype._setStateBuy=function(){this.buyImg.source="cc_vip_buy",this.buyGrp.touchEnabled=!0},t.prototype._setStateGet=function(){this.buyImg.source="cc_vip_getRew",this.buyGrp.touchEnabled=!0},t.prototype._setStateHasGet=function(){this.buyImg.source="cc_room_getGray",this.buyGrp.touchEnabled=!1},t.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},t.prototype._setProNum=function(e,t){this.proLabel.text=e+"/"+t;var i=0;i=e>=t?this.proBgImg.width:this.proBgImg.width*(e/t),this.proImg.width=i},t.prototype._setCurLevelTit=function(e){this.levelTit.text=e},t.prototype._showNoRewDesc=function(e){this.noRewDesc.visible=e},t.prototype._showCurLevel=function(e){this.curLevelGrp.visible=e>=1,this.curLevelLabel.text=""+e},t.prototype._showNextLevel=function(e){return e>this._vipCfg.nMax?void(this.nextLevelGrp.visible=!1):(this.nextLevelLabel.text=""+e,void(this.nextLevelGrp.visible=!0))},t.prototype._setCurLevel=function(e){this.curLevelLabel.text=""+e},t.prototype._showArrLeft=function(e){this.arrLeftGrp.visible=e},t.prototype._showArrRight=function(e){this.arrRightGrp.visible=e},t.prototype._showLevelNor=function(e){this.leveNorlTit.visible=e},t.prototype._clickLeft=function(){var e=this.levelList.selectedIndex+1;this._updateUIByLevel(e-1)},t.prototype._clickRight=function(){var e=this.levelList.selectedIndex+1;this._updateUIByLevel(e+1)},t.prototype._onClickBuy=function(){this._stateFunc[this._buyState].clickFunc()},t.prototype._updateUIByLevel=function(e,t){void 0===t&&(t=!0);var i=!0,n=!0;1>=e?(i=!1,e=1):e>=this._vipCfg.nMax&&(n=!1,e=this._vipCfg.nMax),this._showArrLeft(i),this._showArrRight(n);var o=e-1;this._vipScrollDestViewH=740*o,o>this.levelList.selectedIndex?this._vipScrollSpeedDelta=100:this._vipScrollSpeedDelta=-100,this.levelList.selectedIndex=o,t?this._startMove():(this._stopMove(),this._setToDestViewH())},t.prototype._setToDestViewH=function(){this.vipScroll.viewport.scrollH=this._vipScrollDestViewH},t.prototype._startMove=function(){var e=this;this._stopMove(),this._vipScrollInterval=egret.setInterval(function(){e.vipScroll.viewport.scrollH+=e._vipScrollSpeedDelta,e._vipScrollSpeedDelta>0?e.vipScroll.viewport.scrollH>=e._vipScrollDestViewH&&(e._setToDestViewH(),e._stopMove()):e.vipScroll.viewport.scrollH<=e._vipScrollDestViewH&&(e._setToDestViewH(),e._stopMove())},this,20)},t.prototype._stopMove=function(){egret.clearInterval(this._vipScrollInterval)},t.prototype._onTouchClose=function(){this._stopMove(),this.dealAction()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),ccserver[t](CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetRewRep,this)},t.prototype._onRecvGetRewRep=function(e){var t=e.data,i="";if(9==t.optype)if(0==t.result||null==t.result){var n="领取VIP奖励成功!";if(t.strreward){var o="(您的当前等级为<font color='#E10000'>VIP"+CCDDZMainLogic.instance.selfData.getCurVipLevel()+"</font>)",a=(new egret.HtmlTextParser).parser(o),r=CCDDZUtils.parseGoodsString(t.strreward);CCDDZPanelItems.instance.show(n,1710618,r,"",8335360,0,null,"center",a)}this._setStateHasGet()}else i="领取失败:"+t.result,CCDDZAlert.show(i)},t.prototype._formatVipCfg=function(){var e,t=CCGlobalGameConfig.getCfgByField("vip_config"),i=t.upgrade.length,n=t.upgrade;this._vipCfg={nMax:i,info:[],level:{},decline:t.decline};for(var o=0;i>o;++o){var a=CCDDZUtils.parseGoodsString(n[o].reward);e={level:o+1,exp:n[o].exp,rew:a},this._vipCfg.info.push(e),this._vipCfg.level[o+1]=e}},t.prototype.show=function(){this._formatVipCfg(),this.popup();var e,t=CCDDZMainLogic.instance.selfData,i=t.getCurVipLevel(),n=t.getCurExp(),o=i+1;if(o>this._vipCfg.nMax&&(o=this._vipCfg.nMax),this._showCurLevel(i),this._showNextLevel(o),i>=1){if(i>this._vipCfg.nMax)return void console.error("--------------------->",i);e=this._vipCfg.level[o],this._showNoRewDesc(!1),this._showGoodsScroller(!0),this._showLevelNor(!1),this.goodsDataProvider.source=this._vipCfg.level[i].rew,t.hasGetTodayVipRew()?this._buyState=this.STATE_HASGET:this._buyState=this.STATE_GET}else this._showLevelNor(!0),this._showNoRewDesc(!0),this._showGoodsScroller(!1),this._buyState=this.STATE_BUY,e=this._vipCfg.level[1];this._setProNum(n,e.exp),this._stateFunc[this._buyState].func(),this.vipDataProvider.source=this._vipCfg.info,this._updateUIByLevel(i,!1)},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelVip.prototype,"CCDDZPanelVip");var CCDDZVipLevelItemRender=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.levelLabel.text="VIP"+t.level,this.titLabel.text="VIP"+t.level+"等级特权(财富值达到"+t.exp+")",this.avatar.imageId=CCDDZMainLogic.instance.selfData.imageid;for(var i=t.rew,n=i.length,o="",a=0;n>a;++a){var r=CCDDZGoodsManager.instance.getGoodsById(i[a].id);o+=""+(a+1)+".每天领取",2==i[a].id?(o+=i[a].count%60==0?i[a].count/60+"小时":i[a].count+"分钟",o+=r.name+"\n"):o+=i[a].count+r.name+"\n"}this.descLabel.text=o},t}(eui.ItemRenderer);__reflect(CCDDZVipLevelItemRender.prototype,"CCDDZVipLevelItemRender");var CCDDZVipRewGoodsItemRender=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.scaleX=this.scaleY=.9},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.goodsItem.setData(t)},t}(eui.ItemRenderer);__reflect(CCDDZVipRewGoodsItemRender.prototype,"CCDDZVipRewGoodsItemRender");var CCDDZPanelWatchWX=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.skinName=panels.CCDDZPanelWatchWX},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._initUI(),this._initEvent()},t.prototype._initEvent=function(){this._enableEvent(!0),this.watchImg.addClickListener(this._onClickWatch,this)},t.prototype._onClickWatch=function(){CCDDZPanelFollowCourse.instance.show()},t.prototype._initUI=function(){},t.prototype._onTouchClose=function(){this.dealAction()},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),t._instance=null},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.remove=function(){t._instance&&t._instance.close()},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelWatchWX.prototype,"CCDDZPanelWatchWX");var CCDDZPanelMonthCardReward=function(e){function t(){var t=e.call(this,CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},CCalien.CCDDZpopupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t._onAddToStage,t),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.skinName=panels.CCDDZPanelMonthCardRewardSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.btnClose[t](egret.TouchEvent.TOUCH_TAP,this._onClickClose,this),this.btnGet.addClickListener(this._onClickGet,this)},t.prototype._onAddToStage=function(){this._enableEvent(!0)},t.prototype._onRemovedToStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),t._instance=null},t.prototype.show=function(){this.popup(this.dealAction.bind(this)),this._refreshMonthCardInfo()},t.prototype._onClickClose=function(e){this.close()},t.prototype._onClickGet=function(e){var t={optype:11};ccserver.send(CCGlobalEventNames.USER_GET_REWARD_REQ,t),this.close()},t.prototype._refreshMonthCardInfo=function(){if(t._instance){var e=(0==CCDDZMainLogic.instance.selfData.monthcardinfo[4]?0:1e3*CCDDZMainLogic.instance.selfData.monthcardinfo[4],0==CCDDZMainLogic.instance.selfData.monthcardinfo[2]?0:1e3*CCDDZMainLogic.instance.selfData.monthcardinfo[2]),i=ccserver.getServerStamp(),n=Math.ceil(CCDDZUtils.getTimeStampDiff(i,e,"day")),o="剩余<font color='0xE10000'>"+n+"次</font>领奖机会，剩余<font color='0xE10000'>"+10*n+"颗</font>未领取！",a=(new egret.HtmlTextParser).parser(o);this.lblDes.textFlow=a}},t}(CCalien.CCDDZPanelBase);__reflect(CCDDZPanelMonthCardReward.prototype,"CCDDZPanelMonthCardReward");var CCDDZSceneCommon=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZSceneCommonSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=CCalien.Native.instance.getUrlArg();t&&"1"==t.showLog,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onLogTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onLogTouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onLogTouchCancel,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onLogTouchOutSide,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SHOW_TOP_NOTIFY,this.onShowTopNotify,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.HIDE_TOP_NOTIFY,this.onHideTopNotify,this),this.grpTopNotify.y=-50},t.prototype.onLogTouchBegin=function(){var e=this.logBtn;e.touchBegin=!0},t.prototype.onLogTouchMove=function(){},t.prototype.onLogTouchEnd=function(){},t.prototype.onLogTouchCancel=function(){},t.prototype.onLogTouchOutSide=function(){},t.prototype.onShowTopNotify=function(e){var t=e.data;this.grpTopNotify.visible=!0,"string"==typeof t.content?this.labTopNotify.text=t.content:t.content(this.labTopNotify),this.btnTopNotify.visible=t.showButton,t.showButton&&this.btnTopNotify.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTopNotifyTap.bind(this,t.onTap),this);var i=egret.Tween.get(this.grpTopNotify,null,null,!0).to({y:0},200);t.delay&&t.delay>0&&i.wait(t.delay).call(this.hideTopNotify,this)},t.prototype.onHideTopNotify=function(e){this.hideTopNotify()},t.prototype.hideTopNotify=function(){egret.Tween.get(this.grpTopNotify,null,null,!0).to({y:-this.grpTopNotify.height},200),this.btnTopNotify.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTopNotifyTap,this)},t.prototype.onBtnTopNotifyTap=function(e,t){this.hideTopNotify(),e&&e()},t.prototype.onLog=function(e){this.labLog.appendText(e.data+"\n");var t=this.scroller.viewport;t.scrollV=this.labLog.height-t.height},t.prototype.beforeShow=function(e){},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneCommon.prototype,"CCDDZSceneCommon");var CCDDZSceneEffect=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZSceneEffectSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.GOLD_RAIN_EFFECT,this.onGoldRainEffect,this)},t.prototype.onGoldRainEffect=function(e){this.goldRainEffectLayer.play()},t.prototype.beforeShow=function(e){},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneEffect.prototype,"CCDDZSceneEffect");var CCDDZSceneLoading=function(e){function t(){var t=e.call(this)||this;return t.skinName=scenes.CCDDZSceneLoadingSkin,t}return __extends(t,e),t.setLoadingText=function(e){t._instance&&t._instance.setDescText(e)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),t._instance=this,this.showCopyRight(!1)},t.prototype.showCopyRight=function(e){this.copyRightImg.visible=e,this.noticeImg.visible=e},t.prototype.setDescText=function(e){this.descLabel.text=e},t.prototype.resetDesc=function(){this.setDescText("加载中...")},t.prototype.beforeShow=function(e){this.showCopyRight(e.showCopyRight||!1)},t.prototype.onHide=function(){},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneLoading.prototype,"CCDDZSceneLoading");var CCDDZSceneManager=CCalien.CCDDZSceneManager,CCDDZSceneLogin=function(e){function t(){var t=e.call(this)||this;return t._loginData={uid:0,token:""},t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZSceneLoginSkin},t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=CCalien.CCDDZEventManager.instance;CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.LOGIN_SUCCESS,this._onLoginSuccess,this),t.registerOnObject(this,this.grpSelectButton,egret.TouchEvent.TOUCH_TAP,this.onGrpSelectButtonTap,this),this.initBtnsByChannel()},t.prototype.initBtnsByChannel=function(){var e=CCalien.Native.instance;if(e.isNative)this.currentState="justWx";else if("true"==lang.debug)this.currentState="all";else if(e.isWXMP||e.isAli())this.grpSelectButton.visible=!1;else{var t=egret.Capabilities.os;"Android"!=t&&"iOS"!=t?this.currentState="wxPhone":this.currentState="justPhone"}},t.prototype._openNewWindow=function(e,t,i,n){var o=null,a=(window.screen.availHeight-30-n)/2,r=(window.screen.availWidth-10-i)/2;o=window.open(e,t,"height="+n+",innerHeight="+n+",width="+i+",innerWidth="+i+",top="+a+",left="+r+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no")},t.prototype.onGrpSelectButtonTap=function(e){CCalien.Native.instance.isNative&&(this.waitTimeOut=setTimeout(function(){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING)},15e3));var t=CCLoginService.instance;switch(e.target.name){case"quick":ccddzwebService.fastLogin(t.onVerifyResponse.bind(t));break;case"input":CCDDZPanelLogin.instance.show(this.onPanelLoginResult.bind(this));break;case"weixin":CCalien.Native.instance.isNative?CCLoginService.instance.doAppWxLogin():"true"==lang.debug?CCDDZPanelLogin.instance.show(this.onPanelLoginResult.bind(this)):CCalien.Native.instance.isWXMP||window.top.openWXQRCode();break;case"phone":CCDDZPanelPhoneLogin.getInstance().show()}},t.prototype.onPanelLoginResult=function(e,t){var i=CCLoginService.instance;switch(e){case"close":break;case"confirm":ccddzwebService.login(t.id,t.password,i.onVerifyResponse.bind(i))}},t.prototype._onLoginSuccess=function(){CCDDZPanelLogin.instance.close()},t.prototype.beforeShow=function(e){ccddzwebService.loadLog(1,0),CCalien.CCDDZEventManager.instance.enableOnObject(this),CCalien.Native.instance.isWXMP||CCLoginService.instance.checkLocalToken()},t.prototype.onShow=function(e){},t.prototype.beforeHide=function(){this.waitTimeOut&&clearTimeout(this.waitTimeOut),CCalien.CCDDZEventManager.instance.disableOnObject(this)},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneLogin.prototype,"CCDDZSceneLogin");var CCDDZSceneMostTop=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZSceneMostTopSkin,this.grpWaiting.visible=!1},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpToast.visible=!1,this.grpDisconnect.visible=!1,CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SHOW_WAITING,this.onShowWaiting,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.HIDE_WAITING,this.onHideWaiting,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SHOW_DISCONNECT,this.onShowDisconnect,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.HIDE_DISCONNECT,this.onHideDisconnect,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SHOW_TOAST,this.onShowToast,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.ACCOUNT_ERROR,this._onAccountError,this),ccserver.addEventListener(CCGlobalEventNames.USER_LOGIN_RESPONSE,this._onLoginResponse,this),this.btnReconnect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReconnectTap,this)},t.prototype.onShowWaiting=function(e){this.grpWaiting.visible=!0,this.grpDisconnect.visible=!1,this.loading.play(),this.labLoadingTip.text=e.data?e.data.content:""},t.prototype.onHideWaiting=function(e){this.grpWaiting.visible=!1,this.loading.stop(),this._hideAllGrp()},t.prototype.onShowToast=function(e){this.grpToast.visible=!0,this.labToast.text=e.data.content,this.labToast.textColor=e.data.color>=0?e.data.color:15527148,egret.Tween.get(this.grpToast,null,null,!0).to({alpha:1},200).wait(e.data.delay||1e3).to({alpha:0},200)},t.prototype._onLoginResponse=function(){this._hideAllGrp()},t.prototype._hideAllGrp=function(){this.grpToast.visible=!1,this.grpDisconnect.visible=!1,this.grpWaiting.visible=!1},t.prototype.onBtnReconnectTap=function(e){this.btnReconnect.visible=!1,this.btnReconnect.clickFunc&&this.btnReconnect.clickFunc()},t.prototype.onShowDisconnect=function(e){ccserver._isInDDZ||(this.grpDisconnect.visible=!0,this.btnReconnect.visible=!0,this.grpToast.visible=!1,this.grpWaiting.visible=!1,this.labDisconnect.text=e.data.content,this.btnReconnect.label=e.data.button||lang.reconnect,this.btnReconnect.clickFunc=this._onTryRelogin.bind(this))},t.prototype._onTryRelogin=function(){this.labDisconnect.text="",egret.setTimeout(function(){CCLoginService.instance.tryReconnectLogin()},this,1e3)},t.prototype._onAccountError=function(e){this.grpDisconnect.visible=!0,this.btnReconnect.visible=!0,this.grpToast.visible=!1,this.grpWaiting.visible=!1,this.labDisconnect.text=e.data.content,this.btnReconnect.label=lang.confirm,this.btnReconnect.clickFunc=function(){this._hideAllGrp(),CCLoginService.instance.doRelogin()}.bind(this)},t.prototype.onHideDisconnect=function(e){this._hideAllGrp()},t.prototype.beforeShow=function(e){},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneMostTop.prototype,"CCDDZSceneMostTop");var CCDDZScenePlay=function(e){function t(){var t=e.call(this)||this;return t._askPlayCardCount=0,t._cache=[],t._seats=[],t.isPersonalGame=!1,t.isCoupleGame=!1,t.remainCards=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t._curMatch9Play=1,t._lastTap={},t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZScenePlaySkin,this._tfMatchPlayInfo=CCalien.CCDDZUtils.parseColorTextFlow(lang.match_play_info)},t.prototype._showGrpRed=function(e){this.grpRed.visible=e},t.prototype.initGuessCardsView=function(){this.grpGuessOp.y=-250,this.grpGuessOp.visible=!1,this.grpGuessResult.visible=!1,this.guessWrong.visible=!1,this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1;for(var e=0;6>e;++e)this["GCGold"+e].visible=!1,this["GCGold"+e].goldNum=0,this.guesscount[e]=0;this.setGuessCardsMultiple([1.2,3,6,15,20,100]),console.log("_roomInfo"+this._roomInfo),this._roomInfo&&this._roomInfo.guessbet&&(this.lbGuessConsume.text="每次点击消耗"+this._roomInfo.guessbet+"金豆，可重复点击")},t.prototype.createChildren=function(){this.guesscount=[0,0,0,0,0,0],this.percentWidth=100,this.percentHeight=100,e.prototype.createChildren.call(this),this._redNormalNum=-1,this._askDoubleTimeOutId=0,this._isOverFive=!1,this._isShowWZAni=!1,this.recorderBubble.visible=!1,this.cdProgressBar.stop(),this.gamestarted=!1,this.isowner=!1,this._mySeat=this.seat0,this._mySeat.width=CCalien.CCDDZStageProxy.stage.stageWidth-20;for(var t=0;3>t;t++)this._seats[t]=this["seat"+t],this["labChange"+t].visible=!1;this.grpRedNotice.visible=!1,this.labWaiting.visible=!1,this.btnShare.visible=!1,this.redListDataArr=[1,1,1,1,1],this.redListDataProvider=new eui.ArrayCollection(this.redListDataArr),this.redList.itemRenderer=CCDDZRedPacketProcess,this.redList.dataProvider=this.redListDataProvider,ccserver.isMatch||this.isPersonalGame||this.dragonHongBao||(this.dragonHongBao=new CCDDZDragonHongBao),this.dragonChunTian=new CCDDZDragonGameChunTian,this.dragonWangZha=new CCDDZDragonGameWangZha,this.dragonZhaDan=new CCDDZDragonGameZhaDan,this.dragonFeiJi=new CCDDZDragonGameFeiJi,this.dragonMyLianDui=new CCDDZDragonGameLianDui(!1),this.dragonRightLianDui=new CCDDZDragonGameLianDui(!1),this.dragonLeftLianDui=new CCDDZDragonGameLianDui(!0),this.dragonMyShunZi=new CCDDZDragonGameShunZi(!1),this.dragonRightShunZi=new CCDDZDragonGameShunZi(!1),this.dragonLeftShunZi=new CCDDZDragonGameShunZi(!0),this._mySeat.userInfoView.currentState="my";var i=CCalien.CCDDZEventManager.instance;i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_RECONNECT_TABLE_REP,this.onReconnectTableRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_GIVE_UP_GAME_REP,this.onGiveUpGameRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_ALMS_REP,this.onAlmsResponse,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_QUICK_JOIN_RESPONSE,this.onQuickJoinResponse,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_USER_INFO_IN_GAME_REP,this.onUserInfoInGameResponse,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_GAME_START_NTF,this.onGameStart,this,1e3),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_RECONNECT_REP,this.onReconnectRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_ADD_CARD,this.onAddCard,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_USE_CARD_NTF,this.onUseCard,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_SET_CARDS,this.onSetCards,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_ASK_MASTER,this.onAskMaster,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_SET_SCORE,this.onSetScore,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_SHOW_CARD,this.onShowCard,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_TABLE_INFO,this.onTableInfo,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_USER_ONLINE,this._onUserOnline,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_USER_OFFLINE,this._onUserOffline,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.SHOW_LOTTERY,this.showLaba,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_GAME_END,this.onGameEnd,this,1e3),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_OPERATE_REP,this.onOperateRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_OPERATE_REP,this.onUserOperateRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_UPDATE_GAME_INFO,this.onUpdateGameInfo,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_ENTER_TABLE,this.onEnterTable,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_LEAVE_TABLE,this.onLeaveTable,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_ASK_READY,this.onAskReady,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_GET_READY_REP,this.onGetReadyRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_FRESH_MAN_REDCOIN_LOTTERY_CHANCEGOT,this.onFreshManRedcoinLotteryChanceGot,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this),i.registerOnObject(this,this.buttonBar,CCGlobalEventNames.BUTTON_BAR_TAP,this.onButtonBarTap,this),i.registerOnObject(this,this.grpButton,egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.SELECT_CARDS,this.onSelectCards,this),i.registerOnObject(this,this.grpBg,egret.TouchEvent.TOUCH_TAP,this.onTap,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.SHOW_GAME_EFFECT,this.onShowGameEffect,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.QUIT_PGAME_REP,this.onQuitRoomRep,this),i.registerOnObject(this,this.seat0.userInfoView.gold,egret.TouchEvent.TOUCH_TAP,this._onClickGold,this),i.registerOnObject(this,this.seat0.userInfoView.diamond,egret.TouchEvent.TOUCH_TAP,this._onClickDiamond,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.GAME_DISSOLVE,this.onGameDissolve,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.START_PGAME_REP,this.onStartGameRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.QUERY_ROOMINFO_REP,this.onPGameRoomInfoRep,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_DiamondGame_REP,this.onRedNormalMoneyInfoRep,this),i.registerOnObject(this,this.btnShare,egret.TouchEvent.TOUCH_TAP,this.onShare,this),i.registerOnObject(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onStart,this),i.registerOnObject(this,this._mySeat.redBgImg,egret.TouchEvent.TOUCH_TAP,this.onGrpRedcoinClick,this),i.registerOnObject(this,this._mySeat.redExchangeImg,egret.TouchEvent.TOUCH_TAP,this._onClickExchageRed,this),i.registerOnObject(this,this.grpGuessCards,egret.TouchEvent.TOUCH_TAP,this.onCloseGrpGuessOp,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this.myUserinfoUpdate,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_RED_COUNT_CHANGE,this._onUserRedCountChange,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.CLOSE_REVIVE_PANEL,this._onCloseRevivePanel,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BUY_REVIVE_SUCC,this._onBuyReviveSucc,this),i.registerOnObject(this,ccserver,CCGlobalEventNames.USER_MatchOperate_REP,this._onRecvMatchOperateRep,this),i.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this),this._mySeat.grpRecorder.visible=!1,this.grpGuessOp.y=-250,this.grpGuessOp.visible=!1,this.grpGuessResult.visible=!1,this.guessWrong.visible=!1,this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1;for(var n=0;6>n;++n)this["GCGold"+n].visible=!1,this["GCGold"+n].goldNum=0,i.registerOnObject(this,this["guess_option"+n],egret.TouchEvent.TOUCH_TAP,this.onGuessOptionClick,this);this.btnRecord.visible=!0},t.prototype.setBeforeWincnt=function(){if(!ccserver.isMatch&&!ccserver.isPersonalGame&&(this.beforewincnt=0,CCDDZMainLogic.instance.selfData.wincnt&&CCDDZMainLogic.instance.selfData.wincnt.length))for(var e=0;e<CCDDZMainLogic.instance.selfData.wincnt.length;e++)if(CCDDZMainLogic.instance.selfData.wincnt[e].roomid==this._roomInfo.roomID){this.beforewincnt=CCDDZMainLogic.instance.selfData.wincnt[e].cnt;
break}},t.prototype._onUserOnline=function(e){var t=e.data;if(t&&t.seatid){var i=this.getSeatById(t.seatid);i&&i.setUserOffline(!1)}},t.prototype._onUserOffline=function(e){var t=e.data;if(t&&t.uid){var i=this.getSeatByUId(t.uid);i&&i.setUserOffline(!0)}},t.prototype._initGeneralHeadImgTouch=function(e){this.seat1.setHeadTouch(e),this.seat2.setHeadTouch(e),this._mySeat.setHeadTouch(e)},t.prototype._onPlayBrowInfo=function(e,t,i){var n=this.getSeatById(e),o=this.getSeatById(t);if(n&&o&&i){var a=CCGlobalBrowData.createBrowMCById(i);if(!a)return;var r=new eui.Image("cc_play_animate_star");this.grpMain.addChild(r),r.anchorOffsetX=.6*r.width,r.anchorOffsetY=.5*r.height;var s=n.getHeadCenterPos(),c=o.getHeadCenterPos(),h=new egret.Point(0,0),l=new egret.Point(0,0);this.grpMain.globalToLocal(s.x,s.y,h),this.grpMain.globalToLocal(c.x,c.y,l),this.grpMain.addChild(a),a.visible=!1,a.scaleX=2,a.scaleY=2;var u=CCGlobalBrowData.getBrowAniWHById(i);a.anchorOffsetX=.25*u.width,a.anchorOffsetY=.25*u.height,a.addEventListener(egret.Event.COMPLETE,function(e){var t=CCGlobalBrowData.getBrowAniLastStayById(i);t?egret.Tween.get(a).wait(1e3*t).call(function(){this.grpMain.removeChild(a)}.bind(this)):this.grpMain.removeChild(a)},this),egret.Tween.get(r).set({x:h.x,y:h.y}).to({x:l.x,y:l.y},500).wait(200).call(function(){this.grpMain.removeChild(r),a.visible=!0,CCGlobalBrowData.isNeedXMoveById(i)?(egret.Tween.get(a).set({x:l.x-100,y:l.y}).to({x:l.x+100,y:l.y},1e3).wait(200).call(function(){this.grpMain.removeChild(a)}.bind(this)),a.gotoAndPlay(1,-1)):(a.x=l.x,a.y=l.y,a.gotoAndPlay(1,1))}.bind(this))}},t.prototype.recorderBubbleAnimate=function(){egret.Tween.removeTweens(this.recorderBubble),this.recorderBubbleAnimateReal()},t.prototype.recorderBubbleAnimateReal=function(){egret.Tween.get(this.recorderBubble).set({visible:!0,loop:!0}).to({y:82},446).to({y:72},446).call(this.recorderBubbleAnimateReal,this)},t.prototype.refreshCardsRecorderAbout=function(){var e=CCDDZMainLogic.instance.selfData,t=egret.localStorage.getItem("cardsrecorderexpirenotice");return 1==ccserver.isCoupleGame?void(this.recorderBubble.visible=!1):void(e.recorderfirstrewardgot?e.cardsRecorder.length<1||e.cardsRecorder[6]<=0?(egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1,t||(this.recorderBubble.source="cc_play_recorder_outofdate",this.recorderBubble.visible=!0,this.recorderBubbleAnimate()),this._mySeat.grpRecorder.visible=!1):(egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1):(this.recorderBubble.source="cc_play_recorder_gift",this.recorderBubbleAnimate(),this._mySeat.grpRecorder.visible=!1))},t.prototype._showRecorder=function(e){this._mySeat.grpRecorder.visible=e},t.prototype.myUserinfoUpdate=function(e){var t=CCDDZMainLogic.instance.selfData;if(t.hasRecorder()&&(this.recorderBubble.visible&&(egret.Tween.removeTweens(this.recorderBubble),this._showRecorder(!1),"cc_play_recorder_gift"==this.recorderBubble.source&&t.recorderfirstrewardgot&&CCDDZImgToast.instance.show(this,"领取成功"),this._showRecorder(!0),egret.localStorage.setItem("opencardsrecorder","1")),(!this.beforerecorderTime||this.beforerecorderTime<=0)&&ccserver.playing&&ccserver.gameOperate(6)),!ccserver.isMatch&&!ccserver.isPersonalGame){var i=CCDDZMainLogic.instance.selfData.gold;this._mySeat.userInfoView.updateGold(i),this._mySeat.userInfoView.avatar.setVipLevel(t.getCurVipLevel()),this._setTableRedInfo()}this.refreshCardsRecorderAbout(),this.updateRedCoinInfo();var n=this._roomInfo.roomID;1001!=n&&1002!=n&&8001!=n&&1006!=n?this._initNewRedProcess():this.setRedProcess()},t.prototype.switchRecorder=function(e){var t=CCDDZMainLogic.instance.selfData;t.recorderfirstrewardgot&&1==t.recorderfirstrewardgot?t.hasRecorder()?(this._mySeat.grpRecorder.visible=!this._mySeat.grpRecorder.visible,this._mySeat.grpRecorder.visible?egret.localStorage.setItem("opencardsrecorder","1"):egret.localStorage.removeItem("opencardsrecorder")):CCDDZPanelBuyRecorder.instance.show():ccserver.getCardsRecorderReward(),"cc_play_recorder_outofdate"==this.recorderBubble.source&&this.recorderBubble.visible&&(egret.localStorage.setItem("cardsrecorderexpirenotice","1"),egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1)},t.prototype.showGuessView=function(){egret.Tween.get(this.grpGuessOp).set({visible:!0,x:0,y:-250}).to({x:0,y:0},146),this.grpGuessCards.touchEnabled=!0},t.prototype.onBtnGuessClick=function(e){this._showGuessNotice(!1),this.grpGuessOp.visible?this.onCloseGrpGuessOp(null):this.showGuessView()},t.prototype.onGuessOptionClick=function(e){var t=Number(e.currentTarget.name);this.guesscount[t]>=20?(CCDDZImgToast.instance.show(this,lang.guessCardsNotice[1]),CCDDZImgToast.instance.enableTouch(!1)):(ccserver.reqUserGuessNextCard(this._roomInfo.roomID,t+1),e.stopImmediatePropagation())},t.prototype._checkHasRedCanExchange=function(){var e=!1,t=CCDDZMainLogic.instance.selfData,i=CCGlobalGameConfig.exchangeConfig.filter(function(e){if(1==e.goodsid&&!e.hide){if(e.first){var i=t.rcminexcexpiretime,n=(new Date).getTime(),o=t.rcminexcchanceused;return 1e3*i>n&&!o?!0:!1}return!0}return!1});i.sort(function(e,t){return e.amount-t.amount});for(var n=Math.ceil(t.redcoin)/100,o=i.length,a=0;a<i.length;++a)if(i[a].amount>n){o=a;break}return o>0&&(e=!0),e},t.prototype.updateRedCoinInfo=function(){var e=CCDDZMainLogic.instance.selfData,t=CCGlobalGameConfig.exchangeConfig.filter(function(t){if(4==t.goodsid||1==t.goodsid){if(t.first){var i=e.rcminexcexpiretime,n=CCalien.CCDDZUtils.getCurTimeStamp(),o=e.rcminexcchanceused;return 1e3*i>n&&!o?!0:!1}return!0}return!1});t.sort(function(e,t){return e.amount-t.amount});for(var i=Math.ceil(e.redcoin)/100,n=t.length,o=0;o<t.length;++o)if(t[o].amount>i){n=o;break}0==n?(this.grprn2.visible=!1,this.grprn1.visible=!0,this.lbremain1.text=""+Math.floor(100*t[n].amount-100*i)/100,this.lbrmb1.text=t[n].amount):n>0&&n<=t.length&&(this.grprn2.visible=!0,this.grprn1.visible=!1,this.lbrmb2.text=t[n-1].amount),this._mySeat.setRedcoin(null==i?"0.00":CCDDZUtils.exchangeRatio(i,!0),!0)},t.prototype._onClickExchageRed=function(){CCDDZPanelExchange2.instance.show(4)},t.prototype._showExchangeRedAni=function(){egret.Tween.get(this.grpRedNotice).set({visible:!0,alpha:1}).wait(1e3).to({alpha:0},2e3)},t.prototype.onGrpRedcoinClick=function(e){return this._checkHasRedCanExchange()?void CCDDZPanelExchange2.instance.show(4):void this._showExchangeRedAni()},t.prototype.onGameDissolve=function(e){var t=e.data;if(CCDDZPanelPlayerInfo.remove(),t.players&&t.players.length>0){for(var i=0;i<t.players.length;++i)t.players[i].nickname=CCDDZBase64.decode(t.players[i].nickname);t.quitPlayer&&(t.quitPlayer=CCDDZBase64.decode(t.quitPlayer),t.quitPlayer.length>8&&(t.quitPlayer=t.quitPlayer.substring(0,8))),CCDDZPersonalDetail.instance.show(t.players,this.onAlertResult.bind(this,0),!0,t.quitPlayer)}else 2==t.reason&&CCDDZAlert.show("房主退出，牌局解散",0,this.onAlertResult.bind(this,0))},t.prototype.onQuitRoomRep=function(e){var t=e.data;if(0==t.result)if(t.uid==ccserver.uid)CCDDZMainLogic.backToRoomScene();else if(ccserver.playing){var i=this.getSeatByUId(t.uid);i&&i.setQuitFlagVisible(!0)}},t.prototype.onPGameRoomInfoRep=function(e){var t=e.data;this.setPGameView(t)},t.prototype.setStartPgameBtnVisible=function(e){this.btnStart.visible=e,this.imgStart.visible=e},t.prototype.onStartGameRep=function(e){var t=e.data;0!=t.result?CCDDZPanelAlert.instance.show("错误编号"+t.result,0):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!1,this.gamestarted=!0)},t.prototype.onCloseGrpGuessOp=function(e){egret.Tween.get(this.grpGuessOp).set({visible:!0}).to({x:0,y:-250,visible:!1},146),this.grpGuessCards.touchEnabled=!1},t.prototype._justSetShareParams=function(){CCGlobalWxHelper.share(1,function(e){},[this.total_round,this.lbLimit.text,this.roomid])},t.prototype.onShare=function(e){this._justSetShareParams(),CCalien.Native.instance.isNative?CCGlobalWxHelper.shareForNative(1,null,[this.total_round,this.lbLimit.text,this.roomid]):CCDDZPanelShare.instance.sendGameToFriend()},t.prototype.onStart=function(e){ccserver.StartPGameReq(this.roomid)},t.prototype.addListeners=function(){ccserver.isMatch&&CCDDZMatchService.instance.addEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),CCalien.CCDDZEventManager.instance.enableOnObject(this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.SHOW_PAYCHAT,this.showLaba,this),this._addClickFunc()},t.prototype.removeListeners=function(){ccserver.isMatch&&CCDDZMatchService.instance.removeEventListener(CCGlobalEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),CCalien.CCDDZEventManager.instance.disableOnObject(this),CCalien.CCDDZDispatcher.removeEventListener(CCGlobalEventNames.SHOW_PAYCHAT,this.showLaba,this)},t.prototype.showLaba=function(e){this.rollMsg.show()},t.prototype.onTap=function(e){var t=this._lastTap;(new Date).valueOf()-t.time<200&&CCalien.MathUtils.distance(t.x,t.y,e.stageX,e.stageY)<50&&(this.doubleTap(e),t=this._lastTap={}),t.x=e.stageX,t.y=e.stageY,t.time=(new Date).valueOf()},t.prototype.doubleTap=function(e){ccserver.playing&&this._mySeat.cancelSelect()},t.prototype.initData=function(e){var t=this;void 0===e&&(e=!1),this.isPersonalGame?this._seats.forEach(function(e){e.initData({isMatch:!1,matchType:1})}):this._seats.forEach(function(i){var n={isMatch:ccserver.isMatch,matchType:ccserver.roomInfo.matchType,cleanUserInfo:!0,roomType:ccserver.roomInfo.roomType,isSelf:!1,roomFlag:t._roomInfo.roomFlag};i==t._mySeat&&(n.isSelf=!0),e?(i==t._mySeat&&(n.cleanUserInfo=!1),i.initData(n)):i.initData(n)}),ccserver.playing=!1,this.buttonBar.switchState("hidden"),this._showReadyBtn(!1),this.btnHang.enabled=!1,this.labWaiting.visible=!1,this.masterCards.initData();for(var i=0;3>i;++i)this._seats[i].setOwnerFlagVisible(!1),this._seats[i].setQuitFlagVisible(!1),this["labChange"+i].visible=!1;this.flygoldindex=0,this._stopChangeEffect(),this._hideGameEndGetInfo()},t.prototype.setGuessCardsMultiple=function(e){for(var t=0;t<e.length;++t)this["lbguess"+(t+1)].text="(赢"+e[t]+"倍)"},t.prototype._clearRecorderInfo=function(e){var t=e,i=e;4==e&&(i=1),this.remainCards=[t,t,t,t,t,t,t,t,t,t,t,t,t,i,i];for(var n=0;n<this.remainCards.length;++n)this._mySeat["lb"+(n+1)].text=this.remainCards[n],this._mySeat["lb"+(n+1)].textColor=10329501,4==t&&(this._mySeat["lb"+(n+1)].textColor=15169538);1==i&&(this._mySeat.lb14.textColor=5341696,this._mySeat.lb15.textColor=5341696)},t.prototype._setRecorderCardAndNum=function(e,t){var i=t;if(!(0>e||e>14||0>i)){0>i&&(i=0);var n=e,o=e+1;this.remainCards[n]=i,this._mySeat["lb"+o].text=i,4==i?this._mySeat["lb"+o].textColor=15169538:0==i?this._mySeat["lb"+o].textColor=10329501:this._mySeat["lb"+o].textColor=5341696}},t.prototype._subOneRecorderByCard=function(e){if(!(10>e||e>150)){var t=""+e,i=0;i=100>e?Number(t.substr(0,1)):Number(t.substr(0,2));var n=-1+i,o=this.remainCards[n];o+=-1,0>o&&(o=0),this._setRecorderCardAndNum(n,o)}},t.prototype._updateRecorderByCards=function(e){if(CCDDZMainLogic.instance.selfData.hasRecorder()&&e&&e.length>0)for(var t=0;t<e.length;++t)this._subOneRecorderByCard(e[t])},t.prototype._setRecorderInfoByServerCard=function(e){if(e&&CCDDZMainLogic.instance.selfData.hasRecorder()){this._clearRecorderInfo(4);for(var t=0;t<e.length;++t)this._subOneRecorderByCard(e[t])}},t.prototype._setRecorderInfoByServerNum=function(e){if(e&&15==e.length&&CCDDZMainLogic.instance.selfData.hasRecorder()){this._clearRecorderInfo(0);for(var t=0;t<e.length;++t)this._setRecorderCardAndNum(t,e[t])}},t.prototype.newGame=function(){this._isOverFive=!1,this._isShowWZAni=!1,this.labWaiting.visible=!1,this._seats.forEach(function(e){e.reset(),e.setReady(!1)}),this._clearRecorderInfo(0);for(var e=0;3>e;e++)this["labChange"+e].visible=!1;ccserver.playing=!0,this._showReadyBtn(!1),this.btnHang.selected=!1,this.btnHang.enabled=!0,this.cdProgressBar.stop(),this.masterCards.initData(),ccserver.roomInfo&&ccserver.roomInfo.baseScore&&this.masterCards.updateScore(ccserver.roomInfo.baseScore||0,1),CCalien.CCDDZPopUpManager.instance.removeAllPupUp(),ccserver.isMatch&&CCDDZPanelMatchWaitingInner.instance.close(),egret.clearTimeout(this._timerClean),this._showResultTimeOutId&&egret.clearTimeout(this._showResultTimeOutId),this._showResultTimeOutId1&&egret.clearTimeout(this._showResultTimeOutId1),ccserver.isMatch&&CCDDZMainLogic.instance.alms(),ccserver.isMatch||ccserver.isPersonalGame||this.initGuessCardsView()},t.prototype.getRedCoinLackCnt=function(){var e=CCDDZMainLogic.instance,t=e.selfData.getRoomNeedWinCntGetRed(this._roomInfo.roomID);return t},t.prototype.testFunction=function(){this.recorderBubble.visible=!0,this.recorderBubble.source="cc_play_recorder_gift",this.myUserinfoUpdate(null)},t.prototype._onClickChat=function(){},t.prototype._closeChatList=function(){},t.prototype._showPlayGameGetCoin=function(){var e="",t=this._getNeedPlayInfo();if(1==this._roomInfo.roomFlag||this._roomInfo.rewardwinround)e=ccserver.playing?CCalien.StringUtils.format(lang.backAlert,this.getRedCoinLackCnt()):"您确定要退出游戏？";else if(2==this._roomInfo.roomFlag){var i="再玩"+t+"局即可获得奖杯";0>=t&&(i="本局结束即可获得奖杯"),e=ccserver.playing?i+",现在退出房间将为您托管游戏。":i+",您确定要退出游戏？"}CCDDZAlert.show(e,1,this.onAlertResult.bind(this,0))},t.prototype.onGrpButtonTap=function(e){switch(e.target.name){case"chat":return void this._onClickChat();case"setting":this.test();break;case"hang":ccserver.hang(this.btnHang.selected);break;case"lottery":CCDDZPanelLottery.instance.show();break;case"recorder":this.switchRecorder(null);break;case"back":ccserver.isMatch?CCDDZAlert.show(lang.match_cancel_alert,1,this.onAlertResult.bind(this,2)):this.isPersonalGame?CCDDZAlert.show("确认离开房间？",1,this.onAlertResult.bind(this,2)):this._showPlayGameGetCoin();break;case"continue":this._onClickReady()}},t.prototype.sendQuickJoin=function(e){if(void 0===e&&(e=0),this._onSendQuickJoin(),this._roomInfo&&(1e3==this._roomInfo.roomID||1004==this._roomInfo.roomID)||this._roomInfo.style&&("diamond"==this._roomInfo.style||"queue"==this._roomInfo.style)||1004==this._roomInfo.roomID)return void ccserver.quickJoin(e);var t=2e3;1001==this.roomid?t=1200:1002==this.roomid?t=1600:1002==this.roomid&&(t=2e3),t=Math.ceil(Math.random()*t+200),this._timerDelayJoin=egret.setTimeout(function(){ccserver.quickJoin(e)},this,t)},t.prototype.test=function(){},t.prototype.onButtonBarTap=function(e){switch(e.data.action){case"cancelSelect":this._mySeat.cancelSelect();break;case"pass":ccserver.useCardNtf([]),this._mySeat.cancelSelect();break;case"use":var t=this._mySeat.getSelectPokerIds();ccserver.useCardNtf(t);break;case"setScore":ccserver.answerMaster(e.data.score),this.buttonBar.switchState("hidden");break;case"help":this._mySeat.help()||(ccserver.useCardNtf([]),this._mySeat.cancelSelect(),this._mySeat.showNoMatchCards())}},t.prototype.onSelectCards=function(e){void 0===e&&(e=null),e&&(this._selectCardsCount=e.data.count),"useCard"==this.buttonBar.currentState&&this.buttonBar.modifyButton("cancelSelect",this._selectCardsCount>0),e&&(this._canUse=e.data.canUse),"useCard"==this.buttonBar.currentState&&this.buttonBar.modifyButton("use",this._canUse)},t.prototype.onBackResult=function(e){switch(e){case"confirm":CCDDZMainLogic.backToRoomScene();break;case"cancel":}},t.prototype.onAlertResult=function(e,t){switch(t){case"confirm":switch(e){case 0:ccserver.isMatch||ccserver.isPersonalGame||ccserver.playing||(!this._roomInfo.style||"diamond"!=this._roomInfo.style&&"queue"!=this._roomInfo.style?ccserver.giveUpGame():ccserver.QuitWaitingQueueReq()),CCDDZMainLogic.backToRoomScene();break;case 1:ccserver.isMatch||ccserver.isPersonalGame||(this.sendQuickJoin(),this.initData());break;case 2:this.isPersonalGame?ccserver.QuitPGameReq(this.roomid):ccserver.isMatch?100==this._roomInfo.matchId:ccserver.playing&&ccserver.giveUpGame(),CCDDZMainLogic.backToRoomScene();break;case 3:CCDDZPanelExchange2.instance.show();break;case 4:CCDDZMainLogic.backToRoomScene()}break;case"cancel":}},t.prototype._onRecvMatchOperateRep=function(e){var t=e.data;if(t){if(1==t.optype)if(0==t.result)t.params&&t.params.length>=1&&this._mySeat.userInfoView.updateGold(t.params[0]),CCDDZPanelMatchRevive.remove(),this._clearMatchReviveInterval(),egret.clearTimeout(this._timerClean),this.setlabWaiting("复活成功,正在为您匹配对手,请稍等...");else{var i=(o={},o[3]="次数达到上限",o[4]="不支持复活",o[5]="金豆不足",o[7]="超时未复活",o[8]="决赛已经开始",o),n="复活失败";i[t.result]&&(n=i[t.result]),CCDDZAlert.show(n,0,function(){this._onMatchReviveTimeOut(t)}.bind(this))}var o}},t.prototype.onQuickJoinResponse=function(e){var t=e.data;switch(t.result){case 0:console.log("join success."),this.hideDeskCards();break;case 1:console.log("join failed.");break;case 2:CCDDZMainLogic.instance.enterGameItemNotEnough(this._roomInfo);break;case 3:CCDDZAlert.show(lang.no_more_desk,0,this.onAlertResult.bind(this,0));break;case 4:console.log("join failed.");break;case 7:CCDDZAlert.show("拥有金豆超过房间上限",0,function(){CCDDZMainLogic.backToRoomScene()})}},t.prototype.hideDeskCards=function(){this._seats.forEach(function(e){e.cleanDesk()})},t.prototype.onReconnectTableRep=function(e){var t=e.data;0!=t.result&&(1==t.result||2==t.result)&&CCDDZMainLogic.backToRoomScene()},t.prototype.onGiveUpGameRep=function(e){var t=e.data;switch(t.result){case 0:console.log("give up game success."),CCDDZMainLogic.backToRoomScene({roomInfo:this._roomInfo});break;case 1:console.log("give up game failed.")}},t.prototype.onUserInfoInGameResponse=function(e){var t=e.data,i=CCDDZMainLogic.instance.selfData;t.uid==i.uid&&t.gameprop>=0&&i.setFreeBrowCount(t.gameprop);var n=this.getSeatByUId(t.uid);n&&(t.offline?n.setUserOffline(!0):n.setUserOffline(!1),t.praise&&t.praise.length>=5&&n.userInfoData.initPraise(t.praise),2==this._roomInfo.roomFlag?(n.updateUserInfoData(t),n==this._mySeat?(n.userInfoView.updateGold(t.gold),t.diamond&&this._setDiamondUI(t.diamond)):t.diamond&&n.userInfoView.updateGold(t.diamond)):ccserver.isMatch?(t.nickname="参赛玩家",n.isMaster?t.imageid="cc_icon_head9":t.imageid="cc_icon_head10",n==this._mySeat?(n.userInfoData.initData(t),n.userInfoView.updateGold(t.gold),n.userInfoView.updateHeadImage(t.imageid)):n.updateUserInfoData(t)):(this.setRedProcess(),n.updateUserInfoData(t)))},t.prototype.redNormalSubDiamond=function(){},t.prototype.onGameStart=function(e){var t=this;console.log("----------game start----------");var i=e.data;if(this.beforeGameStart(),this._reconnectIn=!1,this._showMatch9WaitOtherPlayerOver(!1),this.playersSeatDown(i.playerinfo),this._cache.length>0&&(this._cache.forEach(function(e){e.method.call(t)}),this._cache.splice(0)),this.isPersonalGame?this.lbRound.text=String(this.cur_round)+"/"+String(this.total_round):ccserver.isMatch||this.isPersonalGame||(this.setRedCoin(),this.setBeforeWincnt()),i.cardsrecorderremain&&CCDDZMainLogic.instance.selfData.cardsRecorder&&(CCDDZMainLogic.instance.selfData.cardsRecorder[6]=i.cardsrecorderremain,this.refreshCardsRecorderAbout()),this._showNextMasterCardGuessBtn(!1),this.setlabWaiting(null),1==this._roomInfo.roomFlag){var n=((i.rewardpool||0)/100).toFixed(2);this.hasRedNum=parseFloat(n),this._setNewRedHasNum()}},t.prototype._shouldTipRedNormalRule=function(){var e=CCalien.CCDDZlocalStorage.getItem("redNormalRule");"1"!=e&&(this._showRedNormalRule(),CCalien.CCDDZlocalStorage.setItem("redNormalRule","1"))},t.prototype._shouldTipGoldRedRule=function(){var e=CCalien.CCDDZlocalStorage.getItem("goldRule");"1"!=e&&(this._showRedNormalRule(),CCalien.CCDDZlocalStorage.setItem("goldRule","1"))},t.prototype.setRedCoin=function(){if(1!=CCDDZMainLogic.instance.selfData.freshmanredcoinsent){var e=CCalien.CCDDZlocalStorage.getItem("freshmanredcoinsent");"1"==e?this.showRedcoinDragon(!1):1e3!=this._roomInfo.roomID&&this.showRedcoinDragon(!0)}},t.prototype.onReconnectRep=function(e){var t=this;this.labWaiting.visible=!1;var i=e.data;console.log("onReconnectRep----------",i,this._roomInfo,this.currentState),this._reconnectIn=!0,this.beforeGameStart(),this.playersSeatDown(i.players),this._mySeat.addCards(i.params1,!this._reconnectIn),i.players.forEach(function(e){var n=t.getSeatById(e.seatid);if(n.setHang(1==e.params[1]),ccserver.isMatch){var o={imageid:"cc_icon_head10",nickname:"参赛玩家"};n.userInfoView.update(o)}if(1==e.params[2]&&n.setUserOffline(!0),2==e.params[3]&&n.showDoubleFlag(!0),t._mySeat!=n)if(ccserver.isCoupleGame){for(var a=[],r=0;r<e.params[0];r++)a.push(0);null!=i.mastersid&&i.mastersid>=0&&i.mastersid==n.seatid&&n.setMaster(!1,!1),n.addCards(a)}else n.setCardCount(e.params[0])});var n=[],o=i.params2.length;if(i.params2[o-1]>0){for(var a=o-1;a>=o-3;a--)n.unshift(i.params2[a]);this.showMasterCards(n,!0)}if(null!=i.mastersid&&i.mastersid>=0){var r=this.getSeatById(i.mastersid);r.setMaster(!0,!1)}if(ccserver.isMatch||this.isPersonalGame||(this.setBeforeWincnt(),this.setRedCoin()),ccserver.hang(!1),i.params3){var s=!1;this._mySeat.seatid==i.mastersid&&(s=!0),this.setGiveWayScore(i.params3[0],i.mastersid,s)}if(i.params4)if(8001==this._roomInfo.roomID)for(var c=0;c<i.params4.length;++c)i.params4[c]&&this.setGCGold(c,i.params4[c]);else this._setRecorderInfoByServerNum(i.params4);if(this.autoOpenRecorder(),CCDDZBagService.instance.refreshBagInfo(),1==i.status||2==i.status){if(1==i.status){var h=new egret.Event("reconnect");h.data={seatid:i.cursid,time:i.time},this.onAskMaster(h)}else if(2==i.status){var l=-1,u=i.params2.slice(0,i.params2.length-3);if(i.params2.length>0){var p=this.getSeatById(i.presid);l=p.useCard(u,!1,!1,!0)}this.onAskPlayCard({cardType:l,cardids:u,pseatid:i.presid,seatid:i.cursid,time:i.time})}}else{var C=i.params5[0];if(!C)return;var d=i.params5[1],_=this.getSeatById(C);_.setMaster(!0,!1),this.masterCards.updateScore(i.params5[0],d)}},t.prototype.showMasterCards=function(e,t){this.masterCards.showCards(e,t),this._seats.forEach(function(e){e.hideScore()})},t.prototype.playersSeatDown=function(e){var t=this;e.some(function(e){return e.uid==ccserver.uid?(ccserver.seatid=e.seatid,!0):void 0}),e.forEach(function(e){t.playerSeatDown(e)})},t.prototype.beforeGameStart=function(){this.newGame(),this._askPlayCardCount=0,ccserver.isMatch&&this.updateMathTurnInfo()},t.prototype.onTableInfo=function(e){for(var t=e.data,i=0;i<t.players.length;++i)this.playerSeatDown(t.players[i])},t.prototype.onEnterTable=function(e){var t=e.data;this.playerSeatDown(t),this.hideDeskCards(),ccserver.isPersonalGame&&this.setShareStart()},t.prototype.setlabWaiting=function(e){void 0===e&&(e=null),e?(this.labWaiting.text=e,this.labWaiting.visible=!0):this.labWaiting.visible=!1},t.prototype.setShareStart=function(){if(this.gamestarted)this.btnShare.visible=!1,this.setStartPgameBtnVisible(!1);else{var e=this.getPlayersAmount();e>=3?(this.btnShare.visible=!1,this.isowner?this.setStartPgameBtnVisible(!0):this.setlabWaiting("等待房主开始")):(this.setlabWaiting("房间ID:"+this.roomid),this.isowner&&this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0,this.setStartPgameBtnVisible(!1))}},t.prototype.onLeaveTable=function(e){var t=e.data;if(t.uid==ccserver.uid)switch(t.reason){case 0:case 1:case 2:case 3:ccserver.isMatch||ccserver.isPersonalGame||this.playerStandUp(t.uid);break;case 4:}else this.playerStandUp(t.uid);this.isPersonalGame&&this.setShareStart()},t.prototype.onAskReady=function(e){var t=e.data;this.cdProgressBar.play(t.time)},t.prototype.onGetReadyRep=function(e){var t=e.data,i=this.getSeatById(t.seatid);i.userInfoData.uid==ccserver.uid&&this.cdProgressBar.stop(),i.setReady(!0)},t.prototype.onAskMaster=function(e){var t=e.data;this._mySeat.seatid==t.seatid?3==this._roomInfo.minPlayer||ccserver.isMatch||ccserver.isPersonalGame?this.buttonBar.switchState("askMaster",t.score):this.buttonBar.switchState("grap",t.score):this.buttonBar.switchState("hidden"),this.isCoupleGame&&this.setGiveWayScore(t.score,t.seatid,!1);var i=this.getSeatById(t.seatid);i&&i.startCD(t.time||1)},t.prototype.setGiveWayScore=function(e,t,i){if(i){var n=void 0,o=void 0;t==ccserver.seatid?(n=this.seat1,o=this._mySeat):(n=this._mySeat,o=this.seat1),o.setGrayCardsNum(0),n.setGrayCardsNum(e)}else this.seat1.setGrayCardsNum(e),this._mySeat.setGrayCardsNum(e);e||(e=0),this.lblGiveWay.text=e,this.lblGiveWayDes.textFlow=(new egret.HtmlTextParser).parse("农民手牌<font color='#FFFF00'>≤</font>"+e+"胜")},t.prototype.autoOpenRecorder=function(){if(ccserver.isCoupleGame)return void this._showRecorder(!1);var e=egret.localStorage.getItem("opencardsrecorder"),t=CCDDZMainLogic.instance.selfData;t.hasRecorder()&&"1"==e&&this._showRecorder(!0)},t.prototype.onSetScore=function(e){var t=e.data,i=this.getSeatById(t.seatid);if(i){if(t.ismaster?(i.setMaster(t.ismaster,!this._reconnectIn),ccserver.isMatch&&(t.imageid="cc_icon_head9",t.nickname="参赛玩家",i==this._mySeat&&(t.uid=CCDDZMainLogic.instance.selfData.uid),i.userInfoView.update(t)),this.isCoupleGame&&this.setGiveWayScore(t.score,t.seatid,t.ismaster),this.autoOpenRecorder()):this._mySeat.seatid==t.seatid&&this.buttonBar.switchState("hidden"),t.score>0){var n=this._roomInfo.defaultOdds,o=t.score;n&&(o=t.score*n),this.masterCards.updateMultiple(o)}if(i.stopCD(),1==ccserver.isCoupleGame?t.ismaster||i.showGrab(t.score):i.showScore(t.ismaster?-1:t.score),t.ismaster&&!ccserver.isPersonalGame&&!ccserver.isMatch&&1001==this._roomInfo.roomID){if(this._roomInfo.doublediamond<1)return void this._showDoubleNoDouble(!1);this._showDoubleNoDouble(!0),this.doubleCost_label.text="x"+this._roomInfo.doublediamond;var a=this._checkShowFailDouble();this._doubleRet=a,a.bShow?this._showFailDouble(!0,a.nReason):this._showFailDouble(!1),this._mySeat.startCD(5),this._clearAskDoubleTimeOut(),this._askDoubleTimeOutId=egret.setTimeout(this._onMyAskDoubleTimeOut,this,5e3)}}},t.prototype._clearAskDoubleTimeOut=function(){0!=this._askDoubleTimeOutId&&egret.clearTimeout(this._askDoubleTimeOutId),this._askDoubleTimeOutId=0},t.prototype.onAddCard=function(e){var t=e.data;if(ccserver.isMatch&&t.reshufflecnt&&t.reshufflecnt>0)for(var i=0;3>i;++i){var n=this.getSeatById(i+1);n.updateGold(-100,ccserver.isMatch)}this._mySeat.cancelSelect(),this._setRecorderInfoByServerCard(t.cardids),ccserver.playing?this.addCard(t):(this._cache.splice(0),this._cache.push({method:this.addCard.bind(this,t)}))},t.prototype.addCard=function(e){var t=this.getSeatById(e.seatid);t.cleanHand(),t.addCards(e.cardids,!0,!0),this.seat1.cleanHand(),this.seat2.cleanHand(),this.seat1.addCards([]),this.seat2.addCards([])},t.prototype.onUseCard=function(e){var t=e.data,i=this.getSeatById(t.seatid),n=-1;if(i&&(i.cleanDesk(),n=i.useCard(t.cardids),i.stopCD()),this._mySeat.seatid==t.seatid?(this.buttonBar.switchState("hidden"),this._mySeat.cancelSelect(),this._mySeat.hideNoMathCards(),this._mySeat.checkType([])):this._updateRecorderByCards(t.cardids),t.time&&t.cursid){var o=t.seatid;t.lastseatid==this._mySeat.seatid&&(o=0),this.onAskPlayCard({cardType:n,cardids:t.lastcards,pseatid:o,time:t.time,seatid:t.cursid})}},t.prototype.onSetCards=function(e){var t=e.data,i=this.getSeatById(t.seatid);i&&t.seatid!=ccserver.seatid&&(ccserver.isCoupleGame?i.showHandCards(t.cardids):i.useCard(t.cardids,!0))},t.prototype.getGuessCardsType=function(e){if(!e||3!=e.length)return 0;e.sort(function(e,t){return e-t});var t=!0,i=!0,n=!1,o=!1,a=!1,r=!1;e.forEach(function(e,n){(140==e||150==e)&&(a=!0,i=t=!1),o||9!=Math.floor(e/10)&&10!=Math.floor(e/10)&&11!=Math.floor(e/10)||(o=!0),r||13!=Math.floor(e/10)||(r=!0)});for(var s=1;3>s;++s){Math.floor(e[s]/10);Math.floor(e[s]/10)==Math.floor(e[s-1]/10)&&(n=!0),a||(Math.floor(e[s]/10)-Math.floor(e[s-1]/10)!=1&&(t=!1),e[s]%10!=e[s-1]%10&&(i=!1))}return r&&t&&(t=!1),t||(1==Math.floor(e[0]/10)&&12==Math.floor(e[1]/10)&&13==Math.floor(e[2]/10)||1==Math.floor(e[0]/10)&&2==Math.floor(e[1]/10)&&13==Math.floor(e[2]/10))&&(t=!0),t&&i?6:t?5:i?4:a?3:n?2:o?1:0},t.prototype.setGCGold=function(e,t){0>e||e>5||!t||0>t||(++this.guesscount[e],this["GCGold"+e].goldNum+=t,this["GCGold"+e].visible=!0,this["GCGold"+e].setData(this["GCGold"+e].goldNum),this._mySeat.userInfoView.updateGold(CCDDZMainLogic.instance.selfData.gold))},t.prototype.hideGuessRight=function(){this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1},t.prototype.goldfly=function(e,t,i,n,o){for(var a=this.flygoldindex;a<this.flygoldindex+5;++a)egret.setTimeout(this["flygold"+a].fly,this["flygold"+a],70*(a-this.flygoldindex),t,i,n,o,700);this.flygoldindex+=5,egret.setTimeout(this.hideGuessRight,this,2800)},t.prototype.playGuessRightAnimate=function(e,t){var i=this.getSeatById(e),n=i.getAvatarPos();if(i==this._mySeat)this.grpGuessRight.visible=!0,this.gwingold.text="x"+t,egret.Tween.get(this.gcgoldLight0).set({visible:!0,alpha:0,scaleX:.76,scaley:.55}).to({alpha:1,scaleX:3.16,scaley:1.6},146).to({alpha:0,scaleX:1.62,scaley:.22},292),egret.Tween.get(this.gcgoldLight1).set({visible:!0,alpha:0,scaleX:.76,scaley:.55}).wait(438).to({alpha:1,scaleX:3.16,scaley:1.6},146).to({alpha:0,scaleX:1.62,scaley:.22},292).call(this.goldfly,this,[i,this.grpGuessRight.x,this.grpGuessRight.y,n.x,n.y]);else{var o=this.localToGlobal(this.masterCards.x+.5*this.masterCards.width,this.masterCards.y+.5*this.masterCards.height);this.goldfly(i,o.x,o.y,n.x,n.y)}i&&(i!=this._mySeat?(i.playWinGoldAnimate(),this._roomInfo&&1e3!=this._roomInfo.roomID&&!ccserver.isMatch&&i.updateGold(t)):ccserver.isMatch||i.updateGold(t))},t.prototype.playGuessWrongAnimate=function(){egret.Tween.get(this.guessWrong).set({visible:!0,alpha:0}).to({alpha:1},146).wait(1e3).to({alpha:0,visible:!1},1e3)},t.prototype._onServerBrowRep=function(e){if(null==e.result){if(e.params&&3==e.params.length){var t=e.params[0],i=e.params[1],n=e.params[2],o=CCGlobalGameConfig.getBrowCfgById(n);if(o&&0==o.currency&&o.price&&t==this._mySeat.seatid){var a=CCDDZMainLogic.instance.selfData.getFreeBrowCount();a>0?CCDDZMainLogic.instance.selfData.addFreeBrowCount(-1):ccserver.isMatch||this._mySeat.updateGold(-o.price,ccserver.isMatch)}this._onPlayBrowInfo(t,i,n)}}else 3==e.result?(CCDDZImgToast.instance.show(this,lang.browNoGold),CCDDZImgToast.instance.enableTouch(!1)):CCDDZLogUtil.info("_onServerBrowRep------------->error",e.result)},t.prototype._showGetDayShareRewSucc=function(){var e=CCGlobalGameConfig,t=e.getShareRewCfg();if(t){var i=null,n=1,o="恭喜您分享成功获得以下奖励:\n";for(var a in t)i=e.getItemNameById(parseInt(a)),i&&(o+=n+"."+i+"x"+t[a]+"\n");CCDDZShareImageManager.instance.stop(!0,o)}},t.prototype.onUserOperateRep=function(e){var t=this,i=e.data;if(3==i.optype)null!=i.result?CCDDZImgToast.instance.show(this,lang.guessCardsNotice[i.result-1]):this.setGCGold(i.params[0]-1,this._roomInfo.guessbet);else if(2==i.optype);else if(7==i.optype){if(null==i.result){var n=CCDDZUtils.parseGoodsString(i.str),o=CCDDZUtils.goodsListToString(n);CCDDZAlert.show(o)}}else if(13==i.optype)this.showFiveRew?this.fiveCardDatas=i:(this.fiveCardDatas=null,this._initFiveCard(i));else if(14==i.optype)if(2==i.result)CCDDZMainLogic.instance.selfData.setHasPayToday(0),this._showFiveOpenCard(!0),this._showNotPayTodayForGetFiveRew();else if((0==i.result||null==i.result)&&i.str){var a=CCDDZUtils.parseGoodsString(i.str);this._showFiveCardReward(!0,a),this._openFiveCard({2:1,3:1}),this.showFiveRew=!0,this._clearFiveRewardTimeout(),this.fiveRewGetTimeout=egret.setTimeout(function(){t.showFiveRew=!1,t._onGetFiveRewOver()},this,3e3)}},t.prototype._clearFiveRewardTimeout=function(){this.fiveRewGetTimeout&&egret.clearTimeout(this.fiveRewGetTimeout),this.fiveRewGetTimeout=null},t.prototype._onGetFiveRewOver=function(){this._clearFiveRewAndCards();var e=this.fiveCardDatas;e&&this._initFiveCard(e),this.fiveCardDatas=null},t.prototype._showFiveDefault=function(e){this.fiveLabel.visible=e},t.prototype._showFiveOpenCard=function(e){this.openFiveImg.visible=e},t.prototype._initFiveCard=function(e){if(e.params&&e.params.length>=2){var t=e.params[0],i=e.params[1];if(CCDDZMainLogic.instance.selfData.setHasPayToday(i),t!=this._roomInfo.roomID)return;var n=e.params.slice(2);n||(n=[]),null!=e.result&&n.push(e.result),this._updateFiveCardView(n,{2:1,3:1})}},t.prototype._showNewDropCard=function(e,t){var i=this,n=t.length-1,o=CCalien.CCDDZStageProxy,a=o.width,r=o.height,s=CCDDZCard.create({pid:0});
s.x=.5*(a-s.width),s.y=.5*(r-s.height),s.pokerId=e,s.showFront(!1),this.addChild(s);var c=this.fiveCardContainer.localToGlobal(45*n,4);egret.Tween.get(s).to({scaleX:1.2,scaleY:1.2},50).wait(1e3).to({x:c.x,y:c.y,scaleX:.3,scaleY:.3},400).call(function(){i.removeChild(s),i._updateFiveCardView(t,{2:1,3:1})})},t.prototype._updateFiveCardView=function(e,t){void 0===t&&(t=null);var i=e,n=i.length;if(n>=1?(this._showFiveDefault(!1),5==n?this._showFiveOpenCard(!0):this._showFiveOpenCard(!1)):(this._showFiveDefault(!0),this._showFiveCardReward(!1),this._showFiveOpenCard(!1)),this.fiveCardContainer.removeChildren(),n>=4){var o=[0,0,0,0,0],a=Math.floor(e[0]/10),r=Math.floor(e[1]/10);a==r&&(o[0]=e[0],o[3]=e[1],o[1]=e[2],o[2]=e[3],i=o),5==n&&a==r&&(o[0]=e[0],o[3]=e[1],o[4]=e[2],o[1]=e[3],o[2]=e[4],i=o)}for(var s=0;n>s;++s){var c=CCDDZCard.create({pid:0});c.scaleX=c.scaleY=.3,c.x=45*s,c.y=4,c.pokerId=i[s],t&&t[s+1]?c.showBack():c.showFront(!1),this.fiveCardContainer.addChild(c)}},t.prototype._clearFiveCardView=function(){this.fiveCardContainer.removeChildren(),this._showFiveDefault(!0),this._showFiveOpenCard(!1)},t.prototype._clearFiveRewAndCards=function(){this.fiveRewLabel.visible&&(this._showFiveCardReward(!1),this._clearFiveCardView())},t.prototype._showFiveCardReward=function(e,t){void 0===t&&(t=null);var i=this.fiveRewLabel;if(i.visible=e,egret.Tween.removeTweens(i),t&&!(t.length<1)&&e){var n=-24;i.text="+"+CCDDZUtils.goodsListToString(t,0,!0),egret.Tween.get(i).set({y:n}).to({y:n-20},500).wait(500).call(function(){})}},t.prototype._openFiveCard=function(e){for(var t=0;5>t;++t){var i=this.fiveCardContainer.getChildAt(t);e[t+1]?i.showFront(!0):i.showFront(!1)}},t.prototype.onOperateRep=function(e){var t=e.data;if(4==t.optype)t.params&&t.params[0]?this.playGuessRightAnimate(t.seatid,t.params[0]):this.playGuessWrongAnimate();else if(5==t.optype)this._onServerBrowRep(t);else if(6==t.optype)this.beforerecorderTime=CCDDZMainLogic.instance.selfData.cardsRecorder[6],t.params&&(this._showRecorder(!0),this._setRecorderInfoByServerNum(t.params));else if(7==t.optype)this._onServerDoubleRep(t);else if(8==t.optype){if((0==t.result||null==t.result)&&t.params&&t.params.length>=2){var i=t.params[0],n=t.params[1],o=this.getSeatById(i);if(!o)return;var a=o.userInfoData;a.praise[0],a.praise[1];0==n?a.praise[1]+=1:a.praise[0]+=1,a.praise[i+1]=n,CCDDZPanelPlayerInfo.onPraise(i,n)}}else{var r=t.optype||0,o=this.getSeatById(t.seatid);if(!o)return;o.setHang(1==r),this._mySeat.seatid==t.seatid&&(1==r&&this.double_group.visible&&this._onMyAskDoubleTimeOut(),this.btnHang.selected=1==r)}},t.prototype.setGuessCardsType=function(e){this.grpGuessResult.visible=!0,this.guessCardsType.source="cc_guesscards_"+(925+e),this.gcardtype.source="cc_guesscards_"+(925+e)},t.prototype.onShowCard=function(e){var t=e.data,i=this.getSeatById(t.seatid);if(ccserver.playing){var n=this.getGuessCardsType(t.cardids);n>0&&this.setGuessCardsType(n),this.showMasterCards(t.cardids,this._reconnectIn),i.addCards(t.cardids),i==this._mySeat&&this._updateRecorderByCards(t.cardids),this._showExchangeRedAni()}},t.prototype.onAskPlayCard=function(e){var t=e.cardType,i=this.getSeatById(e.seatid);if(i){i.cleanDesk();var n=e.time;if(this._mySeat.seatid==e.seatid){if(e.seatid==e.pseatid||0==e.pseatid)this.buttonBar.switchState("useCard"),this.buttonBar.modifyButton("pass",!1),this.buttonBar.modifyButton("help",!1),this._mySeat.checkType([]);else{var o=this._mySeat.checkType(e.cardids);o?this.buttonBar.switchState("useCard"):this.buttonBar.switchState("pass"),this.buttonBar.modifyButton("pass",!0),this.buttonBar.modifyButton("help",!0),o||(n>5&&(n=5),t==CCDDZSHUANGWANG&&n>1&&(n=1),this._mySeat.showNoMatchCards(1e3*n))}this.onSelectCards(),this._mySeat.checkCanUse()}n>0&&i.startCD(n,this.onCDComplete.bind(this,e.time>n))}},t.prototype.onCDComplete=function(e){e&&(ccserver.useCardNtf([]),this._mySeat.cancelSelect())},t.prototype.onPanelMatchResultClose=function(){CCalien.CCDDZSceneManager.instance.currentSceneName!=CCGlobalSceneNames.ROOM&&CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.ROOM,null,CCalien.CCDDZsceneEffect.CCDDFade,null,null,!1,CCGlobalSceneNames.LOADING)},t.prototype._showMatchResult=function(e){var t=!1;return CCDDZSceneManager.instance.currentSceneName==CCGlobalSceneNames.PLAY&&e.matchid==this._roomInfo.matchId&&e.params[0]>0&&6!=this._roomInfo.matchType&&(e.params[1]&&e.params[1]>0&&(CCDDZMatchService.instance.updateScoreGetOut(e.matchid,e.params[1]),this.updateMathTurnInfo()),CCDDZPanelMatchResult.instance.show(e,this.onPanelMatchResultClose.bind(this)),CCDDZBagService.instance.refreshBagInfo(),t=!0),CCDDZMatchService.instance.onMatchEndCheckRemoveMatchInfoNtf(e),t},t.prototype.onMatchInfoNtf=function(e){var t=e.data;switch(t.optype){case 101:break;case 102:this.labWaiting.visible=!1,this._showMatch9Rew(t),t.params&&t.params.length>=5&&t.params[2]>0?this._showMatchRevive(t):this._showMatchResult(t);break;case 103:this.updateMathTurnInfo();break;case 104:var i=this._tfMatchPlayInfo;i[0].text=t.params[0].toString(),i[2].text=t.params[1].toString(),this.labelMatchInfo.textFlow=this._tfMatchPlayInfo,ccserver.isMatch&&6==ccserver.roomInfo.matchType&&(this._match9Info=t.roundInfo,this._setMatch9CurRank(t.params[0]));break;case 105:this.updateMathTurnInfo();break;case 106:this.updateMathTurnInfo(),this._curMatch9Play=t.params[1]+1,this._curMatch9Play>=this._roomInfo.stage[0].handCount&&(this._curMatch9Play=this._roomInfo.stage[0].handCount),this._setMatch9Turn(this._curMatch9Play)}},t.prototype.updateMathTurnInfo=function(){var e=CCDDZMatchService.instance,t=e.currentMatchMode,i=1==this._roomInfo.stage.length?"":lang.match_turn_name[t-1];3==t&&(i=lang.match_turn_name[0]);var n;switch(t){case 1:if(!e.scoreGetOut||void 0==e.scoreGetOut)return;n=lang.format(lang.id.match_top_info_1,e.currentPlay,CCDDZUtils.currencyRatio(e.scoreGetOut));break;case 2:0==e.countPromote?(i=lang.match_turn_name[2],n=lang.format(lang.id.match_top_info_3,e.currentPlay)):(isNaN(e.currentTurn)&&(e.currentTurn=1),n=lang.format(lang.id.match_top_info_2,e.currentTurn,e.currentPlay,e.countPromote));break;case 3:if(!e.scoreGetOut||void 0==e.scoreGetOut)return;n=lang.format(lang.id.match_top_info_1,e.currentPlay,CCDDZUtils.currencyRatio(e.scoreGetOut))}this.labMatchInfo.text=i+" "+n},t.prototype._changeEffectEnd=function(e,t,i){2==this._roomInfo.roomFlag?e!=this._mySeat&&e.updateRednormalGold(t):e&&e.updateGold(t,ccserver.isMatch),this._showMaxOrZero(e,t,i)},t.prototype._stopChangeEffect=function(){for(var e=0;3>e;++e){var t=this["labChange"+e];egret.Tween.removeTweens(t)}},t.prototype.playChangeEffect=function(e,t,i,n,o){void 0===o&&(o=0);var a=i+n,r=e,s=this["labChange"+r];s.font=RES.getRes(a>0?"cc_font_num_1":"cc_font_num_2");var c=CCDDZUtils.currencyRatio(Math.abs(a));s.text=a>0?"+"+c:"-"+c,s.y+=50,s.alpha=0,s.visible=!0,egret.Tween.get(s).wait(o).to({y:s.y-50,alpha:1},1e3).call(this._changeEffectEnd.bind(this,t,i,n))},t.prototype._hideGameEndGetInfo=function(){this.myGetInfoGroup.visible=!1,this.rightGetInfoGroup.visible=!1,this.leftGetInfoGroup.visible=!1},t.prototype._showMaxOrZero=function(e,t,i){if(!ccserver.isMatch&&!ccserver.isPersonalGame){var n=null,o=null,a=null,r=null,s=null;if(e==this._mySeat){n=this.myInfoBgImg,o=this.myInfoLabel,a=this.myBtnbgImg,r=this.myBtnLabel,s=this.myGetInfoGroup;var c=this.labChange0.width,h=-40;c>131&&(h+=.5*(c-131)),this.myGetInfoGroup.horizontalCenter=h}else e==this.seat1?(n=this.rightInfoBgImg,o=this.rightInfoLabel,a=this.rightBtnbgImg,r=this.rightBtnLabel,s=this.rightGetInfoGroup):(n=this.leftInfoBgImg,o=this.leftInfoLabel,a=this.leftBtnbgImg,r=this.leftBtnLabel,s=this.leftGetInfoGroup);var l=!1,u=e.userInfoView,p="金豆",C=u.gold.getGold();2==this._roomInfo.roomFlag&&(p="钻石",e==this._mySeat&&(C=u.diamond.getGold()));var d=0;if(t>0){d=t+i+this._roomInfo.kickbacks;var _=!1;d+t>=C&&(_=!0,C=d),_&&(l=!0,o.text="最多赢取所拥有的"+p,a.source="cc_common_btn_blue_h",r.text="封顶",r.textColor=1523056)}else 0>t&&0>=C&&(l=!0,o.text=p+"都输光了！",a.source="cc_common_btn_orange_h",r.text="破产",r.textColor=9575443);if(l){o.validateNow(),s.visible=!0;var g=o.width;n.width=g+40,n.validateNow(),e==this._mySeat?this._onClickMyEndInfo():e==this.seat1?this._onClickRightEndInfo():this._onClickLeftEndInfo()}}},t.prototype.onGameEnd=function(e){var t=!1;ccserver.playing=!1;var i=e.data,n=this._roomInfo.kickbacks;n||(n=0);var o;this.buttonBar.switchState("hidden"),this._mySeat.setHang(!1),this._mySeat.setStatus(null),this.seat1.setStatus(null),this.seat2.setStatus(null),2==this._roomInfo.roomFlag&&CCDDZMainLogic.instance.selfData.setCanGetNewDiamond();for(var a,r,s=0,c=0;3>c;++c){a=i.chanage[c],r=null==i.realkickback[c]?0:i.realkickback[c];var h=this.getSeatById(c+1);if(!h)break;a>0&&(o=h),this._mySeat==h&&(t=a>0,s=a);var l=0;this.seat1==h?l=1:this.seat2==h&&(l=2),this.playChangeEffect(l,h,a,r,0),h&&h.stopCD()}this.btnHang.enabled=!1,this._mySeat.grpRecorder.visible=!1;var u=s+this._mySeat.userInfoData.gold;this.showResult(t,u),this._clearRecorderInfo(0),CCDDZPanelPlayerInfo.remove(),ccserver.isPersonalGame?this.cur_round<this.total_round&&++this.cur_round:ccserver.isMatch&&6==ccserver.roomInfo.matchType&&(this._curMatch9Play+=1,this._curMatch9Play>this._roomInfo.stage[0].handCount?CCDDZPanelMatch9GetRew.getInstance().isShow()||this._showMatch9WaitOtherPlayerOver(!0):this._setMatch9Turn(this._curMatch9Play)),this.refreshCardsRecorderAbout()},t.prototype._showMatch9WaitOtherPlayerOver=function(e){this.match9WaitOther_img.visible=e},t.prototype.showResult1=function(e,t){var i=1e3,n=CCDDZMainLogic.instance;if((!e||ccserver.isMatch||ccserver.isPersonalGame)&&!ccserver.isMatch&&!ccserver.isPersonalGame&&t<this._roomInfo.minScore&&!ccserver.isMatch&&!e&&i>t&&2!=this._roomInfo.roomFlag&&n.alms(t),ccserver.isMatch||ccserver.isPersonalGame)this._timerClean=egret.setTimeout(this.cleanSeat,this,3e3,!0,!0);else{this.cleanSeat(!0,!0,!1);var o=this._roomInfo.roomID;if(e)if(1001==o||1002==o||8001==o||1006==o){this._isOverFive=!1;var a=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(o);a&&a.cnt<1&&a.chance>=1&&(this._isOverFive=!0),this._isOverFive&&!this._isShowWZAni&&this._onHasRedChance()}else(8003==o||8004==o)&&this._initNewRedProcess()}},t.prototype.showResult=function(e,t){return this.dragonChunTian.parent?void(this._showResultTimeOutId=egret.setTimeout(this.showResult,this,2e3,e,t)):void(this._showResultTimeOutId1=egret.setTimeout(this.showResult1,this,500,e,t))},t.prototype.onUpdateGameInfo=function(e){var t=e.data;if(t.params1.length>=4&&!ccserver.isMatch&&t.params1[3]){t.params1[3]}if(1==t.optype){if(t.params1&&t.params1.length>2){var i=t.params1[1],n=""+i;i>=1e4&&(n=n.substring(0,n.length-4)+"万"),this.setlabWaiting("当前底分为"+n),egret.setTimeout(function(){this.setlabWaiting(null)},this,5e3),this.masterCards.updateScore(t.params1[1],t.params1[0])}}else t&&t.params1&&t.params1.length>=1&&250==t.params1[0]&&250==t.params1[1]?0==t.params1[3]||CCDDZAlert.show(lang.noMoreGold3,1,this.onAlertResult.bind(this,1)):t.params1&&t.params1.length>=1?t.params1.length>=2?(this._roomInfo.baseScore=t.params1[1],this.masterCards.updateScore(this._roomInfo.baseScore,t.params1[0])):this.masterCards.updateMultiple(t.params1[0]):t.params2&&t.params2.length>2&&t.params2[0]>0&&this.showDragonChunTian()},t.prototype.onAlmsResponse=function(e){var t=this;if(!this._roomInfo||2!=this._roomInfo.roomFlag){var i=e.data;switch(i.result){case 0:var n=CCDDZMainLogic.instance.selfData.gold,o=lang.format(lang.id.alms_success,CCDDZUtils.currencyRatio(CCGlobalGameConfig.almsConfig.gold),CCGlobalGameConfig.almsConfig.count-i.usagecnt);if(ccserver.isMatch||ccserver.isPersonalGame)return void CCDDZAlert.show(o);(1001==this._roomInfo.roomID||1005==this._roomInfo.roomID)&&this._mySeat.updateGold(CCGlobalGameConfig.almsConfig.gold,!1),n<CCGlobalGameConfig.almsConfig.gold&&(n+=CCGlobalGameConfig.almsConfig.gold,CCDDZMainLogic.instance.selfData.gold=n),n<this._roomInfo.minScore?CCDDZPanelReviveBag.getInstance().show(this._roomInfo):CCDDZAlert.show(o+lang.alms_success_continue,1,function(e){"confirm"==e?(t.initData(),t.sendQuickJoin()):CCDDZMainLogic.backToRoomScene()});break;case 1:case 2:ccserver.isMatch||CCDDZPanelReviveBag.getInstance().show(this._roomInfo)}}},t.prototype.playerSeatDown=function(e){e.uid==ccserver.uid&&(ccserver.seatid=e.seatid);var t=this.getSeatById(e.seatid);if(t&&t.userInfoData&&t.userInfoData.uid==e.uid)t&&t.updateUserInfoData(e);else{var i=new CCGlobalUserInfoData;i.initData(e);var n=3;this.isCoupleGame&&(n=2),t=this._seats[(i.seatid+n-ccserver.seatid)%n],t.userInfoData=i,t.seatid=e.seatid,t.setOwnerFlagVisible(!1),t.setQuitFlagVisible(!1),t.userInfoView.update(e)}return ccserver.getUserInfoInGame(e.uid),t&&ccserver.isMatch&&(e.nickname="参赛玩家",t.isMaster?e.imageid="cc_icon_head9":e.imageid="cc_icon_head10",t.updateUserInfoData(e),t.userInfoView.update(e)),ccserver.isMatch||ccserver.isPersonalGame||e.viplv>=1&&t.userInfoView.avatar.setVipLevel(e.viplv),t},t.prototype.playerStandUp=function(e){console.log("playerStandUp===============>",e),ccserver.isMatch||e!=ccserver.uid||(this.cdProgressBar.stop(),CCDDZMainLogic.backToRoomScene());var t=this.getSeatByUId(e);(ccserver.isMatch||ccserver.isPersonalGame||ccserver.playing)&&t&&(CCDDZPanelPlayerInfo.onPlayerLeave(t.seatid),t.cleanPlayer())},t.prototype.getPlayersAmount=function(){for(var e=0,t=0;t<this._seats.length;++t)this._seats&&null!=this._seats[t].userInfoData&&++e;return e},t.prototype._isInGuessTime=function(){var e=!1,t=CCGlobalGameConfig.getCfgByField("custom");if(t&&t.guessCard){var i=t.guessCard.start,n=t.guessCard.end,o=ccserver.getServerStamp();e=CCDDZUtils.isInTimeSection(i,n,o,!0,!1)}return e},t.prototype.cleanSeat=function(e,t,i){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!0);var o=0;i&&this._seats.forEach(function(t){n["labChange"+o++].visible=!1,e?t!=n._mySeat?t.clean(e):t.cleanDesk():t.clean(e)}),egret.clearTimeout(this._timerClean),this._showReadyBtn(t),ccserver.isMatch||ccserver.isPersonalGame||(this.initGuessCardsView(),this.grpRedNotice.visible=!1)},t.prototype.getSeatById=function(e){var t=null;return this._seats.some(function(i){return i.userInfoData&&i.userInfoData.seatid==e?(t=i,!0):void 0}),t},t.prototype.getSeatByUId=function(e){var t=null;return this._seats.some(function(i){return i.userInfoData&&i.userInfoData.uid==e?(t=i,!0):void 0}),t},t.prototype.onLotteryRedCoinRep=function(e){0==e.data.result&&(this.setRedProcess(),this.updateRedCoinInfo(),this._stopNewRedAni(),this._showNormalRedImg(!1),this.canNewRed=!1,2!=this._roomInfo.roomFlag||ccserver.isMatch||ccserver.isPersonalGame||this._initNewRedProcess())},t.prototype.setRedProcess=function(e){if(void 0===e&&(e=!1),!ccserver.isMatch&&!ccserver.isPersonalGame){var t=this._roomInfo.roomID;if(1001!=t&&1002!=t&&8001!=t&&1006!=t)return;var i=[0,0,0,0,0],n=[1,1,1,1,1],o=5,a="cc_play_btn_chou";1002==t?(o=3,i=[0,0,0],n=[1,1,1],a="cc_play_btn_chou2"):(8001==t||1006==t)&&(i=[0],n=[1],o=1,a="cc_play_btn_chou3"),this.mRed_img.source=a;var r=CCDDZMainLogic.instance;this.redListDataArr=i;var s=r.selfData.getRoomWinCntInfo(t),c=0,h=0;if(s&&(c=s.cnt,h=s.chance||0),this._isOverFive&&e&&!this._isShowWZAni)this.redListDataArr=n;else for(var l=0;c>l;l++)this.redListDataArr[l]=1;this.redCount.text=""+h,h>=1?this._showRedCount(!0):(this._showNormalRedImg(!1),this._showRedCount(!1)),this.redListDataProvider.source=this.redListDataArr,this.redListDataProvider.refresh()}},t.prototype.addRedProcess=function(){this._isOverFive=!1;var e=CCDDZMainLogic.instance,t=this._roomInfo.roomID,i=e.selfData.getRoomWinCntInfo(t),n=0;i&&(n=i.cnt);var o=5,a=n+1;1002==t?o=3:(8001==t||1006==t)&&(o=1);for(var r=!1,s=CCDDZMainLogic.instance.selfData.wincnt,c=0;c<s.length;c++)s[c].roomid==t&&(r=!0,a==o?(this._isOverFive=!0,s[c].cnt=0,s[c].chance=i.chance+1):s[c].cnt=a);r||s.push({chance:0,cnt:a,roomid:t,getchance:null,time:(new Date).getTime()}),this.setRedProcess(!0)},t.prototype.onFreshManRedcoinLotteryChanceGot=function(e){CCDDZMainLogic.instance.selfData.freshmanredcoinsent=1,this.dragonHongBao.parent||this.addChild(this.dragonHongBao),this.dragonHongBao.play2(),this._isShowWZAni=!0},t.prototype.showRedcoinDragon=function(e){},t.prototype.ondragonHongBaoComplete=function(e){},t.prototype.showDragonChunTian=function(){this.dragonChunTian.parent||this.addChild(this.dragonChunTian)},t.prototype.showDragonWangZha=function(){this.dragonWangZha.parent||this.addChild(this.dragonWangZha)},t.prototype.showDragonZhaDan=function(){this.dragonZhaDan.parent||this.addChild(this.dragonZhaDan)},t.prototype.showDragonFeiJi=function(){this.dragonFeiJi.parent||this.addChild(this.dragonFeiJi)},t.prototype.showDragonMyLianDui=function(){this.dragonMyLianDui.parent||(this.dragonMyLianDui.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.dragonMyLianDui.y=CCalien.CCDDZStageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMyLianDui))},t.prototype.showDragonRightLianDui=function(){this.dragonRightLianDui.parent||(this.dragonRightLianDui.x=this.seat1.x+200,this.dragonRightLianDui.y=this.seat1.y+92,this.addChild(this.dragonRightLianDui))},t.prototype.showDragonLeftLianDui=function(){this.dragonLeftLianDui.parent||(this.dragonLeftLianDui.x=this.seat2.x+230,this.dragonLeftLianDui.y=this.seat2.y+92,this.addChild(this.dragonLeftLianDui))},t.prototype.showDragonMyShunZi=function(){this.dragonMyShunZi.parent||(this.dragonMyShunZi.x=CCalien.CCDDZStageProxy.stage.stageWidth>>1,this.dragonMyShunZi.y=CCalien.CCDDZStageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMyShunZi))},t.prototype.showDragonRightShunZi=function(){this.dragonRightShunZi.parent||(this.dragonRightShunZi.x=this.seat1.x+200,this.dragonRightShunZi.y=this.seat1.y+92,this.addChild(this.dragonRightShunZi))},t.prototype.showDragonLeftShunZi=function(){this.dragonLeftShunZi.parent||(this.dragonLeftShunZi.x=this.seat2.x+230,this.dragonLeftShunZi.y=this.seat2.y+92,this.addChild(this.dragonLeftShunZi))},t.prototype.onShowGameEffect=function(e){switch(e.data.cardType){case 1:this.showDragonWangZha();break;case 2:this.showDragonZhaDan();break;case 9:this.showDragonFeiJi();break;case 11:case 12:"my"==e.data.state?this.showDragonMyLianDui():"right"==e.data.state?this.showDragonRightLianDui():"left"==e.data.state&&this.showDragonLeftLianDui();break;case 10:"my"==e.data.state?this.showDragonMyShunZi():"right"==e.data.state?this.showDragonRightShunZi():"left"==e.data.state&&this.showDragonLeftShunZi()}},t.prototype._setInDayFuTime=function(e){this._inDayGetTime=e},t.prototype._onClickDayBuy=function(){this._inDayGetTime&&CCDDZToast.show("请整点领取")},t.prototype._initDayBuy=function(){var e=this,t=ccserver.serverDate,i=t.getMinutes(),n=t.getSeconds(),o=-59+i,a=-60+n,r=11;this.dayFuDaiTimeLabel.text=o+":"+a,this.dayFuDaiTimeLabel.textColor=16777215,this._setInDayFuTime(!1);egret.setInterval(function(){a-=1,-1==a&&(a=59,o-=1),0==o&&0==a&&(e.dayFuDaiTimeLabel.textColor=16711680,e._setInDayFuTime(!0),r-=1,0>r&&e._initDayBuy())},this,1e3)},t.prototype.initMaxMultiple=function(e){this.labelMatchInfo.textFlow=(new egret.HtmlTextParser).parser("最高<font color='#F0FF00'>"+e+"</font>倍")},t.prototype._onClickMyEndInfo=function(){var e=this;egret.Tween.removeTweens(this.myInfoBgImg),this.myInfoBgImg.visible=!0,this.myInfoLabel.visible=!0,egret.Tween.get(this.myInfoBgImg).wait(3e3).call(function(){egret.Tween.removeTweens(e.myInfoBgImg),e.myInfoBgImg.visible=!1,e.myInfoLabel.visible=!1})},t.prototype._onClickLeftEndInfo=function(){var e=this;egret.Tween.removeTweens(this.leftInfoBgImg),this.leftInfoBgImg.visible=!0,this.leftInfoLabel.visible=!0,egret.Tween.get(this.leftInfoBgImg).wait(3e3).call(function(){egret.Tween.removeTweens(e.leftInfoBgImg),e.leftInfoBgImg.visible=!1,e.leftInfoLabel.visible=!1})},t.prototype._onClickRightEndInfo=function(){var e=this;egret.Tween.removeTweens(this.rightInfoBgImg),this.rightInfoBgImg.visible=!0,this.rightInfoLabel.visible=!0,egret.Tween.get(this.rightInfoBgImg).wait(3e3).call(function(){egret.Tween.removeTweens(e.rightInfoBgImg),e.rightInfoBgImg.visible=!1,e.rightInfoLabel.visible=!1})},t.prototype._onClickTask=function(){CCDDZPanelDayTask.getInstance().show()},t.prototype._onClickFiveRule=function(){var e=CCGlobalGameConfig.getCfgByField("item_drop"),t=function(e){var t=CCDDZUtils.parseGoodsString(e.reward),i=CCDDZUtils.goodsListToString(t,0,!0);return i},i="1)斗地主游戏中，玩家在牌局结束后随机掉落扑克牌，其中第二张和第三张牌为未知牌，集齐5张点击翻牌按钮，今日充值任意金额玩家可根据牌型获得对应奖励。扑克牌只在金豆场和钻石极速场掉落\n2)牌型奖励如下：\n   炸弹："+t(e[6])+"\n   三带对："+t(e[5])+"\n   顺子："+t(e[4])+"\n   三带一："+t(e[3])+"\n   两对："+t(e[2])+"\n   对子："+t(e[1])+"\n   单牌："+t(e[0])+"\n3)好手气斗地主在法律规定范围内，对活动保留进行解释的权利。\n";CCDDZAlert.show(i,0,null,"left")},t.prototype._showNotPayTodayForGetFiveRew=function(){CCDDZAlert.show("充值任意金额，即有机会获得最高500倍奖励！确定前往充值？",0,function(e){"confirm"==e&&CCDDZPanelExchange2.instance.show(0)})},t.prototype._onClickOpenFiveCard=function(){CCDDZMainLogic.instance.selfData.hasPayToday()?(this._showFiveOpenCard(!1),ccserver.reqGetFiveCardRew(this._roomInfo.roomID)):this._showNotPayTodayForGetFiveRew()},t.prototype._showHelpImg=function(e){this.redNormalHelp_img.visible=e},t.prototype._setCurState=function(e){this.currentState=e,this.validateNow()},t.prototype._addClickFunc=function(){var e="addClickListener";this.mRed_img[e](this._onClickRed,this),this.matchInfo_img[e](this._onClickMatch9Info,this),this.double_group[e](this._onClickDouble,this),this.noDouble_group[e](this._onClickNoDouble,this),this.redNormal_img[e](this._onClickNewRed,this),this.redNormalHelp_img[e](this._onClickRedNormalHelp,this),this.dayBuyGroup[e](this._onClickDayBuy,this),this.grpTask[e](this._onClickTask,this),this.myBtnbgImg[e](this._onClickMyEndInfo,this,!1),this.leftBtnbgImg[e](this._onClickLeftEndInfo,this,!1),this.rightBtnbgImg[e](this._onClickRightEndInfo,this,!1),this.fiveRuleImg[e](this._onClickFiveRule,this),this.openFiveImg[e](this._onClickOpenFiveCard,this,!1),this.guessImg[e](this.onBtnGuessClick,this)},t.prototype.beforeShow=function(e){var t=this;CCalien.CCDDZPopUpManager.removeAllPupUp(),this._showRedCount(!1),this.grpGuessCards.visible=!0,this._stopChangeEffect(),this._hideGameEndGetInfo(),this._showNextMasterCardGuessBtn(!1),this._showMatch9WaitOtherPlayerOver(!1),this._showDoubleNoDouble(!1),this._showFailDouble(!1),this._showHelpImg(!0);var i=CCDDZBagService.instance.getItemCountById(3);if(this._setDiamondUI(i),this.rollMsg.visible=!0,this.rollMsg.enableSendHorn(!1),this._mySeat.grpRedcoin.visible=!1,this.grpGiveWay.visible=!1,e.personalgame)this._mySeat.showDiamond(!1),this.isPersonalGame=!0,this.isCoupleGame=!1,ccserver.isCoupleGame=!1,ccserver.isPersonalGame=!0,this._setCurState("personalGame"),this._showHelpImg(!1);else{this.isPersonalGame=!1,this.isCoupleGame=!1,ccserver.isCoupleGame=!1,ccserver.isPersonalGame=!1;var n=CCGlobalGameConfig.getRoomConfig(e.roomID);if(!n&&(e.gameID||8==Math.floor(e.roomID/1e3)&&(e.gameID=8),n=CCGlobalGameConfig.getRoomCfgByGameId(e.gameID,e.roomID),!n))return void CCDDZMainLogic.backToRoomScene();ccserver.roomInfo=this._roomInfo=n,ccserver.isMatch=2==n.roomType;var o=ccserver.isMatch?"match":"normal";(8001==e.roomID||8002==e.roomID||8003==e.roomID||8004==e.roomID)&&(this.isCoupleGame=!0,ccserver.isCoupleGame=!0,o="couple",this.grpGiveWay.visible=!0),this._setCurState(o),ccserver.isMatch&&this._showHelpImg(!1),ccserver.isMatch?(this._mySeat.showDiamond(!1),6==ccserver.roomInfo.matchType?(this._showMatchTurnAndRank(!1),this._showMatch9Bottom(!0),this._setMatch9Turn(1),this._setMatch9CurRank(-1)):(this._showMatchTurnAndRank(!0),this._showMatch9Bottom(!1)),this.labMatchInfo.text=""):(this.labMatchInfo.text="...",this._mySeat.grpRedcoin.visible=!0,this._mySeat.userInfoView.avatar.setVipLevel(CCDDZMainLogic.instance.selfData.getCurVipLevel()),this._mySeat.showDiamond(!0),this.initGuessCardsView(),this.updateRedCoinInfo(),this._showFiveCardReward(!1),this._clearFiveCardView(),ccserver.reqFiveCard(this._roomInfo.roomID),this._initNewRed(),this._showMatchRank(!0),this.initMaxMultiple(this._roomInfo.maxOdds))}this._initGeneralHeadImgTouch(!0),this.addListeners(),this._newTable=!0,this.initData();var a=CCDDZMainLogic.instance.selfData;ccserver.isMatch||(this._mySeat.userInfoView.updateGold(a.gold),this._showDayTaskDefaultByOverNum(a.getDayTaskOverCount())),egret.setTimeout(function(){t._mySeat.userInfoView.avatar.imageId=a.imageid,t._mySeat.userInfoView.updateNickname(a)},this,100),CCalien.CCDDZSoundManager.instance.playMusic(CCGlobalResNames.bgm),a&&a.cardsRecorder&&a.cardsRecorder.length>=7?this.beforerecorderTime=a.cardsRecorder[6]:this.beforerecorderTime=0,this.rollMsg.showLast(2),this._clearRecorderInfo(0),this.refreshCardsRecorderAbout(),this._setTableRedInfo(),CCDDZMainLogic.instance.setScreenLandScape(1280,640)},t.prototype._showDayTaskDefaultByOverNum=function(e){var t=!1;e>0&&(t=!0),this.overTaskLabel.text=""+e,this.overTaskLabel.visible=t,this._showTaskRedImg(t)},t.prototype._showTaskRedImg=function(e){this.overTaskBgImg.visible=e},t.prototype._onDayTaskRewGetSucc=function(){var e=CCDDZMainLogic.instance.selfData.getDayTaskOverCount();this._showDayTaskDefaultByOverNum(e)},t.prototype._showJustOne=function(e){},t.prototype.setPGameView=function(e){this.lbRoomID.text=String(e.roomid),e.maxodd||(e.maxodd="无"),this.lbLimit.text=String(e.maxodd),this.cur_round=null==e.playround?1:e.playround+1,this.lbRound.text=this.cur_round+"/"+String(e.maxround),this.isowner=e.owner==ccserver.uid?!0:!1,this.owneruid=e.owner,this.roomid=e.roomid,this.total_round=e.maxround,this.masterCards.updateScore(e.bscore||0,1),this.gamestarted=e.gamestatus>1?!0:!1,CCalien.Native.instance.isNative||this._justSetShareParams(),this.isowner?(e.players&&e.players.length>=3?(this.setStartPgameBtnVisible(!0),this.btnShare.visible=!1):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0),this.labWaiting.visible=!1):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0,e.players&&e.players.length>=3?(this.labWaiting.text="等待房主开始",this.labWaiting.visible=!0):this.labWaiting.visible=!1),(2==e.gamestatus||e.players&&e.players.length>=3)&&(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!1),e.players&&this.playersSeatDown(e.players),this.setShareStart();var t=this.getSeatByUId(this.owneruid);t&&t.setOwnerFlagVisible(!0),ccserver.roomInfo=this._roomInfo={roomID:e.roomid,maxOdds:e.maxodd,maxround:e.maxround,baseScore:e.bscore,kickbacks:0}},t.prototype.onShow=function(e,t){switch(void 0===e&&(e=null),void 0===t&&(t=!1),e.personalgame?(this.isPersonalGame=!0,ccserver.isMatch=!1,ccserver.isPersonalGame=!0,e.roomID&&ccserver.QueryRoomInfoReq(e.roomID),this.btnShare.visible=!0):ccserver.isPersonalGame=!1,(8001==e.roomID||8002==e.roomID||8003==e.roomID||8004==e.roomID)&&(this.isCoupleGame=!0,ccserver.isCoupleGame=!0,this.currentState="couple",this.grpGiveWay.visible=!0),e.action){case"quick_join":this.sendQuickJoin();break;case"reconnect":ccserver.reconnect(0)}ccserver.isMatch?(ccserver.enterMatch(this._roomInfo.matchId),"reconnect"!=e.action?this.setlabWaiting("比赛开始，正在为您匹配对手..."):this.setlabWaiting("正在为您匹配对手...")):!ccserver.roomInfo||1e3!=ccserver.roomInfo.roomID&&1004!=e.roomID||this.setlabWaiting("正在为您匹配对手...")},t.prototype.beforeHide=function(){this.cleanSeat(),this.removeListeners(),this._clearRedNormalInterval(),this._clearFiveRewardTimeout(),this._timerClean&&egret.clearTimeout(this._timerClean),this._redProcessTimeOutId&&egret.clearTimeout(this._redProcessTimeOutId),this._showResultTimeOutId&&egret.clearTimeout(this._showResultTimeOutId),this._timerDelayJoin&&egret.clearTimeout(this._timerDelayJoin),this._showResultTimeOutId1&&egret.clearTimeout(this._showResultTimeOutId1),egret.Tween.removeTweens(this.recorderBubble),ccserver.playing=!1,ccserver.isMatch&&CCDDZPanelMatchWaitingInner.instance.close()},t.prototype.onHide=function(t,i){void 0===t&&(t=null),void 0===i&&(i=!1),e.prototype.onHide.call(this,t,i),this._seats.forEach(function(e){e.stopCD()})},t.prototype._onClickRed=function(){var e=(CCDDZMainLogic.instance,Number(this.redCount.text));if(0>=e){var t=this.getRedCoinLackCnt();return void CCDDZToast.show("游戏再赢"+t+"局即可抽取")}var i=CCDDZExchangeService.instance;i.doChouWangZha()||i.doChou(this._roomInfo.roomID)},t.prototype._showRedCount=function(e){this.redCountBg_img.visible=e,this.redCount.visible=e},t.prototype._onUserRedCountChange=function(e){var t=this._roomInfo.roomID;if(!ccserver.isMatch&&t&&1e3!=t&&1004!=t){var i=(e.data,!1),n=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(t);n.chance=n.chance||0,n&&n.chance>=0&&(this.redCount.text=""+n.chance,i=!0),this._showRedCount(i)}},t.prototype._showMatchTurnAndRank=function(e){this.matchTurn_group.visible=e,this._showMatchRank(e)},t.prototype._showMatchRank=function(e){this.matchRank_group.visible=e},t.prototype._setMatch9Turn=function(e){var t=CCGlobalGameConfig.getRoomConfigByMatchId(this._roomInfo.matchId);if(t.stage&&1==t.stage.length){var i=t.stage[0].handCount;this.match9Turn_label.textFlow=(new egret.HtmlTextParser).parser("<font color='#F0FF00'>"+e+"</font>/"+i)}},t.prototype._setMatch9CurRank=function(e){0>e?this.curRank_label.text="正在统计..":this.curRank_label.text=""+e},t.prototype._onClickMatch9Info=function(){CCDDZPanelMatch9Info.getInstance().show(this._match9Info)},t.prototype._showMatch9Bottom=function(e){this.match9_bottom_group.visible=e},t.prototype._showMatch9Rew=function(e){if(e){var t=e.matchid,i=CCGlobalGameConfig.getRoomConfigByMatchId(t);i&&6==i.matchType&&CCDDZPanelMatch9GetRew.getInstance().show(i,e)}this._showMatch9WaitOtherPlayerOver(!1)},t.prototype._onHornRecChange=function(){this.rollMsg.show()},t.prototype._checkShowFailDouble=function(){var e=this._mySeat,t=this.seat1,i=this.seat2,n=0;i&&i.userInfoData&&(n=i.userInfoData.getGold()||0);var o=0;t&&t.userInfoData&&(o=t.userInfoData.getGold()||0);var a=CCDDZBagService.instance.getItemCountById(3),r=(CCDDZMainLogic.instance.selfData.getGold(),{bShow:!1,nReason:1,sReason:""});return a<this._roomInfo.doublediamond?(r.bShow=!0,r.sReason="钻石不足,无法加倍",r.nReason=4):e.isMaster?n<this._roomInfo.doublelimit&&o<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=3,r.sReason="农民金豆不足"+this._roomInfo.doublelimit+",无法加倍"):i.isMaster?n<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=1,r.sReason="地主金豆不足"+this._roomInfo.doublelimit+",无法加倍"):o<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=1,r.sReason="地主金豆不足"+this._roomInfo.doublelimit+",无法加倍"),r},t.prototype._showDoubleNoDouble=function(e){this.double_group.visible=e,this.noDouble_group.visible=e},t.prototype._onClickDouble=function(){this._doubleRet&&this._doubleRet.bShow?CCDDZImgToast.instance.show(this,this._doubleRet.sReason):ccserver.reqDouble()},t.prototype._onClickNoDouble=function(){ccserver.reqNoDouble(),this._mySeat.stopCD(),this._clearAskDoubleTimeOut(),this._showDoubleNoDouble(!1),this._showFailDouble(!1)},t.prototype._onMyAskDoubleTimeOut=function(){this._mySeat.stopCD(),this._showDoubleNoDouble(!1),this._clearAskDoubleTimeOut(),this._showFailDouble(!1),this._mySeat.showDoubleTip(!0,!1)},t.prototype._onServerDoubleRep=function(e){if(e.params&&e.seatid&&e.params.length>=1){var t=e.params[0],i=this.getSeatById(e.seatid);if(!i)return;1==t?(i.showDoubleTip(!0,!1),i.showDoubleFlag(!1)):(i.showDoubleTip(!0,!0),i.showDoubleFlag(!0),i==this._mySeat&&(this._clearAskDoubleTimeOut(),this._mySeat.stopCD(),this._showDoubleNoDouble(!1),this._showFailDouble(!1)))}},t.prototype._showFailDouble=function(e,t){if(void 0===t&&(t=null),e){if(!(t>=1&&4>=t))return;this.failDoubleDesc1_img.source="failDoublePre"+t}this.failDouble_group.visible=e},t.prototype._showNextMasterCardGuessBtn=function(e){this.btnGuessCards.visible=!1},t.prototype._isEnoughChip=function(){var e=!1,t=CCDDZMainLogic.instance.selfData.gold,i=this._roomInfo.kickScore;if(i||(i=this._roomInfo.minScore),1==this._roomInfo.roomFlag)t>=i&&(e=!0);else{var n=CCDDZBagService.instance.getItemCountById(3);n>=i&&(e=!0)}return e},t.prototype._onClickReady=function(){this.cleanSeat(!1,!1,!0),this.initData(!0),this._showNextMasterCardGuessBtn(!1),this.onCloseGrpGuessOp(null),this._clearFiveRewAndCards(),ccserver.reqFiveCard(this._roomInfo.roomID),this.checkEnoughSendQuickJoin()
},t.prototype.checkEnoughSendQuickJoin=function(){this._isEnoughChip()?(this.setlabWaiting("正在为您匹配对手..."),this.sendQuickJoin(1)):CCDDZMainLogic.instance.enterGameItemNotEnough(this._roomInfo)},t.prototype._setDiamondUI=function(e){var t=e;this._mySeat.updateDiamond(t)},t.prototype._onSendQuickJoin=function(){this._showReadyBtn(!1),ccserver.isMatch||this.setlabWaiting("正在为您匹配对手...")},t.prototype._showReadyBtn=function(e){var t=!ccserver.isMatch&&!ccserver.isPersonalGame&&e;if(this.btnContinue.visible=t,t&&1==this._roomInfo.roomFlag){if("normal"==this.currentState||8001==this._roomInfo.roomID){var i=this._isInGuessTime();this.grpGuess.visible=i;var n="tipGuess",o=CCalien.CCDDZlocalStorage.getItem(n);this._showGuessNotice(i&&"1"!=o),CCalien.CCDDZlocalStorage.setItem(n,"1")}}else this.grpGuess.visible=!1,this._showGuessNotice(!1)},t.prototype._showGuessNotice=function(e){this.grpGuessNotice.visible=e},t.prototype._onBagRefresh=function(){var e=CCDDZBagService.instance.getItemCountById(3);this._roomInfo&&2==this._roomInfo.roomFlag&&ccserver.playing||this._setDiamondUI(e)},t.prototype._onClickRedNormal=function(){if(1e3==this._roomInfo.roomID)ccserver.reqRedNormalMoney();else if(!ccserver.isMatch&&!ccserver.isPersonalGame)if(1005==this._roomInfo.roomID)ccserver.reqNewGoldRedRew();else if(1004==this._roomInfo.roomID)CCDDZExchangeService.instance.doChou(this._roomInfo.roomID);else{var e=CCDDZMainLogic.instance,t=e.selfData.getOneNorRoomRedFromSmall();t?CCDDZExchangeService.instance.doChou(t.roomid):CCDDZExchangeService.instance.doChouNewGold()}this._showReadyBtn(!0)},t.prototype._showGrpRedStatus=function(e){this.grpAwardStatus.visible=e},t.prototype._showNewRed=function(e){this.grpAward.visible=e},t.prototype._initNewRed=function(){if(!ccserver.isPersonalGame&&!ccserver.isMatch){2==this._roomInfo.roomFlag?(this._roomInfo.rewardwinround?this._showNewRed(!1):this._showNewRed(!0),this._showNewRedHas(!1)):(this._showNewRed(!1),this._showNewRedHas(!0),this._setNewRedHasNum());var e=this._roomInfo.roomID;if(1001==e||1002==e||8001==e||1006==e)return this._showNormalRedImg(!1),this.setRedProcess(),void this._showGrpRed(!0);this._showGrpRed(!1),this._stopNewRedAni(),this._initNewRedProcess()}},t.prototype._setNewRedNum=function(e){var t=this.redNumGrp;e>0?(t.visible=!0,this.redNumLabel.text=""+e):t.visible=!1},t.prototype._onClickNewRed=function(){var e=this._roomInfo.roomID,t=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(e);if(1==this._roomInfo.roomFlag){if(1001==e||1002==e||8001==e||1006==e)return this._showNormalRedImg(!1),void CCDDZExchangeService.instance.doChou(e);if(this.canNewRed&&t&&t.chance>=1)return void CCDDZExchangeService.instance.doChou(e)}else if(2==this._roomInfo.roomFlag){if(8003==e||8004==e)return this._showNormalRedImg(!1),void CCDDZExchangeService.instance.doChou(e);if(t&&t.chance>=1)return void CCDDZExchangeService.instance.doChou(e)}this._tipNewRedInfo()},t.prototype._setTableRedInfo=function(){if(!ccserver.isMatch&&!ccserver.isPersonalGame){var e="",t=this._roomInfo.roomID,i=CCDDZMainLogic.instance.selfData.getRoomRedWinCnt(t);1==this._roomInfo.roomFlag?e="赢"+i+"局抽奖杯 ":2==this._roomInfo.roomFlag&&(e=this._roomInfo.rewardwinround?"赢"+this._roomInfo.rewardwinround+"局抽奖杯":"玩"+i+"局抽奖杯"),this.labRedInfo.text=e}},t.prototype._getNeedPlayInfo=function(){var e=this._roomInfo.roomID,t=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(e),i=1;return 1e3==e&&(i=3),t&&(i=1==this._roomInfo.roomFlag||this._roomInfo.rewardwinround?this.getRedCoinLackCnt():1e3==e?t.getchance>=2?3-(t.cnt||0):(t.getchance||0)+1-(t.cnt||0):1-(t.cnt||0)),i},t.prototype._tipNewRedInfo=function(){var e="",t=this._getNeedPlayInfo();1==this._roomInfo.roomFlag?e="再赢"+t+"局即可获得奖杯":2==this._roomInfo.roomFlag&&(e="再玩"+t+"局即可获得奖杯"),CCDDZToast.show(e)},t.prototype._setNewRedHasNum=function(){var e=this.hasRedNum||0,t=this.lblAward,i=""+e;t.text=i},t.prototype._showNewRedHas=function(e){this.lblAward.visible=e},t.prototype._showNormalRedImg=function(e){this.redNormal_img.visible=e},t.prototype._initNewRedProcess=function(){var e=this,t=this._roomInfo.roomID;if(1001!=t&&1002!=t&&8001!=t&&1006!=t){var i=this.lblAwardStatus;this._clearRedNormalInterval(),this._showNormalRedImg(!1);var n=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(t);if(console.log("_initNewRedProcess==================>",n),1==this._roomInfo.roomFlag){this._setNewRedNum(0),this.lblRound.visible=!1;var o=this._getNearestRedOpenTime();i.text=o.min+":"+o.sec;var a=o.min,r=o.sec,s="";this.newRedTime=o,n&&n.time&&n.chance>=1&&ccserver.tsServer>=n.time&&(this.canNewRed=!0,this._onHasRedChance()),this._redNormalNum=egret.setInterval(function(){if(r-=1,o.totS-=1,0>=r&&(r=59,a-=1,-1>=a)){r=0,a=0,o.totS=0;var n=CCDDZMainLogic.instance.selfData.getRoomWinCntInfo(t);n&&n.chance>=1&&(e.canNewRed=!0,e._onHasRedChance()),e._initNewRedProcess()}s=r,10>r&&(s="0"+r),i.text=a+":"+s},this,1e3)}else if(2==this._roomInfo.roomFlag){var c=0;if(this.lblRound.visible=!0,n){var h=(n.cnt||0)+1;c=n.chance||0,1e3==t?n.getchance<2?(h>n.getchance+1&&(h=n.getchance+1),i.text=h+"/"+(n.getchance+1)):(h>3&&(h=3),i.text=h+"/3"):i.text="1/1"}else 1e3==t?i.text="1/1":i.text="1/1";c>=1?this._onHasRedChance():(this._stopNewRedAni(),this._showNormalRedImg(!1)),this._setNewRedNum(c)}}},t.prototype._clearRedNormalInterval=function(){-1!=this._redNormalNum&&(egret.clearInterval(this._redNormalNum),this._redNormalNum=-1)},t.prototype._getNearestRedOpenTime=function(){var e=CCalien.CCDDZUtils.getCurTimeStamp(),t=new Date(e),i=t.getMinutes(),n=t.getSeconds(),o=Math.floor(i/5),a=5*o+4,r=a-i,s=60-n,c=60*r+s;return{min:r,sec:s,totS:c}},t.prototype._stopNewRedAni=function(){egret.Tween.removeTweens(this.redNormal_img),this.redNormal_img.rotation=0},t.prototype._onHasRedChance=function(){this._stopNewRedAni(),this._showNormalRedImg(!0);var e=null;(e=function(){egret.Tween.get(this.redNormal_img).to({rotation:20},100).to({rotation:-20},100).to({rotation:10},60).to({rotation:-10},60).to({rotation:0},30).wait(1e3).call(function(){e()}.bind(this))}.bind(this))()},t.prototype.onRedNormalMoneyInfoRep=function(e){var t=e.data;if(1==t.optype){if(null==t.result){this.fastRedValue=t.params;var i=CCDDZUtils.exchangeRatio(t.params/100,!0);CCDDZAlert.show("恭喜获得"+i+"奖杯!")}}else 3==t.optype},t.prototype.onAlertBtn=function(e,t){if("cancel"==e){var i=this.fastRedValue,n=CCDDZShareImageManager.instance.getShareScene(CCDDZShareImageManager.GAME_TYPE_FAST,i);CCDDZShareImageManager.instance.start(ccserver.uid,n)}},t.prototype._onBuyReviveSucc=function(){this.sendQuickJoin()},t.prototype._showRedNormalRule=function(){var e="";if(1e3==this._roomInfo.roomID)e="福袋规则：不限时3局场，不限制时间，只要完成3局就能福袋抽奖杯。\n特殊情况：\n       1）中途退出游戏：不限时3局场，退出游戏如果不超过120分钟，游戏局数会保留，超过120分钟，局数清零。\n       2）钻石不足赔付的处理：您（玩家）拥有多少钻石，只能产生这些钻石的输赢，系统不额外抽取，也不额外赔偿。\n服务费：每局游戏会收取一定的服务费\n";else if(1001==this._roomInfo.roomID)e="1）发牌：一副牌54张，一人17张，留3张做底牌，在确定地主之前玩家不能看底牌，地主确定后，底牌亮出，底牌分给地主。\n2）牌型大小：\n         火箭：最大，可以压制任意其他的牌。\n         炸弹：只比火箭小，比其他都大。同是炸弹按牌的值比大小。\n         单牌大小：大王>小王>2>A>K>Q>J>10>9>8>7>6>5>4>3（不分花色）。\n         对牌、三张牌、飞机都按牌的值进行大小比较。抽奖杯规则：赢5局抽一次奖杯。\n特殊情况：\n        您（玩家）拥有多少金豆，只能产生这些金豆的输赢，系统不额外抽取，也不额外赔偿\n";else if(1002==this._roomInfo.roomID)e="抽奖杯规则：赢3局抽一次奖杯。\n特殊情况：\n        您（玩家）拥有多少金豆，只能产生这些金豆的输赢，系统不额外抽取，也不额外赔偿\n服务费：每局游戏会收取一定的服务费\n";else if(8001==this._roomInfo.roomID||8002==this._roomInfo.roomID)e="游戏规则：2人进行游戏，一副扑克牌，两人每人发17张牌，剩余20张牌中3张为地主牌，其余17张为弃牌。\n让牌规则：抢地主时，每抢1次地主加一张让牌数，最多可抢5次，即最多让5张牌。比如地主让牌4张，农名出到手牌≤4张的时候，游戏结束，农民胜利。\n抽奖杯规则：赢1局抽一次奖杯。\n特殊情况：\n                您（玩家）拥有多少金豆，只能产生这些金豆的输赢，系统不额外抽取，也不额外赔偿\n服务费：每局游戏会收取一定的服务费。\n";else if(8003==this._roomInfo.roomID||8004==this._roomInfo.roomID)e="福袋规则：不限时1局场，不限制时间，只要完成1局就能福袋抽奖杯。\n特殊情况：\n        1）中途退出游戏：不限时1局场。\n        2）钻石不足赔付的处理：您（玩家）拥有多少钻石，只能产生这些钻石的输赢，系统不额外抽取，也不额外赔偿。\n服务费：每局游戏会收取一定的服务费。\n";else{if(1006!=this._roomInfo.roomID)return;e="福袋规则：不限时1局场，不限制时间，只要赢1局就能福袋抽奖杯。\n特殊情况：\n        1）中途退出游戏：不限时1局场。\n        2）钻石不足赔付的处理：您（玩家）拥有多少钻石，只能产生这些钻石的输赢，系统不额外抽取，也不额外赔偿。\n服务费：每局游戏会收取一定的服务费。\n"}CCDDZAlert.show(e,0,null,"left")},t.prototype._onClickRedNormalHelp=function(){this._showRedNormalRule()},t.prototype._onCloseRevivePanel=function(){CCDDZMainLogic.backToRoomScene()},t.prototype._onClickGold=function(){CCDDZPanelExchange2.instance.show()},t.prototype._onClickDiamond=function(){CCDDZPanelExchange2.instance.show(1)},t.prototype.doReconnectToGame=function(e){this.onShow({action:"reconnect",personalgame:e.personalgame,roomID:e.roomid})},t.prototype._clearMatchReviveInterval=function(){0!=this._matchReviveIntervalId&&egret.clearInterval(this._matchReviveIntervalId),this._matchReviveIntervalId=0},t.prototype._onMatchReviveTimeOut=function(e){this._clearMatchReviveInterval(),ccserver.giveUpMatch(this._roomInfo.matchId),CCDDZPanelMatchRevive.remove(),this._showMatchResult(e)||CCDDZMainLogic.backToRoomScene()},t.prototype._showMatchRevive=function(e){var t=(this._roomInfo.stage,e.params[4]);this._clearMatchReviveInterval();var i=e.params[3],n=CCDDZPanelMatchRevive.getInstance(),o=egret.setInterval(function(){i+=-1,0>i&&this._onMatchReviveTimeOut(e),n.updateCountDown(i)},this,1e3);this._matchReviveIntervalId=o;var a=function(){this._onMatchReviveTimeOut(e)},r=CCDDZMainLogic.instance.selfData.getGold(),s=function(){r<e.params[2]?CCDDZImgToast.instance.show(n,"金豆不足"):ccserver.reqMatchRevive()};n.show(s.bind(this),a.bind(this)),n.setRankSub(t),n.setReviveCost(e.params[2]),n.updateCountDown(i)},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZScenePlay.prototype,"CCDDZScenePlay");var CCDDZEventManager=CCalien.CCDDZEventManager,CCDDZSceneRoom=function(e){function t(){var t=e.call(this)||this;return t._sceneAnimationDuration=500,t._isShowFreeDiamond=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){this.skinName=scenes.CCDDZSceneRoomSkin,this._self=CCDDZMainLogic.instance.selfData},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this._rollMsgHorizontal=this.rollMsg.horizontalCenter,this.navigator.push(CCDDZPageChannels),this.onNavigate(null);var t=CCDDZEventManager.instance;t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),t.registerOnObject(this,this.grpBottom,egret.TouchEvent.TOUCH_TAP,this.onGrpBottomTap,this),t.registerOnObject(this,this.gold,egret.TouchEvent.TOUCH_TAP,this._onClickGold,this),t.registerOnObject(this,this.diamond,egret.TouchEvent.TOUCH_TAP,this._onClickDiamond,this),t.registerOnObject(this,this.grpRedcoin,egret.TouchEvent.TOUCH_TAP,this._onClickExchange,this),t.registerOnObject(this,this.navigator,CCalien.CCDDZNavigator.NAVIGATE,this.onNavigate,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.SHOW_ANNOUNCE,this.showAnnounce,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.SHOW_LOTTERY,this.showLotteryLuck,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_FRREWARD_GET_SUCC,this._onFRechargeRewGetSucc,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.BUY_REVIVE_SUCC,this._onBuyReviveSucc,this),t.registerOnObject(this,CCDDZMailService.instance,CCGlobalEventNames.MAIL_UNREAD_UPDATE,this._onMailUnreadUpdate,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.USER_RED_COUNT_CHANGE,this._onUserRedCountChange,this),t.registerOnObject(this,CCalien.CCDDZDispatcher,CCGlobalEventNames.FRECHARGE_HASUPDATE,this._onFRechargeUpdate,this),ccserver.addEventListener(CCGlobalEventNames.USER_GET_ACTInfo_REP,this._onRecvGetActInfoRep,this),ccserver.addEventListener(CCGlobalEventNames.USER_GET_REWARD_REP,this._onRecvGetActRewRep,this),ccserver.addEventListener(CCGlobalEventNames.JOIN_PGAME_REP,this.onJoinRep,this),CCalien.CCDDZDispatcher.addEventListener(CCGlobalEventNames.ACT_RED_CHANGE,this._initActRed,this),CCDDZExchangeService.instance.announce&&this.showAnnounce(null)},t.prototype._setIsHome=function(e){this._isHome=e},t.prototype._onFRechargeUpdate=function(){var e=CCDDZMainLogic.instance.selfData;e.isNotBuyFRecharge()||(this.mFRechageBg_img.visible=!1,e.isGetTodayFRechargeRew()||e.isFRechargeRewGetOver()||CCDDZPanelFRGetRew.getInstance().show())},t.prototype._onClickKefu=function(){this._clearTipWX(),this._saveHasClickWatchWX(),CCGlobalGameConfig.showKeFu()},t.prototype._onClickRecharge=function(){ccserver._isInDDZ?this.openDDZShop():CCDDZPanelExchange2.instance.show()},t.prototype._enableEvent=function(e){var t="addEventListener";e||(t="removeEventListener"),this[t](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[t](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.mFRechageBg_img.addClickListener(this._onClickFRecharge,this),this.signBtn.addClickListener(this._onClickSign,this),this.keFuBtn.addClickListener(this._onClickKefu,this),this.settingBtn.addClickListener(this._onClickSetting,this),this.taskGroup.addClickListener(this._onClickTask,this),this.rechargeGroup.addClickListener(this._onClickRecharge,this),this.inviteGroup.addClickListener(this._onClickInvite,this),this.redBtn.addClickListener(this._onClickGetRed,this),this.backGroup.addClickListener(this._onClickBack,this),this.actGroup.addClickListener(this._onClickAct,this),this.emailGroup.addClickListener(this._onClickEmail,this),this.redExchangeImg.addClickListener(this._onClickExchange,this),this.publicWXGroup.addClickListener(this._onClickWatchWX,this),this.luckyImg.addClickListener(this._onClickLucky,this),this.vipGroup.addClickListener(this._onClickVip,this),this.monthcardImg.addClickListener(this._onClickMonthCard,this),this.vipLucky.addClickListener(this._onClickVipLucky,this),this.mondayBtn.addClickListener(this._onClickMonday,this),this.grpShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onGrpShareTap,this),CCalien.CCDDZDispatcher[t](CCGlobalEventNames.SHOW_PAYCHAT,this.showLaba,this),ccserver[t](CCEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this)},t.prototype._initMonday=function(){return void(this.mondayBtn.visible=!1)},t.prototype._onClickMonday=function(){CCDDZPanelMonday.instance.show()},t.prototype.showLaba=function(e){this.rollMsg.show()},t.prototype.onBagInfoRep=function(e){var t=e.data;CCDDZBagService.instance.bagItemArray.forEach(function(e){e.count=0}),t.items.forEach(function(e){CCDDZBagService.instance.updateItemByData(e)}),CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.BAG_INFO_REFRESH,!1)},t.prototype._onGrpShareTap=function(e){if(CCalien.Native.instance.isNative){var t=CCGlobalWxHelper;t.shareForAndroidApp()}else CCGlobalWxHelper.shareForPhone()},t.prototype._showEmailDefaultUnreadNum=function(e){var t=!1;e>0&&(t=!0),this.newEmailNumLabel.text=""+e,this.newEmailNumLabel.visible=t,this.newEmailBgImg.visible=t},t.prototype._onMailUnreadUpdate=function(e){var t=e.data;t&&t.count>=0&&this._showEmailDefaultUnreadNum(t.count)},t.prototype._onClickAct=function(){CCDDZPanelActAndNotice.getInstance().showThanksgiving()},t.prototype._onClickEmail=function(){CCDDZPanelMail.getInstance().show()},t.prototype._onClickExchange=function(){ccserver._isInDDZ?this.openDDZShop(4):CCDDZPanelExchange2.instance.show(4)},t.prototype._onClickGold=function(){ccserver._isInDDZ?this.openDDZShop():CCDDZPanelExchange2.instance.show()},t.prototype._onClickDiamond=function(){ccserver._isInDDZ?this.openDDZShop(1):CCDDZPanelExchange2.instance.show(1)},t.prototype.openDDZShop=function(e){void 0===e&&(e=0),ccserver.ddzDispatchEvent(1,"",{type:2,shopFlag:e})},t.prototype._playLight=function(e,t){e.mask=t;var i=t.x,n=t.y,o=e.x+e.width+10,a=null;(a=function(){egret.Tween.get(t).to({x:o,y:n},1e3).wait(500).to({x:i,y:n},500).call(function(){a()})})()},t.prototype._onClickWatchWX=function(){CCDDZPanelFollowCourse.instance.show()},t.prototype._onClickVip=function(){CCDDZPanelVip.instance.show()},t.prototype._onClickLucky=function(){CCDDZPanelLucky.instance.show(0)},t.prototype._onClickVipLucky=function(){this._showVipLuckyRedImg(!1),this._recordTipTimeStampByKey("showVipLuckyRed"),CCDDZPanelLucky.instance.show(1)},t.prototype._onClickMonthCard=function(){CCDDZPanelMonthCard.instance.show()},t.prototype._showVipLuckyRedImg=function(e){this.vipLuckyRedImg.visible=e},t.prototype._showGetDiamond=function(){1!=this._isShowFreeDiamond&&(this._isShowFreeDiamond=!0,CCDDZPanelMonthCardReward.instance.show())},t.prototype._onAddToStage=function(){},t.prototype._onRemovedToStage=function(){this._enableEvent(!1)},t.prototype.showAnnounce=function(e){this.rollMsg.show(!1)},t.prototype.showLotteryLuck=function(e){this.rollMsg.show(!1)},t.prototype._showInviteList=function(){CCDDZInviteService.instance.clearInvitePlayersList(),CCDDZInviteService.instance.getInvitePlayersList(),CCDDZPanelDayRed.instance.show()},t.prototype._onClickInvite=function(){return},t.prototype.onCloseInvite=function(){},t.prototype._showBackGroup=function(e){this.backGroup.visible=e},t.prototype._showGrpShare=function(e){return void(this.grpShare.visible=!1)},t.prototype.onNavigate=function(e){CCGlobalWxHelper.doWebH5ShareCfg(),!e||e.data.page instanceof CCDDZPageChannels?(this.imgRoomTitle.source=CCGlobalResNames.cc_room_word_25,this._showBackGroup(!1),this._setIsHome(!0),CCalien.Native.instance.isNative&&"Android"==egret.Capabilities.os&&this._showBackGroup(!0),this._showWatchWX(!0),this._showGrpShare(!0),this._resetRollMsgHorizontal()):(this._setIsHome(!1),this._showWatchWX(!1),this._showBackGroup(!0),this._onChangeCenterHornPos(),e.data.page instanceof CCDDZPageNormalChannel?(this.imgRoomTitle.source="cc_room_three_title",this._showGrpShare(!0)):(this.imgRoomTitle.source=CCGlobalResNames.cc_room_word_23,this._showGrpShare(!1)))},t.prototype.onGrpBottomTap=function(e){switch(e.target.name){case"home_page":break;case"add_favorite":break;case"avatar":CCDDZPanelProfile.instance.show(function(){CCDDZMainLogic.instance.refreshSelfInfo()})}},t.prototype.showBank=function(){},t.prototype._onClickBack=function(){return 1==ccserver._isInDDZ?void this.quitGame():void(this._isHome?CCDDZPanelAlert.instance.show("再赢几局就能拿奖杯了，真的要离开吗？",0,function(e){"confirm"==e&&CCalien.Native.instance.closeApp()}):this.navigator.pop())},t.prototype.quitGame=function(){ccserver.ddzDispatchEvent(1,"",{type:1})},t.prototype.doBack=function(){this._onClickBack()},t.prototype.onPanelBindPhoneResult=function(e){},t.prototype.checkRedNormalDiamondNum=function(){var e=CCDDZBagService.instance.getItemCountById(3),t=CCGlobalGameConfig.getSuitableRoomConfig(e,2);return t||(t=CCGlobalGameConfig.getRoomConfigById(1e3)),t.minScore>e?void CCDDZMainLogic.instance.noDiamondGetNewDiamondRewOrBuyRevive(t):void CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{action:"quick_join",roomID:1e3},CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype.checkGoldNum=function(){var e=CCGlobalGameConfig.getRoomConfigById(1004),t=CCDDZMainLogic.instance.selfData.gold;return console.log("checkGoldNum==============>",t),e.minScore>t?void CCDDZMainLogic.instance.ifBuyGoldReviveMaxTipShop(e.minScore):void CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{action:"quick_join",roomID:1004},CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype.joinSpecialRoom=function(e){e&&CCGlobalGameConfig.getRoomConfigById(e)&&CCalien.CCDDZSceneManager.show("SceneCmpChicken",{action:"quick_join",roomID:e},CCalien.CCDDZsceneEffect.CCDDFade)},t.prototype._onShowNewReward=function(){CCDDZPanelFreshManReward.instance.show()},t.prototype.onMyUserInfoUpdate=function(e){void 0===e&&(e=null);var t=this._self;if(t.uid){this._initMonthCardFreeDiamond(),this._initVipRedImg();var i=CCDDZBagService.instance.getItemCountById(3);if(this.diamond.updateGold(i),this.gold.updateGold(t.gold),this.lbRedCoin.text=""+(null==this._self.redcoin?"0.00":CCDDZUtils.exchangeRatio(this._self.redcoin/100,!0)),this._showDayTaskDefaultByOverNum(t.getDayTaskOverCount()),this._initTaskRedImg(),this._initActRed(),this._initRedNum(),this._initVipLucky(),this._initMonday(),this.avatar.setVipLevel(t.getCurVipLevel()),t.imageid&&(this.avatar.imageId=t.imageid),t.nickname){var n=t.nickname.substr(0,10);this.labNickName.text=n+"("+t.fakeuid+")",this.checkShareRoom()}}},t.prototype._showActRed=function(e){},t.prototype._initActRed=function(){this._self.shouldShowActRed()?this._showActRed(!0):this._showActRed(!1)},t.prototype._initTaskRedImg=function(){this._self.shouldShowTaskRed()&&this._showTaskRedImg(!0)},t.prototype.checkShareRoom=function(){var e=CCalien.Native.instance,t=e.getUrlArg(),i=t.share_room;console.log("checkShareRoom==>",i);var n=Number(i);n&&ccserver.JoinPGameReq(n)},t.prototype.checkNickname=function(){0==CCDDZMainLogic.instance.checkNicknameCount&&(this._self.nickname.match(/^用户\w{15}/)&&CCDDZPanelModifyNickname.instance.show(),CCDDZMainLogic.instance.checkNicknameCount++)},t.prototype._onClickGetRed=function(){var e=this,t=Number(this.redNumLabel.text);if(!t||0>=t)return void CCDDZAlert.show("玩游戏即可抽取，是否前往",1,function(t){if("confirm"==t){var i=e.navigator.currentPage;i instanceof CCDDZPageChannels&&i.toDiamondPage()}});var i=CCDDZExchangeService.instance,n=this._self.getOneNorRoomRedFromSmall();n&&n.roomid?CCDDZExchangeService.instance.doChou(n.roomid):i.doChouWangZha()||i.doChouNewGold()},t.prototype._showFRecharge=function(){this._bInLobby&&CCDDZPanelActAndNotice.getInstance().showFRecharge()},t.prototype._onSignEffectLoadOver=function(e){return void!this._bInLobby},t.prototype._showSignRew=function(){},t.prototype._onMailEffectLoadOver=function(e){!this._bInLobby},t.prototype._showEmail=function(){},t.prototype._getThanksPopTimeStamp=function(){var e=CCalien.CCDDZlocalStorage.getItem("PopThanksTime");return Number(e)},t.prototype._recordThanksPopTimeStamp=function(){var e=(new Date).getTime();CCalien.CCDDZlocalStorage.setItem("PopThanksTime",""+e)},t.prototype._isShouldPopThanks=function(){var e=this._getThanksPopTimeStamp();if(e){var t=(new Date).getDate(),i=new Date(e).getDate();if(i+1>t)return!1}return!0},t.prototype._initThanks=function(){CCDDZUtils.isInTimeSection("2017-11-23 00:00:00","2017-11-26 00:00:00",(new Date).getTime())&&this._isShouldPopThanks()&&(this._recordThanksPopTimeStamp(),CCDDZPanelActAndNotice.getInstance().showThanksgiving())},t.prototype.onSignInRep=function(e){ccserver.removeEventListener(CCGlobalEventNames.USER_DAY_SIGN_IN_REP,this.onSignInRep,this),this._initTipAppLucky()||this._initFRecharge()||this._initTipMonthCard()||this._initTipInviteList()||!this._initFFF();var t=this._self;if(1!=e.data.today?(t.setTodaySigned(!1),t.isNotBuyFRecharge()||null==t.frechargerewardday||t.isGetTodayFRechargeRew()||t.isFRechargeRewGetOver()||CCDDZPanelFRGetRew.getInstance().show(),this._bShowSign=!0,this._showSignRew()):(this._bShowSign=!1,t.setTodaySigned(!0),t.isNotBuyFRecharge()?CCDDZMainLogic.instance.alms():t.isGetTodayFRechargeRew()?CCDDZMainLogic.instance.alms():t.isHadGetFRechargeRew()&&!t.isFRechargeRewGetOver()?CCDDZPanelFRGetRew.getInstance().show():CCDDZMainLogic.instance.alms()),t.freshrewardgot&&1==t.freshrewardgot){if(this._bShowSign)return;this._onShowNewReward()}},t.prototype.onHappyBeanConsumeRep=function(e){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING),0==e.data.result&&CCDDZAlert.show(lang.exchange_succ1)},t.prototype.onHappyBeanExchangeRep=function(e){CCalien.CCDDZDispatcher.dispatch(CCGlobalEventNames.HIDE_WAITING),0==e.data.result&&CCDDZAlert.show(lang.exchange_succ2)},t.prototype._initLucky=function(){var e=!1,t=CCGlobalGameConfig.getCfgByField("webCfg.luck");t&&1==t.status&&(e=!0),this.luckyImg.visible=!1},t.prototype._initVipLucky=function(){var e=!1,t=CCGlobalGameConfig.getCfgByField("webCfg.vip");t&&1==t.status&&(e=!0,this._initVipLuckyRedImg()),this.vipLuckyGrp.visible=e},t.prototype._initVipLuckyRedImg=function(){var e=CCDDZMainLogic.instance.selfData.getTodayVipLucky(),t=!1;e.inTime&&(t=this._shouldPopThisDay("showVipLuckyRed",!1)),this._showVipLuckyRedImg(t)},t.prototype.beforeShow=function(e,t){var i=CCDDZMainLogic.instance;this._isShowFreeDiamond=!1,this.grpShare.visible=!1,this.newActBgImg.visible=!1,this._showEmailDefaultUnreadNum(CCDDZMailService.instance.unreadCount),this._setIsHome(!0),this._bInLobby=!0,this._bShowSign=!1,this.rollMsg.visible=!0,this.redNumLabel.visible=!1,this.redCountBgImg.visible=!1,this.rollMsg.enableSendHorn(!1),this.rollMsg.setInLobby(!0),this._enableEvent(!0),this._resetRollMsgHorizontal(),this._initShowInviteList(),this._initRedNum(),this._initTipWX(),this._initLucky(),ccddzwebService.getHornRec(this._onHttpRecvHornRec.bind(this)),ccddzwebService.loadLog(2,0),CCalien.CCDDZEventManager.instance.enableOnObject(this),this.onMyUserInfoUpdate(),this.navigator.active(),ccserver.addEventListener(CCGlobalEventNames.USER_DAY_SIGN_IN_REP,this.onSignInRep,this),ccserver.getSignInInfo(),ccserver.isInNewyearGiftReqNewYear(),ccserver.reqDownAppRewInfo();var n=this._sceneAnimationDuration;egret.Tween.get(this.grpTop).to({top:-this.grpTop.height}).wait(n).to({top:0},n,egret.Ease.cubicOut),egret.Tween.get(this.grpBottom).to({bottom:-this.grpBottom.height}).wait(n).to({bottom:0},n,egret.Ease.cubicOut),this.rollMsg.visible=!0,this.rollMsg.showLast(2),CCalien.CCDDZSoundManager.instance.enablePlayMusic(!0),CCalien.CCDDZSoundManager.instance.playMusic(CCGlobalResNames.bgm);var o=(this.navigator.currentPage,this.navigator.currentPage.skinName.name);if(e)if(e.hasOwnProperty("jump2match"))"CCDDZPageMatchChannelSkin"!=o&&this.navigator.push(CCDDZPageMatchChannel);else if(e.hasOwnProperty("jump2cc")){if(console.log("jump2cc--------------->",this.navigator.currentPage.skinName.name),"CCDDZPageNormalChannelSkin"!=this.navigator.currentPage.skinName.name){var a=CCGlobalGameConfig.getRoomCfgByGameId(10,0),r=[].concat(a);this.navigator.push(CCDDZPageNormalChannel,!0,{roomList:r,scale:.8,colNum:3,gapV:50})}}else if(e.toGold||e.toDiamond||e.toNiu||e.toPdk||e.toSmall||e.toFish||e.toFFF||e.toLLT){if("CCDDZPageChannelSkin"!=o&&this.navigator.push(CCDDZPageChannels),i.resetChannelClick(),e.toGold)i.setWillToGame(CCDDZ_T_G_NGOLD);else if(e.toDiamond)i.setWillToGame(CCDDZ_T_G_DIAMOND);else if(e.toNiu)i.setWillToGame(CCDDZ_T_G_NIU);else if(e.toDzpk)i.setWillToGame(CCDDZ_T_G_DZPK);else if(e.toPdk)i.setWillToGame(CCDDZ_T_G_P_DK);else if(e.toSmall){var s=this.navigator.currentPage;s.onToSmallGame()}else if(e.toFish)i.setWillToGame(CCDDZ_T_G_FISH);else{if(e.toFFF)return void i.toFFF();if(e.toLLT)return void i.toLLT();e.toNiu?i.setWillToGame(CCDDZ_T_G_LLK):e.toNiu?i.setWillToGame(CCDDZ_T_G_2048):e.toNiu&&i.setWillToGame(CCDDZ_T_G_FFL)}e.toSmall||ccserver.checkReconnect()}CCDDZBagService.instance.refreshBagInfo(),i.refreshSelfInfo(),i.setScreenLandScape(1280,640)},t.prototype.beforeHide=function(){this._bInLobby=!1,CCDDZEventManager.instance.disableOnObject(this),this.navigator.deactive();var e=this._sceneAnimationDuration;egret.Tween.get(this.grpTop).to({top:-this.grpTop.height},e,egret.Ease.cubicIn),egret.Tween.get(this.grpBottom).to({bottom:0},e,egret.Ease.cubicIn)},t.prototype._onClickTask=function(){var e=this._self;e.shouldShowTaskRed()&&(ccserver.reqNewPlayerClickTask(),e.setNotShowTaskRed(),this._showTaskRedImg(!1)),CCDDZPanelDayTask.getInstance().show()},t.prototype._onClickNotice=function(){CCDDZPanelActAndNotice.getInstance().showNotice()},t.prototype._showDayTaskDefaultByOverNum=function(e){var t=!1;e>0&&(t=!0),this.mOverTask_label.text=""+e,this.mOverTask_label.visible=t,this._showTaskRedImg(t)},t.prototype._onClickFRecharge=function(){this._showFRecharge()},t.prototype._showTaskRedImg=function(e){this.mOverTaskBg_img.visible=e},t.prototype._onClickSetting=function(){ccserver._isInDDZ?ccserver.ddzDispatchEvent(1,"",{type:3}):CCDDZPanelSetting.instance.show()},t.prototype._onClickSign=function(){this._showSignRew()},t.prototype._playFRechargeAni=function(){},t.prototype._initFRecharge=function(){var e=this.navigator.currentPage;if(e instanceof CCDDZPageChannels){var t=this._self,i=t.isNotBuyFRecharge(),n=t.isHadGetFRechargeRew();if(i){if(this.mFRechageBg_img.visible=!0,this._shouldPopThisDay("PopFRTime"))return this._showFRecharge(),!0}else if(this.mFRechageBg_img.visible=!1,!n&&null!=t.frechargerewardday&&!t.isFRechargeRewGetOver())return CCDDZPanelFRGetRew.getInstance().show(),!0;return!1}},t.prototype._shouldPopThisDay=function(e,t){void 0===t&&(t=!0);var i=this.navigator.currentPage;if(!(i instanceof CCDDZPageChannels))return!1;var n=(this._self,e),o=this._isShouldTipByKey(n);return o?(t&&this._recordTipTimeStampByKey(n),!0):!1},t.prototype._initFFF=function(){return this._shouldPopThisDay("tipFFF")?(CCDDZPanelActAndNotice.getInstance().showFFFAct(),!0):!1},t.prototype._initRealName=function(){return CCDDZMainLogic.instance.selfData.realName?!1:this._shouldPopThisDay("realName")?(CCDDZPanelRealName.getInstance().show(),!0):!1},t.prototype._onFRechargeRewGetSucc=function(){this.mFRechageBg_img.visible=!1},t.prototype._onDayTaskRewGetSucc=function(){var e=this._self.getDayTaskOverCount();this._showDayTaskDefaultByOverNum(e)},t.prototype._onHornRecChange=function(e){this.rollMsg.show()},t.prototype._onHttpRecvHornRec=function(e){if(e&&e.total_items>0&&e.items){e.items.reverse();var t=this._self;t.cleanLocalHornRecByHttp();for(var i=0;i<e.total_items;++i)t.addHornTalkRecByHttp(e.items[i])}},t.prototype._onRecvGetActInfoRep=function(e){var t=e.data;t&&(1==t.optype?t.params?1==t.params[0]?CCalien.Native.instance.isNative?this._showGetRewDownAppBtn():CCalien.Native.instance.isAli()||CCalien.Native.instance.isWXMP||"iOS"!=egret.Capabilities.os?this._showDownAppBtn():this._showGetRewDownAppBtn():2==t.params[0]?this._hideDownAppGroup():t.params[1]&&1==t.params[1]?(this._onClickDownApp(),CCalien.Native.instance.isNative||this._showDownAppBtn()):CCalien.Native.instance.isNative?this._hideDownAppGroup():this._showDownAppBtn():CCalien.Native.instance.isNative?this._hideDownAppGroup():this._showDownAppBtn():2==t.optype)},t.prototype._showGetRewDownAppBtn=function(){this.downAppGroup.visible=!1,this._onClickGetDownAppRew()},t.prototype._showDownAppBtn=function(){},t.prototype._hideDownAppGroup=function(){this.downAppGroup.visible=!1,this._self.setNotLoginApp(!1)},t.prototype._onClickDownApp=function(){CCDDZPanelActAndNotice.getInstance().showAPPAct()},t.prototype._onClickGetDownAppRew=function(){ccserver.reqGetDownAppRew()},t.prototype._onRecvGetActRewRep=function(e){var t=e.data,i=null,n="center";(0==t.result||null==t.result)&&(1==t.optype?(n="left",i="恭喜您获得以下奖励:\n1.金豆x5000\n2.记牌器x3天\n3.每日在APP签到多得10%金豆",this._hideDownAppGroup()):2==t.optype||3==t.optype||11==t.optype||9==t.optype&&this._showVipRedImg(!1),CCDDZBagService.instance.refreshBagInfo()),i&&CCDDZPanelAlert.instance.show(i,0,null,n)},t.prototype._showWatchWX=function(e){this.publicWXGroup.visible=e},t.prototype._onChangeCenterHornPos=function(){this.rollMsg.horizontalCenter=0},t.prototype._resetRollMsgHorizontal=function(){this.rollMsg.horizontalCenter=this._rollMsgHorizontal},t.prototype._playLightOnTarget=function(){var e=null;egret.Tween.removeTweens(this.downLight_img),(e=function(t,i,n,o,a,r){i.scaleX=n,i.scaleY=n,egret.Tween.get(i).to({scaleX:a,scaleY:a},800).wait(500).to({scaleX:n,scaleY:o},500).call(function(){e(t,i,n,o,a,r)})})(this,this.downLight_img,0,0,1.7,1.7)},t.prototype._onBagRefresh=function(){var e=CCDDZBagService.instance.getItemCountById(3);this.diamond.updateGold(e)},t.prototype.onJoinRep=function(e){var t=e.data;0==t.result&&(CCalien.CCDDZSceneManager.show(CCGlobalSceneNames.PLAY,{roomID:t.roomid,personalgame:!0},CCalien.CCDDZsceneEffect.CCDDFade),CCDDZJoinTable.instance.close())},t.prototype._onBuyReviveSucc=function(){var e=this.navigator.currentPage;e instanceof CCDDZPageChannels?CCDDZMainLogic.instance.getWillToGame()==CCDDZ_T_G_DIAMOND?this.checkRedNormalDiamondNum():CCDDZMainLogic.instance.getWillToGame()==CCDDZ_T_G_GOLD&&this.checkGoldNum():e instanceof CCDDZPageChannelBase&&e.selectedRoom&&1004==e.selectedRoom.roomID&&this.checkGoldNum()
},t.prototype.doReconnectToLobby=function(e){var t=CCDDZMainLogic.instance;t.refreshSelfInfo();var i=this.navigator.currentPage;if(i instanceof CCDDZPageChannels){t.setWillToGame(CCDDZ_T_G_CC);var n=t.getWillToGame();t.setWillToGame(0),n&&n>=1&&11>=n&&n==CCDDZ_T_G_CC&&(10001==e.roomid&&(e.isReconnect=!0),CCDDZMainLogic.instance.checkCCGoldNum(e))}else{var o=i.selectedRoom;if(!o)return;if(i.selectedRoom=null,2==o.roomType)ccserver.getMatchSignUpInfo(o.matchId);else if(1==o.roomType){var a=0,r=void 0;if(1==o.roomFlag?(a=this._self.gold,r="金豆"):2==o.roomFlag&&(a=CCDDZBagService.instance.getItemCountById(3),r="钻石"),a>o.maxScore){var s=CCGlobalGameConfig.getSuitableRoomConfig(this._self.gold);CCDDZAlert3.show("您拥有的"+r+"大于"+o.maxScore+"\n推荐进入"+s.name+"游戏",this.joinSpecialRoom.bind(this,s.roomID),"cc_common_btn_enter",!0)}else a>=o.minScore?CCalien.CCDDZSceneManager.show("SceneCmpChicken",{action:"quick_join",roomID:o.roomID},CCalien.CCDDZsceneEffect.CCDDFade):t.enterGameItemNotEnough(o)}}},t.prototype._showVipRedImg=function(e){this.vipCanGetImg.visible=e},t.prototype._initVipRedImg=function(){var e=CCDDZMainLogic.instance.selfData,t=e.getCurVipLevel(),i=!1;t>=1&&(e.hasGetTodayVipRew()||(i=!0)),this._showVipRedImg(i)},t.prototype._initRedNum=function(){return},t.prototype._onUserRedCountChange=function(e){this._initRedNum()},t.prototype._hasClickWatchWX=function(){var e=CCalien.CCDDZlocalStorage.getItem("hasClickKf");return e?!0:!1},t.prototype._saveHasClickWatchWX=function(){CCalien.CCDDZlocalStorage.setItem("hasClickKf","1")},t.prototype._clearTipWX=function(){this.tipWxImg.visible=!1,egret.Tween.removeTweens(this.tipWxImg)},t.prototype._initTipWX=function(){},t.prototype._runTipWXAni=function(){var e=this.tipWxImg.y;egret.Tween.get(this.tipWxImg).set({visible:!0,loop:!0}).to({y:e+10},400).to({y:e},400).call(this._runTipWXAni,this)},t.prototype._isShouldTipByKey=function(e){var t=CCalien.CCDDZlocalStorage.getItem(e);if(!t)return!0;var i=Number(t),n=CCalien.CCDDZUtils.getCurTimeStamp(),o=CCalien.CCDDZUtils.checkTwoTimestampIsOtherDay(i,n);return o},t.prototype._recordTipTimeStampByKey=function(e){var t=CCalien.CCDDZUtils.getCurTimeStamp();CCalien.CCDDZlocalStorage.setItem(e,""+t)},t.prototype._initTipBindPhone=function(){var e=CCGlobalUserData.instance.hasBindPhone();return e?!1:this._shouldPopThisDay("tipBindTime")?(CCDDZPanelBindPhone.getInstance().show(2,{showClose:!0,actTipBind:!0}),!0):!1},t.prototype._initTipLucky=function(){return this._shouldPopThisDay("tipLucky")?(CCDDZPanelLucky.instance.show(0),!0):!1},t.prototype._initTipInviteList=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg");return e&&1==e.status&&this._shouldPopThisDay("tipInviteList")?(this._onClickInvite(),!0):!1},t.prototype._initShowInviteList=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg");e&&1==e.status?this.inviteGroup.visible=!0:this.inviteGroup.visible=!1},t.prototype._initMonthCardFreeDiamond=function(){var e=CCDDZMainLogic.instance.selfData;return 1==e.checkMonthCardFreeDiamond()?(this._showGetDiamond(),!0):!1},t.prototype._initTipMonthCard=function(){if(this._shouldPopThisDay("tipMonthCard")){var e=CCDDZMainLogic.instance.selfData;if(e.checkMonthCardEndTime())return this._onClickMonthCard(),!0}return!1},t.prototype._initTipAppLucky=function(){var e=CCGlobalGameConfig.getCfgByField("webCfg.appLucky");return e&&1==e.status&&this._shouldPopThisDay("tipAppLucky")?(CCDDZPanelLucky.instance.show(2),!0):!1},t}(CCalien.CCDDZSceneBase);__reflect(CCDDZSceneRoom.prototype,"CCDDZSceneRoom");