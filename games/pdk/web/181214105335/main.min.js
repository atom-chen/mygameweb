function md5(n){var r,d,e,t,o,a,i,H,F,G=Array(),I=7,g=12,u=17,f=22,s=5,c=9,U=14,C=20,h=4,v=11,T=16,m=23,x=6,S=10,w=15,A=21;for(n=uTF8Encode(n),G=convertToWordArray(n),a=1732584193,i=4023233417,H=2562383102,F=271733878,r=0;r<G.length;r+=16)d=a,e=i,t=H,o=F,a=FF(a,i,H,F,G[r+0],I,3614090360),F=FF(F,a,i,H,G[r+1],g,3905402710),H=FF(H,F,a,i,G[r+2],u,606105819),i=FF(i,H,F,a,G[r+3],f,3250441966),a=FF(a,i,H,F,G[r+4],I,4118548399),F=FF(F,a,i,H,G[r+5],g,1200080426),H=FF(H,F,a,i,G[r+6],u,2821735955),i=FF(i,H,F,a,G[r+7],f,4249261313),a=FF(a,i,H,F,G[r+8],I,1770035416),F=FF(F,a,i,H,G[r+9],g,2336552879),H=FF(H,F,a,i,G[r+10],u,4294925233),i=FF(i,H,F,a,G[r+11],f,2304563134),a=FF(a,i,H,F,G[r+12],I,1804603682),F=FF(F,a,i,H,G[r+13],g,4254626195),H=FF(H,F,a,i,G[r+14],u,2792965006),i=FF(i,H,F,a,G[r+15],f,1236535329),a=GG(a,i,H,F,G[r+1],s,4129170786),F=GG(F,a,i,H,G[r+6],c,3225465664),H=GG(H,F,a,i,G[r+11],U,643717713),i=GG(i,H,F,a,G[r+0],C,3921069994),a=GG(a,i,H,F,G[r+5],s,3593408605),F=GG(F,a,i,H,G[r+10],c,38016083),H=GG(H,F,a,i,G[r+15],U,3634488961),i=GG(i,H,F,a,G[r+4],C,3889429448),a=GG(a,i,H,F,G[r+9],s,568446438),F=GG(F,a,i,H,G[r+14],c,3275163606),H=GG(H,F,a,i,G[r+3],U,4107603335),i=GG(i,H,F,a,G[r+8],C,1163531501),a=GG(a,i,H,F,G[r+13],s,2850285829),F=GG(F,a,i,H,G[r+2],c,4243563512),H=GG(H,F,a,i,G[r+7],U,1735328473),i=GG(i,H,F,a,G[r+12],C,2368359562),a=HH(a,i,H,F,G[r+5],h,4294588738),F=HH(F,a,i,H,G[r+8],v,2272392833),H=HH(H,F,a,i,G[r+11],T,1839030562),i=HH(i,H,F,a,G[r+14],m,4259657740),a=HH(a,i,H,F,G[r+1],h,2763975236),F=HH(F,a,i,H,G[r+4],v,1272893353),H=HH(H,F,a,i,G[r+7],T,4139469664),i=HH(i,H,F,a,G[r+10],m,3200236656),a=HH(a,i,H,F,G[r+13],h,681279174),F=HH(F,a,i,H,G[r+0],v,3936430074),H=HH(H,F,a,i,G[r+3],T,3572445317),i=HH(i,H,F,a,G[r+6],m,76029189),a=HH(a,i,H,F,G[r+9],h,3654602809),F=HH(F,a,i,H,G[r+12],v,3873151461),H=HH(H,F,a,i,G[r+15],T,530742520),i=HH(i,H,F,a,G[r+2],m,3299628645),a=II(a,i,H,F,G[r+0],x,4096336452),F=II(F,a,i,H,G[r+7],S,1126891415),H=II(H,F,a,i,G[r+14],w,2878612391),i=II(i,H,F,a,G[r+5],A,4237533241),a=II(a,i,H,F,G[r+12],x,1700485571),F=II(F,a,i,H,G[r+3],S,2399980690),H=II(H,F,a,i,G[r+10],w,4293915773),i=II(i,H,F,a,G[r+1],A,2240044497),a=II(a,i,H,F,G[r+8],x,1873313359),F=II(F,a,i,H,G[r+15],S,4264355552),H=II(H,F,a,i,G[r+6],w,2734768916),i=II(i,H,F,a,G[r+13],A,1309151649),a=II(a,i,H,F,G[r+4],x,4149444226),F=II(F,a,i,H,G[r+11],S,3174756917),H=II(H,F,a,i,G[r+2],w,718787259),i=II(i,H,F,a,G[r+9],A,3951481745),a=addUnsigned(a,d),i=addUnsigned(i,e),H=addUnsigned(H,t),F=addUnsigned(F,o);var L=wordToHex(a)+wordToHex(i)+wordToHex(H)+wordToHex(F);return L.toLowerCase()}var rotateLeft=function(n,r){return n<<r|n>>>32-r},addUnsigned=function(n,r){var d,e,t,o,a;return t=2147483648&n,o=2147483648&r,d=1073741824&n,e=1073741824&r,a=(1073741823&n)+(1073741823&r),d&e?2147483648^a^t^o:d|e?1073741824&a?3221225472^a^t^o:1073741824^a^t^o:a^t^o},F=function(n,r,d){return n&r|~n&d},G=function(n,r,d){return n&d|r&~d},H=function(n,r,d){return n^r^d},I=function(n,r,d){return r^(n|~d)},FF=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(F(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},GG=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(G(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},HH=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(H(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},II=function(n,r,d,e,t,o,a){return n=addUnsigned(n,addUnsigned(addUnsigned(I(r,d,e),t),a)),addUnsigned(rotateLeft(n,o),r)},convertToWordArray=function(n){for(var r,d=n.length,e=d+8,t=(e-e%64)/64,o=16*(t+1),a=Array(o-1),i=0,H=0;d>H;)r=(H-H%4)/4,i=H%4*8,a[r]=a[r]|n.charCodeAt(H)<<i,H++;return r=(H-H%4)/4,i=H%4*8,a[r]=a[r]|128<<i,a[o-2]=d<<3,a[o-1]=d>>>29,a},wordToHex=function(n){var r,d,e="",t="";for(d=0;3>=d;d++)r=n>>>8*d&255,t="0"+r.toString(16),e+=t.substr(t.length-2,2);return e},uTF8Encode=function(n){n=n.replace(/\x0d\x0a/g,"\n");for(var r="",d=0;d<n.length;d++){var e=n.charCodeAt(d);128>e?r+=String.fromCharCode(e):e>127&&2048>e?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128))}return r};var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),PDKSeat=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.setUserOffline=function(t){this.offline_img.visible=t},e.prototype._onTouchHead=function(){if(this._userInfoData){var t=(100*this._userInfoData.getWinRate()).toFixed(0)+"%",e=this._userInfoData.redcoingot,n=this._userInfoData.nickname,i=this._userInfoData.gold,o=this._userInfoData.imageid,a=this._userInfoData.totalwincnt+this._userInfoData.totallosecnt+this._userInfoData.totaldrawcnt,r=this._userInfoData.seatid,s=this._userInfoData.uid,h={nick:n,gold:i,head:o,winRate:t,game:a,redBeg:e,seatId:r,uid:s};if(pdkServer._isInDDZ){var c=this._userInfoData,l=c.totalwincnt,p=c.totallosecnt,d=c.totaldrawcnt,u=l+p+d||1,_=Math.floor(100*l/u),g=c;g.winRate=_,g.base64=!1,g.game=u,g.isPlaying=pdkServer.playing?!0:!1,this._userInfoData.uid==PDKMainLogic.instance.selfData.uid&&(g.fakeuid=PDKMainLogic.instance.selfData.fakeuid,PDKMainLogic.instance.selfData.whatsup&&(g.whatsup=PDKMainLogic.instance.selfData.whatsup)),console.log("_onTouchHead-----inpdk---222----->",g),pdkServer.ddzDispatchEvent(1,"",{type:8,data:g})}else PDKPanelPlayerInfo.getInstance().show(h)}},e.prototype.setHeadTouch=function(t){this.userInfoView.avatar.setHeadTouch(t),this.userInfoView.avatar.setHeadTouchFunc(this._onTouchHead.bind(this))},e.prototype.reset=function(t){return void 0===t&&(t=!1),this.labChange.visible=!1,this.setUserOffline(!1),this.stopCD(),t||(this.cleanHand(),this.cleanDesk()),this},e.prototype.clean=function(t,e){return this.reset(t),e&&this.userInfoView.clean(),this},e.prototype.addCards=function(t,e){void 0===e&&(e=!0)},e.prototype.useCards=function(t){},e.prototype.startCD=function(t){},e.prototype.stopCD=function(){},e.prototype.cleanDesk=function(){this.deskCardGroup.clean()},e.prototype.cleanHand=function(){this.handCardGroup.clean()},e.prototype.playChat=function(t){},e.prototype.playChangeEffect=function(t,e){void 0===e&&(e=0);var n=this.labChange;n.font=RES.getRes(t>=0?"pdk_font_num_1":"pdk_font_num_2");var i=PDKUtils.currencyRatio(Math.abs(t));n.text=t>0?"+"+i:"-"+i,n.y+=50,n.alpha=0,n.visible=!0,egret.Tween.get(n).wait(e).to({y:n.y-50,alpha:1},1e3,egret.Ease.cubicOut)},Object.defineProperty(e.prototype,"userInfoData",{get:function(){return this._userInfoData},set:function(t){this._setUserInfoData(t)},enumerable:!0,configurable:!0}),e.prototype._setUserInfoData=function(t){this._userInfoData=t,this._userInfoData||this.userInfoView.clean()},e.prototype.updateUserInfoData=function(t){this._userInfoData.initData(t),this.userInfoView.update(this._userInfoData)},e.prototype.setQuitFlagVisible=function(t){this.userInfoView.avatar.setQuitFlagVisible(t)},e.prototype.setOwnerFlagVisible=function(t){this.userInfoView.avatar.setOwnerFlagVisible(t)},e.prototype.playWinGoldAnimate=function(){this.userInfoView.playWinGoldAnimate()},e.prototype.getHeadCenterPos=function(){return this.userInfoView.avatar.getHeadCenGlobalPos()},e.prototype.getAvatarPos=function(){return this._avatarglobalPos||(this._avatarglobalPos=this.userInfoView.localToGlobal(this.userInfoView.avatar.x,this.userInfoView.avatar.y),this._avatarglobalPos.x+=.65*this.userInfoView.avatar.width/2,this._avatarglobalPos.y+=.65*this.userInfoView.avatar.height/2),this._avatarglobalPos},e}(eui.Component);__reflect(PDKSeat.prototype,"PDKSeat");var PDKalien;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._needActive=!0,t.init(),t}return __extends(n,e),n.prototype.init=function(){this._pageStack=[],this._pageCache={}},n.prototype.push=function(e,i,o,a){var r=this;if(void 0===i&&(i=!0),void 0===o&&(o=null),void 0===a&&(a=!0),e&&!this.playing){var s=e.defName,h=this._pageCache[s];h||(this._pageCache[s]=h=new e,h.navigation=this),this._currentPage=h;var c="push";if(this.addChild(h),this._pageStack.length>0&&h.beforeShow(c,o),a&&this.dispatchEventWith(n.NAVIGATE,!1,{action:c,page:h}),this._pageStack.length>0){var l=t.StageProxy.width,p=this._pageStack[this._pageStack.length-1];this._pageStack.push(h);var d=function(){p.onHide(c,o),r.removeChild(p)},u=function(){p.onShow(c,o),r._tween=null};h.x=l,p.beforeHide(c,o),i?egret.Tween.get(p).to({x:-l},n.duration,egret.Ease.quartInOut).call(d,this):(p.x=-l,d.call(this)),i?this._tween=egret.Tween.get(h).to({x:0},n.duration,egret.Ease.quartInOut).call(u,this):(h.x=0,u.call(this))}else this._pageStack.push(h),h.onShow(c,o)}},n.prototype.pop=function(e,i,o){var a=this;if(void 0===e&&(e=!0),void 0===i&&(i=null),void 0===o&&(o=!0),!this.playing&&this._pageStack.length>1){var r="pop",s=t.StageProxy.width,h=this._pageStack.pop(),c=this._currentPage=this._pageStack[this._pageStack.length-1];this.addChild(c),o&&this.dispatchEventWith(n.NAVIGATE,!1,{action:r,page:c});var l=function(){h.onHide(r,i),a.removeChild(h),a._tween=null},p=function(){c.onShow(r,i)};c.beforeShow(r,i),e?egret.Tween.get(c).to({x:0},n.duration,egret.Ease.quartInOut).call(p,this):(c.x=0,p.call(this)),h.beforeHide(r,i),e?this._tween=egret.Tween.get(h).to({x:s},n.duration,egret.Ease.quartInOut).call(l,this):(h.x=s,l.call(this))}},n.prototype.popAll=function(e,i,o){var a=this;if(void 0===e&&(e=!0),void 0===i&&(i=null),void 0===o&&(o=!0),!this.playing)if(this._pageStack.length>1){var r="pop",s=t.StageProxy.width,h=this._pageStack.pop();this._pageStack.splice(1);var c=this._currentPage=this._pageStack[this._pageStack.length-1];this.addChild(c),o&&this.dispatchEventWith(n.NAVIGATE,!1,{action:r,page:c}),c.beforeShow(r,i),h.beforeHide(r,i),e?(egret.Tween.get(c).to({x:0},n.duration,egret.Ease.quartInOut).call(function(){c.onShow(r,i)}),this._tween=egret.Tween.get(h).to({x:s},n.duration,egret.Ease.quartInOut).call(function(){h.onHide(r,i),a.removeChild(h),a._tween=null})):(c.x=0,h.x=s,c.onShow(r,i),h.onHide(r,i),this.removeChild(h))}else this._needActive=!0,this.active(o)},n.prototype.active=function(t){void 0===t&&(t=!0),this._needActive&&(this._needActive=!1,t&&(this._currentPage.beforeShow("active"),this.dispatchEventWith(n.NAVIGATE,!1,{action:"pop",page:this._currentPage})))},n.prototype.deactive=function(){this._needActive=!0,this._currentPage.beforeHide("deactive")},Object.defineProperty(n.prototype,"size",{get:function(){return this._pageStack.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playing",{get:function(){return!!this._tween},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPage",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),n.NAVIGATE="navigate",n.duration=500,n}(eui.Group);t.Navigator=e,__reflect(e.prototype,"PDKalien.Navigator");var n=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e}return __extends(e,t),e.prototype.beforeShow=function(t,e){void 0===e&&(e=null)},e.prototype.beforeHide=function(t,e){void 0===e&&(e=null)},e.prototype.onShow=function(t,e){void 0===e&&(e=null)},e.prototype.onHide=function(t,e){void 0===e&&(e=null)},e}(eui.Component);t.PDKNavigationPage=n,__reflect(n.prototype,"PDKalien.PDKNavigationPage")}(PDKalien||(PDKalien={}));var PDKDDZSeat=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baodanTimerId=0,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.ddzHandCardGroup=this.handCardGroup,this.ddzDeskCardGroup=this.deskCardGroup,this.ddzHandCardGroup.onCardAdded=this.onCardAdded.bind(this),this.btnCancleTrust.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelTrust,this)},e.prototype.onCancelTrust=function(t){pdkServer.hang(!1)},e.prototype.reset=function(e){return void 0===e&&(e=!1),this.cdClock.visible=this.imgStatus.visible=!1,this.labCardCount.text="0",this.cardCount.visible=!0,this.baodan.visible=!1,this.hideJingDeng(),this.showDoubleFlag(!1),this.setMaster(!1,!1),this.setHang(!1),this.ddzHandCardGroup.initData(),t.prototype.reset.call(this,e)},e.prototype.clean=function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),this.cleanPlayer(n),t.prototype.clean.call(this,e,n)},e.prototype.cleanPlayer=function(t){void 0===t&&(t=!0),this.cdClock.stop(),this.robot.visible=!1,this.labCardCount.text="0",this.cardCount.visible=!0,this.baodan.visible=!1,this.hideJingDeng(),this.showDoubleFlag(!1),this.imgMaster.visible=!1,this.imgStatus.visible=!1,this.imgReady.visible=!1,t&&(this.userInfoData=null)},e.prototype.initData=function(t){var e=t.cleanUserInfo;this.clean(!1,e),6==t.matchType?this.userInfoView.gold.visible=!1:(this.userInfoView.gold.visible=!0,this.userInfoView.gold.setType(t.isMatch,t.matchType),10==t.roomType&&(t.isSelf||this.userInfoView.gold.showDiamond())),console.log("initData--------->",pdkServer.roomInfo),!pdkServer.roomInfo||9002!=pdkServer.roomInfo.roomID&&9004!=pdkServer.roomInfo.roomID&&9005!=pdkServer.roomInfo.roomID||t.isSelf||this.userInfoView.gold.showDiamond()},e.prototype.cleanDesk=function(){t.prototype.cleanDesk.call(this),this.setStatus()},e.prototype.addCards=function(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),i&&this.setStatus(),t.prototype.addCards.call(this,e)},e.prototype.onCardAdded=function(t){},e.prototype.setCardsShadowSize=function(t){this.cardShadow&&(this.cardShadow.width=PDKGameConfig.CARD_WIDTH+(t-1)*PDKGameConfig.CARD_GAP_H)},e.prototype.useCard=function(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=!1),void 0===n&&(n=!0),void 0===i&&(i=!0);var o=0;if(e&&i&&!n){var a=PDKUtils.pid2poker(t[0]),r=PDKCardsType.GetType(t);o=r.ct,a.num>0&&PDKGameSoundManager.playCardType(this._sexVoice,o,a.num)}if(!e&&n){var r=PDKCardsType.GetType(t);o=r.ct;var a=PDKUtils.pid2poker(t[0]);PDKGameSoundManager.playCardType(this._sexVoice,o,a.num),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_GAME_EFFECT,{cardType:o,state:this.currentState})}if(0==t.length)this.stopCD(),e||0==i?this.setStatus():this.setStatus(PDKResNames.pdk_play_word_4);else{this.cleanDesk();var s=this.ddzHandCardGroup.useCards(t,this.ddzDeskCardGroup,n);!e&&n&&this.updateCardCount(s),this.setStatus(),this.setCardsShadowSize(this.handCardGroup.cardCount)}return o},e.prototype.setStatus=function(t){void 0===t&&(t=null),t&&(this.imgStatus.source=t),this.imgStatus.visible=!!t},e.prototype.setShowCardShadow=function(t){t||this.robot.visible&&(t=!0),this.cardShadow&&(this.cardShadow.visible=t,this.setCardsShadowSize(this.handCardGroup.cardCount))},e.prototype.setHang=function(t){this.robot.visible=t,this.btnCancleTrust&&(this.btnCancleTrust.visible=t),this.setShowCardShadow(t)},e.prototype.startCD=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0),this.cdClock.visible=n,this.cdClock.start(t,e,n)},e.prototype.stopCD=function(){this.cdClock.visible=!1,this.cdClock.stop()},e.prototype.showScore=function(t){0==t?this.setStatus(PDKResNames.pdk_play_word_5):0>t||this.setStatus("play_word_"+t),PDKGameSoundManager.playScore(this._sexVoice,t)},e.prototype.hideScore=function(){this.setStatus()},e.prototype.showDoubleFlag=function(t){this.doubleFlag_img.visible=t},e.prototype.showDoubleTip=function(t,e){var n=this;void 0===e&&(e=!1);var i="pdk_noDouble2";e&&(i="pdk_double2"),this.setStatus(i),egret.setTimeout(function(){("pdk_noDouble2"==n.imgStatus.source||"pdk_double2"==n.imgStatus.source)&&n.setStatus()},this,3e3),PDKGameSoundManager.playDouble(this._sexVoice,e)},e.prototype.updateCardCount=function(t){console.log(""),3>=t?this.showJingDeng():this.hideJingDeng()},e.prototype.showJingDeng=function(){this.jingdeng||(this.jingdeng=new PDKDragonJingDeng),this.jingdeng.parent||this.jingdengGroup.addChild(this.jingdeng)},e.prototype.hideJingDeng=function(){this.jingdeng&&this.jingdeng.parent&&this.jingdeng.parent.removeChild(this.jingdeng)},e.prototype.setMaster=function(t,e){if(this.imgMaster.visible=!1,this._isMaster=t,this.ddzHandCardGroup.isMaster=t,this.ddzDeskCardGroup.isMaster=t,t){var n=this.globalToLocal(PDKalien.StageProxy.width/2-this.imgMaster.width/2,PDKalien.StageProxy.height/2-this.imgMaster.height/2);n={x:n.x,y:n.y,visible:!0};var i={x:this.imgMaster.x,y:this.imgMaster.y},o=egret.Tween.get(this.imgMaster).set({visible:!0}).to(n);e?o.wait(1e3).to(i,500,egret.Ease.cubicIn):o.to(i)}},Object.defineProperty(e.prototype,"isMaster",{get:function(){return this._isMaster},enumerable:!0,configurable:!0}),e.prototype._setUserInfoData=function(e){t.prototype._setUserInfoData.call(this,e),this.userInfoData&&(this._sexVoice=e.sexVoiceStr)},e.prototype.updateUserInfoData=function(e){t.prototype.updateUserInfoData.call(this,e),this.userInfoData&&(this._sexVoice=this._userInfoData.sexVoiceStr)},e.prototype.updateGold=function(t,e){void 0===e&&(e=!1);var n=this.userInfoData.gold+=t;!e&&0>n&&(n=0),this.userInfoView.updateGold(n)},e.prototype.updateDiamondNum=function(t,e){void 0===e&&(e=!0),this.userInfoView.updateDiamondNum(t,e)},e.prototype.updateRednormalGold=function(t,e){void 0===e&&(e=!1);var n=this.userInfoView.gold.nGold;e&&(n=this.userInfoView.diamond.nGold);var i=Number(n)+t;0>i&&(i=0),e?this.userInfoView.updateDiamond(i):this.userInfoView.updateGold(i)},e.prototype.updateDiamond=function(t){0>t||this.userInfoView.updateDiamond(t)},e.prototype.showDiamond=function(t){this.userInfoView.diamond.visible=t},e.prototype.setReady=function(t){this.imgReady.visible=t&&!pdkServer.isMatch},e}(PDKSeat);__reflect(PDKDDZSeat.prototype,"PDKDDZSeat");var PDKCardGroup=function(t){function e(){var e=t.call(this)||this;return e.scale=1,e.align=.5,e.warpCount=100,e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.initData=function(t){void 0===t&&(t=null),this.clean()},e.prototype.clean=function(){PDKUtils.recycleCards(this),this.cardCount=0},e.prototype.addCards=function(t,e){var n=this;return void 0===e&&(e=!0),t.forEach(function(t,e){var i=PDKCard.create({pid:t});n.addCard(i,e)}),this.adjustCards(e),this.numChildren},e.prototype.addCard=function(t,e){var n=this;void 0===e&&(e=0),t.scaleX=t.scaleY=this.scale,PDKalien.PDKUtils.enumChildren(this,function(e,i){return t.pokerId>e.pokerId?(n.addChildAt(t,i),!0):void 0}),t.parent||this.addChild(t),this.cardCount++,t.addPlaying=!0},e.prototype.sendCardsToGroup=function(t,e,n){void 0===n&&(n=!0),t.receiveCardsFromGroup.call(t,this,e),n&&(this.cardCount-=e.length),this.adjustCards(!0)},e.prototype.getCardGapH=function(t){return t&&PDKGameConfig.CARD_GAP_H*(t-1)+PDKGameConfig.CARD_WIDTH*PDKGameConfig.CARD_SCALE>PDKalien.StageProxy.stage.stageWidth?(PDKalien.StageProxy.stage.stageWidth-PDKGameConfig.CARD_WIDTH*PDKGameConfig.CARD_SCALE)/(t-1):PDKGameConfig.CARD_GAP_H},e.prototype.receiveCardsFromGroup=function(t,e){var n=this,i=this.scale,o=e.length,a=0,r=this.getCardGapH(o),s=(this.width-(r*Math.min(o,this.warpCount)+PDKGameConfig.CARD_OFFSET)*i)*this.align,h=this.localToGlobal(s,0),c=t.globalToLocal(h.x,h.y);e.forEach(function(t,e){t.select=!1,t.sending=!0;var h=Math.floor(e/n.warpCount),l=c.x+e%n.warpCount*r*i,p=c.y+h*PDKGameConfig.CARD_GAP_V*i;t.animate({x:l,y:p,scaleX:i,scaleY:i},0,null,200).call(function(e){t.sending=!1,n.addChildAt(t,0),t.x=s+e%n.warpCount*r*i,t.y=h*PDKGameConfig.CARD_GAP_V*i,a++,a==o&&n.adjustCardsEnd()},n,[e])})},Object.defineProperty(e.prototype,"stageCenterPos",{get:function(){if(!this._stageCenterPos){var t=this.globalToLocal(PDKalien.StageProxy.width/2-PDKGameConfig.CARD_WIDTH/2,PDKalien.StageProxy.height/2-PDKGameConfig.CARD_HEIGHT/2);this._stageCenterPos={x:t.x,y:t.y}}return this._stageCenterPos},enumerable:!0,configurable:!0}),e.prototype.adjustCards=function(t){var e=this;void 0===t&&(t=!0);var n=0,i=this.getCardGapH(this.cardCount),o=this.width-(i*this.cardCount+PDKGameConfig.CARD_OFFSET)*this.scale>>1,a=0,r=0;PDKalien.PDKUtils.enumChildren(this,function(t){t.sending||r++}),PDKalien.PDKUtils.enumChildren(this,function(s){if(!s.sending){var h=o+a*i*e.scale,c=0;if(t){var l=void 0;s.addPlaying?(PDKalien.PDKUtils.injectProp(s,{alpha:0,scaleX:.2,scaleY:.2}),l=s.animate({alpha:1,scaleX:e.scale,scaleY:e.scale,x:h,y:c},20*n,e.stageCenterPos),l.call(function(){s.addPlaying=!1,e.onCardAdded&&e.onCardAdded(s)})):l=s.animate({x:h,y:c,alpha:1}),l.call(function(){n++,n>=r&&e.adjustCardsEnd()})}else s.x=h,s.y=c,s.addPlaying=!1;a++}}),t||this.adjustCardsEnd()},e.prototype.adjustCardsEnd=function(){},e.prototype.destroyCard=function(t){var e=this;egret.Tween.get(t).to({alpha:0},100).call(function(t){e.removeChild(t),PDKCard.recycle(t)},this,[t])},e}(eui.Group);__reflect(PDKCardGroup.prototype,"PDKCardGroup");var PDKalien;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n.onStageResize(),n.touchChildren=!0,n.touchEnabled=!1,t.StageProxy.stage.addEventListener(egret.Event.RESIZE,n.onStageResize,n),n}return __extends(n,e),n.prototype.onStageResize=function(e){void 0===e&&(e=null),this.width=t.StageProxy.stage.stageWidth,this.height=t.StageProxy.stage.stageHeight},n.prototype._beforeShow=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.beforeShow(t,e)},n.prototype._beforeHide=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.beforeHide(t,e)},n.prototype._onShow=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.onShow(t,e)},n.prototype._onHide=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.onHide(t,e)},n.prototype.beforeShow=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1)},n.prototype.beforeHide=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1)},n.prototype.onShow=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1)},n.prototype.onHide=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1)},n}(eui.Component);t.SceneBase=e,__reflect(e.prototype,"PDKalien.SceneBase")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function e(){this.mapSceneDef=new t.HashMap,this.mapScene=new t.HashMap,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.init=function(t,n){void 0===n&&(n="loading"),e.instance.init(t,n)},e.addMostTopScene=function(t,n){e.instance.addMostTopScene(t,n)},e.addTopScene=function(t,n){e.instance.addTopScene(t,n)},e.addEffectScene=function(t,n){e.instance.addEffectScene(t,n)},e.addBottomScene=function(t,n){e.instance.addBottomScene(t,n)},e.register=function(t,n,i){void 0===i&&(i=null),e.instance.register(t,n,i)},e.show=function(t,n,i,o,a,r,s){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!1),void 0===s&&(s=null),e.instance.show(t,n,i,o,a,r,s)},e.back=function(t,n,i,o){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),e.instance.back(t,n,i,o)},e.addOtherContainer=function(t){t&&e.instance.topLayer.addChild(t)},e.removeOtherContainer=function(t){t&&e.instance.topLayer.removeChild(t)},e.removeDDZContainer=function(){var t=e.instance.middleLayer;t.removeChildren(),e.instance.currentScene=null,e.instance.currentSceneName=null},e.prototype.init=function(e,n){void 0===n&&(n="loading"),this.root=e,this.loadingSceneName=n,this.root.addChild(this.background=new egret.Shape),this.root.addChild(this.bottomLayer=new eui.Group),this.root.addChild(this.middleLayer=new eui.Group),this.root.addChild(this.topLayer=new eui.Group),this.root.addChild(this.popLayer=new eui.Group),this.root.addChild(this.effectLayer=new eui.Group),this.root.addChild(this.mostTopLayer=new eui.Group),this.bottomLayer.touchEnabled=!1,this.middleLayer.touchEnabled=!1,this.topLayer.touchEnabled=!1,this.popLayer.touchEnabled=!1,this.effectLayer.touchEnabled=!1,this.mostTopLayer.touchEnabled=!1,this.backgroundColor=16777215,t.StageProxy.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.onStageResize=function(e){void 0===e&&(e=null),t.PDKUtils.enumChildren(this.root,function(e){e.width=t.StageProxy.stage.stageWidth,e.height=t.StageProxy.stage.stageHeight}),this.reDrawBG()},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.reDrawBG()},enumerable:!0,configurable:!0}),e.prototype.reDrawBG=function(){var e=this.background.graphics;e.beginFill(this._backgroundColor),e.drawRect(0,0,t.StageProxy.width,t.StageProxy.height),e.endFill()},e.prototype.onResourceLoadComplete=function(t){console.log("111RES LOAD COMPLETE:"+t.groupName),t.groupName==this.currentLoadGroup&&this.nextShowEntity&&(this.show(this.nextShowEntity.name,this.nextShowEntity.params,this.nextShowEntity.effectDef,this.nextShowEntity.effectParams,this.nextShowEntity.callback,this.nextShowEntity.back),this.currentLoadGroup=null,this.nextShowEntity=null)},e.prototype.onResourceProgress=function(e){e.groupName==this.currentLoadGroup&&t.Dispatcher.dispatch("loadingProgress",{itemsLoaded:e.itemsLoaded,itemsTotal:e.itemsTotal})},e.prototype.onResourceLoadError=function(t){PDKwebService.postError(PDKErrorConfig.RESOURCE_LOAD_ERROR,t.groupName)},e.prototype.addMostTopScene=function(t,e){var n=new e;this.mostTopLayer.addChild(n),n._beforeShow(null)},e.prototype.addTopScene=function(t,e){var n=new e;this.topLayer.addChild(n),n._beforeShow(null)},e.prototype.addEffectScene=function(t,e){var n=new e;this.effectLayer.addChild(n),n._beforeShow(null)},e.prototype.addBottomScene=function(t,e){var n=new e;this.bottomLayer.addChild(n),n._beforeShow(null)},e.prototype.register=function(t,e,i){void 0===i&&(i=null),this.mapSceneDef.put(t,new n(e,i))},e.prototype.show=function(e,n,o,a,r,s,h){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=!1),void 0===h&&(h=null),this.currentSceneName==e)this.currentScene._beforeShow(n,!1),this.currentScene._onShow(n,!1);else{var c=void 0,l=void 0,p=this.mapSceneDef.get(e);if(p.resGroup&&!RES.isGroupLoaded(p.resGroup))this.nextShowEntity=new i(e,n,o,a,r,s),this.currentLoadGroup=p.resGroup,egret.setTimeout(function(){RES.loadGroup(p.resGroup)},this,100),e=this.loadingSceneName,l=this.mapScene.get(e),l.resetDesc(),o=null;else if(this.mapScene.containsKey(e))l=this.mapScene.get(e);else{var d=p.sceneDef;l=new d,l.name=e,this.mapScene.put(e,l)}!c&&this.currentSceneName?(c=o?new o:new t.sceneEffect.None,this.currentScene._beforeHide(n,s)):c=new t.sceneEffect.None,this.currentSceneName!=e&&(this.currentScene&&(egret.Tween.removeTweens(this.currentScene),this.currentScene.touchChildren=!1),egret.Tween.removeTweens(l),c.handover(this.currentScene,l,this.middleLayer,a,function(t,e){t&&t._onHide(n,s),e.touchChildren=!0,e._onShow(n,s),r&&r()}.bind(this,this.currentScene,l)),this.currentScene=l,s?this.lastSceneName=e:e!=this.loadingSceneName&&(this.currentScene.lastSceneName=null!=h?h:this.lastSceneName,this.lastSceneName=e),this.currentSceneName=e,this.currentScene._beforeShow(n,s))}},e.prototype.back=function(t,e,n,i){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),this.currentScene.lastSceneName&&""!=this.currentScene.lastSceneName?(this.show(this.currentScene.lastSceneName,t,e,n,i,!0),!0):!1},e}();t.PDKSceneManager=e,__reflect(e.prototype,"PDKalien.PDKSceneManager");var n=function(){function t(t,e){void 0===e&&(e=null),this.sceneDef=t,this.resGroup=e}return t}();t.SceneConfig=n,__reflect(n.prototype,"PDKalien.SceneConfig");var i=function(){function t(t,e,n,i,o,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.params=null,this.effectDef=null,this.effectParams=null,this.callback=null,this.back=null,this.name=t,this.params=e,this.effectDef=n,this.callback=o,this.back=a}return t}();t.ShowEntity=i,__reflect(i.prototype,"PDKalien.ShowEntity")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function e(){this._groups={}}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.register=function(e,i,o,a,r,s){void 0===s&&(s=0);var h=new n;t.PDKUtils.injectProp(h,{target:i,eventName:o,callback:a,thisObj:r,priority:s},null,!1);var c=this._groups[e];c||(c=this._groups[e]={enable:!1,items:[]}),c.items.push(h)},e.prototype.registerOnObject=function(t,e,n,i,o,a){void 0===a&&(a=0),this.register(t.__class__,e,n,i,o,a)},e.prototype.enable=function(t){var e=this._groups[t];e&&!e.enable&&(e.enable=!0,e.items.forEach(function(t){t.target.addEventListener(t.eventName,t.callback,t.thisObj,!1,t.priority)}))},e.prototype.enableOnObject=function(t){this.enable(t.__class__)},e.prototype.disable=function(t){var e=this._groups[t];e&&e.enable&&(e.enable=!1,e.items.forEach(function(t){t.target.removeEventListener(t.eventName,t.callback,t.thisObj)}))},e.prototype.disableOnObject=function(t){this.disable(t.__class__)},e.prototype.dump=function(t){void 0===t&&(t=null);for(var e in this._groups){var n=this._groups[e];console.log(e+"["+n.items.length+"]: "+(n.enable?"● enable":"○ disable")),console.log(n.items.map(function(t){return t.eventName}).join(","))}},e}();t.PDKEventManager=e,__reflect(e.prototype,"PDKalien.PDKEventManager");var n=function(){function t(){}return t}();t.RegisterItem=n,__reflect(n.prototype,"PDKalien.RegisterItem")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isMiniApp=!1,t._dicCall={},t._channelId=null,t._urlParams={},egret.ExternalInterface.addCallback("nativeCall",t.nativeCall.bind(t)),t._initDefaultWX(),t._initData(),t}return __extends(n,e),Object.defineProperty(n,"instance",{get:function(){return void 0==this._instance&&(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),n.prototype._initData=function(){if(this._isAli=!1,this._isWXMP=!1,this.isMiniApp=!1,this._channel="self",this._urlParams=t.PDKUtils.getUrlParams(),this.isAndroidWebView()){var e=this._urlParams.showLog;e&&1==e?this.callAndroidFunc("enableLog",!0):this.callAndroidFunc("enableLog",!1)}},n.prototype.callAndroidFunc=function(t,e){window.javaBridge[t](e)},n.prototype.getUrlArg=function(){return this._urlParams},n.prototype.setInMiniApp=function(t){this.isMiniApp=t||!1},n.prototype._initDefaultWX=function(){this._wxApi={initBridge:function(t){},config:function(t){},share:function(t,e){},recharge:function(t,e){},getLocation:function(t){}}},n.prototype.initWXFunc=function(){this.isNative||(window.top&&window.top.wxApi?this._wxApi=window.top.wxApi:PDKwebService.postError(PDKErrorConfig.REPORT_ERROR,"Native _initWXFunc=>"+PDKversion+"|uuid"+PDKwebService.uuid+"wxApi error"))},n.call=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.instance.call(t,e,n)},Object.defineProperty(n.prototype,"platform",{get:function(){var t;return t=this.isNative?egret.Capabilities.os:"web"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"platformId",{get:function(){return t.Native.instance.isNative?"iOS"==egret.Capabilities.os?2:3:4},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE||this.isMiniApp},enumerable:!0,configurable:!0}),n.prototype.setChannelName=function(t){this._channel=t,this._isWXMP=!1,this._isAli=!1,"wxmp"==t?this._isWXMP=!0:"ali"==t&&(this._isAli=!0)},n.prototype.getChannelName=function(){return this._channel},n.prototype.isAli=function(){return this._isAli},Object.defineProperty(n.prototype,"isWXMP",{get:function(){return this._isWXMP},enumerable:!0,configurable:!0}),n.prototype.nativeCall=function(t){console.log("nativeCall:",t);var e=JSON.parse(t),n=e.id,i=e.method;i&&i.length>1&&this.dispatchEventWith(i,!1,e);var o=this._dicCall[n];o&&(delete this._dicCall[n],o(e.args))},n.prototype.call=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),n=n||{};var o={id:t.StringUtils.makeRandomIntString(10),method:e,args:n};i&&(this._dicCall[o.id]=i),egret.ExternalInterface.call("egretCall",JSON.stringify(o))},n.prototype.getDeviceUUID=function(e,n,i){void 0===i&&(i=!1);var o=t.localStorage.getItem("uuid",n);(i||!o)&&(o=t.StringUtils.makeRandomString(32),t.localStorage.setItem("uuid",o,n)),e({uuid:o})},n.prototype.closeStartImg=function(){this.call("closeStartImg")},n.prototype.openUrlByWebview=function(e){this.call("openUrlByWebView",{url:e,left:10,top:10,maxWidth:t.StageProxy.width-20,maxHeight:t.StageProxy.height-20},null)},n.prototype.openUrlBySys=function(t){this.call("openUrlBySys",{url:t},null)},n.prototype.fileExist=function(t,e){var n=this;n.call("fileExist",null,function(t){var e=JSON.parse(t);return e.exist||!1})},n.prototype.checkMd5=function(t,e){var n=this;n.call("getMd5",{path:t},function(t){var n=JSON.parse(t);e(n.md5)})},n.prototype.clearAndroidDown=function(t,e){var n=this;"Android"==n.platform&&(n.setAndroidLocalVercode(0),n.setAndroidDownState(0),n.call("deleteFile",{path:t+"|"+e}))},n.prototype.getAndroidLocalVercode=function(){return Number(t.localStorage.getItem("apkDownVerCode"))},n.prototype.setAndroidLocalVercode=function(e){t.localStorage.setItem("apkDownVerCode",""+e)},n.prototype.getAndroidDownState=function(){return Number(t.localStorage.getItem("apkDownState"))},n.prototype.setAndroidDownState=function(e){t.localStorage.setItem("apkDownState",""+e)},n.prototype.getAndroidExtPath=function(t){var e=this;e.call("getExternalDir",null,function(e){var n=JSON.parse(e);t(n.path)})},n.prototype.downApk=function(t,e,n,i,o,a,r){var s=this,h=n,c=i,l=function(t){var e=JSON.parse(t);a(e)},p=function(t){s.setAndroidDownState(2),r(JSON.parse(t))};egret.ExternalInterface.addCallback("downProgressFunc",l.bind(s)),egret.ExternalInterface.addCallback("downFinishFunc",p.bind(s)),s.call("downLoadApk",{url:e,tmp:h,name:c,cleanTmp:o,progress:"downProgressFunc",finish:"downFinishFunc"},function(){s.setAndroidDownState(1),s.setAndroidLocalVercode(t)})},n.prototype.installApk=function(t){var e=this;e.call("installApk",{path:t,closeSelf:!0})},n.prototype.getAppChannelId=function(t){var e=this;return null!=e._channelId?void t(e._channelId):void this.call("getChannelId",null,function(n){if(n){var i=JSON.parse(n);console.log("getAppChannelId=>",i.channelId),e._channelId=i.channelId,t(i.channelId)}})},n.prototype.getAppVerCode=function(t){this.call("getVerCode",null,function(e){if(e){var n=JSON.parse(e);console.log("getAppVerCode=>",n.versionCode),t(n.versionCode)}})},n.prototype.closeApp=function(){this.call("closeApp")},n.prototype.vibrate=function(){this.isNative&&this.call("vibrate",{seconds:.6})},n.prototype.toClipboard=function(t){this.isNative?this.call("toClipboard",{text:t}):console.log("toClipboard not endable!")},n.prototype.share=function(t,e){void 0===e&&(e=null),this.isNative?(t.shareImagePath=t.shareImagePath||"",t.shareThumbPath=t.shareThumbPath||"",this.call("shareByWechat",t,e)):this._wxApi.share(t,e)},n.prototype.alert=function(t,e,n,i){void 0===i&&(i=null),this.isNative?this.call("alert",{title:t,message:e,buttons:n},i):(alert(e),i({index:0}))},n.prototype.isAndroidWebView=function(){var t=window.javaBridge;return console.log("isAndroidWebView====>",t),t?!0:!1},n.prototype.rechargeWXH5=function(t,e){void 0===e&&(e=null);var n=this.isAndroidWebView(),i=egret.Capabilities.os;if(console.log("rechargeWXH5====>",i,n,t.url),"Android"==i&&n){var o=t.url+"&Referer="+t.Referer;window.open(o)}else window.top.location.href=t.url},n.prototype.rechageWXApp=function(t,e){void 0===e&&(e=null),this.call("payByWechat",t,function(t){JSON.parse(t);
console.log("rechageWXApp=============>",t.code),0==t.code&&(pdkServer.userInfoRequest(pdkServer.uid),PDKBagService.instance.refreshBagInfo(!0))})},n.prototype.rechargeInWXMP=function(t,e){void 0===e&&(e=null),this._wxApi.recharge(t,function(t){console.log("rechargeInWXMP=============>",t.code)})},n.prototype.rechargeAliH5=function(t,e){void 0===e&&(e=null);var n=t.alipay;if(n){var i=(PDKBase64.decode(n),document.getElementById("pay"));i.src="/alipay.html?htmlCode="+n}},n.prototype.rechargeAliApp=function(t,e){void 0===e&&(e=null)},n.prototype.wxConfig=function(){var t=this;PDKwebService.getWxConfig(function(e){t._wxApi.config(e)})},n.prototype.loadJs=function(t,e){if(!this.isNative){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,i.async=!1,n.appendChild(i),i.addEventListener("load",function(){i.parentNode.removeChild(i),i.removeEventListener("load",null,!1),e()},!1)}},n.prototype.getWXLocation=function(e){t.Native.instance.isNative||this._wxApi.getLocation(e)},n.prototype.setKeepScreenOn=function(t){var e=this;e.call("setKeepScreenOn",{keepOn:t})},n.prototype.checkAppUpdate=function(e){var n=egret.Capabilities.os,i=this,o=t.Native.instance,a=0,r=3,s="",h="",c="",l=!1;"Android"==n&&(l=!0,o.getAndroidExtPath(function(t){var e="tmp.apk",n="hsqddz.apk";c=t+"/.hsq/",s=c+e,h=c+n})),PDKwebService.checkAppUpdate(function(t,n){if(t){if(!l)return void("20000"==i._channelId&&o.openUrlBySys(n.url));var c=function(t){console.log("download progress======>",t.recv,t.recvTot,t.tot);var e=Math.floor(t.recvTot/t.tot*100);PDKSceneLoading.setLoadingText("下载更新中。。。"+e+"/100")},p=function(t){PDKSceneLoading.setLoadingText("下载更新完成,请稍候。。。"),o.checkMd5(h,function(t){console.log("downFinish======>",t,n.md5),a>=r&&PDKAlert.show("您的网络不稳定,请切换网络环境重试",0,function(t){"confirm"==t?(a=0,o.downApk(n.version,n.url,s,h,n.cleanTmp,c,p)):o.closeApp()}),n.md5!=t?(a+=1,o.downApk(n.version,n.url,s,h,n.cleanTmp,c,p)):o.installApk(h)})};n.shouldInstall?p(null):o.downApk(n.version,n.url,s,h,n.cleanTmp,c,p)}else l&&o.clearAndroidDown(s,h),e()})},n}(egret.EventDispatcher);t.Native=e,__reflect(e.prototype,"PDKalien.Native")}(PDKalien||(PDKalien={})),window.onAndroidKeyBack=function(){console.log("onAndroidKeyBack===================>"),PDKalien.Native.instance.dispatchEventWith("back",!1,null)};var PDKalien;!function(t){var e=function(){function e(){this._hasTap=!1;var e=t.localStorage.getItem("vibrateMute");null==e&&(this.vibrateMute=!0)}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.loadMusic=function(t){t&&RES.getResAsync(t,this.onMusicLoadOver,this)},e.prototype.onMusicLoadOver=function(e){var n=this;if(pdkServer._isInDDZ)return console.log("onMusicLoadOver-------------->"),void pdkServer.ddzDispatchEvent(4,"",{type:4,soundType:1,soundRes:"pdk_bgm"});if(e&&(e.type=egret.Sound.MUSIC),t.Native.instance.isNative)return void this.playMusic(this.musicRes);if("iOS"!=egret.Capabilities.os){var i=document.createElement("runfastClickBtn");i.hidden=!0,i.onclick=function(){n.playMusic(n.musicRes)};var o=document.createEvent("PDKMouseEvent");o.initEvent("click",!0,!0),i.dispatchEvent(o)}else this._hasTap||t.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},e.prototype.onStageTap=function(){this._hasTap=!0,t.Native.instance.isNative||"iOS"==egret.Capabilities.os&&this.playMusic(this.musicRes),t.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},e.prototype.onMusicLoadError=function(){PDKwebService.postError(PDKErrorConfig.BMG_LOAD_ERROR,""),t.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this)},e.prototype.onPause=function(){this.stopMusic(),this.stopEffect()},e.prototype.onResume=function(){this.playMusic(this.musicRes)},e.prototype.playMusic=function(e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=!1),pdkServer._isInDDZ)return console.log("playMusic----inddz------->"),void pdkServer.ddzDispatchEvent(4,"",{type:4,soundType:1,soundRes:"pdk_bgm"});var o=this.musicMute,a=t.StageProxy.isPause();if(this.musicRes=e,!o&&!a){this.stopMusic();var r=RES.getRes(e);if(!r)return void this.loadMusic(e);r.type=egret.Sound.MUSIC,this.musicChannel=r.play(),this.musicChannel.volume=1,this.musicPlaying=!0}},e.prototype.playMusicNative=function(t,e,n){var i=this;void 0===t&&(t=null),void 0===e&&(e=!1),void 0===n&&(n=!1),console.log("sound res:"+t),this.musicRes!=t&&(e||(this.musicRes=t),this.musicPlaying=!0,this.musicMute||(this.musicChannel&&this.musicChannel.stop(),console.log("sound res:"+t),console.log("sound musicRes:"+this.musicRes),RES.getResAsync(this.musicRes,function(t){t?(i.musicChannel=t.play(),i.musicChannel.volume=1):console.log(">>>>>>>>>>"+i.musicRes+" can't loaded")},this)))},e.prototype.stopMusic=function(t){void 0===t&&(t=!1),this.musicChannel&&(this.musicChannel.stop(),this.musicChannel=null),this.musicPlaying=!1},e.prototype.switchMusic=function(){this.musicMute=!this.musicMute,PDKOtherGameManager.instance.onMusicEnableChange(),this.musicRes&&(this.musicMute?this.stopMusic(!0):this.playMusic(this.musicRes))},Object.defineProperty(e.prototype,"musicMute",{get:function(){var e=t.localStorage.getItem("musicMute");return e?"1"==e:!1},set:function(e){t.localStorage.setItem("musicMute",e?"1":"0")},enumerable:!0,configurable:!0}),e.prototype.playEffect=function(t,e,n){var i=this;return void 0===t&&(t=null),void 0===e&&(e=1),void 0===n&&(n=!1),pdkServer._isInDDZ?(console.log("playMusic----inddz------->"),void pdkServer.ddzDispatchEvent(4,"",{type:4,soundType:2,soundRes:t})):(t&&(this.effectRes=t),void(this.effectMute||RES.getResAsync(this.effectRes,function(n){n?(n.type=egret.Sound.EFFECT,i.effectChannel=n.play(0,e)):console.log(">>>>>>>>>>"+t+" can't loaded")},this)))},e.prototype.stopEffect=function(){this.effectChannel&&this.effectChannel.stop()},e.prototype.onSoundComplete=function(t){if(this.musicChannel){egret.Tween.get(this.musicChannel,null,null,!0).to({volume:1},500);var e=t.target;e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)}},e.prototype.switchEffect=function(){this.effectMute=!this.effectMute,PDKOtherGameManager.instance.onEffectEnableChange()},Object.defineProperty(e.prototype,"effectMute",{get:function(){var e=t.localStorage.getItem("effectMute");return e?"1"==e:!1},set:function(e){t.localStorage.setItem("effectMute",e?"1":"0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allMute",{get:function(){return this.musicMute},enumerable:!0,configurable:!0}),e.prototype.switchAll=function(){this.switchEffect(),this.switchMusic()},e.prototype.vibrate=function(){this.vibrateMute||t.Native.instance.vibrate()},Object.defineProperty(e.prototype,"vibrateMute",{get:function(){var e=t.localStorage.getItem("vibrateMute");return e?"1"==e:!1},set:function(e){t.localStorage.setItem("vibrateMute",e?"1":"0")},enumerable:!0,configurable:!0}),e.prototype.switchVibrate=function(){this.vibrateMute=!this.vibrateMute,PDKOtherGameManager.instance.onVibrateEnableChange()},e}();t.PDKSoundManager=e,__reflect(e.prototype,"PDKalien.PDKSoundManager")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e="ddz",n=function(){function t(){}return t.encryptStr=function(t){for(var n,i,o,a=0,r=t.length,s="",h=0;r>h;++h)a>=e.length&&(a=0),n=t.charCodeAt(h),i=e.charCodeAt(a),o=n^i,s+=String.fromCharCode(o),a++;return s},t.decryptStr=function(t){var e=this.encryptStr(t);return e},t}();t.Encrypt=n,__reflect(n.prototype,"PDKalien.Encrypt")}(PDKalien||(PDKalien={}));var PDKPageChannelBase=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.dataProvider=this._dataProvide=new eui.ArrayCollection},e.prototype.addListeners=function(){this.list.addEventListener(egret.Event.CHANGE,this.selectRoom,this)},e.prototype.removeListeners=function(){this.list.removeEventListener(egret.Event.CHANGE,this.selectRoom,this)},e.prototype.getRoomById=function(t){var e=null;return this._roomList.some(function(n){return n.roomID==t?(e=n,!0):void 0}),e},e.prototype.selectRoom=function(t){var e=this;this.selectedRoom=this.list.selectedItem,console.log("selectRoom------------>",this.selectedRoom),egret.callLater(function(){e.list.selectedIndex=-1},this)},e.prototype.setRoomType=function(t){var e=PDKGameConfig.roomList.filter(function(e){return e.roomType==t});e.sort(function(t,e){return t.roomFlag!=e.roomFlag?t.roomFlag-e.roomFlag:t.roomID-e.roomID}),this._roomList=e,this.dealRoomList(),this._dataProvide.source=this._roomList},e.prototype.dealRoomList=function(){},e.prototype.beforeShow=function(t){this.selectedRoom={},this.addListeners()},e.prototype.beforeHide=function(t,e){void 0===e&&(e=null),this.removeListeners()},e}(PDKalien.PDKNavigationPage);__reflect(PDKPageChannelBase.prototype,"PDKPageChannelBase");var ProtoBuf=dcodeIO.ProtoBuf,ByteArray=egret.ByteArray,Endian=egret.Endian,PDKServer=function(t){function e(){var e=t.call(this)||this;e._sid=0,e.frozen=!1,e._clientId=1,e._session=0,e._isInDDZ=!1,e._isFirstFromDDZ=!1,e._isReconnected=!1,e._reconnectedSession=0,e.showLogs=!1,e.logList=[/.*?/],e._callId=1e3,e._callbackMap=[],e.cacheList=[],e._heartCount=0,e._lastHeart=0,e._ddzDispatcher=null;var n=PDKalien.Native.instance;if(n.isNative)e._showLogToScreen=!1,e._noConsole();else{var i=n.getUrlArg();e._showLogToScreen="1"==i.showLog,e.showLogs=e._showLogToScreen||!1,e.showLogs||e._noConsole()}return e}return __extends(e,t),e.prototype._noConsole=function(){console.log=function(){},console.warn=function(){},console.error=function(){}},e.prototype.ready=function(){this._protoBuilderMap={user:ProtoBuf.loadProto(RES.getRes("runfast_user_proto")),game:ProtoBuf.loadProto(RES.getRes("runfast_game_proto"))},this._otherIns=PDKOtherGameManager.instance,this._protoIDs=PDKProtoIDs.getMap(),this._heartTimer=new egret.Timer(2e3),this._heartTimer.addEventListener(egret.TimerEvent.TIMER,this.onHeartTimer,this),PDKalien.Native.instance.addEventListener("HEART_BEAT",this.onHeartBeat,this)},e.prototype.prepareSocket=function(){var t=this._socket;return this._socket&&this.close(!1),t=this._socket=new egret.WebSocket,t.type=egret.WebSocket.TYPE_BINARY,t},e.prototype.onHeartBeat=function(t){this.showLogs&&console.log("on HEART_BEAT"),this.sendHeartPackage()},e.prototype._removeAllSocketListener=function(){this._socket&&(this._socket.removeEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.removeEventListener(egret.Event.CLOSE,this.onClose,this),this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this))},Object.defineProperty(e.prototype,"connected",{get:function(){return this._socket&&this._socket.connected},enumerable:!0,configurable:!0}),e.prototype.tryConnect=function(t,e,n){var i=this;void 0===e&&(e=null),void 0===n&&(n=null),PDKGameConfig.getServerUrl(t,function(t){0==t.code?egret.setTimeout(i.connect,i,200):PDKToast.show(PDKlang.loginError[501]),e&&e(t.code)},n)},e.prototype.connect=function(){this.prepareSocket(),this._socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._socket.connectByUrl(PDKGameConfig.SERVER_URL)},e.prototype.close=function(t){void 0===t&&(t=!0),this.connected&&(this._removeAllSocketListener(),this._socket.readBytes(new ByteArray),this._socket.close(),this._socket=null,this._heartTimeout&&(egret.clearTimeout(this._heartTimeout),this._heartTimeout=null),t&&this.afterClose())},e.prototype.onConnect=function(t){var e=t.target;this.showLogs&&console.log("Server onConnect=============>"),this._connected=!0,e.removeEventListener(egret.Event.CONNECT,this.onConnect,this),e.addEventListener(egret.Event.CLOSE,this.onClose,this),e.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onSocketData,this),this._kickOut=!1,this.dispatchEventWith(PDKEventNames.CONNECT_SERVER)},e.prototype.onError=function(t){t.target;this.showLogs&&console.log("Server onError=============>"),this.dispatchEventWith(PDKEventNames.SERVER_ERROR)},e.prototype.onClose=function(t){var e=t.target;this.showLogs&&console.log("Server onClose=============>"),e.removeEventListener(egret.Event.CLOSE,this.onClose,this),this.afterClose(),PDKalien.Dispatcher.dispatch(PDKEventNames.SERVER_CLOSE)},Object.defineProperty(e.prototype,"kickOut",{get:function(){return this._kickOut},enumerable:!0,configurable:!0}),e.prototype.afterClose=function(){this._connected&&(this._connected=!1,this._heartTimer.stop(),this._kickOut||PDKalien.PDKSceneManager.instance.currentSceneName==PDKSceneNames.LOGIN||PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_DISCONNECT,{content:PDKlang.disconnect_server}),PDKalien.PDKSceneManager.instance.currentSceneName!=PDKSceneNames.LOGIN&&PDKalien.PopUpManager.instance.removeAllPupUp())},e.prototype.send=function(t,e,n){void 0===n&&(n=null);var i=t.substring(0,t.indexOf(".")),o=this._protoBuilderMap[i].build(t),a=new o(e);this.showLogs&&console.log("send:"+a+" "+JSON.stringify(a));var r=new egret.ByteArray(a.encodeAB());return this._showLogToScreen&&PDKalien.Dispatcher.dispatch(PDKEventNames.LOG,"send: "+t+" "+JSON.stringify(e)),this._isInDDZ?void this.ddzDispatchEvent(0,this._protoIDs[t],r):void this.sendDataByProtoId(this._protoIDs[t],r)},e.prototype.sendDataByProtoId=function(t,e){if(e){this.showLogs&&console.log("sendData:"+t);var n=new egret.ByteArray;n.writeUnsignedShort(e.length+2),n.writeUnsignedShort(t),n.writeBytes(e),this._socket.writeBytes(n),this._socket.flush()}},e.prototype.addCallback=function(t){var e=this._callId++;if(t){var n=this.tsServer;this._callbackMap[e]={id:e,cb:t,time:n},console.log("addCallback:",e,n)}return e},e.prototype.onSocketData=function(t){var e=(t.target,new egret.ByteArray);if(this._socket.readBytes(e),!(e.length<4)){if(this._isInDDZ){var n=new egret.ByteArray;this._socket.readBytes(n);var i=n.readUnsignedShort(),o=n.readUnsignedShort();return void this._parseBytes(o,i,n)}var a=e.readUnsignedShort(),r=e.readUnsignedShort();switch(10>r&&2!=r&&(this.showLogs&&console.log("get:["+a+"] "+r),this._showLogToScreen&&PDKalien.Dispatcher.dispatch(PDKEventNames.LOG,"get: "+r)),r){case 0:this.onHeartTimer(),this._heartTimer.start(),this.dispatchEventWith(PDKEventNames.USER_LOGIN_RESPONSE,!1,{code:0});break;case 1:var s=parseInt(e.readUTFBytes(e.bytesAvailable));this.showLogs&&console.log("login failed. errorId:",s),this.dispatchEventWith(PDKEventNames.USER_LOGIN_RESPONSE,!1,{code:1,errorId:s});break;case 2:this._heartTimeout&&(egret.clearTimeout(this._heartTimeout),this._heartTimeout=null),this._lastHeart=this.tsLocal;var h=e.position,c=e.readInt();e.position=h,this.tsServerOffset=this.tsLocal-c,this._otherIns.onSocketData(r,a,e);break;default:var l=this._protoIDs[r];if(!l){console.log("没有ID为"+r+"的协议!");new egret.ByteArray(e.buffer);return void this._otherIns.onSocketData(r,a,e)}var p=l.indexOf("."),d=l.substring(0,p),u=l.substring(p+1),_=new egret.ByteArray,g=e.position;e.readBytes(_),e.position=g;var f=null;this._otherIns.isRunOtherGame()&&(f=e);var m=this._protoBuilderMap[d].build(l),v=m.decode(_.buffer);this.showLogs&&console.log("recv:"+v+" "+JSON.stringify(v));var D=!0;if("game"==d&&"SetSession"!=u&&(D=this._session==v.session),this._showLogToScreen&&PDKalien.Dispatcher.dispatch(PDKEventNames.LOG,"get: "+l),!this.frozen&&D)if(this.needCache){if(!(this.exception&&this.exception.indexOf(l)>-1))return void this.cacheList.push([l,v]);this.beforeDispatchMessage(l,v),this.dispatchEventWith(l,!1,v),this._otherIns.isRunOtherGame()&&(this._otherIns.isInOtherProtoListen(r)||this._otherIns.isListenAllProto())&&this._otherIns.onSocketData(r,a,f)}else this.beforeDispatchMessage(l,v),this.dispatchEventWith(l,!1,v),this._otherIns.isRunOtherGame()&&(this._otherIns.isInOtherProtoListen(r)||this._otherIns.isListenAllProto())&&this._otherIns.onSocketData(r,a,f)}}},e.prototype.startCache=function(t,e){void 0===t&&(t=null),void 0===e&&(e=-1),console.log("开始缓存"),t?this.exception=t.concat():this.exception=[],this.needCache=!0,this.cacheTime=e,this.timer||(this.timer=new egret.Timer(1e3)),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.start()},e.prototype.stopCache=function(){for(console.log("缓存结束"),this.needCache=!1,this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this));this.cacheList.length>0;){var t=this.cacheList.shift();if(this.beforeDispatchMessage(t[0],t[1]),this.dispatchEventWith(t[0],!1,t[1]),this.needCache)break}},e.prototype.onTimer=function(t){if(-1!=this.cacheTime)for(var e=0;e<this.cacheList.length;e++)"object"==typeof this.cacheList[e][1]&&(this.cacheList[e][1].hasOwnProperty("time")?(this.cacheList[e][1].time-=this.cacheTime,this.cacheList[e][1].time<0&&(this.cacheList[e][1].time=0)):this.cacheList[e][1].hasOwnProperty("timeout")&&(this.cacheList[e][1].timeout-=this.cacheTime,this.cacheList[e][1].timeout<0&&(this.cacheList[e][1].timeout=0)))},e.prototype.checkCallback=function(t,e){if(t>0){var n=this._callbackMap[t];console.log("checkCallback:",t,!!n),n&&(this._callbackMap.splice(t,1),n.cb(e))}},e.prototype.inShowList=function(t){var e=!1;return this.logList.forEach(function(n){"string"==typeof n?n==t&&(e=!0):t.match(n)&&(e=!0)}),e},e.prototype.beforeDispatchMessage=function(t,e){switch(t){case PDKEventNames.GAME_SET_SESSION:this._session=e.session;break;case PDKEventNames.USER_CHECK_RECONNECT_REP:e.roomid>0&&(this._session=e.session,this.roomInfo=PDKGameConfig.getRoomConfig(e.roomid));break;case PDKEventNames.GAME_USER_ONLINE:this._uid==e.uid&&(this.seatid=e.seatid);break;case PDKEventNames.USER_NOTIFY_KICK_OUT:if(this._kickOut=!0,PDKalien.PDKSceneManager.instance.currentSceneName!=PDKSceneNames.LOGIN){var n={content:PDKlang.disconnect_kick_out[e.reason]};4==e.reason||1==e.reason?(n.button=PDKlang.confirm,PDKalien.Dispatcher.dispatch(PDKEventNames.ACCOUNT_ERROR,n)):5==e.reason?PDKalien.Dispatcher.dispatch(PDKEventNames.SERVER_HASUPDATE):PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_DISCONNECT,n)}break;case PDKEventNames.GAME_GAME_END:break;case PDKEventNames.USER_OPERATE_REP:PDKShareImageManager.instance.onUserOperateRep(e)}},e.prototype.onServerTimer=function(t){void 0===t&&(t=null),this.checkDate()},e.prototype.checkDate=function(t){void 0===t&&(t=!0);var e=PDKalien.TimeUtils.tsToDate(this.tsServer),n=e.getDate();this._today!=n&&(this._today=n,t&&PDKalien.Dispatcher.dispatch(PDKEventNames.CLOCK_0))},Object.defineProperty(e.prototype,"tsLocal",{get:function(){return Math.floor((new Date).valueOf()/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tsServer",{get:function(){return this.tsLocal-this.tsServerOffset},enumerable:!0,configurable:!0}),e.prototype.getServerStamp=function(){return 1e3*this.tsServer},Object.defineProperty(e.prototype,"serverDate",{get:function(){return PDKalien.TimeUtils.tsToDate(this.tsServer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tsToday",{get:function(){var t=this.serverDate;return new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()).valueOf()/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tsNow",{get:function(){return this.tsServer-this.tsToday},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!0,configurable:!0}),e.prototype.onHeartTimer=function(t){void 0===t&&(t=null),this.sendHeartPackage()},e.prototype.sendHeartPackage=function(){if(this.connected){var t=new egret.ByteArray;t.writeShort(2),t.writeShort(2),this._socket.writeBytes(t),this._socket.flush(),this._heartCount++,this._heartTimeout||(this._heartTimeout=egret.setTimeout(this.onHeartTimerEnd,this,5e3))}},e.prototype.onHeartTimerEnd=function(){this.showLogs&&console.log("心跳接收超时,主动关闭连接."),this.close(),PDKMainLogic.instance.stop()},e.prototype.checkEnterForegroundTimeOut=function(){return this._lastHeart>0&&this.tsLocal-this._lastHeart>5?(this.onHeartTimerEnd(),!0):!1},e.prototype.login=function(t,e){this._token=e;var n=1;PDKalien.Native.instance.isNative&&("Android"==egret.Capabilities.os?n=2:"iOS"==egret.Capabilities.os&&(n=3)),this._uid=parseInt(t);var i=[this._uid,1,e,PDKwebService.uuid,PDKEnvironment.channel_id,n].join(":"),o=new egret.ByteArray;o.writeUnsignedShort(0),o.writeUTFBytes(i),this._socket.writeBytes(o),this._socket.flush(),this.showLogs&&console.log("Server login===============>",i)},e.prototype.checkReconnect=function(){this.send(PDKEventNames.USER_CHECK_RECONNECT_REQ,{})},e.prototype.reconnect=function(t){this.showLogs&&console.log("Server: reconnect===============>",t),this.send(PDKEventNames.USER_RECONNECT_TABLE_REQ,{result:t,index:0,session:this._session})},e.prototype.resetSession=function(){this._session=0},e.prototype.getRoomId=function(){return this.roomInfo&&this.roomInfo.roomID?this.roomInfo.roomID:null},e.prototype.getTableId=function(){return this.roomInfo&&this.roomInfo.tableId?this.roomInfo.tableId:null},e.prototype.initFromParams=function(t){if(t){if(t.data){var e=t.data;e.action?"reconnect"==e.action&&(this._isReconnected=!0):this._isFirstFromDDZ=!0}else this._isFirstFromDDZ=!0;this._isInDDZ=!0,this._uid=t.serverUid,this._ddzDispatcher=t.dispatcher,this._ddzDispatcher.addEventListener("RECV_SOCKET_DATA",pdkServer.onDDZSocketData,pdkServer),this._ddzDispatcher.addEventListener("MY_USER_INFO_UPDATE",pdkServer._myUserInfoDataUpdata,pdkServer),pdkServer.ddzDispatchEvent(1,"",{type:6,protoIDS:(n={},n["user.LotteryRedcoinRep"]={just:!0},n)});var n}},e.prototype.onDDZSocketData=function(t){var e=t.data;e&&e.byteArray&&e.nameId&&this._parseBytes(e.nameId,e.len,e.byteArray)},e.prototype._myUserInfoDataUpdata=function(t){console.log("_myUserInfoDataUpdata-----in------>",t.data),PDKalien.PDKUtils.injectProp(PDKMainLogic.instance.selfData,t.data)},e.prototype._parseBytes=function(t,e,n){if(this._protoIDs&&n)switch(10>t&&2!=t&&(this.showLogs&&(PDKalien.Native.instance.isNative?console.log("222get:["+e+"] "+t):console.log("222get:[%d] %d",e,t)),this._showLogToScreen&&PDKalien.Dispatcher.dispatch(PDKEventNames.LOG,"get: "+t)),t){case 0:this.onHeartTimer(),this._heartTimer.start(),this.dispatchEventWith(PDKEventNames.USER_LOGIN_RESPONSE,!1,{code:0});break;case 1:this.showLogs&&console.log("222login failed.");var i=parseInt(n.readUTFBytes(n.bytesAvailable));this.dispatchEventWith(PDKEventNames.USER_LOGIN_RESPONSE,!1,{code:1,errorId:i});break;case 2:this._heartTimeout&&(egret.clearTimeout(this._heartTimeout),this._heartTimeout=null),this._lastHeart=this.tsLocal;var o=n.position,a=n.readInt();n.position=o,this.tsServerOffset=this.tsLocal-a,this._otherIns.onSocketData(t,e,n);break;default:var r=this._protoIDs[t];if(!r){console.log("222没有ID为"+t+"的协议!");break}var s=r.indexOf("."),h=r.substring(0,s),c=(r.substring(s+1),new egret.ByteArray);n.readBytes(c);var l=this._protoBuilderMap[h].build(r);if(!l)return;var p=l.decode(c.buffer),d=!0;!this.frozen&&d?"#d0c400":"#BBBBBB";if(console.log("name="+r+" msg="+JSON.stringify(p)),this.showLogs&&!this.frozen&&this.inShowList(r)&&PDKalien.Native.instance.isNative,this._showLogToScreen&&PDKalien.Dispatcher.dispatch(PDKEventNames.LOG,"get: "+r),!this.frozen&&d)if(this.needCache){if(!(this.exception&&this.exception.indexOf(r)>-1))return void this.cacheList.push([r,p]);this.beforeDispatchMessage(r,p),this.dispatchEventWith(r,!1,p)}else this.beforeDispatchMessage(r,p),this.dispatchEventWith(r,!1,p)}},e.prototype.ddzDispatchEvent=function(t,e,n){if(this._ddzDispatcher)if(0==t){var i={type:t,protoID:e,byteArray:n};console.log("==================>>>>>>>> ddzDispatchEvent type:"+t+", data:"+i),this._ddzDispatcher.dispatchEventWith("RunFastMain",!1,i)}else this._ddzDispatcher.dispatchEventWith("RunFastMain",!1,n)},e}(egret.EventDispatcher);__reflect(PDKServer.prototype,"PDKServer");var PDKService=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.initData=function(){},e.prototype.start=function(t){t()},e.prototype.stop=function(){},e}(egret.EventDispatcher);__reflect(PDKService.prototype,"PDKService");var PDKalien;!function(t){var e=function(e){function n(n,i,o,a,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!1);var s=e.call(this)||this;return s._excludeActionsClose=[],s.showEffect=n||t.popupEffect.None,s.showEffectParams=i,s.closeEffect=o||t.popupEffect.None,s.closeEffectParams=a,s.popupShowBanner=r,s._excludeActionsClose=[],s.init(),s}return __extends(n,e),n.prototype.init=function(){},n.prototype.addExcludeForClose=function(t){this._excludeActionsClose=this._excludeActionsClose.concat(t)},n.prototype.dealAction=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callback&&this._callback(t||"close",e),this._excludeActionsClose.indexOf(t)<0&&this.close()},n.prototype.popup=function(e,n,i){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===i&&(i=null),t.PopUpManager.addPopUp(this,this.showEffect,this.showEffectParams,e,n,i)},n.prototype.close=function(){t.PopUpManager.removePopUp(this,this.closeEffect,this.closeEffectParams)},n}(eui.Component);t.PDKPanelBase=e,__reflect(e.prototype,"PDKalien.PDKPanelBase")}(PDKalien||(PDKalien={}));var PDKSideSeat=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.addCards=function(e,n){if(void 0===n&&(n=!0),t.prototype.addCards.call(this,e),0==e.length){e=[],this.setCardCount(0);for(var i=0;16>i;i++)e.push(0)}this.handCardGroup.addCards(e,n)},e.prototype.reset=function(e){return this.cardCountNum=0,t.prototype.reset.call(this,e)},e.prototype.onCardAdded=function(e){t.prototype.onCardAdded.call(this,e),this.cardCountNum++,this.updateCardCount(this.cardCountNum),e.parent==this.handCardGroup&&this.handCardGroup.removeChild(e)},e.prototype.setCardCount=function(t){this.cardCountNum=t,this.ddzHandCardGroup.cardCount=t,this.updateCardCount(t)},e.prototype.updateCardCount=function(e){t.prototype.updateCardCount.call(this,e),(0>e||!e)&&(e=0),1==e?(this.baodan.visible=!0,this.cardCount.visible=!1,0!=this.baodanTimerId&&egret.clearInterval(this.baodanTimerId),this.baodanTimerId=egret.setInterval(function(t){t.baodan02.visible=!t.baodan02.visible},this,300,this)):(0!=this.baodanTimerId&&egret.clearInterval(this.baodanTimerId),this.baodanTimerId=0,this.baodan.visible=!1,this.baodan02.visible=!1,this.cardCount.visible=!0,this.labCardCount.text=e.toString())},e}(PDKDDZSeat);__reflect(PDKSideSeat.prototype,"PDKSideSeat");var PDKDataStorage=function(){function t(){this.name="save"}return t.prototype.loadData=function(){this.save=PDKalien.localStorage.getItemObj(this.name,{},this.prefix)},t.prototype.clearData=function(t){if(void 0===t&&(t=null),t)for(var e in this.save)t.indexOf(e)<0&&delete this.save[e];else this.save={};this.saveData()},t.prototype.saveData=function(){PDKalien.localStorage.setItemObj(this.name,this.save,this.prefix)},t.prototype.getItem=function(t,e){void 0===e&&(e=null);var n=this.save[t];return null===n&&(n=e),n},t.prototype.setItem=function(t,e,n){void 0===n&&(n=!1);var i=this.save[t];return this.save[t]=e,n&&this.saveData(),i},t.prototype.changeItem=function(t,e,n){void 0===n&&(n=!1);var i=this.save[t];return this.save[t]=i+e,n&&this.saveData(),i},t}();__reflect(PDKDataStorage.prototype,"PDKDataStorage");var PDKLanguagePack=function(){function t(){}return t}();__reflect(PDKLanguagePack.prototype,"PDKLanguagePack");var PDKLanguageIds=function(){function t(){this.loading="loading",this.config_url="config_url",this.config_url_1="config_url_1",this.first_alert_title="first_alert_title",this.first_alert_buttons="first_alert_buttons",this.service_provision_url="service_provision_url",this.service_provision="service_provision",this.health_game_advise="health_game_advise",this.loginError="loginError",this.login_waiting="login_waiting",this.disconnect_kick_out="disconnect_kick_out",this.disconnect_server="disconnect_server",this.auto_reconnect="auto_reconnect",this.waiting_for_getting_information="waiting_for_getting_information",this.backAlert="backAlert",this.roomLimit1="roomLimit1",this.roomLimit2="roomLimit2",this.roomLimit3="roomLimit3",this.roomAmount="roomAmount",this.quick_join_error="quick_join_error",this.upload_avatar="upload_avatar",this.no_more_desk="no_more_desk",this.noMoreGold="noMoreGold",this.noMoreGold2="noMoreGold2",this.noMoreGold3="noMoreGold3",this.browNoGold="browNoGold",this.reportSucc="reportSucc",this.repeatReport="repeatReport",this.gameResult="gameResult",this.sex="sex",this.sexVoice="sexVoice",this.people="people",this.second="second",this.gold="gold",this.score="score",this.year="year",this.month="month",this.day="day",this.sky="sky",this.format_y_m_d="format_y_m_d",this.format_m_d="format_m_d",this.currency="currency",this.play_turn="play_turn",this.no_ranking="no_ranking",this.confirm="confirm",this.reconnect="reconnect",this.history="history",this.chatList="chatList",this.free_pay="free_pay",this.match_sign_up_result="match_sign_up_result",this.match_jikai_limit="match_jikai_limit",this.match_jikai_reward="match_jikai_reward",this.match_title_reward_intro="match_title_reward_intro",this.match_title_match_intro="match_title_match_intro",this.match_play_info="match_play_info",this.match_result_match_name="match_result_match_name",this.match_waiting_other_desk_1="match_waiting_other_desk_1",this.match_waiting_other_desk_2="match_waiting_other_desk_2",this.match_get_in="match_get_in",this.match_result_praise="match_result_praise",this.match_cancel_alert="match_cancel_alert",this.match_turn_name="match_turn_name",this.match_top_info_1="match_top_info_1",this.match_top_info_2="match_top_info_2",this.match_top_info_3="match_top_info_3",this.match_top_notify="match_top_notify",this.match_notice_alert="match_notice_alert",this.modify_profile_success="modify_profile_success",this.modify_profile_failed="modify_profile_failed",this.modify_profile_err="modify_profile_err",this.set_password_error="set_password_error",this.bank_operate="bank_operate",this.bank_operate_error="bank_operate_error",this.bind_phone_notice="bind_phone_notice",this.download_client_notice="download_client_notice",this.alms_success="alms_success",this.alms_success_continue="alms_success_continue",this.alms_success_exit="alms_success_exit",this.version_content="version_content",this.version_content_notice="version_content_notice",this.recharge_scale="recharge_scale",this.recharge_addition="recharge_addition",this.recharge_waiting="recharge_waiting",this.recharge_failed="recharge_failed",this.recharge_cancel="recharge_cancel",this.recharge_success_simple="recharge_success_simple",this.recharge_success="recharge_success",this.get_code_error="get_code_error",this.bind_phone_error="bind_phone_error",this.bind_third_part="bind_third_part",this.exchange_redcoin="exchange_redcoin",this.exchange_roomid="exchange_roomid",this.kickback_str="kickback_str",this.dayTaskOne="dayTaskOne",this.dayTaskTwo="dayTaskTwo",this.recordCardHour="recordCardHour",this.recordCardDay="recordCardDay",this.redCoin="redCoin",this.taskNotExist="taskNotExist",this.taskNotOver="taskNotOver",this.taskHasGetRew="taskHasGetRew"}return t}();__reflect(PDKLanguageIds.prototype,"PDKLanguageIds");var PDKDragonBase=function(t){function e(e){var n=t.call(this)||this;n.addEventListener(egret.Event.ADDED_TO_STAGE,n.addToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.removeFromStage,n);var i=RES.getRes(e),o=RES.getRes(e+"_texture_json"),a=RES.getRes(e+"_texture_png");
return PDKDragonManager.getInstance().addDragon(i,a,o),n}return __extends(e,t),e.prototype.addToStage=function(t){PDKalien.StageProxy.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.removeFromStage=function(t){PDKalien.StageProxy.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},e.prototype.onResize=function(t){},e.prototype.addArmature=function(t){var e=PDKDragonManager.getInstance().getDragon(t);return this.addChild(e.display),dragonBones.WorldClock.clock.add(e),e},e}(egret.Sprite);__reflect(PDKDragonBase.prototype,"PDKDragonBase");var PDKGoodsItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setData=function(t){1==t.id?this.numLabel.text=t.count:this.numLabel.text="x"+t.count,this.iconImg.source="room_"+t.id},e.parseUrl=function(t){return PDKGameConfig.RESOURCE_URL+"goods-icon/goods_"+t+".png"},e}(eui.Component);__reflect(PDKGoodsItem.prototype,"PDKGoodsItem");var PDKalien;!function(t){var e=function(){function e(){}return e.init=function(t,e){this.stage=t,this.root=e},e.addEvent=function(){var t=this.stage;t.addEventListener(egret.Event.DEACTIVATE,this.onPDKPause,this),t.addEventListener(egret.Event.ACTIVATE,this.onPDKResume,this),t.addEventListener(egret.TouchEvent.TOUCH_END,function(t){this.lastTouchPos.x=t.stageX,this.lastTouchPos.y=t.stageY},this)},e.removeEvent=function(){var t=this.stage;t.removeEventListener(egret.Event.DEACTIVATE,this.onPDKPause,this),t.removeEventListener(egret.Event.ACTIVATE,this.onPDKResume,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,function(t){this.lastTouchPos.x=t.stageX,this.lastTouchPos.y=t.stageY},this)},e.onPDKPause=function(){this._isPause=!0,console.log("stage onPDKPause--------->"),t.PDKSoundManager.instance.onPause()},e.onPDKResume=function(){this._isPause=!1,console.log("stage onPDKResume-----connected---->",pdkServer.connected),t.PDKSoundManager.instance.onResume()},e.isPause=function(){return this._isPause},Object.defineProperty(e,"width",{get:function(){return this.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"height",{get:function(){return this.stage.stageHeight},enumerable:!0,configurable:!0}),e._isPause=!1,e.lastTouchPos={},e}();t.StageProxy=e,__reflect(e.prototype,"PDKalien.StageProxy")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function t(t){void 0===t&&(t=1),this._all=[],this.interval=t}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval!=t&&(this._interval=t)},enumerable:!0,configurable:!0}),t.prototype.register=function(t){this._all.indexOf(t)<0&&this._all.push(t)},t.prototype.unregister=function(t){var e=this._all.indexOf(t);e>=0&&this._all.splice(e,1)},t.prototype.activate=function(){this._intervalCount=0,egret.startTick(this.onTicker,this)},t.prototype.sleep=function(){egret.stopTick(this.onTicker,this)},t.prototype.onTicker=function(t){this._intervalCount++,this._intervalCount<this._interval||(this._intervalCount=0,this._all.forEach(function(t){t.update()}))},Object.defineProperty(t,"interval",{get:function(){return this.instance.interval},set:function(t){this.instance.interval=t},enumerable:!0,configurable:!0}),t.register=function(t){this.instance.register(t)},t.unregister=function(t){this.instance.unregister(t)},t.activate=function(){this.instance.activate()},t.sleep=function(){this.instance.sleep()},t}();t.TickerManager=e,__reflect(e.prototype,"PDKalien.TickerManager")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.setXY(t,e)}return t.prototype.setXY=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.zero=function(){return this.x=0,this.y=0,this},Object.defineProperty(t.prototype,"isZero",{get:function(){return 0==this.x&&0==this.y},enumerable:!0,configurable:!0}),t.prototype.normalize=function(){var t=this.length;return 0==t?(this.x=1,this):(this.x/=t,this.y/=t,this)},Object.defineProperty(t.prototype,"isNormalized",{get:function(){return 1==this.length},enumerable:!0,configurable:!0}),t.prototype.truncate=function(t){return this.length=Math.min(t,this.length),this},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.dotProd=function(t){return this.x*t.x+this.y*t.y},t.prototype.crossProd=function(t){return this.x*t.y-this.y*t.x},t.prototype.distSQ=function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},t.prototype.distance=function(t){return Math.sqrt(this.distSQ(t))},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(t){return this.x/=t,this.y/=t,this},Object.defineProperty(t.prototype,"angle",{get:function(){return 180*this.radian/Math.PI},set:function(t){this.radian=t*Math.PI/180},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radian",{get:function(){return Math.atan2(this.y,this.x)},set:function(t){var e=this.length;this.setXY(Math.cos(t)*e,Math.sin(t)*e)},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(t){var e=this.radian;this.setXY(Math.cos(e)*t,Math.sin(e)*t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"[Vector2D (x:"+this.x+", y:"+this.y+")]"},t}();t.Vector2D=e,__reflect(e.prototype,"PDKalien.Vector2D")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function e(){}return e.callNet=function(e,n,i,o,a,r,s,h){void 0===n&&(n=null),void 0===i&&(i=egret.HttpMethod.GET),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=null),void 0===h&&(h=null);var c=s?s():e;console.log("callNet===1==>",c);var l=new egret.HttpRequest;l.responseType=egret.HttpResponseType.TEXT,l.addEventListener(egret.Event.COMPLETE,function(t){a&&a(l.response)},this),l.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){r&&r(l.response)},this),l.open(c,i);for(var p in o)l.setRequestHeader(p,o[p]);var d=null;h?d=h():(l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d=t.PDKUtils.obj2query(n),console.log("callNet===2==>",d)),d?l.send(d):l.send()},e.GET=function(e,n,i,o,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.callNet(e,n,egret.HttpMethod.GET,a,i,o,function(){if(n){var i=t.PDKUtils.obj2query(n);e+=(e.indexOf("?")<0?"?":"")+i}return e},function(){return null})},e.POST=function(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.callNet(t,e,egret.HttpMethod.POST,o,n,i)},e.POSTDirectory=function(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.callNet(t,e,egret.HttpMethod.POST,o,n,i,null,function(){return e})},e}();t.Ajax=e,__reflect(e.prototype,"PDKalien.Ajax")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e;!function(e){var n=function(){function t(){}return t.centerPopUp=function(t){t.horizontalCenter=t.verticalCenter=0},t.centerHorizontal=function(t){t.horizontalCenter=0},t.centerVertical=function(t){t.verticalCenter=0},t.notCenterPopUp=function(t){t.horizontalCenter=t.verticalCenter=0/0},t.getCenterPos=function(t){var e=0,n=0,i=t.parent;return i&&(e=.5*(i.width-t.width),n=.5*(i.height-t.height)),{x:e,y:n}},t.transDirection=function(t){var e;switch(t){case"up":e=0;break;case"right":e=1;break;case"bottom":e=2;break;case"left":e=3}return e},t}();e.PDKUtils=n,__reflect(n.prototype,"PDKalien.popupEffect.PDKUtils");var i=function(){function t(){}return t.prototype.show=function(t,e,i,o,a){e.addChild(t),n.centerPopUp(t)},t.prototype.hide=function(t,e,n,i,o){e.removeChild(t)},t}();e.None=i,__reflect(i.prototype,"PDKalien.popupEffect.None",["PDKalien.popupEffect.IDialogEffect"]);var o=function(){function t(){}return t.prototype.show=function(e,i,o,a,r){e.alpha=0,i.addChild(e),n.centerPopUp(e);var s=r&&r.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:1},s)},t.prototype.hide=function(e,n,i,o,a){var r=a&&a.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:0},r).call(function(){n.removeChild(e)},this)},t.DEFAULT_DURATION=200,t}();e.Fade=o,__reflect(o.prototype,"PDKalien.popupEffect.Fade",["PDKalien.popupEffect.IDialogEffect"]);var a=function(){function e(){}return e.prototype.show=function(i,o,a,r,s){e.outPos||(e.outPos=[{x:0,y:-t.StageProxy.height},{x:t.StageProxy.width,y:0},{x:0,y:t.StageProxy.height},{x:-t.StageProxy.width,y:0}]),o.addChild(i),n.notCenterPopUp(i);var h=s.startPos||e.outPos[n.transDirection(s.direction)],c=s.endPos||n.getCenterPos(i);i.x=h.x||c.x,i.y=h.y||c.y;var l=s&&s.duration||e.DEFAULT_DURATION,p={x:c.x,y:c.y};egret.Tween.get(i).to(p,l,s?s.ease:null),s&&s.withFade&&egret.Tween.get(i).to({alpha:1},l)},e.prototype.hide=function(t,i,o,a,r){var s=e.outPos[n.transDirection(r.direction)],h=r.endPos||n.getCenterPos(t),c=r&&r.duration||e.DEFAULT_DURATION,l={x:s.x||h.x,y:s.y||h.y};egret.Tween.get(t).to(l,c,r?r.ease:null).call(function(){i.removeChild(t),n.centerPopUp(t)},this),r&&r.withFade&&egret.Tween.get(t).to({alpha:0},c)},e.DEFAULT_DURATION=300,e}();e.Flew=a,__reflect(a.prototype,"PDKalien.popupEffect.Flew",["PDKalien.popupEffect.IDialogEffect"]);var r=function(){function t(){}return t.prototype.show=function(e,i,o,a,r){var s=r&&r.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=0;var h={scaleX:1,scaleY:1};i.addChild(e),n.centerPopUp(e),egret.Tween.get(e).to(h,s,r?r.ease:null),r&&r.withFade&&egret.Tween.get(e).to({alpha:1},s)},t.prototype.hide=function(e,n,i,o,a){var r=a&&a.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=1;var s={scaleX:0,scaleY:0};egret.Tween.get(e).to(s,r,a?a.ease:null).call(function(){n.removeChild(e),e.scaleX=e.scaleY=1},this),a&&a.withFade&&egret.Tween.get(e).to({alpha:0},r)},t.DEFAULT_DURATION=200,t}();e.Scale=r,__reflect(r.prototype,"PDKalien.popupEffect.Scale",["PDKalien.popupEffect.IDialogEffect"])}(e=t.popupEffect||(t.popupEffect={}))}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function t(){this.clear()}return t.prototype.containsKey=function(t){return t in this.obj},t.prototype.containsValue=function(t){for(var e in this.obj)if(this.obj[e]==t)return!0;return!1},t.prototype.put=function(t,e){this.containsKey(t)||(this.obj[t]=e,this._length++)},t.prototype.get=function(t){return this.containsKey(t)?this.obj[t]:null},t.prototype.remove=function(t){if(this.containsKey(t)){var e=this.obj;return delete this.obj[t],this._length--,e}return null},t.prototype.foreach=function(t,e){for(var n in this.obj)if(!t.call(e,n,this.obj[n]))break},t.prototype.randomGet=function(){var t=this.valueSet;return t[Math.floor(Math.random()*t.length)]},Object.defineProperty(t.prototype,"keySet",{get:function(){var t=[];for(var e in this.obj)t.push(e);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueSet",{get:function(){var t=[];for(var e in this.obj)t.push(this.obj[e]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._length=0,this.obj={}},t}();t.HashMap=e,__reflect(e.prototype,"PDKalien.HashMap")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function t(){}return t.distancePoint=function(t,e){return this.distance(t.x,t.y,e.x,e.y)},t.distance=function(t,e,n,i){return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))},t.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t.makeRandomInt=function(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e))+e},t.makeRandomFloat=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},t.makeRandomByRange=function(t,e){return t+(Math.random()*e*2-e)},t.makeRandomIntArr=function(t,e,n){void 0===n&&(n=0);for(var i=[],o=0;t>o;o++)i.push(this.makeRandomInt(e));return i},t.makeOrderIntArray=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);for(var i=[],o=e;t>=o;o+=n)i.push(o);return i},t.mixArray=function(t){for(var e=0,n=Math.round(t.length/2);n>e;e++){var i=this.makeRandomInt(t.length),o=this.makeRandomInt(t.length),a=t[i];t[i]=t[o],t[o]=a}return t},t.mixArray2=function(t){for(var e,n,i=t[0].length,o=t.length,a=0,r=Math.round(i*o/2);r>a;a++){e=[this.makeRandomInt(i),this.makeRandomInt(o)],n=[this.makeRandomInt(i),this.makeRandomInt(o)];var s=t[e[0]][e[1]];t[e[0]][e[1]]=t[n[0]][n[1]],t[n[0]][n[1]]=s}return t},t.getRandomFromArray=function(t){return t[this.makeRandomInt(t.length)]},t.fixRange=function(t,e,n){return e>t?t=e:t>n&&(t=n),t},t.roundFix=function(t,e,n){return void 0===n&&(n=0),n>t?t+=e-n:t>=e&&(t-=e-n),t},t.radiusToAngle=function(t){return 180*t/Math.PI},t.angleToRadius=function(t){return t*Math.PI/180},t.turnRight=function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push([]);for(var o=0,a=t.length;a>o;o++)for(var r=0,s=t[o].length;s>r;r++)e[o][r]=t[s-r-1][o];return e},t.turnLeft=function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push([]);for(var o=0,a=t.length;a>o;o++)for(var r=0,s=t[o].length;s>r;r++)e[o][r]=t[r][s-o-1];return e},t.calDir=function(t,e,n,i){if(t==n&&e==i)return-1;var o,a=Math.atan2(i-e,n-t);return o=Math.abs(a)<Math.PI/4?0:Math.abs(a)>Math.PI/4*3?2:a>0?1:3},t.sign=function(t){return 0==t?0:t>0?1:-1},t.split=function(t,e){for(var n=[],i=0;e>i;i++)n[i]=0;for(var i=0;t>i;i++)n[this.makeRandomInt(e)]++;return n},t.bezierPoints=function(t,e){function n(t,e,n){return{x:(e.x-t.x)*n+t.x,y:(e.y-t.y)*n+t.y}}for(var i,o=[],a=0,r=1/(e-1),s=0;e>s;s++){for(var h=t.concat(),c=h.length-1;c>0;c--){i=[];for(var l=0,p=h.length;p-1>l;l++)i.push(n(h[l],h[l+1],a));h=i}o.push(h[0]),a+=r}return o},t}();t.MathUtils=e,__reflect(e.prototype,"PDKalien.MathUtils")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function t(){}return t.registerPool=function(t,e,n){void 0===n&&(n=null),this.createMethods[t]=e,this.initMethods[t]=n,this.pools[t]=[]},t.getObject=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.pools[t];if(!i)return console.warn(t+"没有注册在对象池中。"),null;var o;if(i.length>0)o=i.shift();else{var a=this.createMethods[t];o=a.apply(null,e)}var r=this.initMethods[t];return r&&(e.unshift(o),r.apply(null,e)),this.debug(),o},t.recycleObject=function(t,e){if(e){var n=this.pools[t];if(!n)return void console.warn(t+"没有注册在对象池中。");n.indexOf(e)<0&&n.length<=this.MAX&&n.push(e),this.debug()}},t.debug=function(){var t="";for(var e in this.pools){var n=this.pools[e];t+=e+":"+n.length+"\n"}},t.MAX=20,t.createMethods={},t.initMethods={},t.pools={},t}();t.ObjectPool=e,__reflect(e.prototype,"PDKalien.ObjectPool")}(PDKalien||(PDKalien={}));var _base64key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",PDKBase64=function(){function t(){}return t.encode=function(t){if(!t)return"";var e,n,i,o,a,r,s,h="",c=0;for(t=this._utf8_encode(t);c<t.length;)e=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c++),o=e>>2,a=(3&e)<<4|n>>4,r=(15&n)<<2|i>>6,s=63&i,isNaN(n)?r=s=64:isNaN(i)&&(s=64),h=h+_base64key.charAt(o)+_base64key.charAt(a)+_base64key.charAt(r)+_base64key.charAt(s);return h},t.decode=function(t){if(!t)return"";var e,n,i,o,a,r,s,h="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)o=_base64key.indexOf(t.charAt(c++)),a=_base64key.indexOf(t.charAt(c++)),r=_base64key.indexOf(t.charAt(c++)),s=_base64key.indexOf(t.charAt(c++)),e=o<<2|a>>4,n=(15&a)<<4|r>>2,i=(3&r)<<6|s,h+=String.fromCharCode(e),64!=r&&(h+=String.fromCharCode(n)),64!=s&&(h+=String.fromCharCode(i));return h=this._utf8_decode(h)},t._utf8_encode=function(t){return window.unescape(encodeURIComponent(t))},t._utf8_decode=function(t){return decodeURIComponent(window.escape(t))},t}();__reflect(PDKBase64.prototype,"PDKBase64");var PDKalien;!function(t){var e=function(){function t(){}return t.injectProp=function(t,e,n,i,o){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===o&&(o=!0),!e)return!1;var a=!0;for(var r in e){var s=e[r];i&&"function"==typeof s||o&&null==s||(n?n(t,r,s):t[r]=s)}return a},t.getDirtyData=function(t,e){var n;for(var i in e)t[i]!=e[i]&&(n||(n={}),n[i]=e[i]);return n},t.combineProp=function(t){var e={};return t.forEach(function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},t.enumChildren=function(t,e){for(var n=0,i=t.numChildren;i>n&&!e(t.getChildAt(n),n);n++);},t.enumChildren2=function(t,e){for(var n=t.numChildren,i=n-1;i>=0&&!e(t.getChildAt(i),i);i--);},t.removeChildren=function(t,e){for(var n=0;t.numChildren>0;)e(t.removeChildAt(0),n),n++},t.clone=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var i=e?new e:{};return this.injectProp(i,t,null,n),i},t.arrToIntArr=function(t){for(var e=0,n=t.length;n>e;e++)t[e]=parseInt(t[e]);return t},t.getUrlParams=function(){var t={},e=window.location.href,n=e.indexOf("?");if(0>n)return t;for(var i=e.substr(n+1).split("&"),o=0;o<i.length;o++){var a=i[o].split("=");t[a[0]]=a[1]}return t},t.getUrlBase=function(){var t=window.location.href,e=t.indexOf("?");return t.substring(0,0>e?t.length:e)},t.anchorCenter=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.anchorRate(t,.5,.5,e,n)},t.anchorRate=function(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0),0==i&&(i=t.width),0==o&&(o=t.height),t.x+=t.anchorOffsetX=i*e,t.y+=t.anchorOffsetY=o*n},t.obj2query=function(t){if(!t)return"";var e=[];for(var n in t)e.push(n+"="+t[n]);return e.join("&")},t.parseColorTextFlow=function(t){for(var e,n=t.split(/\[.*?\]/g),i=t.match(/\[.*?\]/g),o=[],a=0,r=n.length-1;r>a;a++){e=n[a],e&&o.push({text:e});var s=i[a];s=s.substr(1,s.length-2);var h={},c=s.split("|");1==c.length?h.style={textColor:parseInt(c[0],16)}:(h.text=c[0],h.style={textColor:parseInt(c[1],16)}),o.push(h)}return e=n[a],e&&o.push({text:e}),o},t.parseHtmlText=function(t){return this.parser.parser(t)},t.scrollTo=function(t,e,n){return void 0===n&&(n=0),(e+n)*t},t.getByteLen=function(t){return t.replace(/[^\x00-\xff]/g,"__").length},t.isTwoStampSameDay=function(t,e){var n=new Date(t),i=new Date(e);return n.getFullYear()==i.getFullYear()&&n.getMonth()==i.getMonth()&&n.getDate()==i.getDate()?!0:!1},t.checkCurHourisInHourRange=function(t,e){var n=pdkServer.getServerStamp(),i=new Date(n).getHours();return i>=t&&e>i?!0:!1},t.checkTwoTimestampIsOtherDay=function(t,e){var n=new Date(t).getDate(),i=new Date(e).getDate();return n!=i&&e>t?!0:!1},t.parser=new egret.HtmlTextParser,t}();t.PDKUtils=e,__reflect(e.prototype,"PDKalien.PDKUtils")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(){function e(){}return e.makeRandomString=function(e){for(var n="",i=this.chars.length,o=0;e>o;o++)n+=this.chars.charAt(t.MathUtils.makeRandomInt(i));return n},e.makeRandomIntString=function(e){for(var n="",i=0;e>i;i++)n+=t.MathUtils.makeRandomInt(10);return n},e.stringCut=function(t,e,n){void 0===n&&(n="...");var i=t;return t.length>e&&(i=t.substr(0,e)+n),i},e.supplement=function(t,e){var n=e-t.toString().length-1;return 0>n?t.toString():this.zeros[n]+t},e.format=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.formatApply(t,e)},e.formatApply=function(t,e){for(var n=t,i=0,o=e.length;o>i;i++)n=n.replace("{"+i+"}",e[i]);return n},e.getStrFromObj=function(t,e){void 0===e&&(e="&");var n="";for(var i in t)""!=n&&(n+=e),n+=i+"="+t[i];return n},e.getColor=function(t,e,n){return void 0===n&&(n=0),0==n?"<font color='#"+e.toString(16)+"'>"+t+"</font>":"<font size="+n+" color='#"+e.toString(16)+"'>"+t+"</font>"},e.chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e.zeros=["0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000"],e}();t.StringUtils=e,__reflect(e.prototype,"PDKalien.StringUtils")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){function e(t,e,n,i,o){void 0===n&&(n=-1),void 0===i&&(i=null),void 0===o&&(o=!1);for(var a=[],r=5;r<arguments.length;r++)a[r-5]=arguments[r];var s=0;o&&(s++,t.apply(null,a));var h=egret.setInterval(function(){return n>0&&s>=n?(egret.clearInterval(h),void(i&&i())):(t.apply(null,a),void s++)},this,e);return h}t.repeat=e;var n=function(){function e(){}return e.timeFormat=function(e,n,i,o){var a=this;void 0===n&&(n="{1}:{0}"),void 0===i&&(i=!0),void 0===o&&(o=!1);var r=e%60,s=Math.floor(e/60)%60,h=Math.floor(e/3600)%24,c=Math.floor(e/3600/24);if(i&&(r=t.StringUtils.supplement(r,2),s=t.StringUtils.supplement(s,2),h=t.StringUtils.supplement(h,2),c=t.StringUtils.supplement(c,2)),o){var l="";return[c,h,s,r].forEach(function(t,e){t>0&&(l+=t+PDKlang[a.timeLang[e]])}),l}return t.StringUtils.format(n,r,s,h,c)},e.timeFormatForEx=function(e,n,i,o,a){void 0===n&&(n="年"),void 0===i&&(i="月"),void 0===o&&(o="日"),void 0===a&&(a=!0);var r=e.getFullYear(),s=e.getMonth()+1,h=e.getDate(),c=r+n+s+i+h+o;if(a){var l=t.StringUtils.supplement(e.getHours(),2),p=t.StringUtils.supplement(e.getMinutes(),2);return c+" "+l+":"+p}return c},e.parseFromString=function(t){return new Date(t.replace("T"," ").replace(/-/g,"/"))},e.parseFromStringScope=function(t){var e=this;return t.map(function(t){return e.parseFromString(t)})},e.dateTimeToString=function(t){return this.dateToString(t,PDKlang.format_y_m_d)+" "+this.dateToTimeString(t,"{2}:{1}")},e.tsToDate=function(t){var e=new Date;return e.setTime(1e3*t),e},e.parseTime=function(t){var e=t.split(":");return 3600*parseInt(e[0])+60*parseInt(e[1])+parseInt(e[2])},e.tsToDateString=function(t,e){return void 0===e&&(e="{0}/{1}/{2}"),this.dateToString(this.tsToDate(t))},e.dateToString=function(e,n){return void 0===n&&(n="{0}/{1}/{2}"),t.StringUtils.format(n,e.getFullYear(),t.StringUtils.supplement(e.getMonth()+1,2),t.StringUtils.supplement(e.getDate(),2))},e.dateToTimeString=function(e,n){return void 0===n&&(n="{2}:{1}:{0}"),t.StringUtils.format(n,t.StringUtils.supplement(e.getSeconds(),2),t.StringUtils.supplement(e.getMinutes(),2),t.StringUtils.supplement(e.getHours(),2))},e.dateToTs=function(t){return Math.floor(t.valueOf()/1e3)},e.dateCut=function(t){var e=t.getHours(),n=t.getMinutes(),i=t.getSeconds();return this.tsToDate(this.dateToTs(t)-3600*e-60*n-i)},e.tsToMonthDayString=function(e){var n=this.tsToDate(e);return t.StringUtils.format("{0}"+PDKlang.month+"{1}"+PDKlang.day,t.StringUtils.supplement(n.getMonth()+1,2),t.StringUtils.supplement(n.getDate(),2))},e.scopeToDateString=function(t,e){return this.dateToString(t[0],e)+"-"+this.dateToString(t[1],e)},e.scopeToTimeString=function(t,e){var n=this.dateToTimeString(t[0],e),i=this.dateToTimeString(t[1],e);return n+"-"+i},e.scopeToDateTimeString=function(t,e,n,i){void 0===i&&(i=!1);var o=t[0],a=t[1];return i&&o.getDate()==a.getDate()?this.dateToString(o,e)+" "+this.dateToTimeString(o,n)+"-"+this.dateToTimeString(a,n):this.dateTimeToString(o)+" - "+this.dateTimeToString(a)},e.remainDays=function(t,e,n){return void 0===n&&(n=!1),0},e.compareScope=function(t,e){var n=this.dateToTs(t[0]),i=this.dateToTs(t[1]);return n>e?e-n:e>=n&&i>=e?0:e-i},e.getWeekIndex=function(t){var e=this.tsToDate(t),n=this.getFirstWeekBegDay(e.getFullYear());n>e&&(n=this.getFirstWeekBegDay(e.getFullYear()-1));var i=Math.floor((e.valueOf()-n.valueOf())/864e5);return Math.floor(i/7)+1},e.getFirstWeekBegDay=function(t){var e=new Date(t,0,1),n=e.getDay();if(1==n)return e;n=0==n?7:n;var i=e.setDate(e.getDate()+(8-n));return new Date(i)},e.timeLang=["sky","hour","minutes","second"],e}();t.TimeUtils=n,__reflect(n.prototype,"PDKalien.TimeUtils")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.dicTweenCount={},e.dicTweenParams={},e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){void 0===e&&(e=null),this.dicTweenCount[t]=0,this.dicTweenParams[t]=e},e.prototype.registerTween=function(t,e){this.setTweenStart(t),e.call(this.onTweenEnd,this,[t])},e.prototype.setTweenStart=function(t){this.dicTweenCount[t]++},e.prototype.setTweenEnd=function(t){this.onTweenEnd(t)},e.prototype.onTweenEnd=function(t){this.dicTweenCount[t]--,this.dicTweenCount[t]<=0&&this.dispatchEventWith(e.ALL_TWEEN_COMPLETE,!1,{name:t,params:this.dicTweenParams[t]})},e.ALL_TWEEN_COMPLETE="allTweenComplete",e}(egret.EventDispatcher);t.TweenWatcher=e,__reflect(e.prototype,"PDKalien.TweenWatcher")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.grpPanel.visible=!1,this.grpPanel.alpha=0,this.grpPanel.y=0,this._index=-1,this.list.itemRenderer=n,this.list.dataProvider=this._items=new eui.ArrayCollection,this.list.addEventListener(egret.Event.CHANGE,this.onItemSelect,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},i.prototype.onTap=function(t){var e=this;!this.grpPanel.visible&&this._items&&0!=this._items.length&&egret.setTimeout(function(){e.show()},this,1)},i.prototype.onItemSelect=function(t){this.index=this.list.selectedIndex,this.list.selectedIndex=-1},i.prototype.onStageTap=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this),this.hide()},i.prototype.show=function(){this._items.length>1&&(t.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTap,this),egret.Tween.get(this.grpPanel,null,null,!0).set({visible:!0}).to({y:this.imgBg.height,alpha:1},100))},i.prototype.hide=function(){this.btn.selected=!1,egret.Tween.get(this.grpPanel,null,null,!0).to({y:0,alpha:0},100).set({visible:!1}).call(this.onResult.bind(this))},i.prototype.onResult=function(){this.dispatchEventWith(egret.Event.CHANGE,!1,{index:this._index})},Object.defineProperty(i.prototype,"items",{get:function(){return this._items?this._items.source:null},set:function(t){this._items.source=t,this.index=0,this.btn.visible=this._items.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t;var e=this._items.getItemAt(this._index);this.lab.text="string"==typeof e?e:e.text,this.lab.textColor=e.disable?13421772:16641454},enumerable:!0,configurable:!0}),i}(eui.Component);t.PDKDropDown=e,__reflect(e.prototype,"PDKalien.PDKDropDown");var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.lab.text="string"==typeof e?e:e.text,this.lab.textColor=e.disable?13421772:16641454},e}(eui.ItemRenderer);t.PDKIRDropDownItem=n,__reflect(n.prototype,"PDKalien.PDKIRDropDownItem")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.createChildren=function(){var n=this;e.prototype.createChildren.call(this),this.parts=[],t.PDKUtils.enumChildren(this,function(t){n.parts.push(t)}),this.removeChildren(),this.switchTo(0,0)},n.prototype.switchTo=function(t,e,n){var i=this;if(void 0===e&&(e=300),void 0===n&&(n=null),this._index!=t){this._index=t,this._old&&(this.removeChild(this._old),this._old=null);var o=this.parts[t],a=this._old=0==this.numChildren?null:this.getChildAt(0);o&&(o.alpha=0,o.visible=!0,this.addChild(o),egret.Tween.get(o,null,null,!0).to({alpha:1},e).call(function(){n&&n()})),a&&egret.Tween.get(a,null,null,!0).to({alpha:0},e).call(function(){i._old=null,a.alpha=1,i.removeChild(a)})}},n}(eui.Group);t.FadeSwitch=e,__reflect(e.prototype,"PDKalien.FadeSwitch")}(PDKalien||(PDKalien={}));var PDKalien;!function(PDKalien){var Image=function(_super){function Image(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Image,_super),Image.prototype.createChildren=function(){_super.prototype.createChildren.call(this)},Object.defineProperty(Image.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._anchorX!=t&&(this._anchorX=t,this.anchorOffsetX=this.width*this._anchorX)},enumerable:!0,configurable:!0}),Object.defineProperty(Image.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._anchorY!=t&&(this._anchorY=t,this.anchorOffsetY=this.height*this._anchorY)},enumerable:!0,configurable:!0}),Object.defineProperty(Image.prototype,"animation",{get:function(){return this._animation},set:function(t){this._animation!=t&&(this._animation=t,this._animation&&this.playAnimation(this._animation))},enumerable:!0,configurable:!0}),Image.prototype.playAnimation=function(script){if(script){var tween_1=egret.Tween.get(this,null,null,!0),lines=script.split("|");lines.forEach(function(item,index){var tweenProps=item.split(";"),p=tweenProps[0].replace("[","{").replace("]","}"),duration=parseFloat(tweenProps[1])||0;if(p.length>2){var props=eval("("+p+")"),ease=void 0;tweenProps[2]&&(ease=egret.Ease[tweenProps[2]]),tween_1.to(props,duration,ease)}else tween_1.wait(duration)})}},Image}(eui.Image);PDKalien.Image=Image,__reflect(Image.prototype,"PDKalien.Image")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._index=-1;var e=this.grpPoints.removeChildAt(0);this.pointRes=e.source,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.renderPoints(),this.index=0},e.prototype.onTap=function(t){switch(t.target.name){case"reduce":this._setIndex(this._index-1);break;case"increase":this._setIndex(this._index+1)}},e.prototype.renderPoints=function(){this.grpPoints.removeChildren();for(var t=0;t<this.total;t++){var e=new eui.Image(this.pointRes);e.scaleX=e.scaleY=e.alpha=.7,this.grpPoints.addChild(e)}},Object.defineProperty(e.prototype,"total",{get:function(){return this._total},set:function(t){this._total=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._setIndex(t,!1)},enumerable:!0,configurable:!0}),e.prototype._setIndex=function(t,e){void 0===e&&(e=!0);var n=t;0>n?n=this._total-1:n>this._total-1&&(n=0),this.updateIndex(this._index,this._index=n,e)},e.prototype.updateIndex=function(t,e,n){if(void 0===n&&(n=!0),t>=0){var i=this.grpPoints.getChildAt(t);egret.Tween.get(i,null,null,!0).to({scaleX:.7,scaleY:.7,alpha:.7},200)}var o=this.grpPoints.getChildAt(e);egret.Tween.get(o,null,null,!0).to({scaleX:1,scaleY:1,alpha:1},200),n&&this.dispatchEventWith(egret.Event.CHANGE)},e}(eui.Component);t.PageProgressBar=e,__reflect(e.prototype,"PDKalien.PageProgressBar")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.speedX=-.5,t.speedY=0,t.init(),t}return __extends(n,e),n.prototype.init=function(){this._imgs=[],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedToStage,this)},n.prototype.onAddedToStage=function(e){this._playing&&t.TickerManager.register(this)},n.prototype.onRemovedToStage=function(e){t.TickerManager.unregister(this)},n.prototype.createChildren=function(){var n=this;e.prototype.createChildren.call(this),this._imgs=[],this._widthMax=0,t.PDKUtils.enumChildren(this,function(t){n._imgs.push(t),n._widthMax+=t.width}),this.play()},n.prototype.play=function(){this._playing=!0,t.TickerManager.register(this)
},n.prototype.stop=function(){this._playing=!1,t.TickerManager.unregister(this)},n.prototype.update=function(){var t=this;this._imgs.forEach(function(e){e.x+=t.speedX,e.y+=t.speedY,t.speedX<0&&e.x<-e.width&&(e.x=t._widthMax-e.width)})},n}(eui.Component);t.ScrollImage=e,__reflect(e.prototype,"PDKalien.ScrollImage",["PDKalien.ITicker"])}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._contentPoint={},t._dragOffset={},t._selectedIndex=-1,t._totalPage=0,t._points=[],t._dragThreshold=10,t}return __extends(n,e),Object.defineProperty(n.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){this._dragThreshold=t},enumerable:!0,configurable:!0}),n.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.callLater(this.setup,this)},n.prototype.setup=function(){var e=this;this.scrollEnabled=!0,t.PDKUtils.enumChildren(this,function(t,n){t.x=n*e.width,t.y=0}),this._totalPage=this.numChildren,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this,!0),t.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this,!0),t.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this,!0)},n.prototype.onTouchBegin=function(t){this._touchBeginPoint={x:t.stageX,y:t.stageY},this._contentPoint.x=this.scrollH,this._contentPoint.y=this.scrollV,this._touchedTarget=t.target,this._touchCancel=!1,this._points.splice(0),egret.Tween.removeTweens(this),this._touchMoved=!1},n.prototype.dispatchCancelEvent=function(t){var e=new egret.TouchEvent(egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable),n=this._touchedTarget;n.dispatchEvent(e);for(var i=this.$getPropagationList(n),o=i.length,a=.5*i.length,r=-1,s=0;o>s;s++)if(i[s]===this){r=s;break}i.splice(0,r+1),a-=r+1,this.$dispatchPropagationEvent(e,i,a),egret.Event.release(e)},n.prototype.onTouchMove=function(t){if(this._touchBeginPoint){var e=t.stageX-this._touchBeginPoint.x;Math.abs(e)>this._dragThreshold&&(this.dispatchCancelEvent(t),this._dragOffset.x=e,this._points.push({t:(new Date).valueOf(),x:t.stageX,y:t.stageY}),this.scrollH=this._contentPoint.x-this._dragOffset.x,this._touchCancel=!0,this._touchMoved=!0)}},n.prototype.onTouchEnd=function(e){if(this._touchBeginPoint){var n=-1,i=this._points.length;if(Math.abs(this._dragOffset.x)>this.width/3)n=this.switchPage(t.MathUtils.sign(-this._dragOffset.x));else if(i>0){var o=this._points[1==i?1:i-2];if(o){var a=(o.x-e.stageX)/((new Date).valueOf()-o.t);Math.abs(a)>1&&(n=this.switchPage(t.MathUtils.sign(a)))}}this._touchMoved&&this.showPage(0>n?this._selectedIndex:n)}this._touchBeginPoint=null,this._dragOffset={}},n.prototype.switchPage=function(t){var e=this._selectedIndex+t;return 0>e?e=0:e>this._totalPage-1&&(e=this._totalPage-1),e},n.prototype.onTouchTap=function(t){this._touchCancel&&t.stopPropagation()},n.prototype.removeListeners=function(){},n.prototype.showPage=function(t,e,n){var i=this;void 0===e&&(e=!0),void 0===n&&(n=!0),egret.callLater(function(){i._callPageOut();var o=!1;i._selectedIndex=t;var a=t*i.width;e?(egret.Tween.removeTweens(i),egret.Tween.get(i).to({scrollH:a},Math.abs(i.scrollH-a),egret.Ease.quartOut).call(function(){o||i._callPageIn(t)})):(i.scrollH=a,o||i._callPageIn(t)),n&&!o&&i.dispatchEventWith(egret.Event.CHANGE,!1,{page:t})},this)},n.prototype._callPageOut=function(){if(this._selectedIndex>=0){var t=this.getChildAt(this._selectedIndex);t.sleep&&t.sleep()}},n.prototype._callPageIn=function(t){var e=this.getChildAt(t);e.activate&&e.activate()},n.prototype.toForward=function(){var t=this._selectedIndex-1;return t>-1&&this.showPage(t),this._selectedIndex},n.prototype.toNext=function(){var t=this._selectedIndex+1;return t<this._totalPage&&this.showPage(t),this._selectedIndex},n.prototype.hasForward=function(){return this._selectedIndex>0},n.prototype.hasNext=function(){return this._selectedIndex<this._totalPage-1},Object.defineProperty(n.prototype,"totalPage",{get:function(){return this._totalPage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedChild",{get:function(){return this._selectedIndex>=0?this.getChildAt(this._selectedIndex):null},enumerable:!0,configurable:!0}),n}(eui.Group);t.ScrollNavigator=e,__reflect(e.prototype,"PDKalien.ScrollNavigator")}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedIndex=-1,e.views=[],e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.setup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._viewDefs=t,this.selectedIndex=0},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){var e=this;this._selectedIndex!=t&&this._hideView(this._selectedIndex),this._selectedIndex=t,this._viewDefs&&this._selectedIndex>=0&&this._selectedIndex<this._viewDefs.length&&egret.callLater(function(){e._showView(e._selectedIndex)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedChild",{get:function(){return 0==this.numChildren?null:this.getChildAt(0)},enumerable:!0,configurable:!0}),e.prototype._hideView=function(t){var e=this.views[t];e&&e.sleep&&e.sleep()},e.prototype._showView=function(t){var e=this.views[t];e||(e=this.views[t]=new this._viewDefs[t],e.width=this.width,e.height=this.height),this.removeChildren(),this.addChild(e),e.activate&&e.activate()},e}(eui.Group);t.ViewStack=e,__reflect(e.prototype,"PDKalien.ViewStack")}(PDKalien||(PDKalien={}));var PDKCard=function(t){function e(){var e=t.call(this)||this;return e._select=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.touchEnabled=!0,this.addChild(this._container=new egret.DisplayObjectContainer),this._container.addChild(this._body=new PDKCardBody),this._body.scaleX=this._body.scaleY=PDKGameConfig.CARD_SCALE,PDKalien.PDKUtils.anchorCenter(this._container,PDKGameConfig.CARD_WIDTH,PDKGameConfig.CARD_HEIGHT)},e.prototype.initData=function(t){this._body.y=0,this.scaleX=this.scaleY=this.alpha=1,this.touchEnabled=this.touchChildren=!0,this._select=!1,0==t.pid?this.showBack():(this._body.initData(this._pokerId=t.pid),this.showFront())},Object.defineProperty(e.prototype,"pokerId",{get:function(){return this._pokerId},set:function(t){this._body.initData(this._pokerId=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rollOver",{get:function(){return this._body.rollOver},set:function(t){this._body.rollOver=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"select",{get:function(){return this._select},set:function(t){if(this._select!=t){this._select=t;var e=this._select?-10:0;egret.Tween.get(this._body,null,null,!0).to({y:e},80)}},enumerable:!0,configurable:!0}),e.prototype.showFront=function(t){var e=this;void 0===t&&(t=!1),t?egret.Tween.get(this._container,null,null,!0).to({scaleX:0},100).call(function(){e._bg&&(e._bg.visible=!1),e._body.visible=!0}).to({scaleX:1},100):(this._body.visible=!0,this._bg&&(this._bg.visible=!1))},e.prototype.showBack=function(t){void 0===t&&(t="blue"),this._bg||(this._container.addChild(this._bg=new egret.Bitmap),this._bg.scaleX=this._bg.scaleY=PDKGameConfig.CARD_SCALE),this._backRes!=t&&(this._backRes=t,this._bg.texture=RES.getRes("pdk_poker_"+t+"_back")),this._body.visible=!1,this._bg.visible=!0},e.prototype.animate=function(t,e,n,i,o){return void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=200),void 0===o&&(o=null),egret.Tween.get(this,null,null,!0).to(n).wait(e).to(t,i,o)},e.create=function(t){return PDKalien.ObjectPool.getObject("PDKCard",t)},e.recycle=function(t){PDKalien.ObjectPool.recycleObject("PDKCard",t)},e.prototype.showMasterFlag=function(t){this._body.showMasterFlag(t)},e}(egret.DisplayObjectContainer);__reflect(PDKCard.prototype,"PDKCard");var PDKCardBody=function(t){function e(){var e=t.call(this)||this;return e._rollOver=!1,e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.initData=function(t){if(this._master=!1,this.removeChildren(),t>0){this.addChild(this._bg=new egret.Bitmap(RES.getRes("pdk_poker_broad")));var e=this._poker=PDKUtils.pid2poker(t);if(e.num>13){var n=new egret.Bitmap(RES.getRes("pdk_poker_"+e.signColor+"_joker"));this.addChild(n);var i=new egret.Bitmap(RES.getRes("pdk_poker_"+e.signColor+"_joker_ddz_icon"));i.x=0,i.y=0,this.addChild(i)}else{var o=void 0;switch(e.num){case 1:o="a";break;case 11:o="j";break;case 12:o="q";break;case 13:o="k";break;default:o=e.num.toString()}var a=new egret.Bitmap(RES.getRes("pdk_poker_"+e.signColor+"_"+o));this.addChild(a);var r=new egret.Bitmap(RES.getRes("pdk_poker_sign_"+e.sign));this.addChild(r),a=new egret.Bitmap(RES.getRes("pdk_poker_"+e.signColor+"_"+o)),a.anchorOffsetX=a.x=a.width/2,a.anchorOffsetY=a.y=a.height/2,a.rotation=180,this.addChild(a),r=new egret.Bitmap(RES.getRes("pdk_poker_sign_"+e.sign)),r.anchorOffsetX=r.x=r.width/2,r.anchorOffsetY=r.y=r.height/2,r.rotation=180,this.addChild(r)}this._masterFlag=new egret.Bitmap(RES.getRes("pdk_icon_master_card")),this._masterFlag.scaleX=1.7,this._masterFlag.scaleY=1.7,this._masterFlag.x=50,this._masterFlag.y=2,this.addChild(this._masterFlag)}this.showMasterFlag(!1)},Object.defineProperty(e.prototype,"rollOver",{get:function(){return this._rollOver},set:function(t){this._rollOver!=t&&(this._rollOver=t,this._bg.texture=RES.getRes("pdk_poker_broad"+(this._rollOver?"_h":"")))},enumerable:!0,configurable:!0}),e.prototype.showMasterFlag=function(t){this._master=t,this._masterFlag&&(this._masterFlag.visible=t)},e}(egret.DisplayObjectContainer);__reflect(PDKCardBody.prototype,"PDKCardBody");var PDKalien;!function(t){var e=function(){function e(){this._pupUpStack=[],this._popLayer=t.PDKSceneManager.instance.popLayer,this._popLayer.width=t.StageProxy.width,this._popLayer.height=t.StageProxy.height,t.StageProxy.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)}return Object.defineProperty(e,"instance",{get:function(){return void 0==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.addPopUp=function(t,n,i,o,a,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!0),void 0===r&&(r=null),e.instance.addPopUp(t,n,i,o,a,r)},e.removePopUp=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),e.instance.removePopUp(t,n,i)},e.removeTopPupUp=function(){return e.instance.removeTopPupUp()},e.removeAllPupUp=function(){e.instance.removeAllPupUp()},e.prototype.onStageResize=function(e){void 0===e&&(e=null),this._modalMask&&(this._modalMask.width=t.StageProxy.stage.stageWidth,this._modalMask.height=t.StageProxy.stage.stageHeight)},e.prototype.addPopUp=function(n,i,o,a,r,s){if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=!0),void 0===s&&(s=null),!n.parent){this.modalConfig=t.PDKUtils.combineProp([s,e.defaultModalConfig]),this._pupUpStack.unshift({target:n,modalTouchFun:a,modal:r}),this.updateModalMask(this._pupUpStack[0]);var h=this.createEffectInstance(i);h.show(n,this._popLayer,function(){},this,o)}},e.prototype.removePopUp=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),t.parent&&this.getInStack(t,!0)){var i;this._pupUpStack.some(function(t){return t.modal?(i=t,!0):void 0}),i?this.updateModalMask(i):this.setModalMaskVisible(!1);var o=this.createEffectInstance(e);o.hide(t,this._popLayer,function(){},this,n)}},e.prototype.removeTopPupUp=function(){if(this._popLayer.numChildren>0){var t=this._popLayer.getChildAt(this._popLayer.numChildren-1);return t.close(),!0}return!1},e.prototype.removeAllPupUp=function(){var e=this;t.PDKUtils.enumChildren(this._popLayer,function(t){t!=e._modalMask&&t.close()})},e.prototype.getInStack=function(t,e){void 0===e&&(e=!1);var n;return this._pupUpStack.some(function(e,i){return e.target==t?(n={item:e,index:i},!0):void 0}),n&&e&&this._pupUpStack.splice(n.index,1),n},e.prototype.createEffectInstance=function(e){void 0===e&&(e=null);var n;return n=e?new e:new t.popupEffect.None},e.prototype.onModalMaskTap=function(t){var e=this._pupUpStack[0];e&&e.modal&&e.modalTouchFun&&e.modalTouchFun()},e.prototype.updateModalMask=function(t){var e=this._popLayer.getChildIndex(this._modalMask),n=this._popLayer.getChildIndex(t.target);e!=n-1&&this.setModalMaskVisible(t.modal,n)},e.prototype.setModalMaskVisible=function(t,e){void 0===e&&(e=-1),t?(this.modalMask.fillColor=this.modalConfig.color,this.modalMask.fillAlpha=this.modalConfig.alpha,e>=0?(this.setModalMaskVisible(!0),this._popLayer.addChildAt(this.modalMask,e)):this._popLayer.addChild(this.modalMask),egret.Tween.get(this.modalMask,null,null,!0).to({alpha:1},this.modalConfig.duration)):this.modalMask.parent&&egret.Tween.get(this.modalMask,null,null,!0).to({alpha:0},this.modalConfig.duration).call(function(t){this._popLayer.removeChild(t)},this,[this.modalMask])},Object.defineProperty(e.prototype,"modalMask",{get:function(){return this._modalMask||(this._modalMask=new eui.Rect,this._modalMask.width=t.StageProxy.width,this._modalMask.height=t.StageProxy.height,this._modalMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onModalMaskTap,this)),this._modalMask},enumerable:!0,configurable:!0}),e.defaultModalConfig={color:0,alpha:.5,duration:200},e}();t.PopUpManager=e,__reflect(e.prototype,"PDKalien.PopUpManager")}(PDKalien||(PDKalien={}));var PDKEnvironment=function(){function t(){}return t.channel_id=1,t}();__reflect(PDKEnvironment.prototype,"PDKEnvironment");var PDKLogUtil=function(){function t(){}return t.argsToString=function(t){var e=function(t){for(var e="",n=0;t>n;++n)e+=" ";return e},n="",i=function(t,n,o){var a=t;if(PDKUtils.isArray(o)){a+="[";for(var r=0;r<o.length;++r)a+=i("",n,o[r])+",";a+="]"}else if(PDKUtils.isObject(o)){a+="{\n",n+=1;for(var s in o)a+=i(e(n)+s.toString()+":",n,o[s])+",\n";a+=e(n-1)+"}"}else a+=""+o;return a};return n=i(n,0,t)},t.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return},t.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return},t.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return},t}();__reflect(PDKLogUtil.prototype,"PDKLogUtil");var PDKMainLogic=function(){function t(){this._almsCount=0,this._almsUsageCount=0,this.init()}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){PDKalien.Native.instance.addEventListener("back",this.back,this),PDKalien.Native.instance.addEventListener("enterBackground",this.enterBackground,this),PDKalien.Native.instance.addEventListener("enterForeground",this.enterForeground,this),pdkServer.addEventListener(PDKEventNames.USER_USER_INFO_RESPONSE,this.onUserInfoResponse,this),pdkServer.addEventListener(PDKEventNames.USER_ALMS_REP,this.onAlmsResponse,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.CLOCK_0,this.onClock0,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SERVER_CLOSE,this.onServerClose,this),pdkServer.addEventListener(PDKEventNames.USER_GET_FRREWARD_REP,this._onRecvGetFRechargeRewRep,this),pdkServer.addEventListener(PDKEventNames.USER_PAY_TO_CHAT_REP,this._onRecvHornRep,this),pdkServer.addEventListener(PDKEventNames.USER_CHECK_RECONNECT_REP,this._onCheckReconnectRep,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SERVER_HASUPDATE,this._onServerHasUpdate,this),this.selfData=new PDKUserInfoData},t.prototype.initData=function(){PDKGameConfig.roomList.forEach(function(t){t.hasOwnProperty("cycleTime")&&!t.hasOwnProperty("cycleTimeStamp")&&(t.cycleTimeStamp=[],t.cycleTime.some(function(e){t.cycleTimeStamp.push(PDKalien.TimeUtils.parseTime(e))})),2==t.roomType&&(t.masterReward=PDKMatchService.getRewardStringByRank(t),t.rewardText=PDKalien.StringUtils.format(PDKlang.match_jikai_reward,t.masterReward),205==t.matchId&&(t.masterReward=PDKMatchService.getRewardStringBy205(t),t.rewardText=PDKalien.StringUtils.format(PDKlang.match_jikai_reward,t.masterReward)),t.limitText=PDKalien.StringUtils.format(PDKlang.match_jikai_limit,t.maxPlayer),t.entryMoneyText=t.entryMoney>0?PDKUtils.currencyRatio(t.entryMoney)+PDKlang.gold:PDKlang.free_pay)}),PDKGoodsManager.instance,PDKMatchService.instance.initData()},t.prototype.back=function(t){if(!PDKalien.PopUpManager.removeTopPupUp()){var e=PDKalien.PDKSceneManager.instance.currentScene;if(e.name==PDKSceneNames.ROOM){var n=e;n.doBack()}else PDKalien.PDKSceneManager.back(null,PDKalien.sceneEffect.Fade)||PDKalien.Native.instance.closeApp()}},t.prototype.enterForeground=function(t){console.log("app enter foreground."),this.onAppEnterForeground()},t.prototype.enterBackground=function(t){console.log("app enter background."),this._ready&&PDKalien.PDKSceneManager.instance.currentSceneName==PDKSceneNames.LOADING?this.tryStart():(PDKalien.Dispatcher.dispatch(PDKEventNames.ENTER_BACKGROUND),this.onAppEnterBackground())},t.prototype.delayStart=function(){console.log("delayStart----------->"),this._ready=!0,PDKGameData.instance.loadData(),PDKUserData.instance.init(PDKGameConfig.platform),PDKUserData.instance.loadData(),this.initData(),this.tryStart()},t.prototype.tryStart=function(){if(console.log("tryStart"),pdkServer.ready(),1==pdkServer._isInDDZ)pdkServer.checkReconnect();else{var t=PDKalien.Native.instance;t.isWXMP?PDKLoginService.instance.doWebWXLogin():t.isAli()?PDKLoginService.instance.doWebAliLogin():this.showLogin()}},t.prototype.showLogin=function(){PDKalien.PDKSceneManager.show(PDKSceneNames.LOGIN,{autoLogin:!0,isFirstIn:!0},PDKalien.sceneEffect.Fade)},t.prototype.getLocation=function(){var e=this;PDKalien.Native.instance.getWXLocation(function(n){if("success"==n.result){t.instance.latitude=n.latitude,t.instance.longitude=n.longitude,console.log("!!!!!!!!得到位置信息");var i={latitude:n.latitude,longitude:n.longitude};pdkServer.modifyUserInfo(i),e._getLocationTimer.stop()}else console.log("获取位置信息失败: "+n.result)})},t.prototype.start=function(t){var e=this;if(!this.running){console.log("PDKMainLogic start."),this.refreshSelfInfo();var n=PDKGameData.instance,i=n.getItem("lastLaunchTime",0),o=PDKalien.TimeUtils.tsToDate(i),a=PDKalien.TimeUtils.tsToDate(pdkServer.tsLocal);o.getDate()==a.getDate()&&o.getMonth()==a.getMonth()&&o.getFullYear()==a.getFullYear()?n.changeItem("todayLaunchCount",1):n.setItem("todayLaunchCount",1),PDKalien.TimeUtils.getWeekIndex(i)==PDKalien.TimeUtils.getWeekIndex(pdkServer.tsLocal)?n.changeItem("weekLaunchCount",1):n.setItem("weekLaunchCount",1),n.setItem("lastLaunchTime",pdkServer.tsLocal,!0),pdkServer._isInDDZ?(this.running=!0,t()):async.parallel([function(t){PDKMatchService.instance.start(t)},function(t){PDKBagService.instance.start(t)},function(t){PDKCountDownService.instance.start(t)},function(t){PDKRechargeService.instance.start(t)},function(t){PDKMailService.instance.start(t)}],function(){e.running=!0,t()}),this.checkNicknameCount=0}},t.prototype.stop=function(){PDKalien.PopUpManager.removeAllPupUp(),this.running&&(console.log("PDKMainLogic stop."),this.selfData.clean(),PDKMatchService.instance.stop(),PDKBagService.instance.stop(),PDKCountDownService.instance.stop(),PDKRechargeService.instance.stop(),PDKMailService.instance.stop(),pdkServer.close(!1),this.running=!1)},t.prototype.restart=function(t){this._restartFlag=!0,this._restartCallback=t,pdkServer.connected?this.stop():(t(),this._restartFlag=!1,this._restartCallback=null),egret.setTimeout(t.bind(this),this,500)},t.prototype.onAppEnterForeground=function(){pdkServer.frozen=!1,pdkServer.checkEnterForegroundTimeOut()||pdkServer.checkReconnect(),PDKalien.Native.instance.isNative&&(pdkServer.userInfoRequest(pdkServer.uid),PDKBagService.instance.refreshBagInfo(!0))},t.prototype.onAppEnterBackground=function(){pdkServer.frozen=!0},t.prototype.isLoginScene=function(){var t=PDKalien.PDKSceneManager.instance.currentSceneName;return t==PDKSceneNames.LOGIN?!0:!1},t.prototype.showDisconnect=function(t){t.socketClose&&(PDKalien.StageProxy.isPause()||pdkServer.kickOut||this.isLoginScene())||this.showMostTopTip(t)},t.prototype.showMostTopTip=function(t){PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_DISCONNECT,t)},t.prototype.onServerClose=function(t){this.stop()},t.prototype.onClock0=function(t){},t.prototype.refreshSelfInfo=function(){pdkServer.userInfoRequest(pdkServer.uid)},t.prototype.onUserInfoResponse=function(t){var e=t.data;console.log("onUserInfoResponse------pdk------>",e.uid,pdkServer.uid),e.uid==pdkServer.uid&&(this.selfData.initData(e),PDKalien.Dispatcher.dispatch(PDKEventNames.MY_USER_INFO_UPDATE,{userInfoData:this.selfData}),PDKalien.Dispatcher.dispatch(PDKEventNames.GOLD_UPDATE,{gold:this.selfData.gold}),PDKOtherGameManager.instance.onMyInfoUpdate())},t.prototype.updateRecorderExpireTime=function(){var t=new Date;t.setFullYear(this.selfData.cardsRecorder[0],this.selfData.cardsRecorder[1]-1,this.selfData.cardsRecorder[2]),t.setHours(this.selfData.cardsRecorder[3]),t.setMinutes(this.selfData.cardsRecorder[4]),t.setSeconds(this.selfData.cardsRecorder[5]);var e=new Date,n=t.getTime()-e.getTime();this.selfData.cardsRecorder[6]=Math.floor(n/1e3)},t.prototype.alms=function(t){return void 0===t&&(t=0),t=t||this.selfData.gold,t<PDKGameConfig.almsConfig.condition?(pdkServer.alms(),!0):(this._almsCount++,!1)},t.prototype.rechareErrByServerUpdate=function(){if(pdkServer.reqServerUpdateRechareErr(),pdkServer.playing){var t="游戏服务器已更新，请在本局游戏结束后重新登录游戏!";PDKalien.Native.instance.isNative&&(t="游戏服务器已更新，请在本局游戏结束后重新启动游戏!"),PDKAlert.show(t)}else this._onServerHasUpdate()},t.prototype.onAlmsResponse=function(t){var e=t.data;switch(e.result){case 0:0==this._almsCount&&(PDKAlert.show(PDKlang.format(PDKlang.id.alms_success,PDKUtils.currencyRatio(PDKGameConfig.almsConfig.gold),PDKGameConfig.almsConfig.count-e.usagecnt)),this._almsUsageCount=e.usagecnt);break;case 1:break;case 2:}this._almsCount++},t.backToRoomScene=function(e){void 0===e&&(e=null),PDKalien.PDKSceneManager.show(PDKSceneNames.ROOM,{jump2pdk:!0},PDKalien.sceneEffect.Fade,null,null,!1,PDKSceneNames.LOADING),t.instance.alms()},t.getTodayLaunchCount=function(){return PDKGameData.instance.getItem("todayLaunchCount",0)},t.getWeekLaunchCount=function(){return PDKGameData.instance.getItem("weekLaunchCount",0)},t.prototype._getRewSuccTextByCfg=function(t){var e="成功领取";t.sort(function(t,e){return t.id>e.id});for(var n=0;n<t.length;++n)0==t[n].id?e+="首充每日大礼:"+t[n].num+"金豆\n":101==t[n].id?e+="免费表情*"+t[n].num+"次 ":2==t[n].id&&(e+="记牌器*"+t[n].num/24/7+"天 ");return e},t.prototype._onRecvGetFRechargeRewRep=function(t){var e=t.data,n="";if(0==e.result){var i=PDKGameConfig.getFRechargeRewByDay(e.day);if(!i)return void PDKLogUtil.error("_onRecvGetFRechargeRewRep==========error===",e.day,i);n=this._getRewSuccTextByCfg(i),n+="\n\n首充每日大礼剩余"+(7-e.day)+"天",PDKBagService.instance.refreshBagInfo(),this.selfData.setFRechargeTodayHasGet(),PDKPanelFirstRecharge.setDisableGet()}else{var o=(a={},a[1]="没有资格",a[2]="奖励已领取",a[3]="奖励已过期",a);o[e.result]?n=o[e.result]:(n="领取奖励失败",PDKLogUtil.error("_onRecvGetRewRep==========error===",e.result))}PDKAlert.show(n);var a},t.prototype.onGoGetRewardReq=function(){var t=this.selfData,e=t.getFRechargeRewGetDay();e&&e>=1&&7>=e?pdkServer.send(PDKEventNames.USER_GET_FRREWARD_REQ,{day:e}):PDKLogUtil.info("_onGoRecharge------------ERROR-->",e)},t.prototype._onRecvHornRep=function(e){var n=e.data,i=(c={},c[1]="钻石不足",c[2]="内容不能为空",c[3]="参数错误",c),o="";if(null==n.result)for(var a=n.chatinfo,r=t.instance.selfData.nickname,s={time:0,msg:null,nickname:null},h=0;h<a.length;++h)PDKBase64.decode(a[h].nickname)!=r&&(s.time=1e3*a[h].time,s.nickname=a[h].nickname,s.msg=a[h].msg,this.selfData.addHornTalkRec(s));else i[n.result]&&(o=i[n.result],PDKToast.show(o));var c},t.prototype.ifBuyReviveMaxTipShop=function(t,e){PDKPanelReviveBag.getInstance().show(t,e)},t.prototype.noDiamondGetNewDiamondRewOrBuyRevive=function(t,e){this.ifBuyReviveMaxTipShop(t,e)},t.prototype.hideIndexDownAndRefresh=function(){PDKalien.Native.instance.isWXMP&&(window.top.hideDownApp&&window.top.hideDownApp(),window.top.hideRefresh&&window.top.hideRefresh())},t.prototype.loadFntFont=function(){RES.isGroupLoaded("pdkfont")||RES.loadGroup("pdkfont")},t.prototype.loadRecharge=function(){},t.prototype._loadResGroups=function(){this.loadFntFont(),this.loadRecharge()},t.prototype.checkPDKGoldNum=function(e){var n=PDKGameConfig.getRoomConfigById(e.roomid),i=t.instance.selfData.gold;return n.minScore>i?void this.showGoldNotEnough(n.minScore):void(e.isReconnect?PDKSceneManager.show(PDKSceneNames.PLAY,{action:"reconnect",roomID:e.roomid},PDKalien.sceneEffect.Fade):PDKSceneManager.show(PDKSceneNames.PLAY,{action:"quick_join",roomID:e.roomid},PDKalien.sceneEffect.Fade))},t.prototype.showGoldNotEnough=function(t){PDKAlert.show("金豆不足"+t+" 是否前往商城购买 ？",1,function(t){"confirm"==t&&(pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:0}):PDKPanelExchange2.instance.show())})},t.prototype._reconnectRetCheckStatusByData=function(t){PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING);var e=PDKSceneManager.instance.currentSceneName,n=PDKSceneManager.instance.currentScene,i=!1,o=null;if(console.log("_reconnectRetCheckStatusByData----->",t),t.roomid){var a=PDKGameConfig.getRoomConfigById(t.roomid);a&&(o=a.gameType),console.log("_reconnectRetCheckStatusByData",t.roomid,o,t.gametype),"pdk"==o&&(i=!0)}if(t.roomid>999&&t.roomid<1e4&&2==t.gametype)if(this._loadResGroups(),e==PDKSceneNames.PLAY){var r=n;r.doReconnectToGame({personalgame:!0,action:"reconnect",roomID:t.roomid})}else PDKSceneManager.show(PDKSceneNames.PLAY,{personalgame:!0,action:"reconnect",roomID:t.roomid},PDKalien.sceneEffect.Fade);else if(i){if(o!=PDKGameConfig.gameName)return t.action="reconnect",void PDKOtherGameManager.instance.runOtherGameByName(o,t);if(this._loadResGroups(),e==PDKSceneNames.PLAY){var r=n;r.doReconnectToGame({personalgame:!1,action:"reconnect",roomID:t.roomid})}else PDKSceneManager.show(PDKSceneNames.PLAY,{action:"reconnect",roomID:t.roomid},PDKalien.sceneEffect.Fade)}else{if(PDKOtherGameManager.instance.isRunOtherGame())return;if(PDKwebService.loadLog(2,1),e==PDKSceneNames.ROOM){var r=n;r.doReconnectToLobby(t)}else console.log("PDKSceneManager.show(PDKSceneNames.ROOM, { fromLogin: true }, PDKalien.sceneEffect.Fade);==========="),PDKSceneManager.show(PDKSceneNames.ROOM,{jump2pdk:!0},PDKalien.sceneEffect.Fade),this._loadResGroups()}},t.prototype._onCheckReconnectRep=function(t){var e=t.data;this.hideIndexDownAndRefresh(),this.running?this._reconnectRetCheckStatusByData(e):this.start(this._reconnectRetCheckStatusByData.bind(this,e))},t.prototype.doRestartGame=function(){var e=PDKalien.Native.instance;this.stop(),e.isNative?e.checkAppUpdate(function(){t.instance.showLogin()}):window.top.location.reload()},t.prototype._onServerHasUpdate=function(){var t=this;egret.setTimeout(function(){var e=PDKalien.Native.instance,n=t.doRestartGame.bind(t),i="游戏服务器已更新，为了保障您的数据完整性，请重新登录游戏！";e.isNative&&(i="游戏服务器已更新，为了保障您的数据完整性，请重新启动游戏！",n=e.closeApp.bind(e)),PDKPanelAlert3.instance.show(i,0,function(t){"confirm"==t&&n()}.bind(t),!1)},this,100)},t.prototype.closeSelf=function(){var t=PDKalien.Native.instance;t.isNative&&t.closeApp()},t}();__reflect(PDKMainLogic.prototype,"PDKMainLogic");var PDKProtoIDs=function(){function t(){}return t.getMap=function(){var t={};return t[2001]="game.GameStartNtf",t["game.GameStartNtf"]=2001,t[2002]="game.SetSession",t["game.SetSession"]=2002,t[2003]="game.TableInfo",t["game.TableInfo"]=2003,t[2004]="game.EnterTable",t["game.EnterTable"]=2004,t[2005]="game.AskReady",t["game.AskReady"]=2005,t[2006]="game.LeaveTable",t["game.LeaveTable"]=2006,t[2007]="game.GetReadyReq",t["game.GetReadyReq"]=2007,t[2008]="game.GetReadyRep",t["game.GetReadyRep"]=2008,t[2009]="game.AskCashOn",t["game.AskCashOn"]=2009,t[2010]="game.AnswerCashOn",t["game.AnswerCashOn"]=2010,t[2011]="game.UseCardNtf",t["game.UseCardNtf"]=2011,t[2012]="game.AskMaster",t["game.AskMaster"]=2012,t[2013]="game.AnswerMaster",t["game.AnswerMaster"]=2013,t[2014]="game.SetScore",t["game.SetScore"]=2014,t[2015]="game.AskPlayCard",t["game.AskPlayCard"]=2015,t[2016]="game.AddCard",t["game.AddCard"]=2016,t[2017]="game.ShowCard",t["game.ShowCard"]=2017,t[2018]="game.GameEnd",t["game.GameEnd"]=2018,t[2019]="game.TalkNtf",t["game.TalkNtf"]=2019,t[2020]="game.RobotSetInfos",t["game.RobotSetInfos"]=2020,t[2021]="game.SetCards",t["game.SetCards"]=2021,t[2022]="game.ReconnectReq",t["game.ReconnectReq"]=2022,t[2023]="game.ReconnectRep",t["game.ReconnectRep"]=2023,t[2024]="game.GiveUpGameReq",t["game.GiveUpGameReq"]=2024,t[2025]="game.GiveUpGameRep",t["game.GiveUpGameRep"]=2025,t[2026]="game.UserOffline",t["game.UserOffline"]=2026,t[2027]="game.UserOnline",t["game.UserOnline"]=2027,t[2028]="game.GameActionReq",t["game.GameActionReq"]=2028,t[2029]="game.GameActionRep",t["game.GameActionRep"]=2029,t[2030]="game.UpdateMasterInfo",t["game.UpdateMasterInfo"]=2030,t[2031]="game.UpdateBetInfo",t["game.UpdateBetInfo"]=2031,t[2032]="game.GameStatusNtf",t["game.GameStatusNtf"]=2032,t[2033]="game.UpdateGameInfo",t["game.UpdateGameInfo"]=2033,t[2034]="game.OperateReq",t["game.OperateReq"]=2034,t[2035]="game.OperateRep",t["game.OperateRep"]=2035,t[2036]="game.UserInfoInGameReq",t["game.UserInfoInGameReq"]=2036,t[2037]="game.UserInfoInGameRep",t["game.UserInfoInGameRep"]=2037,t[2038]="game.AiInfo",t["game.AiInfo"]=2038,t[2039]="game.ServerInfoNtf",t["game.ServerInfoNtf"]=2039,t[2040]="game.SidePotInfo",t["game.SidePotInfo"]=2040,t[2041]="game.OperateRepEX",t["game.OperateRepEX"]=2041,t[2042]="game.ReplenishFreezeGoldReq",t["game.ReplenishFreezeGoldReq"]=2042,t[2043]="game.ReplenishFreezeGoldRep",t["game.ReplenishFreezeGoldRep"]=2043,t[1001]="user.UserInfoRequest",t["user.UserInfoRequest"]=1001,t[1002]="user.UserInfoResonpse",t["user.UserInfoResonpse"]=1002,t[1003]="user.ModifyUserInfoReq",t["user.ModifyUserInfoReq"]=1003,t[1004]="user.ModifyUserInfoRep",t["user.ModifyUserInfoRep"]=1004,t[1005]="user.CheckReconnectReq",t["user.CheckReconnectReq"]=1005,t[1006]="user.CheckReconnectRep",t["user.CheckReconnectRep"]=1006,t[1007]="user.ReconnectTableReq",t["user.ReconnectTableReq"]=1007,t[1008]="user.ReconnectTableRep",t["user.ReconnectTableRep"]=1008,t[1009]="user.QuickJoinRequest",t["user.QuickJoinRequest"]=1009,t[1010]="user.QuickJoinResonpse",t["user.QuickJoinResonpse"]=1010,t[1011]="user.PlayersAmountReq",t["user.PlayersAmountReq"]=1011,t[1012]="user.PlayersAmountRep",t["user.PlayersAmountRep"]=1012,t[1013]="user.MatchOperateReq",t["user.MatchOperateReq"]=1013,t[1014]="user.MatchOperateRep",t["user.MatchOperateRep"]=1014,t[1021]="user.MatchSignupReq",t["user.MatchSignupReq"]=1021,t[1022]="user.MatchSignupRep",t["user.MatchSignupRep"]=1022,t[1023]="user.MatchStartNtf",t["user.MatchStartNtf"]=1023,t[1024]="user.EnterMatchReq",t["user.EnterMatchReq"]=1024,t[1025]="user.EnterMatchRep",t["user.EnterMatchRep"]=1025,t[1026]="user.MatchInfoNtf",t["user.MatchInfoNtf"]=1026,t[1027]="user.QueryFreezeGoldReq",t["user.QueryFreezeGoldReq"]=1027,t[1028]="user.QueryFreezeGoldRep",t["user.QueryFreezeGoldRep"]=1028,t[1038]="user.DaySigninOptReq",t["user.DaySigninOptReq"]=1038,t[1039]="user.DaySigninOptRep",t["user.DaySigninOptRep"]=1039,t[1040]="user.MatchSignupInfoReq",t["user.MatchSignupInfoReq"]=1040,t[1041]="user.MatchSignupInfoRep",t["user.MatchSignupInfoRep"]=1041,t[1042]="user.NotifyKickout",t["user.NotifyKickout"]=1042,t[1046]="user.BagInfoReq",t["user.BagInfoReq"]=1046,t[1047]="user.BagInfoRep",t["user.BagInfoRep"]=1047,t[1048]="user.GiveupMatchReq",t["user.GiveupMatchReq"]=1048,t[1049]="user.GiveupMatchRep",t["user.GiveupMatchRep"]=1049,t[1050]="user.AlmsReq",t["user.AlmsReq"]=1050,t[1051]="user.AlmsRep",t["user.AlmsRep"]=1051,t[1052]="user.RechargeResultNotify",t["user.RechargeResultNotify"]=1052,t[1055]="user.Pay2chatReq",t["user.Pay2chatReq"]=1055,t[1056]="user.Pay2chatRep",t["user.Pay2chatRep"]=1056,t[1061]="user.MailReq",t["user.MailReq"]=1061,t[1062]="user.MailDetail",t["user.MailDetail"]=1062,t[1063]="user.MailListRep",t["user.MailListRep"]=1063,t[1064]="user.MailModifyRep",t["user.MailModifyRep"]=1064,t[1065]="user.MailGetRewardRep",t["user.MailGetRewardRep"]=1065,t[1066]="user.MailUnreadRep",t["user.MailUnreadRep"]=1066,t[1073]="user.CreatePersonalGameReq",t["user.CreatePersonalGameReq"]=1073,t[1074]="user.CreatePersonalGameRep",t["user.CreatePersonalGameRep"]=1074,t[1075]="user.JoinPGameReq",t["user.JoinPGameReq"]=1075,t[1076]="user.JoinPGameRep",t["user.JoinPGameRep"]=1076,t[1077]="user.StartPGameReq",t["user.StartPGameReq"]=1077,t[1078]="user.StartPGameRep",t["user.StartPGameRep"]=1078,t[1079]="user.QueryRoomInfoReq",t["user.QueryRoomInfoReq"]=1079,t[1080]="user.QueryRoomInfoRep",t["user.QueryRoomInfoRep"]=1080,t[1081]="user.QuitPGameReq",t["user.QuitPGameReq"]=1081,t[1082]="user.QuitRoomRep",t["user.QuitRoomRep"]=1082,t[1083]="user.GameDissolve",t["user.GameDissolve"]=1083,t[1084]="user.ReconnectPGameReq",t["user.ReconnectPGameReq"]=1084,t[1085]="user.ReconnectPGameRep",t["user.ReconnectPGameRep"]=1085,t[1090]="user.RedcoinExchangeGoodsReq",t["user.RedcoinExchangeGoodsReq"]=1090,t[1091]="user.RedcoinExchangeGoodsRep",t["user.RedcoinExchangeGoodsRep"]=1091,t[1092]="user.LotteryRedcoinReq",t["user.LotteryRedcoinReq"]=1092,t[1093]="user.LotteryRedcoinRep",t["user.LotteryRedcoinRep"]=1093,t[1094]="user.RedcoinRankingListReq",t["user.RedcoinRankingListReq"]=1094,t[1095]="user.RedcoinRankingListRep",t["user.RedcoinRankingListRep"]=1095,t[1096]="user.FreshManRedcoinLotteryChanceGot",t["user.FreshManRedcoinLotteryChanceGot"]=1096,t[1099]="user.DissolveGameReq",t["user.DissolveGameReq"]=1099,t[1100]="user.DissolveGameRep",t["user.DissolveGameRep"]=1100,t[1101]="user.QueryRoomPlayingReq",t["user.QueryRoomPlayingReq"]=1101,t[1102]="user.QueryRoomPlayingRep",t["user.QueryRoomPlayingRep"]=1102,t[1107]="user.GetFreshManRewardReq",t["user.GetFreshManRewardReq"]=1107,t[1108]="user.GetFreshManRewardRep",t["user.GetFreshManRewardRep"]=1108,t[1109]="user.GetCardsRecorderRewardReq",t["user.GetCardsRecorderRewardReq"]=1109,t[1110]="user.GetDayTaskRewardReq",t["user.GetDayTaskRewardReq"]=1110,t[1111]="user.GetDayTaskRewardRep",t["user.GetDayTaskRewardRep"]=1111,t[1112]="user.GetFirstRechargeRewardReq",t["user.GetFirstRechargeRewardReq"]=1112,t[1113]="user.GetFirstRechargeRewardRep",t["user.GetFirstRechargeRewardRep"]=1113,t[1114]="user.GetRewardReq",t["user.GetRewardReq"]=1114,t[1115]="user.GetRewardRep",t["user.GetRewardRep"]=1115,t[1116]="user.GetActivityInfoReq",t["user.GetActivityInfoReq"]=1116,t[1117]="user.GetActivityInfoRep",t["user.GetActivityInfoRep"]=1117,t[1118]="user.OperateReq",t["user.OperateReq"]=1118,t[1119]="user.OperateRep",t["user.OperateRep"]=1119,t[1120]="user.DiamondGameReq",t["user.DiamondGameReq"]=1120,t[1121]="user.DiamondGameRep",t["user.DiamondGameRep"]=1121,t[1122]="user.QuitWaitingQueueReq",t["user.QuitWaitingQueueReq"]=1122,t[2101]="game.CTSGPdkReady",t["game.CTSGPdkReady"]=2101,t[2102]="game.STCGPdkReady",t["game.STCGPdkReady"]=2102,t[2103]="game.STCGPdkGiveCards",t["game.STCGPdkGiveCards"]=2103,t[2104]="game.CTSGPdkOutCard",t["game.CTSGPdkOutCard"]=2104,t[2105]="game.STCGPdkOutCard",t["game.STCGPdkOutCard"]=2105,t[2106]="game.STCGPdkEnd",t["game.STCGPdkEnd"]=2106,t[2107]="game.CTSPdkCardHolder",t["game.CTSPdkCardHolder"]=2107,t[2108]="game.STCPdkCardHolder",t["game.STCPdkCardHolder"]=2108,t[2109]="game.STCPdkReconnect",t["game.STCPdkReconnect"]=2109,t
},t}();__reflect(PDKProtoIDs.prototype,"PDKProtoIDs");var PDKReportor=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.start=function(){window.onerror=this.onWindowError},t.prototype.stop=function(){window.onerror=null},t.prototype.onWindowError=function(t,e,n,i,o){var a=!0;if(t.indexOf("gif")>=0)return a;var r=egret.Capabilities.os,s={PF:PDKalien.Native.instance.platformId,OS:r,PID:1,MSG:e+"["+n+","+i+"]\n"+t};return o&&(s.MSG+=" stack:"+o.stack),PDKGameConfig.gameId&&(s.RID=PDKGameConfig.gameId),PDKwebService.postError(PDKErrorConfig.REPORT_ERROR,JSON.stringify(s)),a},t.prototype.reportCodeError=function(t){var e=egret.Capabilities.os,n={PF:PDKalien.Native.instance.platformId,OS:e,PID:1,MSG:"pdk------->"+t};PDKGameConfig.gameId&&(n.RID=PDKGameConfig.gameId),PDKwebService.postError(PDKErrorConfig.REPORT_ERROR,JSON.stringify(n))},t.prototype.toReportPage=function(){var t=PDKGameConfig.reportUrl;t=t+"?uid="+pdkServer.uid,_pdk_nativeBridge.isNative?(t=t+"&app="+egret.Capabilities.os,_pdk_nativeBridge.openUrlBySys(t)):window.top.location.href=t},t}();__reflect(PDKReportor.prototype,"PDKReportor");var PDKversion="1808141525";PDKalien.Native.instance.isNative&&(PDKversion+="iOS"==egret.Capabilities.os?"i":"Android"==egret.Capabilities.os?"a":"n");var PDKalien;!function(t){var e;!function(e){var n=function(){function t(){}return t.prototype.handover=function(t,e,n,i,o){void 0===o&&(o=null),t&&(t.visible=!1,n.removeChild(t)),e.visible=!0,e.alpha=1,n.addChild(e),o&&o()},t}();e.None=n,__reflect(n.prototype,"PDKalien.sceneEffect.None",["PDKalien.sceneEffect.ISceneEffect"]);var i=function(){function t(){}return t.prototype.handover=function(t,e,n,i,o){void 0===o&&(o=null),egret.Tween.get(t).to({alpha:0},500),e.alpha=0,e.visible=!0,n.addChild(e),egret.Tween.get(e).to({alpha:1},500).call(function(){n.removeChild(t),o&&o()})},t}();e.Fade=i,__reflect(i.prototype,"PDKalien.sceneEffect.Fade",["PDKalien.sceneEffect.ISceneEffect"]);var o=function(){function t(){}return t.prototype.handover=function(t,e,n,i,o){function a(){egret.Tween.get(e).to({alpha:1},500).call(function(){o&&o()},this)}void 0===o&&(o=null),e.alpha=0,e.visible=!0,n.addChild(e),t?egret.Tween.get(t).to({alpha:0},500).call(function(){n.removeChild(t),a()},this):a()},t}();e.FadeBlack=o,__reflect(o.prototype,"PDKalien.sceneEffect.FadeBlack",["PDKalien.sceneEffect.ISceneEffect"]);var a=function(){function e(){}return e.prototype.handover=function(n,i,o,a,r){void 0===r&&(r=null);var s=a.duration||500,h=[[0/0,-t.StageProxy.height],[t.StageProxy.width,0/0],[0/0,t.StageProxy.height],[-t.StageProxy.width,0/0]],c=h[e.transDirection(a.direction)],l={x:isNaN(c[0])?n.x:c[0],y:0==c[1]?n.y:c[1]};egret.Tween.get(n).to(l,s,egret.Ease.cubicOut),h=[[0/0,t.StageProxy.height],[-t.StageProxy.width,0/0],[0/0,-t.StageProxy.height],[t.StageProxy.width,0/0]],c=h[e.transDirection(a.direction)],l={x:0,y:0},i.x=c[0],i.y=c[1],i.alpha=1,i.visible=!0,o.addChild(i),egret.Tween.get(i).to(l,s,egret.Ease.cubicOut).call(function(){o.removeChild(n),r&&r()})},e.transDirection=function(t){var e;switch(t){case"up":e=0;break;case"right":e=1;break;case"bottom":e=2;break;case"left":e=3}return e},e}();e.Flew=a,__reflect(a.prototype,"PDKalien.sceneEffect.Flew",["PDKalien.sceneEffect.ISceneEffect"]);var r=function(){function e(){}return e.prototype.handover=function(e,n,i,o,a){e.cacheAsBitmap=n.cacheAsBitmap=!0,n.alpha=1,n.visible=!0,i.addChild(n);var r=t.StageProxy;o=o||{};var s=this._pos=o.pos||{x:r.width/2,y:r.height/2},h=n.mask=this._mask=new egret.Shape;h.x=s.x,h.y=s.y,t.StageProxy.root.addChild(h);var c=s.x/r.width<.5?r.width-s.x:s.x,l=s.y/r.height<.5?r.height-s.y:s.y,p=Math.sqrt(c*c+l*l)+20;this.r=0,egret.Tween.get(this).to({r:p},o.duration||1e3,egret.Ease.quartOut).call(function(){e.cacheAsBitmap=n.cacheAsBitmap=!1,i.removeChild(e),n.mask=null,t.StageProxy.root.removeChild(h),a&&a()})},Object.defineProperty(e.prototype,"r",{get:function(){return this._r},set:function(t){this._r=t;var e=this._mask.graphics;e.beginFill(16711680,.5),e.drawCircle(0,0,this._r),e.endFill()},enumerable:!0,configurable:!0}),e}();e.Material=r,__reflect(r.prototype,"PDKalien.sceneEffect.Material",["PDKalien.sceneEffect.ISceneEffect"])}(e=t.sceneEffect||(t.sceneEffect={}))}(PDKalien||(PDKalien={}));var PDKalien;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._autoPlay=!0,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},Object.defineProperty(e.prototype,"resName",{get:function(){return this._resName},set:function(t){this._resName!=t&&this.setResName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aniName",{get:function(){return this._aniName},set:function(t){this._aniName!=t&&this.setAniName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPlay",{get:function(){return this._autoPlay},set:function(t){this._autoPlay=t},enumerable:!0,configurable:!0}),e.prototype.setResName=function(t){this._resName=t,this._resName?this._mcDataFactory=new egret.MovieClipDataFactory(RES.getRes(this._resName+"_json"),RES.getRes(this._resName+"_png")):this._mcDataFactory&&(this._mcDataFactory.clearCache(),this._mcDataFactory=null),this.setAniName(this._aniName)},e.prototype.setAniName=function(t){this._aniName=t,this._aniName&&this._mcDataFactory&&(this.movieClip=new egret.MovieClip(this._mcDataFactory.generateMovieClipData(this._aniName)),this.removeChildren(),this.addChild(this.movieClip),this._autoPlay&&this.movieClip.play())},e}(eui.Group);t.MovieClip=e,__reflect(e.prototype,"PDKalien.MovieClip")}(PDKalien||(PDKalien={}));var PDKUtils=function(){function t(){}return t.pid2poker=function(t){var e=Math.floor(t/10);11>=e?e+=2:e=this.mapping[e-12];var n,i=t%10;return n=14==e?"black":15==e?"red":t%2==0?"red":"black",{num:e,sign:i,signColor:n}},t.transformCards=function(t){for(var e=0,n=t.length;n>e;e++)t[e]>=30?t[e]-=20:t[e]+=110;return t},t.unTransformCards=function(t){if(0==t.length)return[];for(var e=0,n=t.length;n>e;e++)t[e]<120?t[e]+=20:t[e]-=110;return t},t.recycleCards=function(t,e){void 0===e&&(e=null);var n;if(e)for(var i=0,o=t.numChildren;o>i;i++)n=t.getChildAt(i),e(n);else for(;t.numChildren>0;)n=t.removeChildAt(0),PDKCard.recycle(n)},t.order=function(t){t.sort(function(t,e){return e-t})},t.currencyRatio=function(t,e){if(void 0===e&&(e=!1),null===t)return"";var n="string"==typeof t?parseInt(t):t;n/=PDKGameConfig.currencyRatio;var i=n.toString(),o=i.indexOf(".");return e&&(0>o?i+=".00":i.length-i.indexOf(".")==2&&(i+="0")),i},t.exchangeRatio=function(t,e){if(void 0===e&&(e=!1),null===t)return"";var n="string"==typeof t?parseInt(t):t;n/=PDKGameConfig.exchangeRatio;var i=n.toString(),o=i.indexOf(".");return e&&(0>o?i+=".00":i.length-i.indexOf(".")==2&&(i+="0")),i},t.roomScoreFormat=function(t){var e=Number(t);if(e>9999){e=Math.floor(e/1e4);var n=Math.floor((t-1e4*e)/1e3);return n>0?e+"万"+n:e+"万"}return e.toString()},t.countDown=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=1e3);var o=t,a=Math.floor(t/i);return PDKalien.repeat(function(){o-=i,e(o/i)},i,a,n,!0)},t.goodsListToString=function(t,e){void 0===e&&(e=0);for(var n=[],i=0==e?t.length:Math.min(t.length,e),o=0;i>o;o++){var a=t[o];n.push(PDKGoodsManager.instance.getGoodsById(a.id).name+"x"+a.count)}return n.join(" ")},t.parseGoodsString=function(t){var e=[];if(t){var n=t.split("|");n.forEach(function(t){var n=t.split(":"),i=parseInt(n[0]),o=parseInt(n[1]);1==i&&(o/=100),e.push({id:i,count:o})})}return e},t.regNickname=function(t){return!t.match(/^[0-9a-zA-Z\u4e00-\u9fa5_]*$/)},t.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.getTimeStampDiff=function(t,e,n){var i=t,o=e;n=n.toLowerCase();var a=new Date(i),r=new Date(o),s=1;switch(n){case"second":s=1e3;break;case"minute":s=6e4;break;case"hour":s=36e5;break;case"day":s=864e5}return(r.getTime()-a.getTime())/s},t.isInTimeSection=function(t,e,n){var i=new Date(Date.parse(t.replace(/-/g,"/"))).getTime(),o=new Date(Date.parse(e.replace(/-/g,"/"))).getTime();return n>=i&&o>=n?!0:!1},t.isTwoStampSameDay=function(t,e){var n=new Date(t),i=new Date(e);return n.getFullYear()==i.getFullYear()&&n.getMonth()==i.getMonth()&&n.getDay()==i.getDay()?!0:!1},t.setSensitiveWord=function(e){t._sensitive=e},t.getSensitiveWord=function(){return t._sensitive},t.sortCardIds=function(t){if(!(null==t||t.length<1)){var e,n,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;++e){var o=Math.floor(t[e]/10);i[o]++}var a=[],r=[],s=[],h=[],c=[];for(e=0;e<i.length;++e)1==i[e]?a.push(e):2==i[e]?r.push(e):3==i[e]?(s.push(e),h.push(e)):4==i[e]&&(c.push(e),h.push(e));if(1==s.length&&1==r.length&&5==t.length&&console.log("PDKSANDAIER--对------>",s,r),1==s.length&&5==t.length&&console.log("PDKSANDAIER--散------>",s,a),1==c.length&&6==t.length&&console.log("PDKSIDAIER-------->",c,a,r,s),h.length>1){var l=PDKCardsType.is_shun(h,!1);l.result&&t.length==4*h.length&&console.log("PDKFEIJI--单------>",s,a,r);var l=PDKCardsType.is_shun(h);if(l.result&&t.length==5*h.length&&console.log("PDKFEIJI--二------>",s,a,r),t.length==5*h.length){var l=PDKCardsType.is_shun(h);l.result&&console.log("PDKFEIJI--多1------>",s,a,r)}else{var p=t.length/5;if(p>1&&p%1==0&&p!=h.length)for(n=0;n<h.length-p+1;n++){for(var d=[],u=0;p>u;u++)d.push(h[u+n]);var l=PDKCardsType.is_shun(d);l.result&&console.log("PDKFEIJI--多2------>",s,a,r)}}}if(s.length>1){var l=PDKCardsType.is_shun(s);l.result&&t.length==5*s.length&&console.log("PDKFEIJI--多3------>",s,a,r)}var _=[],g=!1;for(e=c.length-1;e>=0;e--)for(n=0;n<t.length;n++){var o=Math.floor(t[n]/10);c[e]==o&&(_.push(t[n]),g=!0)}for(e=s.length-1;e>=0;e--)for(n=0;n<t.length;n++){var o=Math.floor(t[n]/10);s[e]==o&&(_.push(t[n]),g=!0)}for(e=r.length-1;e>=0;e--)for(n=0;n<t.length;n++){var o=Math.floor(t[n]/10);r[e]==o&&_.push(t[n])}for(e=a.length-1;e>=0;e--)for(n=0;n<t.length;n++){var o=Math.floor(t[n]/10);a[e]==o&&_.push(t[n])}return 0==g&&(_=t,_.sort(function(t,e){return e-t})),_}},t.mapping=[1,2,14,15],t}();__reflect(PDKUtils.prototype,"PDKUtils");var PDKCardsHint=function(){function t(){}return t.getCardLogicValue=function(t){return Math.floor(t/10)},t.getCardsHash=function(e){for(var n,i={},o=0;o<e.length;++o)n=t.getCardLogicValue(e[o]),i[n]?i[n].push(e[o]):i[n]=[e[o]];return i},t.getMinSingle=function(t,e,n){t.sort(function(t,e){return t-e});for(var i,o=[],a=0;a<t.length;++a){i=!0;for(var r=0;r<n.length;++r)if(n[r]==t[a]){i=!1;break}if(i&&o.length<e&&(o.push(t[a]),o.length>=e))return o}},t.getMinDouble=function(t,e,n){var i,o=this.getCardsHash(t),a=[];for(var r in o)if(!(o[r].length<2)){i=!0;for(var s=0;s<o[r].length;++s){for(var h=0;h<n.length;++h)if(n[h]==o[r][s]){i=!1;break}if(!i)break}if(i&&a.length<e&&(a=a.concat(o[r]),a.length>=e))return a}},t.getAllFourCard=function(t,e){void 0===e&&(e=0);var n,i=this.getCardsHash(t);for(var o in i)if(4==i[o].length){if(7>e){var a=this.getMinSingle(t,3,i[o]);if(a&&3==a.length){var r=i[o].concat(a);n={node:PDKCardsType.GetType(r),cards:r},e=r.length}}if(6>e){var a=this.getMinSingle(t,2,i[o]);if(a&&2==a.length){var r=i[o].concat(a);n={node:PDKCardsType.GetType(r),cards:r},e=r.length}}4>e&&(n={node:PDKCardsType.GetType(i[o]),cards:i[o]},e=4)}return n},t.getAllLineCard=function(t,e){if(void 0===e&&(e=0),!(t.length<5)){for(var n,i,o=this.getCardsHash(t),a=1;9>a;++a)if(o[a]){i=[o[a][0]];for(var r=a+1;13>r;++r){if(!o[r]){i.length>4&&i.length>e&&(n={node:PDKCardsType.GetType(i),cards:i},e=i.length);break}i.push(o[r][0]),12==r&&i.length>4&&i.length>e&&(n={node:PDKCardsType.GetType(i),cards:i},e=i.length)}}return n}},t.getAllDoubleLineCard=function(t,e){if(void 0===e&&(e=0),!(t.length<6)){for(var n,i,o=this.getCardsHash(t),a=1;11>a;++a)if(o[a]&&!(o[a].length<2)){i=[o[a][0],o[a][1]];for(var r=a+1;13>r;++r){if(!(o[r]&&o[r].length>1)){i.length>5&&i.length>e&&(n={node:PDKCardsType.GetType(i),cards:i},e=i.length);break}i.push(o[r][0]),i.push(o[r][1]),12==r&&i.length>5&&i.length>e&&(n={node:PDKCardsType.GetType(i),cards:i},e=i.length)}}return n}},t.getAllCardsPossible=function(e){for(var n,i={},o={},a=0;a<e.length;++a)n=t.getCardLogicValue(e[a]),i[n]?i[n]=i[n]+1:i[n]=1;for(var r in i)o[i[r]]=(o[i[r]]||0)+1;var s,h=0;if(o[3]>0||o[4]>0){var c=this.getAllPlaneCard(e,e.length>4?4:h);if(c&&(s=c,h=c.cards.length),o[4]>0){var l=this.getAllFourCard(e,h);l&&(s=l,h=l.cards.length)}}var p=this.getAllLineCard(e,h);p&&(s=p,h=p.cards.length);var d=this.getAllDoubleLineCard(e,h);return d&&(s=d,h=d.cards.length),s},t.getAllPlaneCard=function(t,e){if(void 0===e&&(e=0),!(t.length<3)){var n,i,o,a,r=this.getCardsHash(t);for(var s in r)if(o=parseInt(s),i=r[s],i.length>=3){n=[i[0],i[1],i[2]];for(var h=o+1;12>h&&(r[h]&&r[h].length>=3);++h){for(var c=0;3>c;++c)n.push(r[h][c]);if(n.length>=6){if(e<n.length+n.length/3*2){var l=this.getMinDouble(t,n.length/3*2,n);if(l&&l.length==n.length/3*2){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}if(e<n.length+n.length/3*2){var l=this.getMinSingle(t,n.length/3*2,n);if(l&&l.length==n.length/3*2){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}if(e<n.length+n.length/3){var l=this.getMinSingle(t,n.length/3,n);if(l&&l.length==n.length/3){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}e<n.length&&(a={node:PDKCardsType.GetType(n),cards:n},e=n.length)}}if(e<n.length+n.length/3*2){var l=this.getMinDouble(t,n.length/3*2,n);if(l&&l.length==n.length/3*2){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}if(e<n.length+n.length/3*2){var l=this.getMinSingle(t,n.length/3*2,n);if(l&&l.length==n.length/3*2){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}if(e<n.length+n.length/3){var l=this.getMinSingle(t,n.length/3,n);if(l&&l.length==n.length/3){var p=n.concat(l);a={node:PDKCardsType.GetType(p),cards:p},e=p.length}}e<n.length&&(a={node:PDKCardsType.GetType(n),cards:n},e=n.length)}return a}},t.getMaxAmountCards=function(e){if(e&&!(e.length<1)){var n=PDKCardsType.GetType(e);return n.ct>0?e:(n=t.getAllCardsPossible(e),n?n.cards:e)}},t.getFitCards=function(t,e,n){if(void 0===n&&(n=[]),!(!t||t.length<1||e>=t.length||t.length<n.length)){var i={ct:0,kv:0};if(!(n.length>0)||(i=PDKCardsType.GetType(n),i&&i.ct)){var o=(this.getCardsHash(t),PDKCardsType.GetType(t));if(n.length>0&&2!=i.ct&&4!=i.ct&&5!=i.ct&&6!=i.ct||i.kv>o.kv)return 2==o.ct||1==o.ct?t:void 0;if(!(1==i.ct||2==i.ct&&o.kv<=i.kv||o.kv<=i.kv&&2!=o.ct&&1!=o.ct)){var a=[];if(0==n.length)for(var r=0;e>=r;++r)a.push(t[r]);else if(e+1>n.length&&(2==o.ct||1==o.ct))a=t;else for(var r=0;r<n.length;++r)a.push(t[r]);return a}}}},t.getHumanVisible=function(t){var e=this.getCardLogicValue(t);e+=2;var n;t%10==0?n="♥":t%10==1?n="♠":t%10==2?n="♣":t%10==3&&(n="♦");var i="";return 11>e?i=e+n:11==e?i="J"+n:12==e?i="Q"+n:13==e?i="K"+n:14==e?i="A"+n:15==e?i="2"+n:16==e?i="JokerS":17==e&&(i="JokerB"),i},t.printCards=function(t,e){if(void 0===e&&(e=""),t){for(var n="",i=0;i<t.length;++i)n=n+this.getHumanVisible(t[i])+" ";console.log(e),console.log(n)}},t}();__reflect(PDKCardsHint.prototype,"PDKCardsHint");var PDKBUYAO=0,PDKSHUANGWANG=1,PDKZHADAN=2,PDKDAN=4,PDKDUIZI=5,PDKSANZHANG=6,PDKSANDAIYI=7,PDKSANDAIYIDUI=13,PDKSIDAIER=8,PDKSIDAIERDUI=14,PDKFEIJI=9,PDKDANSHUN=10,PDKSHUANGSHUN=11,PDKSANSHUN=12,PDKSANDAIER=15,PDKSANTIAOA=16,PDKSIDAISAN=17,PDKCardsType=function(){function t(){}return t.CheckType=function(t,e,n){void 0===n&&(n=[]);var i=this.GetType(t);if(console.log("CheckType-----111------->",t,i),i.ct==PDKSHUANGWANG)return!0;if(i.ct==PDKSANTIAOA)return!0;if(null==e||e.length<1)return 0!=i.ct;var o=this.GetType(e);if(console.log("CheckType-------222----->",e,o),console.log("CheckType-------333----->",i,o),i.ct==o.ct){if(t.length==e.length)return i.kv>o.kv}else if(o.ct!=PDKSHUANGWANG&&o.ct!=PDKZHADAN&&i.ct==PDKZHADAN)return!0;return!1},t.GetCards2=function(t,e){var n=[],i=[],o=[],a=[],r=this.GetType(t,n,i,o,a),s=r.ct,h=s;if(0==s)return null;var c=[s,n,i,o],l=this.m_getCards(t,s,n,i,o,a,e,h);console.log("GetCards2-----------11--->",r,t,e),console.log("GetCards2-----------22--->",l);for(var p,d=[],u=[],_=[];null!=l&&l.hasOwnProperty("chai")&&l.hasOwnProperty("cards")&&l.hasOwnProperty("nums");){p=l.cards;var g=this.GetType(p),f=!0;g.ct==r.ct&&p.length==t.length&&g.kv<=r.kv&&(f=!1),f&&(0==l.chai?d.push(p):u.push(p)),_.push(l.nums),n=[],i=[],o=[],a=[];var m=this.GetType(p,n,i,o,a);s=m.ct,l=this.m_getCards(p,s,n,i,o,a,e,h),console.log("GetCards2----------33--->",l)}var v=d.concat(u);return v.length>0?(c.push(v),c.push(_),c):null},t.m_getCards=function(t,e,n,i,o,a,r,s){if(null==r||r.length<1)return null;if(e==PDKSHUANGWANG||0==e)return null;if(e==PDKSANTIAOA||0==e)return null;var h,c,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(h=0;h<r.length;++h){var p=Math.floor(r[h]/10);l[p]++}var d=[],u=[],_=[],g=[];for(h=0;h<l.length;++h)1==l[h]?d.push(h):2==l[h]?u.push(h):3==l[h]?_.push(h):4==l[h]&&g.push(h);if(e==PDKSANDAIER&&4==r.length&&g.length<1)return null;if(e==PDKDAN)for(h=n[0]+1;h<l.length;++h){if(1==l[h])return(14==h||15==h)&&l[14]>0&&l[15]>0?{chai:!0,cards:this.GetCardsByNum([h],r),nums:[h]}:{chai:!1,cards:this.GetCardsByNum([h],r),nums:[h]};if(l[h]>1)return{chai:!0,cards:this.GetCardsByNum([h],r),nums:[h]}}if(e==PDKDUIZI)for(h=i[0]+1;h<l.length;++h){if(2==l[h])return{chai:!1,cards:this.GetCardsByNum([h,h],r),nums:[h,h]};if(l[h]>2)return{chai:!0,cards:this.GetCardsByNum([h,h],r),nums:[h,h]}}if(e==PDKSANZHANG)for(h=o[0]+1;h<l.length;++h){if(3==l[h])return{chai:!1,cards:this.GetCardsByNum([h,h,h],r),nums:[h,h,h]};if(l[h]>3)return{chai:!0,cards:this.GetCardsByNum([h,h,h],r),nums:[h,h,h]}}var f;if(e==PDKSANDAIYI)for(h=o[0]+1;h<l.length;++h)if(l[h]>2){if(f=[h,h,h],d.length>0)f.push(d[0]);else for(c=1;c<l.length;++c)if(l[c]>0&&c!=h){f.push(c);break}if(4==f.length)return 3==l[h]?{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}:{chai:!0,cards:this.GetCardsByNum(f,r),nums:f};break}if(e==PDKSANDAIER){for(h=o[0]+1;h<l.length;++h)if(3==l[h]){if(f=[h,h,h],d.length>1)f.push(d[0],d[1]);else if(d.length>0){if(u.length>0)f.push(d[0],u[0]);else if(_.length>1){for(c=0;c<_.length;++c)if(_[c]!=h){f.push(d[0],_[c]);break}}else if(g.length>0)for(c=0;c<g.length;++c)if(g[c]!=h){f.push(d[0],g[c]);break}}else{var m=!1;for(c=1;c<l.length;++c)if(2==l[c]&&c!=h){f.push(c,c),m=!0;break}if(!m)for(c=1;c<l.length;++c)if(3==l[c]&&c!=h){f.push(c,c),m=!0;break}if(!m)for(c=1;c<l.length;++c)if(4==l[c]&&c!=h){f.push(c,c);break}}if(5==f.length){var v=!1;for(c=0;c<f.length;c++)f[c]||(v=!0);if(1==v)break;if(12==h)break;return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}break}for(h=o[0]+1;h<l.length;++h)if(4==l[h]){if(f=[h,h,h],d.length>1)f.push(d[0],d[1]);else if(d.length>0)f.push(d[0],u[0]);else{var m=!1;for(c=1;c<l.length;++c)if(2==l[c]&&c!=h){f.push(c,c),m=!0;break}if(!m)for(c=1;c<l.length;++c)if(3==l[c]&&c!=h){f.push(c,c),m=!0;break}if(!m)for(c=1;c<l.length;++c)if(4==l[c]&&c!=h){f.push(c,c);break}}if(5==f.length&&4==l[h])for(c=0;c<l.length;++c)if(4==l[c])return f=[c,c,c,c],{chai:!1,cards:this.GetCardsByNum(f,r),nums:f};break}}if(e==PDKSIDAIER&&g.length>0)for(h=0;h<g.length;++h)if(g[h]>a[0]){for(f=[g[h],g[h],g[h],g[h]],c=0;c<d.length&&f.length<6;++c)f.push(d[c]);if(f.length<6)for(c=1;c<l.length&&f.length<6;++c)l[c]>0&&f.indexOf(c)<0&&f.push(c);if(6==f.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f};break}if(e==PDKSIDAISAN&&g.length>0)for(h=0;h<g.length;++h)if(g[h]>a[0]){for(f=[g[h],g[h],g[h],g[h]],c=0;c<d.length&&f.length<7;++c)f.push(d[c]);if(f.length<7)for(c=1;c<l.length&&f.length<7;++c)l[c]>0&&f.indexOf(c)<0&&f.push(c);if(7==f.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f};break}if(e==PDKSIDAIERDUI&&g.length>0)for(h=0;h<g.length;++h)if(g[h]>a[0]){for(f=[g[h],g[h],g[h],g[h]],c=0;c<u.length&&f.length<8;++c)f.push(u[c],u[c]);if(f.length<8)for(c=1;c<l.length&&f.length<8;++c)l[c]>1&&f.indexOf(c)<0&&f.push(c,c);if(8==f.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f};break}var D,y;if(e==PDKFEIJI)if(D=o.length,D>=2){8==t.length||10==t.length?D=2:15==t.length||12==t.length?D=3:16==t.length&&(D=4);var P=this.GetType(t);console.log("cnmde feiji-------->",t,P);var S=o[0]+1;for(P&&0!=P.kv&&(S=P.kv+1),2==D&&(S=P.kv),h=S;h<l.length-D+1;++h){for(y=!0,f=[],c=0;D>c;++c)if(f.push(h+c,h+c,h+c),l[h+c]<3||h+c==13||h+c==14||h+c==15){y=!1;break}if(y){if(n.length>0){for(c=0;c<d.length&&f.length<t.length;++c)f.push(d[c]);if(f.length<t.length)for(c=1;c<l.length&&f.length<t.length;++c)if(l[c]>0&&f.indexOf(c)<0)for(var b=0;b<l[c]&&f.length<t.length;++b)f.push(c);if(f.length==t.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}else if(i.length>0){for(c=0;c<u.length&&f.length<t.length;++c)f.push(u[c],u[c]);if(f.length<t.length)for(c=1;c<l.length&&f.length<t.length;++c)if(l[c]>0&&f.indexOf(c)<0)for(var b=0;b<l[c]&&f.length<t.length;++b)f.push(c);if(f.length==t.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}break}}}else{var E=o.length+a.length,R=t.length/5;if(R%1==0&&E>=R){for(var C=n,K=o,k=0;k<R-o.length;k++)(1==Math.abs(K[0]-a[k])||1==Math.abs(K[K.length-1]-a[k]))&&(K.push(a[k]),C.push(a[k])),K.sort(function(t,e){return t-e});for(E=R,h=K[0]+1;h<l.length-E+1;++h){for(y=!0,f=[],c=0;E>c;++c)if(f.push(h+c,h+c,h+c),l[h+c]<3||h+c==13||h+c==14||h+c==15){y=!1;break}if(y){if(C.length>0){for(c=0;c<d.length&&f.length<t.length;++c)f.push(d[c]);if(f.length<t.length)for(c=1;c<l.length&&f.length<t.length;++c)if(l[c]>0&&f.indexOf(c)<0)for(var b=0;b<l[c]&&f.length<t.length;++b)f.push(c);if(f.length==t.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}else if(i.length>0){for(c=0;c<u.length&&f.length<t.length;++c)f.push(u[c],u[c]);if(f.length<t.length)for(c=0;c<l.length&&f.length<t.length;++c)l[c]>1&&f.indexOf(c)<0&&f.push(c,c);if(f.length==t.length)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}break}}}}if(e==PDKDANSHUN)for(D=n.length,h=n[0]+1;h<l.length-D+1;++h){for(y=!0,f=[],c=0;D>c;++c)if(f.push(h+c),l[h+c]<1||h+c==13||h+c==14||h+c==15){y=!1;break}if(y)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}if(e==PDKSHUANGSHUN)for(D=i.length,h=i[0]+1;h<l.length-D+1;++h){for(y=!0,f=[],c=0;D>c;++c)if(f.push(h+c,h+c),l[h+c]<2||h+c==13||h+c==14||h+c==15){y=!1;break}if(y)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}if(e==PDKSANSHUN)for(D=o.length,h=o[0]+1;h<l.length-D+1;++h){for(y=!0,f=[],c=0;D>c;++c)if(f.push(h+c,h+c,h+c),l[h+c]<3||h+c==13||h+c==14||h+c==15){y=!1;break}if(y)return{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}}if(e==PDKZHADAN){if(g.length>0)for(console.log("PDKZHADAN--------->",g,a),h=0;h<g.length;++h)if(g[h]>a[0])return f=[g[h],g[h],g[h],g[h]],e==s?{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}:{chai:!0,cards:this.GetCardsByNum(f,r),nums:f}}else if(g.length>0)return f=[g[0],g[0],g[0],g[0]],{chai:!0,cards:this.GetCardsByNum(f,r),nums:f};return l[14]>0&&l[15]>0?{chai:!0,cards:this.GetCardsByNum([14,15],r),nums:[14,15]}:3==l[12]?(f=[12,12,12],{chai:!1,cards:this.GetCardsByNum(f,r),nums:f}):null},t.GetCardsByNum=function(t,e){for(var n=[],i=e.concat(),o=0;o<t.length;++o)for(var a=0;a<i.length;++a){var r=Math.floor(i[a]/10);if(r==t[o]){n.push(i[a]),i.splice(a,1);break}}return n},t.CheckShun=function(t){var e,n,i=[0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;++e){var o=Math.floor(t[e]/10);o<i.length&&i[o]++}var a;e=0;for(var r=[];e<i.length;){if(a=[],i[e]>2)for(a.push(e,e,e),n=e+1;n<i.length;++n){if(e=n,!(i[n]>2)){a.length>r.length&&(r=a);break}a.push(n,n,n)}++e}a&&a.length>r.length&&(r=a),(!r||r.length<6)&&(r=null),e=0;for(var s=[];e<i.length;){if(a=[],i[e]>1)for(a.push(e,e),n=e+1;n<i.length;++n){if(e=n,!(i[n]>1)){a.length>s.length&&(s=a);break}a.push(n,n)}++e}a&&a.length>s.length&&(s=a),(!s||s.length<6)&&(s=null),e=0;for(var h=[];e<i.length;){if(a=[],i[e]>0)for(a.push(e),n=e+1;n<i.length;++n){if(e=n,!(i[n]>0)){a.length>h.length&&(h=a);break}a.push(n)}++e}a&&a.length>h.length&&(h=a),(!h||h.length<5)&&(h=null);var c=r;return s&&(!c||s[0]<c[0])&&(c=s),h&&(!c||h[0]<c[0])&&(c=h),c&&c.length>0?this.GetCardsByNum(c,t):null},t.CheckShun2=function(t){var e,n=[0,0,0,0,0,0,0,0,0,0,0,0,0],i=Math.floor(t[0]/10),o=Math.floor(t[t.length-1]/10);for(e=0;e<t.length;++e){var a=Math.floor(t[e]/10);a<n.length&&n[a]++}var r=[];if(n[o]>2&&n[i]>2){for(r.push(o,o,o),e=o+1;i>e;++e){if(!(n[e]>2)){r=[];break}r.push(e,e,e)}r.length&&r.push(i,i,i)}if(!r.length&&n[o]>1&&n[i]>1&&i-o>1){for(r.push(o,o),e=o+1;i>e;++e){if(!(n[e]>1)){r=[];break}r.push(e,e)}r.length&&r.push(i,i)}if(!r.length&&n[o]>0&&n[i]>0&&i-o>3){for(r.push(o),e=o+1;i>e;++e){if(!(n[e]>0)){r=[];break}r.push(e)}r.length&&r.push(i)}return r.length?this.GetCardsByNum(r,t):null},t.is_shun=function(t,e){if(void 0===e&&(e=!0),!t||t.length<1)return{result:!1};for(var n=!1,i=!1,o=0;o<t.length-1;++o)if(t[o]+1!=t[o+1]||13==t[o+1]||14==t[o+1]||15==t[o+1]){if(e)return{result:!1};if(!(t.length>2))return{result:!1};if(0==o)i=!0;else if(o==t.length-2){if(i)return{result:!1};n=!0}}return!e&&n?{result:!0,kv:t[t.length-2]}:{result:!0,kv:t[t.length-1]}},t.GetType=function(t,e,n,i,o){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),null==t||t.length<1)return{ct:0,kv:0};var a,r,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<t.length;++a){var h=Math.floor(t[a]/10);s[h]++}var c=[],l=[],p=[],d=[],u=[];for(a=0;a<s.length;++a)1==s[a]?(c.push(a),e&&e.push(a)):2==s[a]?(l.push(a),n&&n.push(a)):3==s[a]?(p.push(a),d.push(a),i&&i.push(a)):4==s[a]&&(u.push(a),d.push(a),o&&o.push(a));if(1==t.length)return{ct:PDKDAN,kv:c[0]};if(2==t.length&&t.indexOf(140)>=0&&t.indexOf(150)>=0)return{ct:PDKSHUANGWANG,kv:15};if(1==u.length&&4==t.length)return{ct:PDKZHADAN,kv:u[0]};if(1==p.length&&3==t.length&&12==p[0])return{ct:PDKSANTIAOA,kv:p[0]};if(1==l.length&&2==t.length)return{ct:PDKDUIZI,kv:l[0]};if(1==p.length&&3==t.length)return{ct:PDKSANZHANG,kv:p[0]};if(1==p.length&&4==t.length)return{ct:PDKSANDAIYI,kv:p[0]};if(1==p.length&&1==l.length&&5==t.length)return{ct:PDKSANDAIER,kv:p[0]};if(1==p.length&&5==t.length)return{ct:PDKSANDAIER,kv:p[0]};if(1==u.length&&6==t.length)return{ct:PDKSIDAIER,kv:u[0]};if(1==u.length&&7==t.length)return{ct:PDKSIDAISAN,kv:u[0]};if(d.length>1){var _=this.is_shun(d);if(_.result&&t.length==5*d.length)return{ct:PDKFEIJI,kv:_.kv};if(t.length==5*d.length){var _=this.is_shun(d);if(_.result)return{ct:PDKFEIJI,kv:_.kv}}else{var g=t.length/5;if(g>1&&g%1==0&&g!=d.length)for(r=0;r<d.length-g+1;r++){for(var f=[],m=0;g>m;m++)f.push(d[m+r]);var _=this.is_shun(f);if(_.result)return{ct:PDKFEIJI,kv:_.kv}}}if(t.length==4*d.length){var _=this.is_shun(d);if(_.result)return{ct:PDKFEIJI,kv:_.kv}}else{var g=t.length/4;if(g>1&&g%1==0&&g!=d.length)for(r=0;r<d.length-g+1;r++){for(var f=[],m=0;g>m;m++)f.push(d[m+r]);var _=this.is_shun(f);if(_.result)return{ct:PDKFEIJI,kv:_.kv}}}var _=this.is_shun(d);if(_.result&&t.length==4*d.length)return{ct:PDKFEIJI,kv:_.kv}}if(p.length>1){var _=this.is_shun(p);if(_.result){if(t.length==5*p.length)return{ct:PDKFEIJI,kv:_.kv};if(3*p.length==t.length)return{ct:PDKSANSHUN,kv:_.kv}}}if(c.length>4&&t.length==c.length){var _=this.is_shun(c);if(console.log("PDKDANSHUN----tmp---111---->",_),_.result)return{ct:PDKDANSHUN,kv:_.kv}}if(l.length>=2&&2*l.length==t.length){var _=this.is_shun(l);if(_.result)return{ct:PDKSHUANGSHUN,kv:_.kv}}return{ct:0,kv:0}},t.getMaxNumType=function(t){var e=[];return e},t.prototype.PDKCardsType=function(){},t}();__reflect(PDKCardsType.prototype,"PDKCardsType");var PDKDDZCardGroup=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.interact=!1,e._cardsSelect=[],e._pokerIds=[],e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.touchEnabled=!1,this.interact&&(this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),PDKalien.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this))},e.prototype.onTouchTap=function(t){},e.prototype.onTouchBegin=function(t){this._touchBeginIndex=this.getChildIndex(t.target),this._touchBegin=!0,this.rollOverCardIds(this.getChildIndex(t.target),this._touchBeginIndex)},e.prototype.onTouchMove=function(t){this._touchBegin&&this.rollOverCardIds(this.getChildIndex(t.target),this._touchBeginIndex)},e.prototype.onTouchEnd=function(t){if(this._touchBegin){for(var e=[],n=this._selectFrom;n<=this._selectTo;n++){var i=this.getChildAt(n);i&&(i.rollOver=!1,e.push(i))}this.selectCards(e)}this._touchBegin=!1},e.prototype.initData=function(){this._cardsSelect.splice(0)},e.prototype.sendCardsToGroup=function(e,n,i){void 0===i&&(i=!0),t.prototype.sendCardsToGroup.call(this,e,n,i),this._touchBegin=!1},e.prototype.selectCards=function(t){for(var e,n=this,i=t.map(function(t){return t.pokerId}),o=!0,a=0;a<t.length;++a)t[a].select||(o=!1);if(o)return PDKalien.PDKUtils.enumChildren(this,function(t,e){i.indexOf(t.pokerId)>=0&&n.selectCard(t,!t.select)}),void this.checkCanUse();var r=[],s=[];if(PDKalien.PDKUtils.enumChildren(this,function(t,e){t.select&&s.indexOf(t.pokerId)<0&&(s.push(t.pokerId),r.push(t.pokerId))}),i.forEach(function(t){s.indexOf(t)<0&&s.push(t)}),s.sort(function(t,e){return e-t}),this._targetCards&&0!=this._targetCards.length)1==t.length||(e=PDKCardsType.CheckShun(i));else if(2==s.length){var h=Math.floor(s[0]/10),c=Math.floor(s[1]/10);if(h!=c){var l=[];PDKalien.PDKUtils.enumChildren(this,function(t,e){var n=Math.floor(t.pokerId/10);(n==h||n==c||t.pokerId<s[0]&&t.pokerId>s[1])&&l.push(t.pokerId)}),e=PDKCardsType.CheckShun2(l)}}else r.length<1&&(e=PDKCardsHint.getMaxAmountCards(i));e?PDKalien.PDKUtils.enumChildren(this,function(t,i){n.selectCard(t,e.indexOf(t.pokerId)>=0)}):PDKalien.PDKUtils.enumChildren(this,function(t,e){i.indexOf(t.pokerId)>=0&&n.selectCard(t,!t.select)}),this.checkCanUse()},e.prototype.selectCard=function(t,e){if(!t.select&&e)this._cardsSelect.push(t.pokerId);else if(t.select&&!e){var n=this._cardsSelect.indexOf(t.pokerId);n>=0&&this._cardsSelect.splice(n,1)}t.select=e},e.prototype.getSelectedCards=function(){return this._cardsSelect},e.prototype.cancelSelect=function(){PDKalien.PDKUtils.enumChildren(this,function(t,e){t.sending||(t.select=t.rollOver=!1)}),this._cardsSelect.splice(0),this.checkCanUse()},e.prototype._debugCardValues=function(t){for(var e=["3","4","5","6","7","8","9","10","J","Q","k","A","2","X","D"],n=0,i=[],o=0;o<t.length;++o)n=t[o]<100?parseInt((""+t[o]).substr(0,1)):parseInt((""+t[o]).substr(0,2)),i.push(e[n-1]);return i},e.prototype.checkType=function(t){console.log("checkType------xxxxx111-------->",t,this._pokerIds),this._targetCards=t;var e=PDKCardsType.GetCards2(t,this._pokerIds.concat());return console.log("heckType------xxxxx222-------->",e),e?(this._arrUseHelp=e[4],this._helpIndex=0,!0):(this._arrUseHelp=null,!1)},e.prototype.checkCanUse=function(t){void 0===t&&(t=!1);var e=t||PDKCardsType.CheckType(this._cardsSelect,this._targetCards,this._pokerIds.concat());console.log("checkCanUse==>",t,e,this._debugCardValues(this._cardsSelect)),PDKalien.Dispatcher.dispatch(PDKEventNames.SELECT_CARDS,{canUse:e,count:this._cardsSelect.length})},e.prototype.help=function(){var t,e=this;return this._arrUseHelp&&(this._helpIndex>=this._arrUseHelp.length&&(this._helpIndex=0),console.log("help------------->",this._arrUseHelp),t=this._arrUseHelp[this._helpIndex]),this._helpIndex++,t?(PDKalien.PDKUtils.enumChildren2(this,function(n,i){e.selectCard(n,t.indexOf(n.pokerId)>=0)}),this.checkCanUse(!0),!0):!1},e.prototype.rollOverCardIds=function(t,e){if(!(0>t||0>e)){var n=this._selectFrom=Math.min(t,e),i=this._selectTo=Math.max(t,e);PDKalien.PDKUtils.enumChildren(this,function(t,e){t.rollOver=e>=n&&i>=e
})}},e.prototype.cleancards=function(){t.prototype.clean.call(this)},e.prototype.addCards=function(e,n){void 0===n&&(n=!0);var i=t.prototype.addCards.call(this,e,n);return this.updatePokersIds(),i},e.prototype.useCards=function(t,e,n){var i=this;void 0===n&&(n=!0);var o=[];if(.24==this.scale)t.forEach(function(t){var e=PDKCard.create({pid:t});i.addChild(e),PDKalien.PDKUtils.injectProp(e,{x:0,y:0,alpha:1,scaleX:.24,scaleY:.24}),o.push(e)});else for(var a=0;a<t.length;a++)for(var r=0;r<this.numChildren;r++){var s=this.getChildAt(r);s&&t[a]==s.pokerId&&o.push(s)}return this.sendCardsToGroup(e,o,n),this.updatePokersIds(),this.cardCount},e.prototype.updatePokersIds=function(){var t=this;this._pokerIds.splice(0),PDKalien.PDKUtils.enumChildren(this,function(e){e.sending||t._pokerIds.push(e.pokerId)})},e.prototype.adjustCardsEnd=function(){t.prototype.adjustCardsEnd.call(this),this.updateMasterFlag()},Object.defineProperty(e.prototype,"isMaster",{set:function(t){this._isMaster!=t&&(this._isMaster=t,this.updateMasterFlag())},enumerable:!0,configurable:!0}),e.prototype.updateMasterFlag=function(){for(var t,e=this.numChildren-1,n=e;n>=0;n--){var i=this.getChildAt(n);i.sending||(t||(t=i,t.showMasterFlag(this._isMaster)),i!=t&&i.showMasterFlag(!1))}},e}(PDKCardGroup);__reflect(PDKDDZCardGroup.prototype,"PDKDDZCardGroup");var PDKDDZServer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.beforeDispatchMessage=function(e,n){switch(e){case PDKEventNames.GAME_SET_SESSION:this._session>0&&this._session!=n.session&&this.giveUpGame(),this.resetSession();break;case PDKEventNames.GAME_GAME_START_NTF:}t.prototype.beforeDispatchMessage.call(this,e,n)},e.prototype.send=function(e,n){!n.session&&e.indexOf("game")>=0&&(n.session=this._session),t.prototype.send.call(this,e,n)},e.prototype.setCards=function(t){this.send(PDKEventNames.GAME_SET_CARDS,{seatid:0,cardids:t})},e.prototype.quickJoin=function(){this.send(PDKEventNames.USER_QUICK_JOIN_REQUEST,{roomid:this.roomInfo.roomID,clientid:this._clientId})},e.prototype.quickJoinWithFlag=function(){this.send(PDKEventNames.USER_QUICK_JOIN_REQUEST,{roomid:this.roomInfo.roomID,clientid:this._clientId,flag:1})},e.prototype.userInfoRequest=function(t){this.send(PDKEventNames.USER_USER_INFO_REQUEST,{uid:t})},e.prototype.getUserInfoInGame=function(t){this.send(PDKEventNames.GAME_USER_INFO_IN_GAME_REQ,{uid:t})},e.prototype.CreatePersonalGameReq=function(t,e,n,i,o,a){void 0===a&&(a=0),this.send(PDKEventNames.CREATE_PERSONAL_GAME_REQ,{gameid:t,bscore:e,maxround:n,maxodd:i,minscore:o,cost:a})},e.prototype.JoinPGameReq=function(t){this.send(PDKEventNames.JOIN_PGAME_REQ,{roomid:t})},e.prototype.StartPGameReq=function(t){this.send(PDKEventNames.START_PGAME_REQ,{roomid:t})},e.prototype.QueryRoomInfoReq=function(t){this.send(PDKEventNames.QUERY_ROOMINFO_REQ,{roomid:t})},e.prototype.QuitPGameReq=function(t){this.send(PDKEventNames.QUIT_PGAME_REQ,{roomid:t})},e.prototype.GameDissolve=function(t){this.send(PDKEventNames.GAME_DISSOLVE,{roomid:t})},e.prototype.ReconnectPGameReq=function(){this.send(PDKEventNames.RECONNECT_PGAME_REQ,{})},e.prototype.answerMaster=function(t){this.send(PDKEventNames.GAME_ANSWER_MASTER,{score:t})},e.prototype.useCardNtf=function(t){this.send(PDKEventNames.GAME_USE_CARD_NTF,{seatid:this.seatid,cardids:t,index:0})},e.prototype.talk=function(t){this.send(PDKEventNames.GAME_TALK_NTF,{seatid:0,msg:t})},e.prototype.hang=function(t){this.send(PDKEventNames.GAME_OPERATE_REQ,{optype:t?1:0})},e.prototype.gameOperate=function(t,e){void 0===e&&(e=null),this.send(PDKEventNames.GAME_OPERATE_REQ,{optype:t,params:e})},e.prototype.getPlayersAmount=function(){this.send(PDKEventNames.USER_PLAYERS_AMOUNT_REQ,{game_id:PDKGameConfig.gameId})},e.prototype.modifyUserInfo=function(t){this.send(PDKEventNames.USER_MODIFY_USER_INFO_REQ,t)},e.prototype.giveUpGame=function(){this.send(PDKEventNames.GAME_GIVE_UP_GAME_REQ,{status:0})},e.prototype.QuitWaitingQueueReq=function(){this.send(PDKEventNames.QUIT_WAITING_QUEUE_REQ,{})},e.prototype.getMatchSignUpInfo=function(t){this.send(PDKEventNames.USER_MATCH_SING_UP_INFO_REQ,{matchid:t})},e.prototype.matchSignUp=function(t,e,n){void 0===n&&(n=0),this.send(PDKEventNames.USER_MATCH_SING_UP_REQ,{matchid:t,optype:e,itemid:n})},e.prototype.enterMatch=function(t){this.send(PDKEventNames.USER_ENTER_MATCH_REQ,{matchid:t,clientid:this._clientId})},e.prototype.giveUpMatch=function(t){this.send(PDKEventNames.USER_GIVE_UP_MATCH_REQ,{matchid:t,clientid:this._clientId})},e.prototype.getBagInfo=function(){this.send(PDKEventNames.USER_BAG_INFO_REQ,{})},e.prototype.GetFreshManReward=function(){this.send(PDKEventNames.GET_FRESHMAN_REWARD_REQ,{})},e.prototype.alms=function(){this.send(PDKEventNames.USER_ALMS_REQ,{})},e.prototype.getReady=function(){this.send(PDKEventNames.GAME_GET_READY_REQ,{})},e.prototype.redcoinExchangeGoodsReq=function(t){this.send(PDKEventNames.USER_REDCOIN_EXCHANGE_GOODS_REQ,{index:t})},e.prototype.diamondExchangeGoodsReq=function(t){this.reqUserOperate(1,[t])},e.prototype.lotteryRedCoinReq=function(t){var e=PDKGameConfig.getRoomConfigById(t);console.log("lotteryRedCoinReq----------->",e),"diamond"==e.style?e.rewardwinround?this.send(PDKEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:t,optype:4}):this.send(PDKEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:t,optype:2}):this.send(PDKEventNames.USER_LOTTERY_RED_COIN_REQ,{roomid:t})},e.prototype.getSignReward=function(){this.send(PDKEventNames.USER_DAY_SIGN_IN_REQ,{optype:2})},e.prototype.getSignInInfo=function(){this.send(PDKEventNames.USER_DAY_SIGN_IN_REQ,{optype:1})},e.prototype.getRedcoinRankingListReq=function(){this.send(PDKEventNames.USER_REDCOIN_RANKING_LIST_REQ,{})},e.prototype.getCardsRecorderReward=function(){this.send(PDKEventNames.GET_CARDS_RECORDER_REWARD_REQ,{})},e.prototype.sendHornMsg=function(t,e){var n=t,i=e,o={type:n,msg:i};this.send(PDKEventNames.USER_PAY_TO_CHAT_REQ,o)},e.prototype.reqGetDownAppRew=function(){var t={optype:1};pdkServer.send(PDKEventNames.USER_GET_REWARD_REQ,t)},e.prototype.reqNationalLoginRew=function(){var t={optype:2};pdkServer.send(PDKEventNames.USER_GET_REWARD_REQ,t)},e.prototype.reqNationalInviteRew=function(){var t={optype:3};pdkServer.send(PDKEventNames.USER_GET_REWARD_REQ,t)},e.prototype.reqNationalActInfo=function(){var t={optype:2};this.send(PDKEventNames.USER_GET_ACTInfo_REQ,t)},e.prototype.reqDownAppRewInfo=function(){var t={optype:1};pdkServer.send(PDKEventNames.USER_GET_ACTInfo_REQ,t)},e.prototype.reqDouble=function(){var t={optype:7,params:[2]};pdkServer.send(PDKEventNames.GAME_OPERATE_REQ,t)},e.prototype.reqNoDouble=function(){var t={optype:7,params:[1]};pdkServer.send(PDKEventNames.GAME_OPERATE_REQ,t)},e.prototype.reqUserOperate=function(t,e){var n={optype:t,params:e};pdkServer.send(PDKEventNames.USER_OPERATE_REQ,n)},e.prototype.reqUserGuessNextCard=function(t,e){this.reqUserOperate(3,[e,t])},e.prototype.reqShareSuccRew=function(){this.reqUserOperate(2,null)},e.prototype.reqRedNormalTime=function(){var t={optype:2};pdkServer.send(PDKEventNames.USER_DiamondGame_REQ,t)},e.prototype.reqRedNormalMoney=function(){var t={optype:1};pdkServer.send(PDKEventNames.USER_DiamondGame_REQ,t)},e.prototype.reqNewPlayerGetDiamond=function(){var t={optype:3};pdkServer.send(PDKEventNames.USER_DiamondGame_REQ,t)},e.prototype.reqMailOperate=function(t,e){var n={optype:t,id:e};pdkServer.send(PDKEventNames.USER_MailOperate_REQ,n)},e.prototype.reqMailGetRew=function(t){this.reqMailOperate(1,t)},e.prototype.reqTanksQualifications=function(){this.reqUserOperate(4,null)},e.prototype.reqMatchOperate=function(t,e){var n={optype:t,matchid:e};this.send(PDKEventNames.USER_MatchOperate_REQ,n)},e.prototype.reqMatchRevive=function(){this.reqMatchOperate(1,pdkServer.roomInfo.matchId)},e.prototype.reqNewPlayerClickTask=function(){this.reqUserOperate(5,[1])},e.prototype.reqClickDownApp=function(){this.reqUserOperate(5,3)},e.prototype.reqClickFirstRecharge=function(){this.reqUserOperate(5,2)},e.prototype.reqClickThanksgiving=function(){this.reqUserOperate(5,4)},e.prototype.reqThanksBuyCounts=function(){this.reqUserOperate(4,null)},e.prototype.reqThanksSign=function(){this.reqUserOperate(6,null)},e.prototype.reqGetDayFuDai=function(){this.reqUserOperate(7,null)},e.prototype.reqServerUpdateRechareErr=function(){this.reqUserOperate(8,null)},e.prototype.sendPdkOutcard=function(t){t=PDKUtils.unTransformCards(t),this.send(PDKEventNames.GAME_CTS_PDK_OUTCARD,{card:t})},e.prototype.sendPdkCardHolder=function(){this.send(PDKEventNames.GAME_CTS_PDK_CARD_HOLDER,{})},e}(PDKServer);__reflect(PDKDDZServer.prototype,"PDKDDZServer");var pdkServer=new PDKDDZServer,PDKGameSoundManager=function(){function t(){}return t.playCardType=function(t,e,n){void 0===n&&(n=0);var i,o=!1;switch(e){case PDKBUYAO:i="buyao4";break;case PDKSHUANGWANG:i="wangzha",o=!0;break;case PDKZHADAN:case PDKSANTIAOA:i="zhadan",o=!0;break;case PDKDAN:i=""+n;break;case PDKDUIZI:i="dui"+n;break;case PDKSANZHANG:i="tuple"+n;break;case PDKSANDAIER:i="sandaier";break;case PDKSANDAIYI:i="sandaiyi";break;case PDKSANDAIYIDUI:i="sandaiyidui";break;case PDKSIDAIER:i="sidaier";break;case PDKSIDAISAN:i="sidaier";break;case PDKSIDAIERDUI:i="sidailiangdui";break;case PDKFEIJI:i="feiji";break;case PDKDANSHUN:i="shunzi";break;case PDKSHUANGSHUN:i="liandui";break;case PDKSANSHUN:i="shunzi"}var a="pdk_"+t+"_"+i;PDKalien.PDKSoundManager.instance.playEffect(a),o&&PDKSoundManager.instance.vibrate()},t.playScore=function(t,e){var n=t+"_";if(0==e)n+="NoOrder";else{if(0>e)return;n+="Order"}PDKalien.PDKSoundManager.instance.playEffect(n)},t.playDouble=function(t,e){var n=t+"_";n+=e?"jiabei":"bujiabei",PDKalien.PDKSoundManager.instance.playEffect(n)},t}();__reflect(PDKGameSoundManager.prototype,"PDKGameSoundManager");var PDKGoodsManager=function(){function t(){this.init()}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this;this.goodsMap={},this.goodsArray=PDKGameConfig.goodsConfig.map(function(e){var n=GoodsConfig.create(e);return t.goodsMap[n.id]=n,n})},t.prototype.getGoodsById=function(t){if(null!=t){var e=this.goodsMap[t];return e?e:void console.warn("物品不存在(id: %d)",t)}},t}();__reflect(PDKGoodsManager.prototype,"PDKGoodsManager");var GoodsConfig=function(){function t(){}return t.create=function(e){var n=new t;return PDKalien.PDKUtils.injectProp(n,e),n},t}();__reflect(GoodsConfig.prototype,"GoodsConfig");var PDKObjectPoolInit=function(){function t(){this.init()}return t.prototype.init=function(){PDKalien.ObjectPool.registerPool("PDKCard",function(t){return new PDKCard},function(t,e){t.initData(e)})},t}();__reflect(PDKObjectPoolInit.prototype,"PDKObjectPoolInit");var PDKOtherGameManager=function(){function t(){this._dispatcher=new OtherGameBridge,this._otherCfg=PDKotherGameCfg,this._resetRunGame(),this._initTypeFunc()}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.isListenAllProto=function(){return this._curGameCfg&&this._curGameCfg.listenAllProto?!0:!1},t.prototype.isInOtherProtoListen=function(t){return this._protoIDS[t]?!0:!1},t.prototype.dispatch=function(t,e){this._dispatcher.dispatchEventWith(t,!1,e)},t.prototype.onSocketData=function(t,e,n){this.isRunOtherGame()&&this.dispatch(PDKEventNames.RECV_SOCKET_DATA,{nameId:t,len:e,byteArray:n})},t.prototype.onMyInfoUpdate=function(){var t=PDKMainLogic.instance.selfData;t=JSON.parse(JSON.stringify(t)),console.log("onMyInfoUpdate----->",t),this.dispatch("MY_USER_INFO_UPDATE",t)},t.prototype.runOtherGameByName=function(t,e){void 0===e&&(e=null);var n=this._getGameConfigByGameName(t);n&&this._startOtherGame(n,e)},t.prototype.runOtherGameByID=function(t,e){void 0===e&&(e=null);var n=this._getGameConfigByGameId(name);n&&this._startOtherGame(n,e)},t.prototype.getCurGameCfg=function(){return this._curGameCfg},t.prototype.getCurGameUrlRoot=function(){return this.isRunOtherGame()&&this._curGameCfg.urlRoot?this._curGameCfg.urlRoot:null},t.prototype.isRunOtherGame=function(){return this._curGameCfg?!0:!1},t.prototype.onMusicEnableChange=function(){var t=PDKalien.PDKSoundManager.instance.musicMute;this.dispatch("MUSCI_ENABEL_CHANGE",{enable:t})},t.prototype.onEffectEnableChange=function(){var t=PDKalien.PDKSoundManager.instance.effectMute;this.dispatch("EFFECT_ENABEL_CHANGE",{enable:t})},t.prototype.onVibrateEnableChange=function(){var t=PDKalien.PDKSoundManager.instance.vibrateMute;this.dispatch("VIBRATE_ENABEL_CHANGE",{enable:t})},t.prototype._getGameConfigByGameName=function(t){var e=null;if(this._otherCfg)for(var n in this._otherCfg)if(this._otherCfg[n].name==t)return this._otherCfg[n];return e},t.prototype._getGameConfigByGameId=function(t){var e=null;return this._otherCfg&&this._otherCfg[t]?this._otherCfg[t]:e},t.prototype._startOtherGame=function(e,n){if(this._curGameCfg=e,e.mainJs&&e.urlRoot&&e.entryClassName){var i=e.urlRoot+e.mainJs;PDKalien.Native.instance.loadJs(i,function(){var i=egret.getDefinitionByName(e.entryClassName);if(i){this._dispatcher.addEventListener(e.entryClassName,this._onOtherGameEvent.bind(this),this),console.log("startOtherGam======entryClassName=======>",e.entryClassName);var o=new i({dispatcher:this._dispatcher,serverUid:pdkServer.uid,data:n});this._curGameContainer=o,PDKalien.PDKSoundManager.instance.stopMusic(),PDKalien.PDKSoundManager.instance.stopEffect(),PDKalien.PDKSceneManager.addOtherContainer(o),PDKalien.PDKSceneManager.removeDDZContainer(),t.instance.onMyInfoUpdate()}}.bind(this))}},t.prototype._onSendData=function(t){t.protoID&&t.byteArray&&pdkServer.sendDataByProtoId(t.protoID,t.byteArray)},t.prototype._onOtherBack=function(t){PDKalien.PDKSceneManager.removeOtherContainer(this._curGameContainer),this._resetRunGame(),PDKalien.PDKSoundManager.instance.playMusic(PDKResNames.pdk_bgm);var e=PDKalien.PDKSceneManager.instance;e.currentSceneName!=PDKSceneNames.ROOM&&e.show(PDKSceneNames.ROOM,null,PDKalien.sceneEffect.Fade)},t.prototype._onShowShop=function(t){PDKPanelExchange2.instance.show(t.shopFlag)},t.prototype._onShowSetting=function(t){pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:3}):PDKPanelSetting.instance.show()},t.prototype._onPlaySound=function(t){1==t.soundType?PDKalien.PDKSoundManager.instance.playMusic(t.soundRes,t.loop):2==t.soundType&&PDKalien.PDKSoundManager.instance.playEffect(t.soundRes,t.loop)},t.prototype._onRecharge=function(t){t.productID&&PDKRechargeService.instance.doRecharge(t.productID)},t.prototype._onSetListerenProtoID=function(t){this._protoIDS=t.protoIDS},t.prototype._initTypeFunc=function(){this._tTypeFunc={},this._tTypeFunc[0]=this._onSendData.bind(this),this._tTypeFunc[1]=this._onOtherBack.bind(this),this._tTypeFunc[2]=this._onShowShop.bind(this),this._tTypeFunc[3]=this._onShowSetting.bind(this),this._tTypeFunc[4]=this._onPlaySound.bind(this),this._tTypeFunc[5]=this._onRecharge.bind(this),this._tTypeFunc[6]=this._onSetListerenProtoID.bind(this)},t.prototype._onOtherGameEvent=function(t){var e=t.data;e&&this._tTypeFunc[e.type]&&this._tTypeFunc[e.type](e)},t.prototype._removeListeners=function(){var t=this._dispatcher.$getEventMap(),e=[];for(var n in t){e=t[n];var i=e.length;if(0==i)return;for(var o=0;i>o;++o){var a=e.pop();this._dispatcher.removeEventListener(a.type,a.listener,a.thisObject,a.useCapture)}}},t.prototype._resetRunGame=function(){this._curGameContainer=null,this._curGameCfg=null,this._removeListeners()},t}();__reflect(PDKOtherGameManager.prototype,"PDKOtherGameManager");var OtherGameBridge=function(t){function e(){var e=t.call(this)||this;return e._soundIns=PDKalien.PDKSoundManager.instance,e}return __extends(e,t),e.prototype.isEnableMusic=function(){return this._soundIns.musicMute},e.prototype.isEnableEffect=function(){return this._soundIns.effectMute},e}(egret.EventDispatcher);__reflect(OtherGameBridge.prototype,"OtherGameBridge");var PDKShareImageManager=function(){function t(){this._isWaitTipShowing=!1}return Object.defineProperty(t,"instance",{get:function(){return void 0==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.start=function(t,e){this.showWait(),this.getImageUrl(t,e,this.onImageUrlResult.bind(this))},t.prototype.shareImgByType=function(t,e,n){var i=this;this.showWait(),this.getImageUrl(t,e,function(t){var e=JSON.parse(t);0==Number(e.code)&&i.shareImage(e.url,n)})},t.prototype.checkShareResult=function(){var e=+egret.localStorage.getItem(t.SHARE_RESULT_TAG);console.log("share result:"+e),e&&(e==PDKWxHelper.NATIVE_SHARE_SUCC?this.onShareSucc():e>PDKWxHelper.NATIVE_SHARE_SUCC&&this.onShareFailed())},t.prototype.getShareScene=function(e,n){var i=t.SCENE_NORMAL;if(e==t.GAME_TYPE_RED)switch(n){case 48:i=t.SCENE_RED_48;break;case 96:i=t.SCENE_RED_96;break;case 192:i=t.SCENE_RED_192;break;default:i=t.SCENE_NORMAL}else if(e==t.GAME_TYPE_MATCH)switch(n){case 201:i=t.SCENE_MATCH_200_RANK_1;break;case 202:i=t.SCENE_MATCH_200_RANK_2;break;case 203:i=t.SCENE_MATCH_200_RANK_3;break;case 501:i=t.SCENE_MATCH_500_RANK_1;break;case 502:i=t.SCENE_MATCH_500_RANK_2;break;case 503:i=t.SCENE_MATCH_500_RANK_3;break;default:i=t.SCENE_NORMAL}else if(e==t.GAME_TYPE_FAST)switch(n){case 200:i=t.SCENE_FAST_2;break;case 500:i=t.SCENE_FAST_5;break;case 1e3:i=t.SCENE_FAST_10;break;default:i=t.SCENE_NORMAL}return i},t.prototype.showWait=function(){this._isWaitTipShowing=!0,egret.localStorage.setItem(t.SHARE_RESULT_TAG,"1"),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_WAITING,{content:"分享中..."}),egret.setTimeout(this.hideWait,this,t.WAIT_TIMEOUT)},t.prototype.hideWait=function(t){void 0===t&&(t=!1),PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING),this._isWaitTipShowing=!1},t.prototype.getImageUrl=function(e,n,i){PDKalien.Ajax.GET(t.REQ_IMAGE_URL,{uid:e,scene:n},i,this.onImageUrlError.bind(this))},t.prototype.onImageUrlResult=function(t){var e=JSON.parse(t);console.log(">>>>>>>>>>"+t),0==+e.code?this.shareImage(e.url):(console.log("onImageUrlResult:"+e.code),this.stop(!1))},t.prototype.onImageUrlError=function(t){console.log("onImageUrlError"),this.stop(!1)},t.prototype.shareImage=function(t,e){void 0===e&&(e=PDKWxHelper.SHARE_IMAGE_TO_TIMELINE),PDKWxHelper.shareImageNative(e,this.onShareResult.bind(this),[t])},t.prototype.saveShareResult=function(e){egret.localStorage.setItem(t.SHARE_RESULT_TAG,""+e)},t.prototype.onShareResult=function(t){var e=t.code;this.saveShareResult(e),+e==PDKWxHelper.NATIVE_SHARE_SUCC?this.onShareSucc():this.onShareFailed()},t.prototype.onShareSucc=function(){pdkServer.reqShareSuccRew()},t.prototype.onShareFailed=function(){this.stop(!1)},t.prototype.onUserOperateRep=function(t){if(2==t.optype)if(1==t.result)this.stop(!0);else{var e=PDKGameConfig,n=e.getShareRewCfg();if(!n)return;var i=null,o=1,a="恭喜您分享成功获得以下奖励:\n";for(var r in n)i=e.getItemNameById(parseInt(r)),i&&(a+=o+"."+i+"x"+n[r]+"\n");this.stop(!0,a)}},t.prototype.resetShareResult=function(){egret.localStorage.setItem(t.SHARE_RESULT_TAG,"0")},t.prototype.onAlertButton=function(t,e){this.resetShareResult()},t.prototype.stop=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.hideWait();var i="center";e?null==n?n="分享成功！":i="left":null==n&&(n="分享失败！"),egret.setTimeout(PDKAlert.show,this,t.ALERT_DELAY,n,0,this.onAlertButton.bind(this),i)},t.GAME_TYPE_RED=1,t.GAME_TYPE_MATCH=2,t.GAME_TYPE_FAST=3,t.REQ_IMAGE_URL="https://ddz.yiyuc.com/wxunion/friendshare.php",t.SHARE_RESULT_TAG="shareResultTag",t.SCENE_NORMAL=1,t.SCENE_SPRING=2,t.SCENE_RED_NORMAL=t.SCENE_NORMAL,t.SCENE_RED_BASE=10,t.SCENE_RED_48=t.SCENE_RED_BASE+1,t.SCENE_RED_96=t.SCENE_RED_BASE+2,t.SCENE_RED_192=t.SCENE_RED_BASE+3,t.SCENE_MATCH_NORMAL=t.SCENE_NORMAL,t.SCENE_MATCH_BASE=30,t.SCENE_MATCH_500_RANK_1=t.SCENE_MATCH_BASE+1,t.SCENE_MATCH_500_RANK_2=t.SCENE_MATCH_BASE+2,t.SCENE_MATCH_500_RANK_3=t.SCENE_MATCH_BASE+3,t.SCENE_MATCH_200_RANK_1=t.SCENE_MATCH_BASE+6,t.SCENE_MATCH_200_RANK_2=t.SCENE_MATCH_BASE+7,t.SCENE_MATCH_200_RANK_3=t.SCENE_MATCH_BASE+8,t.SCENE_FAST_NORMAL=t.SCENE_NORMAL,t.SCENE_FAST_BASE=50,t.SCENE_FAST_2=t.SCENE_FAST_BASE+1,t.SCENE_FAST_5=t.SCENE_FAST_BASE+2,t.SCENE_FAST_10=t.SCENE_FAST_BASE+3,t.WAIT_TIMEOUT=15e3,t.ALERT_DELAY=500,t}();__reflect(PDKShareImageManager.prototype,"PDKShareImageManager");var PDKalien;!function(t){var e=function(){function t(){}return t.init=function(){t.instance=new egret.EventDispatcher},t.dispatch=function(e,n){void 0===n&&(n=null),n?t.instance.dispatchEventWith(e,!1,n):t.instance.dispatchEvent(new egret.Event(e))},t.addEventListener=function(e,n,i){t.instance.addEventListener(e,n,i)},t.removeEventListener=function(e,n,i){t.instance.removeEventListener(e,n,i)},t}();t.Dispatcher=e,__reflect(e.prototype,"PDKalien.Dispatcher")}(PDKalien||(PDKalien={}));var PDKLeftSeat=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e}(PDKSideSeat);__reflect(PDKLeftSeat.prototype,"PDKLeftSeat");var PDKMySeat=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setRedcoin=function(t,e){this.lbRedCoin&&(this.lbRedCoin.text=t,this.redBgImg.touchEnabled=e)},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.clean=function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),this.imgNoMatchCards.visible=!1,t.prototype.clean.call(this,e,!1)},e.prototype.addCards=function(e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1),i&&this.handCardGroup.clean(),t.prototype.addCards.call(this,e),this.handCardGroup.addCards(e,n)},e.prototype.cancelSelect=function(){this.ddzHandCardGroup.cancelSelect()},e.prototype.getSelectPokerIds=function(){return this.ddzHandCardGroup.getSelectedCards()},e.prototype.help=function(){var t=this.ddzHandCardGroup.help();return t},e.prototype.checkType=function(t){return this.ddzHandCardGroup.checkType(t)},e.prototype.showNoMatchCards=function(t){void 0===t&&(t=2e3),this.imgNoMatchCards.visible=!0,this._tweenNoMathCards=egret.Tween.get(this.imgNoMatchCards,null,null,!0).to({alpha:1},100).wait(t).call(this.hideNoMathCards,this)},e.prototype.hideNoMathCards=function(){var t=this;this._tweenNoMathCards&&(this._tweenNoMathCards=null,egret.Tween.get(this.imgNoMatchCards,null,null,!0).to({alpha:0},100).call(function(){t.imgNoMatchCards.visible=!1}))},e.prototype.checkCanUse=function(){this.ddzHandCardGroup.checkCanUse()},e}(PDKDDZSeat);__reflect(PDKMySeat.prototype,"PDKMySeat");var PDKRightSeat=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e}(PDKSideSeat);__reflect(PDKRightSeat.prototype,"PDKRightSeat");var PDKalien;!function(t){var e=function(){function t(e,n,i,o,a,r,s){void 0===i&&(i=null),void 0===o&&(o=0),void 0===a&&(a=!0),void 0===r&&(r=!1),void 0===s&&(s=0),this._oldProperties={},this._t=0,this.target=e,this._calProps=i?i:t.round,this.duration=n,this.loop=o,this.reverse=r,this.delay=s,this.updateRegisterPos(),a&&this.play()}return t.prototype.updateRegisterPos=function(){this._oldProperties.x=this.target.x,this._oldProperties.y=this.target.y,this._oldProperties.scaleX=this.target.scaleX,this._oldProperties.scaleY=this.target.scaleY,this._oldProperties.skewX=this.target.skewX,this._oldProperties.skewY=this.target.skewY,this._oldProperties.rotation=this.target.rotation,this._oldProperties.alpha=this.target.alpha},t.prototype.play=function(){this._tween||(this._count=0,this._playStep())},t.prototype._playStep=function(){return this.loop>0&&this._count>=this.loop?void this.stop():(this._count++,this.t=this.reverse?2*Math.PI:0,this._tween=egret.Tween.get(this),void this._tween.wait(this.delay).to({t:this.reverse?0:2*Math.PI},this.duration).call(this._playStep,this))},Object.defineProperty(t.prototype,"t",{get:function(){return this._t},set:function(t){if(this.target.stage){this._t=t;var e=this._calProps.call(this,this._t);e.hasOwnProperty("x")&&(this.target.x=(e.x||0)+this._oldProperties.x),e.hasOwnProperty("y")&&(this.target.y=(e.y||0)+this._oldProperties.y),e.hasOwnProperty("sx")&&(this.target.scaleX=e.sx),e.hasOwnProperty("sy")&&(this.target.scaleY=e.sy),e.hasOwnProperty("skewX")&&(this.target.skewX=e.skewX),e.hasOwnProperty("skewY")&&(this.target.skewY=e.skewY),e.hasOwnProperty("r")&&(this.target.rotation=e.r),e.hasOwnProperty("alpha")&&(this.target.alpha=e.alpha)}},enumerable:!0,configurable:!0}),t.prototype.stop=function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=1e3),this._tween&&(egret.Tween.removeTweens(this),t&&egret.Tween.get(this.target).to(this._oldProperties,n),this._tween=null)},Object.defineProperty(t.prototype,"playing",{get:function(){return null!=this._tween},enumerable:!0,configurable:!0}),t.round=function(t){return{x:Math.cos(t),y:Math.sin(t)}},t.cos=function(t){return{x:Math.cos(t),y:0}},t.sin=function(t,e){return t=t||1,{x:0,y:Math.sin(e)*t}},t.rotate=function(t){return{r:360*t/Math.PI/2}},t.shake=function(t,e){return t=t||10,{r:Math.sin(2*e)*t}},t.breath=function(t,e){return{sx:Math.sin(e)*t+1,sy:-Math.sin(e+Math.PI/4)*t+1}},t}();t.Wave=e,__reflect(e.prototype,"PDKalien.Wave",["PDKalien.IAnimation"])}(PDKalien||(PDKalien={}));var PDKBagService=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.bagItemMap={},this.bagItemArray=[]},e.prototype.start=function(e){pdkServer.addEventListener(PDKEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this),this.refreshBagInfo(),t.prototype.start.call(this,e)},e.prototype.stop=function(){t.prototype.stop.call(this),pdkServer.removeEventListener(PDKEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this)},e.prototype.refreshBagInfo=function(t){void 0===t&&(t=!1),(t||!this._refreshing)&&(this._refreshing=!0,pdkServer.getBagInfo())},e.prototype.onBagInfoRep=function(t){var e=this,n=t.data;this._refreshing=!1,this.bagItemArray.forEach(function(t){t.count=0}),n.items.forEach(function(t){e.updateItemByData(t)}),PDKalien.Dispatcher.dispatch(PDKEventNames.BAG_INFO_REFRESH,!1)},e.prototype.getItemById=function(t){return this.bagItemMap[t]},e.prototype.getItemCountById=function(t){var e=this.getItemById(t);return e?e.count:0},e.prototype.updateItemByData=function(t){var e;return PDKGoodsManager.instance.getGoodsById(t.id)&&(e=this.getItemById(t.id),e||(e=new PDKBagItemData,this.bagItemMap[t.id]=e,this.bagItemArray.push(e)),PDKalien.PDKUtils.injectProp(e,t)),e},e.prototype.updateItemCount=function(t,e){var n=this.getItemById(t);if(n){var i=Math.max(n.count+e,0);return n.count=i,PDKalien.Dispatcher.dispatch(PDKEventNames.BAG_INFO_REFRESH,!1),i}return 0},e}(PDKService);__reflect(PDKBagService.prototype,"PDKBagService");var PDKBagItemData=function(){function t(){}return t}();__reflect(PDKBagItemData.prototype,"PDKBagItemData");var PDKCountDownService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._items=[],e._ids=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this._items.splice(0),this._timer>0&&egret.clearInterval(this._timer),this._timer=egret.setInterval(this.onTimer.bind(this),this,1e3),t.prototype.start.call(this,e)},e.prototype.stop=function(){t.prototype.stop.call(this),this._timer>0&&(egret.clearInterval(this._timer),this._timer=0)},e.prototype.register=function(t,e,n){void 0===n&&(n=null);var i=++this._ids;return this._items||(this._items=new Array),console.log("register-------->",pdkServer.tsServer,t),this._items.push({id:i,second:t,end:pdkServer.tsServer+t,onSecond:e,onComplete:n}),e&&e(t),i},e.prototype.unregister=function(t){var e=this;this._items.some(function(n,i){return n.id==t?(e._items.splice(i,1),!0):void 0})},e.prototype.onTimer=function(){var t=this;if(0!=this._items.length){var e=[];console.log(this._items.length,this._items.map(function(t){return t.id})),this._items.forEach(function(t,n){var i=t.end-pdkServer.tsServer,o=t.onSecond;if(o&&o(Math.max(0,i)),0>=i){e.push(n);var a=t.onComplete;a&&a()}}),e.forEach(function(e){t._items.splice(e,1)})}},e.register=function(t,n,i){return void 0===i&&(i=null),e.instance.register(t,n,i)},e.unregister=function(t){e.instance.unregister(t)},e}(PDKService);__reflect(PDKCountDownService.prototype,"PDKCountDownService");var PDKExchangeService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selfData=PDKMainLogic.instance.selfData,e._showInfoQueen=[],e._oneChouInfo=null,e.matchChampionMsg=[],e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){pdkServer._isInDDZ||(pdkServer.addEventListener(PDKEventNames.USER_REDCOIN_EXCHANGE_GOODS_REP,this.onExchangeNotify,this),pdkServer.addEventListener(PDKEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this,!1,1),pdkServer.addEventListener(PDKEventNames.USER_OPERATE_REP,this._onDiamondExchangeRep,this),this._matchMsgReqTimer||(this._matchMsgReqTimer=new egret.Timer(3e4),this._matchMsgReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getMatchChampion,this),this._matchMsgReqTimer.start()),this._redcoinReqTimer||(this._redcoinReqTimer=new egret.Timer(3e4),this._redcoinReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getRedCoinData,this),this._redcoinReqTimer.start()),this._announceReqTimer||(this._announceReqTimer=new egret.Timer(12e4),this._announceReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getAnnouce,this),this._announceReqTimer.start()),this.getAnnouce(),this.getRedCoinData(),this.getMatchChampion())},e.prototype.deleteAnnounce=function(){this.announce=null},e.prototype.delLottery=function(){var t=this.lottery;t?this.lottery={next_id:t.next_id}:this.lottery=null},e.prototype.getData=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n="/notify/redPackets"),e||(e={});var i=PDKGameConfig.WEB_SERVICE_URL+n,o=PDKalien.Ajax.GET;o.call(PDKalien.Ajax,i,e,function(e){if(PDKGameConfig.DEBUG&&console.log("get:"+e),t){var n=JSON.parse(e);n.code>0&&PDKGameConfig.DEBUG&&console.log(i,n.code,n.message),t(n)}})},e.prototype.getRedCoinData=function(){if(!(this._showInfoQueen&&this._showInfoQueen.length>0)){var t={};this.redcoinhttpMsgId&&(t.id=this.redcoinhttpMsgId),this.getData(function(t){if(0==t.code){var n=t.data||[];if(n){e.instance.redcoinhttpMsgId=n.next_id,e.instance._showInfoQueen=e.instance._showInfoQueen.concat(n.items);var i=e.instance._showInfoQueen.length;e.instance._oneChouInfo=e.instance._showInfoQueen[i-1],PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_PAYCHAT)}}},t)}},e.prototype.getOneChouInfoFromFront=function(t){var n=null,i=e.instance._showInfoQueen;if(t)n=i.shift();else{var o=i.length;if(o>0){i[o-1];i.splice(o-1,1)}}return n},e.prototype.getOneChouMaxInfo=function(){return e.instance._oneChouInfo},e.prototype.getMatchChampion=function(){if(!(this.matchChampionMsg&&this.matchChampionMsg.length>0)){var t={};this.matchhttpMsgId&&(t.id=this.matchhttpMsgId),this.getData(function(t){if(0==t.code){var n=t.data||[];n&&(e.instance.matchhttpMsgId=n.next_id||0,e.instance.matchChampionMsg=e.instance.matchChampionMsg.concat(n.items),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_PAYCHAT))}},t,"/notify/matchChampionMsg")}},e.prototype.getAnnouce=function(){var t={};this.getData(function(t){0==t.code&&(e.instance.announce=t.data,e.instance.announce&&e.instance.announce.length>0&&(PDKMainLogic.instance.selfData.addSysTalkRec(e.instance.announce),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_ANNOUNCE)))
},t,"/msg/notice")},e.prototype.getLottery=function(){var t=this,e={};this.lottery&&(e.id=this.lottery.next_id),this.getData(function(e){0==e.code&&(t.lottery=e.data,t.lottery&&t.lottery.nickname&&PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_LOTTERY))},e,"/lottery/roll")},e.prototype._alertWithFollowCourse=function(t,e){void 0===e&&(e=!1);var n=PDKPanelAlert3.instance;(new egret.HtmlTextParser).parser(t);n.show(t,0,function(t){e&&PDKPanelExchange2.instance.show(5)})},e.prototype.onExchangeRedSucc=function(){var t="兑换"+this._exchangeInfo.amount+"元红包成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(t)},e.prototype.onExchangeHuaFeiSucc=function(){var t="兑换"+this._exchangeInfo.amount+"元话费成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(t,!0)},e.prototype.onExchangeHFKSucc=function(){var t="兑换"+this._exchangeInfo.amount+"元话费充值卡成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(t,!0)},e.prototype.onExchangeJDKSucc=function(){var t="兑换"+this._exchangeInfo.amount+"元京东卡成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(t,!0)},e.prototype.onExchangeAliSucc=function(){var t="兑换"+this._exchangeInfo.amount+"元支付宝红包成功,请到 <font color='#FF0000'>兑换记录 </font>领取";this._alertWithFollowCourse(t,!0)},e.prototype.onExchangeNotify=function(t){var e=t.data;switch(e.result){case 0:this._exchangeInfo?(1==this._exchangeInfo.goodsid?this.onExchangeRedSucc():4==this._exchangeInfo.goodsid?this.onExchangeHuaFeiSucc():6==this._exchangeInfo.goodsid?this.onExchangeHFKSucc():5==this._exchangeInfo.goodsid?this.onExchangeJDKSucc():7==this._exchangeInfo.goodsid?this.onExchangeAliSucc():3==this._exchangeInfo.item_type?PDKAlert3.show("兑换"+this._exchangeInfo.num+"钻石成功",null,"pdk_common_btn_lab_confirm_h"):1==this._exchangeInfo.item_type&&PDKAlert3.show("兑换"+this._exchangeInfo.num+"金豆成功",this.onConfirm,"pdk_common_btn_lab_confirm_h"),this._exchangeInfo.first?(PDKMainLogic.instance.selfData.rcminexcchanceused=1,PDKPanelExchange2.instance.flashData(!0)):PDKPanelExchange2.instance.flashData()):PDKAlert3.show(PDKlang.exchange_redcoin[e.result],this.onConfirm,"pdk_common_btn_lab_confirm_h");break;case 1:PDKAlert3.show(PDKlang.exchange_redcoin[e.result],this.onConfirm,"pdk_common_btn_lab_confirm_h");break;case 2:PDKAlert3.show(PDKlang.exchange_redcoin[e.result],this.onConfirm,"pdk_common_btn_lab_confirm_h");break;case 3:PDKAlert3.show(PDKlang.exchange_redcoin[e.result],this.onConfirm,"pdk_common_btn_lab_confirm_h");break;case 4:PDKAlert3.show(PDKlang.exchange_redcoin[e.result],null,"pdk_common_btn_lab_confirm_h")}this._exchangeInfo=null},e.prototype.onConfirm=function(){},e.prototype.onLotteryRedCoinRep=function(t){var e=this,n=t.data;switch(n.result){case 0:pdkServer.getRedcoinRankingListReq(),PDKAlert.show("恭喜获得"+PDKUtils.exchangeRatio(n.coin/100,!0)+"奖杯!"),this._selfData.wincnt.forEach(function(t,n){null!=e.lotteryIndex&&e.lotteryIndex==t.roomid&&(t.chance-=1,PDKalien.Dispatcher.dispatch(PDKEventNames.USER_RED_COUNT_CHANGE,{count:t.chance}))});break;case 1:PDKAlert.show("配置不存在");break;case 2:PDKAlert.show("抽奖次数不足");break;case 3:PDKAlert.show("你有未完成的兑换")}this.lotteryIndex=null},e.prototype.onPay2ChatRep=function(t){var e=t.data;3==e.type&&(this._showInfoQueen.push(e),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_PAYCHAT))},e.prototype.doRedExchange=function(t){this._exchangeInfo=t,pdkServer.redcoinExchangeGoodsReq(t.id)},e.prototype.doChou=function(t){null==this.lotteryIndex&&(this.lotteryIndex=t,pdkServer.lotteryRedCoinReq(t))},e.prototype._onDiamondExchangeRep=function(t){var e=t.data;e&&1==e.optype&&null==e.result&&PDKAlert.show("兑换金豆成功")},e}(PDKService);__reflect(PDKExchangeService.prototype,"PDKExchangeService");var PDKInviteService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loadCount=8,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._source=[],this._reqAmount=0,this._total_page=0,this._complete_amount=0},e.prototype.getData=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n="get"),e||(e={}),e.uid=pdkServer.uid,e.token=PDKUserData.instance.getItem("token"),e.limit=this._loadCount;var i=PDKGameConfig.WEB_SERVICE_URL+"/user/sharelist",o="post"==n?PDKalien.Ajax.POST:PDKalien.Ajax.GET;o.call(PDKalien.Ajax,i,e,function(e){if(PDKGameConfig.DEBUG&&console.log("get:"+e),t){var n=JSON.parse(e);n.code>0&&PDKGameConfig.DEBUG&&console.log(i,n.code,n.message),t(n)}})},e.prototype.clearInvitePlayersList=function(){this._source=[],this._reqAmount=0,this._total_page=0},e.prototype.getInvitePlayersList=function(t){var n=this;if(void 0===t&&(t=0),0==t&&(t=this._reqAmount+1),!(this._reqAmount>=t||this._reqAmount>this._total_page)){var i={page:t};this.getData(function(i){if(0==i.code){n._reqAmount=t>n._reqAmount?t:n._reqAmount;var o=i.data||[];o&&(n._complete_amount=o.total_items_finished,e.instance.source=n._source.concat(o.current_items),e.instance.total_page=o.total_page),n.dispatchEventWith(PDKEventNames.INVITE_DATA_REFRESH,!1,n._source)}},i)}},Object.defineProperty(e.prototype,"total_page",{set:function(t){this._total_page=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"complete_amount",{get:function(){return this._complete_amount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"haveMore",{get:function(){return this._haveMore},enumerable:!0,configurable:!0}),e}(PDKService);__reflect(PDKInviteService.prototype,"PDKInviteService");var PDKLoginService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loginData={uid:0,token:""},e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e,this._instance.init()),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){pdkServer.addEventListener(PDKEventNames.USER_LOGIN_RESPONSE,this._onLoginResponse,this),pdkServer.addEventListener(PDKEventNames.CONNECT_SERVER,this._onConnectToServer,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.ACCOUNT_ERROR,this._onAccountError,this)},e.prototype._openNewWindow=function(t,e,n,i){var o=null,a=(window.screen.availHeight-30-i)/2,r=(window.screen.availWidth-10-n)/2;o=window.open(t,e,"height="+i+",innerHeight="+i+",width="+n+",innerWidth="+n+",top="+a+",left="+r+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no")},e.prototype._onConnectToServer=function(t){pdkServer.login(this._loginData.uid,this._loginData.token)},e.prototype._onLoginResponse=function(t){var e=t.data;switch(e.code){case 0:this._setCanReconnect(!0),PDKGameConfig.initGameUrlsCfg(function(){PDKalien.Dispatcher.dispatch(PDKEventNames.LOGIN_SUCCESS),pdkServer.checkReconnect()});break;default:PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING),105==e.errorId?PDKToast.show(PDKalien.StringUtils.format(PDKlang.loginError[1100],PDKlang.loginError[e.errorId]+" uid  "+this._loginData.uid)):PDKToast.show(PDKalien.StringUtils.format(PDKlang.loginError[1100],PDKlang.loginError[e.errorId])),this._onAccountError(),103==e.errorId?this.doRelogin():PDKSceneLoading.setLoadingText("验证登录失败:"+e.errorId)}},e.prototype._doRedirectH5WX=function(t,e){window.top.redirectWX(t)},e.prototype.onVerifyResponse=function(t){if(t)if(console.log("onVerifyResponse====>",t.code),t.hasOwnProperty("code")){var e=t.code;if(6666==t.code){var n=t.data.unionid,i=t.data.url;return void(PDKalien.Native.instance.isNative||this._doRedirectH5WX(n,i))}if(2020==t.code)return void PDKPanelBindPhone.getInstance().show(t.data);0==e?this.tryLogin(t.data):(PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING),e>10&&PDKToast.show(PDKlang.loginError[e]+" "+JSON.stringify(t.data)),PDKSceneLoading.setLoadingText("授权失败:"+e))}else this.tryLogin(t);else PDKToast.show(PDKlang.loginError[2013]),PDKSceneLoading.setLoadingText("授权失败"),PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING)},e.prototype.tryLogin=function(t){this._loginData=t;var e=PDKUserData.instance;console.log("tryLogin-----------》",e),e.setItem("uid",this._loginData.uid),e.setItem("sk",this._loginData.sk),e.setItem("username",this._loginData.username),e.setItem("type",this._loginData.type),e.setItem("token",this._loginData.token,!0),e.setItem("bindinfo",this._loginData.bindinfo,!0),e.setItem("phone",this._loginData.phone,!0),this._loginData.sk||PDKReportor.instance.reportCodeError("sk error tryLogin"),PDKWxHelper.doWebH5ShareCfg(),PDKGameConfig.initServer(t.server),PDKSceneLoading.setLoadingText("验证登录中。。。"),pdkServer.connect()},e.prototype.doWebWXLogin=function(){var t=PDKalien.Native.instance,e=t.getUrlArg(),n=e.wx_code;if(n&&"null"!=n){var i=e.share_sk;i||(i=""),PDKSceneLoading.setLoadingText("微信授权。。。");var o=PDKalien.Native.instance,a=o.getUrlArg(),r=PDKlang["package"]+".wechat",s=null;a.unionid&&0!=a.unionid&&(s=a.unionid,r=PDKlang["package"]+".wechat.new"),PDKwebService.loginByWxFromWechat(n,i,s,r,this.onVerifyResponse.bind(this))}},e.prototype.doWebAliLogin=function(){var t=PDKalien.Native.instance,e=t.getUrlArg(),n=e.ali_code;if(n&&"null"!=n){var i=e.ali_sk;i||(i="");var o=PDKalien.Native.instance,a=o.getUrlArg(),r=null;a.unionid&&0!=a.unionid&&(r=a.unionid),PDKwebService.loginByAliH5(n,i,r,this.onVerifyResponse.bind(this))}},e.prototype.doAppWxLogin=function(){var t=this;PDKwebService.loginWXApp(function(e){t.onVerifyResponse(e)})},e.prototype._onTryConnectError=function(){PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING)},e.prototype.checkLocalToken=function(){var t=PDKUserData.instance,e=t.getItem("uid"),n=t.getItem("token");if("true"==PDKlang.debug){var i=PDKalien.localStorage.getItem("uid_token");i&&(i=i.split("|"),i.length>=2&&(e=i[0],n=i[1]))}return console.log("uid:",e,"|token:",n),n&&"null"!=n&&e?(this._loginData.uid=e,this._loginData.token=n,PDKwebService.getServer(e,function(e){0==e.code?(t.getItem("token")||PDKReportor.instance.reportCodeError("sk error checkLocalToken"),PDKGameConfig.initServer(e.data),pdkServer.connect()):PDKSceneLoading.setLoadingText("获取服务器地址错误")}),!0):!1},e.prototype._clearToken=function(){this._loginData.token=null;var t=PDKUserData.instance;t.setItem("token","null",!0)},e.prototype._setCanReconnect=function(t){this._bCanReconnect=t},e.prototype._onAccountError=function(){this._clearToken(),PDKMainLogic.instance.stop()},e.prototype.doRelogin=function(){this._setCanReconnect(!1),this._clearToken(),PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_MOSTTOP_TIP),PDKalien.Native.instance.isWXMP?window.top.reqWXCode():PDKMainLogic.instance.showLogin()},e.prototype.doReconnect=function(){this._bCanReconnect&&(this.checkLocalToken()||console.error("doReconnect===>",this._loginData))},e}(PDKService);__reflect(PDKLoginService.prototype,"PDKLoginService");var PDKMailService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loadCount=10,e._firstId=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._source=[],this._timer=new egret.Timer(6e5);var t=PDKalien.PDKEventManager.instance,e=egret.getQualifiedClassName(this);t.register(e,pdkServer,PDKEventNames.USER_MailGetReward_REP,this.onMailGetRewardResponse,this),t.register(e,this._timer,egret.TimerEvent.TIMER,this.onCheckTimer,this)},e.prototype.start=function(e){var n=this;this._source.splice(0),this._unreadCount=0,this._unreadEndPos=0,this._haveMore=!0,this.getMailList(),PDKalien.PDKEventManager.instance.enable(egret.getQualifiedClassName(this)),this._timer.reset(),this._timer.start(),egret.setTimeout(function(){n.getUnreadCount(),n.checkMail()},this,3e3),t.prototype.start.call(this,e)},e.prototype.stop=function(){PDKalien.PDKEventManager.instance.disable(egret.getQualifiedClassName(this)),this._timer.stop()},e.prototype.onCheckTimer=function(t){void 0===t&&(t=null),this.checkMail()},e.prototype.callMailApi=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i="get"),n=n||{},n.uid=pdkServer.uid,PDKwebService.callApi("msg",t,e,n,i)},e.prototype.checkMail=function(){var t=this;this.callMailApi("checkmail",function(e){0==e.code&&(t._unreadCount=parseInt(e.data.unread_count),t.updateUnreadCount(),t.getMailList(1))})},e.prototype.getUnreadCount=function(){var t=this;this.callMailApi("count",function(e){0==e.code&&(t._unreadCount=parseInt(e.data.count),t.updateUnreadCount())},{})},e.prototype.getMailList=function(t){var e=this;void 0===t&&(t=0);var n={limit:this._loadCount,type:t};this.callMailApi("index",function(t){if(0==t.code){var n=t.data||[],i=n.length;i>0&&(e._lastId=n[i-1].id,n.forEach(function(t){t.id>e._firstId&&(e._firstId=t.id),e.addItem(t)})),e._haveMore=i>=e._loadCount,e.dispatchEventWith(PDKEventNames.MAIL_LIST_REFRESH,!1,{list:e._source})}},n)},e.prototype.checkUserBack=function(){for(var t=0;t<this._source.length;++t)if(4==this._source[t].type){0==this._source[t].status&&PDKPanelMail.getInstance().tipOpenMailItem(this._source[t]);break}},e.prototype.openMail=function(t){var e=this;this.callMailApi("update",function(n){if(0==n.code){e.updateUnreadCount(-1);var i,o=-1;e._source.some(function(e,n){return e.id==t?(i=e,o=n,!0):void 0}),i&&(e._unreadEndPos--,e._source.splice(o,1),i.status=1,e.addItem(i,!0),e.dispatchEventWith(PDKEventNames.MAIL_LIST_REFRESH,!1))}},{id:t,status:1},"post")},e.prototype.getReward=function(t){pdkServer.reqMailGetRew(t)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.addItem=function(t,e){void 0===e&&(e=!1),t.sendtime=parseInt(t.sendtime),t.id=parseInt(t.id),t.type=parseInt(t.type),t.status=parseInt(t.status),"string"==typeof t.attachment&&(t.attachment=PDKUtils.parseGoodsString(t.attachment)),0==t.status?(this._source.splice(this._unreadEndPos,0,t),this._unreadEndPos++):e?this._source.splice(this._unreadEndPos,0,t):this._source.push(t)},e.prototype.onMailGetRewardResponse=function(t){var e=t.data;if(0==e.result){PDKToast.show("领取成功！");var n,i=-1;this._source.some(function(t,o){return t.id==e.id?(n=t,i=o,!0):void 0}),n&&(this._source.splice(i,1),n.status=2,this.addItem(n,!0),this.dispatchEventWith(PDKEventNames.MAIL_LIST_REFRESH,!1),PDKBagService.instance.refreshBagInfo(),PDKPanelMailDetails.getInstance().close())}else PDKToast.show("领取失败！")},e.prototype.updateUnreadCount=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0),this._unreadCount+=t,e&&(this.dispatchEventWith(PDKEventNames.MAIL_UNREAD_UPDATE,!1,{count:this._unreadCount}),this._unreadCount>0&&this.checkUserBack())},Object.defineProperty(e.prototype,"unreadCount",{get:function(){return this._unreadCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"haveMore",{get:function(){return this._haveMore},enumerable:!0,configurable:!0}),e}(PDKService);__reflect(PDKMailService.prototype,"PDKMailService");var PDKSoundManager=PDKalien.PDKSoundManager,PDKMatchService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._checkCount=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPlayerCount",{get:function(){return this._nextPlayerCount},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.myUserInfoData=PDKMainLogic.instance.selfData,this._watchedRooms=[],this._matchTopNotify=PDKalien.PDKUtils.parseColorTextFlow(PDKlang.match_top_notify),pdkServer.addEventListener(PDKEventNames.USER_MATCH_SING_UP_REP,this.onMatchSignUpRep,this),pdkServer.addEventListener(PDKEventNames.USER_MATCH_START_NTF,this.onMatchStartNtf,this),pdkServer.addEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),pdkServer.addEventListener(PDKEventNames.USER_GIVE_UP_MATCH_REP,this.onGiveUpMatchRep,this),pdkServer.addEventListener(PDKEventNames.GAME_GAME_START_NTF,this.onGameStart,this,!1,1e3),pdkServer.addEventListener(PDKEventNames.GAME_GAME_END,this.onGameEnd,this),pdkServer.addEventListener(PDKEventNames.GAME_LEAVE_TABLE,this.onLeaveTable,this),pdkServer.addEventListener(PDKEventNames.GAME_RECONNECT_REP,this.onReconnectRep,this)},e.prototype.start=function(e){this._playerInMatch=1e6,this._checkCount=0,this._watchedRooms.splice(0),this._timer>0&&egret.clearInterval(this._timer),this._initDefaultInfo(),this._timer=egret.setInterval(this.onTimer.bind(this),this,1e3),pdkServer.addEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),this.checkMatchStatus(),t.prototype.start.call(this,e)},e.prototype.stop=function(){t.prototype.stop.call(this),this._timer>0&&egret.clearInterval(this._timer),this._idTopNotify>0&&(egret.clearInterval(this._idTopNotify),PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_TOP_NOTIFY))},Object.defineProperty(e.prototype,"scoreGetOut",{get:function(){return this._scoreGetOut},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTurn",{get:function(){return this._currentTurn},set:function(t){this._currentTurn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPlay",{get:function(){return this._currentPlay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentMatchMode",{get:function(){return this._currentMatchMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"countPromote",{get:function(){return this._countPromote},enumerable:!0,configurable:!0}),e.prototype._showSignMatchSucc=function(t,e){var n="   "+t.name+"报名成功，请您准时参加。\n（比赛还有{2}小时{1}分钟开始，开赛前有提示）",i=pdkServer.tsNow,o=e.nextTs;n=PDKalien.TimeUtils.timeFormat(o-i,n),PDKAlert.show(n)},e.prototype.onMatchSignUpRep=function(t){var e=t.data;if(e.result>0)if(8==e.result)PDKPanelMatchSignUp.instance.close(),PDKPanelRechargeTips.instance.show();else if(16==e.result){var n=PDKGameConfig.getRoomConfigByMatchId(e.matchid);PDKAlert.show(PDKalien.StringUtils.formatApply(PDKlang.match_sign_up_result[16],[n.maxOwnGoldLimit,n.name]))}else 5==e.result||PDKAlert.show(PDKlang.match_sign_up_result[e.result]);else{PDKBagService.instance.refreshBagInfo();var n=PDKGameConfig.getRoomConfigByMatchId(e.matchid);switch(e.optype){case 1:if(n.is_signup=1,pdkServer.addEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),PDKPanelMatchSignUp.instance.close(),n.hasOwnProperty("startDate")){var i=this.addWatchRoom(n);this._showSignMatchSucc(n,i)}else PDKPanelMatchWaiting.instance.show(n);break;case 2:n.is_signup=0,n.hasOwnProperty("startDate")?(this._idTopNotify>0&&(egret.clearInterval(this._idTopNotify),PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_TOP_NOTIFY)),this.removeWatchRoom(n),PDKPanelMatchCountDown.instance.close(),PDKPanelMatchNotice.instance.close()):PDKPanelMatchWaiting.instance.close()}PDKalien.Dispatcher.dispatch(PDKEventNames.REFRESH_MATCH_LIST)}},e.prototype._initDefaultInfo=function(){this._currentMatchMode=0,this._currentTurn=0,this._currentPlay=0,this._countPromote=0,this._playerInMatch=1e6,this._nextPlayerCount=0},e.prototype.onMatchStartNtf=function(t){var e=t.data;this._initDefaultInfo();var n=PDKGameConfig.getRoomConfigByMatchId(e.matchid);n.stage.length>1&&this.updateScoreGetOut(e.matchid),PDKSceneManager.instance.currentSceneName==PDKSceneNames.PLAY&&PDKMainLogic.backToRoomScene(),pdkServer.resetSession(),n.hasOwnProperty("startDate")&&(PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_TOP_NOTIFY),PDKGameConfig.roomList.forEach(function(t){!t.hasOwnProperty("startDate")&&t.is_signup>=1&&pdkServer.giveUpMatch(t.matchId)})),PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{roomID:e.matchid},PDKalien.sceneEffect.Fade)},e.prototype.onMatchEndCheckRemoveMatchInfoNtf=function(t){PDKGameConfig.setMatchSignupFlag(t.matchid,0);PDKGameConfig.anyMatchSignuped()||pdkServer.removeEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this)},e.prototype.onMatchInfoNtf=function(t){var n=t.data,i=PDKGameConfig.getRoomConfigByMatchId(n.matchid),o=i.stage;switch(n.optype){case-1:var a=PDKGameConfig.getRoomConfigByMatchId(n.matchid);n.params&&n.params[0]&&n.params[0]>0&&PDKAlert.show("您报名的"+a.name+"因人数不足比赛取消\n报名费用"+n.params[0]+"已通过邮件退还");break;case-2:var a=PDKGameConfig.getRoomConfigByMatchId(n.matchid);a&&PDKAlert.show("您报名的"+a.name+"已更新\n请在开赛前重新登录游戏 感谢您的配合");break;case 100:if(this._currentMatchMode=n.params[0],!n.params[1]){var r=1;2==this._currentMatchMode&&(r=o[1==o.length?0:1].handCount),PDKPanelBeforeMatch.instance.show(o.length,this._currentMatchMode,r),PDKPanelMatchWaitingInner.instance.close()}break;case 101:!this._matchover&&pdkServer.isMatch&&egret.setTimeout(function(){var t=(PDKGameConfig.getRoomConfigByMatchId(n.matchid),e.instance._currentTurn+1+2);n.params.length>t&&e.instance.checkMatchWaiting(n.params[t])},this,6e3);break;case 102:this._matchover=!0,this._timerWaiting>0&&(egret.clearTimeout(this._timerWaiting),this._timerWaiting=0),PDKPanelMatchWaitingInner.instance.close();break;case 103:this._countPromote=n.params[0],this._currentTurn=n.params[1],this._currentPlay=0;break;case 104:this._playerInMatch=n.params[1],this._nextPlayerCount=n.params[2],1==this._currentMatchMode&&this.checkMatchWaiting(this._playerInMatch);break;case 105:this.updateScoreGetOut(n.matchid,n.params[0]);break;case 106:this._currentTurn=n.params[0],this._currentPlay=n.params[1],this._countPromote=n.params[2],console.log("currentTurn",this._currentTurn,"currentPlay",this._currentPlay)}this.dispatchEvent(t)},e.prototype.updateScoreGetOut=function(t,e){void 0===e&&(e=-1);var n=PDKGameConfig.getRoomConfigByMatchId(t);-1==e&&(e=n.stage[0].baseScore[0][1]);var i=n.stage[0].kickOutOdds;this._scoreGetOut=e*i,console.log("scoreGetOut :"+this._scoreGetOut)},e.prototype.onGameStart=function(t){pdkServer.isMatch&&(this._matchover=!1,this._currentPlay++)},e.prototype.onGameEnd=function(t){pdkServer.isMatch&&this.checkMatchWaiting(this._nextPlayerCount,!0)},e.prototype.onLeaveTable=function(t){pdkServer.isMatch},e.prototype.onReconnectRep=function(t){pdkServer.isMatch&&this.checkMatchWaiting()},e.prototype.checkMatchWaiting=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),!pdkServer.playing&&PDKalien.PDKSceneManager.instance.currentSceneName==PDKSceneNames.PLAY&&!this._matchover)if(console.log("checkMatchWaiting currentMatchMode:",this._currentMatchMode,e),2==this._currentMatchMode)e||PDKPanelMatchWaitingInner.instance.show(t);else if(pdkServer.roomInfo&&pdkServer.roomInfo.stage&&2==pdkServer.roomInfo.stage.length){var n=pdkServer.roomInfo.stage[1].playerIn;this._playerInMatch<=n?PDKPanelMatchWaitingInner.instance.show(n):e&&PDKPanelMatchWaitingInner.instance.show()}},e.prototype.onMatchSignUpInfoRep=function(t){var e=t.data;if(e.is_signup)this.onCheckMatchStatus(e.matchid,e.is_signup);else if(this._checkCount--,this._checkCount<=0)return this.onCheckMatchStatus(0),void pdkServer.removeEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this)},e.prototype.onPanelMatchResultClose=function(){PDKalien.PDKSceneManager.instance.currentSceneName!=PDKSceneNames.ROOM&&PDKalien.PDKSceneManager.show(PDKSceneNames.ROOM,null,PDKalien.sceneEffect.Fade,null,null,!1,PDKSceneNames.LOADING)},e.prototype.onGiveUpMatchRep=function(t){var e=t.data;0==e.result},e.prototype.checkMatchStatus=function(){var t=this;PDKGameConfig.roomList.forEach(function(e){2!=e.roomType||e.ads||(t._checkCount++,pdkServer.getMatchSignUpInfo(e.matchId))})},e.prototype.onCheckMatchStatus=function(t,e){if(void 0===e&&(e=0),t>0){var n=PDKGameConfig.getRoomConfigByMatchId(t);switch(e){case 1:if(n.hasOwnProperty("startDate"))this.addWatchRoom(n);else{var i=PDKPanelMatchWaiting.instance;i.isWaitingShow()||i.show(n)}break;case 2:this.setInMatch(),PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{roomID:t,action:"reconnect"},PDKalien.sceneEffect.Fade)}}PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING)},e.prototype.addWatchRoom=function(t){var n=e.getNextTurn(t);return this._watchedRooms.push({roomInfo:t,nextTurn:n}),n},e.prototype.removeWatchRoom=function(t){var e=this;this._watchedRooms.some(function(n,i){return n.roomInfo==t?(e._watchedRooms.splice(i,1),!0):void 0})},e.prototype.onTimer=function(){var t=this,e=[];this._watchedRooms.forEach(function(n,i){var o=n.nextTurn.nextTs-pdkServer.tsNow;0>=o&&e.push(i),30>=o&&(n.notifyWhen30||(n.notifyWhen30=!0,PDKPanelMatchNotice.instance.show(n.roomInfo,o),PDKSoundManager.instance.vibrate())),300>=o&&(n.notifyWhen300||(n.notifyWhen300=!0,t._matchTopNotify[1].text=n.roomInfo.name,PDKCountDownService.unregister(t._idTopNotify),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_TOP_NOTIFY,{content:function(e){t._idTopNotify=PDKCountDownService.register(o,function(n){t._matchTopNotify[3].text=PDKalien.TimeUtils.timeFormat(n),e.textFlow=t._matchTopNotify})},onTap:function(){PDKCountDownService.unregister(t._idTopNotify)},showButton:!0})))}),e.forEach(function(e){t._watchedRooms.splice(e,1)})},e.prototype.signUp=function(t,e){pdkServer.matchSignUp(t.matchId,1,e)},e.prototype.cancelMatch=function(t){pdkServer.matchSignUp(t.matchId,2)},e.prototype.setInMatch=function(){pdkServer.addEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this)},e.prototype.isMatchOver=function(){return this._matchover},e.getRewardStringByRank=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=" "),this.rewardToString(this.makeRewardTextFlow(this.getRewardByRank(t,e)),n)},e.getRewardStringBy205=function(t){var e=this.getRewardByRank(t,1),n=t.rewardredcoinpool,i=0;for(var o in n)n[o][1]>=i&&(i=n[o][1]);return i/=100,"最高"+(e[0].count+i)+"奖杯"},e.makeRewardTextFlow=function(t){var e=[];return t&&t.forEach(function(t){var n=t.count;0==t.id&&(n=PDKUtils.currencyRatio(n)),1==t.id?e.push(n+"奖杯"):e.push(PDKGoodsManager.instance.getGoodsById(t.id).name+"x"+n)}),e},e.rewardToString=function(t,e){return void 0===e&&(e=" "),t.join(e)},e.getNextTurn=function(t){var e=pdkServer.tsNow,n=-1;t.cycleTimeStamp.some(function(t,i){return t>e?(n=i,!0):void 0});var i,o,a=0,r="";if(0>n){n=0;var s=pdkServer.tsToday+86400;r=PDKalien.TimeUtils.tsToMonthDayString(s),a=86400}return i=r+" "+t.cycleTime[n],o=t.cycleTimeStamp[n]+a,t.nextIndex=n,{nextTime:i,nextIndex:n,nextTs:o}},e.getRewardByRank=function(t,e){void 0===e&&(e=1);var n;return t.reward.some(function(t){return t.rankend>=e&&t.rankstart<=e?(n=PDKUtils.parseGoodsString(t.reward),!0):void 0}),n},e}(PDKService);__reflect(PDKMatchService.prototype,"PDKMatchService");var PDKMsgInfoService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selfData=PDKMainLogic.instance.selfData,e._showInfoQueen=[],e._oneChouInfo=null,e.matchChampionMsg=[],e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._matchMsgReqTimer||(this._matchMsgReqTimer=new egret.Timer(3e4),this._matchMsgReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getMatchChampion,this),this._matchMsgReqTimer.start()),this._redcoinReqTimer||(this._redcoinReqTimer=new egret.Timer(3e4),this._redcoinReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getRedCoinData,this),this._redcoinReqTimer.start()),this._announceReqTimer||(this._announceReqTimer=new egret.Timer(12e4),this._announceReqTimer.addEventListener(egret.TimerEvent.TIMER,this.getAnnouce,this),this._announceReqTimer.start()),this.getAnnouce(),this.getRedCoinData(),this.getMatchChampion()},e.prototype.deleteAnnounce=function(){this.announce=null},e.prototype.delLottery=function(){var t=this.lottery;t?this.lottery={next_id:t.next_id}:this.lottery=null},e.prototype.getData=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n="/notify/redPackets"),e||(e={});var i=PDKGameConfig.WEB_SERVICE_URL+n,o=PDKalien.Ajax.GET;o.call(PDKalien.Ajax,i,e,function(e){if(PDKGameConfig.DEBUG&&console.log("get:"+e),t){var n=JSON.parse(e);n.code>0&&PDKGameConfig.DEBUG&&console.log(i,n.code,n.message),t(n)}})},e.prototype.getRedCoinData=function(){if(!(this._showInfoQueen&&this._showInfoQueen.length>0)){var t={};this.redcoinhttpMsgId&&(t.id=this.redcoinhttpMsgId),this.getData(function(t){if(console.log("getRedCoinData--------------->",t),0==t.code){var n=t.data||[];if(n){e.instance.redcoinhttpMsgId=n.next_id,e.instance._showInfoQueen=e.instance._showInfoQueen.concat(n.items);var i=e.instance._showInfoQueen.length;e.instance._oneChouInfo=e.instance._showInfoQueen[i-1],console.log("getRedCoinData------->",e.instance._oneChouInfo),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_PAYCHAT)}}},t)}},e.prototype.getOneChouInfoFromFront=function(t){var n=null,i=e.instance._showInfoQueen;if(t)n=i.shift();else{var o=i.length;if(o>0){i[o-1];i.splice(o-1,1)}}return n},e.prototype.getOneChouMaxInfo=function(){return e.instance._oneChouInfo},e.prototype.getMatchChampion=function(){if(!(this.matchChampionMsg&&this.matchChampionMsg.length>0)){var t={};this.matchhttpMsgId&&(t.id=this.matchhttpMsgId),this.getData(function(t){if(0==t.code){var n=t.data||[];n&&(e.instance.matchhttpMsgId=n.next_id||0,e.instance.matchChampionMsg=e.instance.matchChampionMsg.concat(n.items),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_PAYCHAT))}},t,"/notify/matchChampionMsg")}},e.prototype.getAnnouce=function(){var t={};this.getData(function(t){0==t.code&&(e.instance.announce=t.data,e.instance.announce&&e.instance.announce.length>0&&(PDKMainLogic.instance.selfData.addSysTalkRec(e.instance.announce),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_ANNOUNCE)))},t,"/msg/notice")},e.prototype.getLottery=function(){var t=this,e={};this.lottery&&(e.id=this.lottery.next_id),this.getData(function(e){0==e.code&&(t.lottery=e.data,t.lottery&&t.lottery.nickname&&PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_LOTTERY))},e,"/lottery/roll")},e}(PDKService);__reflect(PDKMsgInfoService.prototype,"PDKMsgInfoService");var PDKPersonalGameHistory=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loadCount=8,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this._source=[],this._reqAmount=0,this._total_page=0},e.prototype.getData=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n="get"),e||(e={}),e.uid=pdkServer.uid,e.token=PDKUserData.instance.getItem("token"),e.limit=this._loadCount;var i=PDKGameConfig.WEB_SERVICE_URL+"/user/gamelist",o="post"==n?PDKalien.Ajax.POST:PDKalien.Ajax.GET;o.call(PDKalien.Ajax,i,e,function(e){if(PDKGameConfig.DEBUG&&console.log("get:"+e),t&&e){var n=JSON.parse(e);n.code>0&&PDKGameConfig.DEBUG&&console.log(i,n.code,n.message),t(n)}})},e.prototype.clearDataList=function(){this._source=[],this._reqAmount=0,this._total_page=0},e.prototype.getDataList=function(t){var n=this;if(void 0===t&&(t=0),0==t&&(t=this._reqAmount+1),!(this._reqAmount>=t||this._reqAmount>this._total_page)){var i={page:t};this.getData(function(i){if(0==i.code){e.instance.reqAmount=t>e.instance.reqAmount?t:e.instance.reqAmount;var o=i.data||[];o&&o.items&&o.items.length>0&&(e.instance.source=n._source.concat(o.items),e.instance.total_page=o.total_page),n.dispatchEventWith(PDKEventNames.PGAME_RECORD_DATA_REFRESH,!1,n._source)}},i)}},Object.defineProperty(e.prototype,"reqAmount",{get:function(){return this._reqAmount},set:function(t){this._reqAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total_page",{set:function(t){this._total_page=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source
},set:function(t){this._source=t},enumerable:!0,configurable:!0}),e}(PDKService);__reflect(PDKPersonalGameHistory.prototype,"PDKPersonalGameHistory");var PDKRechargeService=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isWaitTipShowing=!1,e._rechargeTit=(n={},n[10047]="初级场复活礼包",n[10048]="中级场复活礼包",n[10049]="高级场复活礼包",n[10052]="中级场复活礼包",n[10053]="高级场复活礼包",n),e;var n}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){pdkServer.addEventListener(PDKEventNames.USER_RECHARGE_RESULT_NOTIFY,this.onRechargeResultNotify,this)},e.prototype.onRechargeResultNotify=function(t){var e=t.data;if(0==e.result){var n=e.productid;this._rechargeTit[n]&&PDKAlert.show("购买"+this._rechargeTit[n]+"成功!")}},e.prototype.doRecharge=function(t){PDKwebService.rechagre(t)},e}(PDKService);__reflect(PDKRechargeService.prototype,"PDKRechargeService");var PDKWebService=function(){function t(){this.loadLogStartId="",this.reportUser=function(t,e,n,i,o,a,r,s){void 0===s&&(s=null),this.callApi("game","impeach",r,{token:t,uid:e,type:n,roomid:i,tableid:o,touid:a,content:s})}}return t.prototype.register=function(t,e,n,i){this.callApi("index","sign",function(t){i(t)},{username:t,nickname:e,password:n})},t.prototype.login=function(t,e,n){this.callApi("index","login",function(t){n(t.data)},{username:t,password:e})},t.prototype.fastLogin=function(t){this.callApi("index","guest",function(e){t(e.data)},{device:this.uuid})},t.prototype.doLoginWebCheck=function(t,e,n,i,o){var a=0;PDKalien.Native.instance.isNative&&(a=1),this.callApi("index","login",function(t){o(t)},{type:1,"package":i,unionid:n,code:t,sk:e,os:a},"post")},t.prototype.loginWXApp=function(t){var e=PDKalien.Native.instance,n=this;e.call("loginByWechat",null,function(e){var i=JSON.parse(e);console.log("doAppWxLogin==cb=》",i.code,i.wxCode),i&&0==i.code&&i.wxCode&&n.doLoginWebCheck(i.wxCode,null,null,PDKlang["package"],t)})},t.prototype.loginByPhone=function(t,e,n,i,o){var a=this;a.callApi("index","login",function(t){o(t)},{type:2,unid:n,sk:i,phone:t,code:e},"post")},t.prototype.loginByWxFromWechat=function(t,e,n,i,o){this.doLoginWebCheck(t,e,n,i,o)},t.prototype.loginByAliH5=function(t,e,n,i){this.callApi("index","login",function(t){i(t)},{type:3,unionid:n,code:t,sk:e},"post")},t.prototype.bindByWx=function(t,e){this.callApi("user","bindByUid",function(t){e(t)},{type:1,"package":PDKlang["package"]+".web",wxcode:t,uid:PDKMainLogic.instance.selfData.uid},"post")},t.prototype.checkAppUpdate=function(t){var e=PDKGameConfig.RESOURCE_URL+"appVerCheck.php",n=egret.Capabilities.os,i=null,o=null,a=PDKalien.Native.instance;a.getAppChannelId(function(r){i=r,a.getAppVerCode(function(r){o=r,console.log("checkAppUpdate=====>",i,o),PDKalien.Ajax.POST(e,{platform:n,channel:""+i,id:"com.tangyou.doudizhu"},function(e){if(console.log("appVerCheck=1=>",e),e){var i=JSON.parse(e),r=i.data;if(r.cleanTmp=!0,r.shouldInstall=!1,console.log("appVerCheck=2=>code:",i.code,"version:",r.version),0==i.code&&r.version>o){if("Android"==n){var s=a.getAndroidLocalVercode(),h=a.getAndroidDownState();console.log("_downVerCode",s,"_downState======",h),s&&0!=s&&s==r.version&&(r.cleanTmp=!1,2==h&&(r.shouldInstall=!0))}return void t(!0,r)}}t(!1,null,null)})})})},t.prototype._callWXPay=function(t){var e=PDKalien.Native.instance;e.isWXMP?e.rechargeInWXMP(t.data):e.isNative?e.rechageWXApp(t.data):e.rechargeWXH5(t.data)},t.prototype._callAliPay=function(t){var e=PDKalien.Native.instance;e.isAli()?e.rechargeAliH5(t.data):e.isNative?e.rechargeAliApp(t.data):e.rechargeAliH5(t.data)},t.prototype._onWebPayOrderCallBack=function(t,e){PDKalien.Native.instance;0==e.code?"wx"==t?this._callWXPay(e):"ali"==t&&this._callAliPay(e):7005==e.code?PDKAlert.show("您已参加过此活动,感谢您的支持!"):7006==e.code?PDKMainLogic.instance.rechareErrByServerUpdate():50003==e.code?PDKAlert.show("您的充值金额已达每日上限!"):PDKAlert.show("支付失败,错误码:"+e.code)},t.prototype.getRechargeCfgByAli=function(t){var e="PAGEAPI",n=this,i=PDKalien.Native.instance;i.isNative&&(e="APP"),this.callApi("shop","alipayOrder",function(t){n._onWebPayOrderCallBack("ali",t)},{product_id:t,os:1,uid:PDKMainLogic.instance.selfData.uid,type:PDKGameConfig.SERVER_URL_TAIL,trade_type:e},"post")},t.prototype.getRechargeCfgByWX=function(t){var e="h5",n=this,i=PDKalien.Native.instance;i.isNative?e="APP":i.isWXMP||i.isAli()||(e="MWEB"),this.callApi("shop","wechatpayOrder",function(t){n._onWebPayOrderCallBack("wx",t)},{product_id:t,os:1,uid:PDKMainLogic.instance.selfData.uid,type:PDKGameConfig.SERVER_URL_TAIL,trade_type:e},"post")},t.prototype.rechagre=function(t){var e=PDKalien.Native.instance;e.isWXMP?this.getRechargeCfgByWX(t):e.isAli()?this.getRechargeCfgByAli(t):(this.getRechargeCfgByAli(t),console.log("未选择支付渠道,当前运行的渠道为:",e.getChannelName(),"|是APP版本:",e.isNative))},t.prototype.buyCardsRecorder=function(t){this.rechagre(t)},t.prototype.getWxConfig=function(t){this.callApi("wechat","jsConfig",function(e){0==e.code&&t(e.data)},{url:encodeURIComponent(window.top.location.href)},"post")},t.prototype.loadLog=function(t,e){if(!PDKalien.Native.instance.isNative){if(1==t&&this.isLogType1Send)return;if(2==t&&this.isLogType2Send)return;var n=(new Date).valueOf(),i=PDKalien.localStorage.getItem("is_first",PDKGameConfig.platform);i=null==i?"1":i;var o=Number(i);1==e&&(this.loadLogStartId="");md5(PDKwebService.uuid+t+e+n+"!@#HTGames$%^");1==o&&2==t&&0==e&&PDKalien.localStorage.setItem("is_first","0",PDKGameConfig.platform),1==t&&0==e&&(this.isLogType1Send=!0),2==t&&0==e&&(this.isLogType2Send=!0)}},t.prototype.bindPhone=function(t,e,n,i,o){this.callApi("index","login",function(t){o(t.code)},{phone:t,code:e,sk:i,unid:n,type:2})},t.prototype.bindPhoneNew=function(t,e,n,i,o){this.callApi("index","bindMobile",function(t){o(t.code)},{phone:t,code:e,token:i,uid:n})},t.prototype.getCode=function(t,e){this.callApi("user","getYunCode",function(t){e(t.code)},{phone:t},"get")},t.prototype.getExChangeHistory=function(t,e,n,i){this.callApi("user","bind",function(t){i(t.code)},{phone:t,code:e,password:n,device_id:PDKwebService.uuid})},t.prototype.getRedcoinHistory=function(t,e){this.callApi("coin","index",function(t){e(t)},{uid:t},"get")},t.prototype.getWatchPublicWX=function(t,e){this.callApi("user","getUserInfo",function(t){e(t)},{uid:t},"post")},t.prototype.getServer=function(t,e){this.callApi("user","server",function(t){e(t)},{uid:t},"post")},t.prototype.getShareAddr=function(t,e){this.callApi("share","index",function(t){e(t)},{uid:t},"get")},t.prototype.callApi=function(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o="post"),i||(i={}),i.pf=PDKalien.Native.instance.platformId;var a=PDKGameConfig.WEB_SERVICE_URL+t+"/"+e,r="post"==o?PDKalien.Ajax.POST:PDKalien.Ajax.GET;r.call(PDKalien.Ajax,a,i,function(t){if(PDKGameConfig.DEBUG&&console.log("get:"+t),n){var e=JSON.parse(t);if(e.code>0&&(PDKGameConfig.DEBUG&&console.log(a,e.code,e.message),500==e.code))return void PDKAlert.show("服务器维护中,预计2018年1月3日02:00:00维护完成",0,function(){PDKMainLogic.instance.closeSelf()});n(e)}})},t.prototype.postError=function(t,e){var n="";PDKMainLogic.instance.selfData&&(n=PDKMainLogic.instance.selfData.nickname),n?n+=" #$% ":n="",PDKalien.Ajax.POST(PDKGameConfig.WEB_SERVICE_URL+"/load/error",{uuid:this.uuid,type:t,body:n+e})},t.prototype.getHornRec=function(t){PDKalien.Ajax.GET(PDKGameConfig.WEB_SERVICE_URL+"/msg/chatmsg",{},function(e){if(t){var n=JSON.parse(e);0==n.code&&t(n.data)}})},t.prototype.postLoginStep=function(t,e){void 0===e&&(e="")},t.prototype.getExHistory=function(t,e){var n=PDKUserData.instance.getItem("token");PDKalien.Ajax.POST(PDKGameConfig.WEB_SERVICE_URL+"/wechat/redcoin",{uid:pdkServer.uid,token:n,page:t},function(t){var n=JSON.parse(t);e(n)})},t.prototype.goRechageFei=function(t,e){PDKalien.Ajax.POST(PDKGameConfig.WEB_SERVICE_URL+"/mobile/onlineorder",t,function(t){var n=JSON.parse(t);e(n)})},t.prototype.getGameUrlsCfg=function(t){var e=PDKUserData.instance,n=e.getItem("uid"),i=e.getItem("token");PDKalien.Ajax.GET(PDKGameConfig.WEB_SERVICE_URL+"activity/gameurl",{uid:n,token:i},function(e){var n=JSON.parse(e);0==n.code&&t(n.data)})},t}();__reflect(PDKWebService.prototype,"PDKWebService");var PDKwebService=new PDKWebService,PDKBrowData=function(){function t(){this._browsEnable={},this.init()}return t.prototype.init=function(){for(var e=t.BrowID.BROW_MIN;e<=t.BrowID.BROW_MAX;++e)this._browsEnable[e]={enable:!0}},t.prototype.checkCanBuyByBrowId=function(t){return this._browsEnable[t]?this._browsEnable[t].enable:!1},t.prototype.startCDByBrowId=function(t){var e=this;this._browsEnable[t]&&(this._browsEnable[t].enable=!1,egret.setTimeout(function(){e._browsEnable[t].enable=!0},this,200))},t.prototype.getBrowCostGold=function(t){var e=PDKGameConfig.getBrowCfgById(t);return e?e.price:null},t.getBrowAniDataById=function(e){if(!t.brows[e])return null;var n=t.brows[e].json,i=t.brows[e].png,o=t.brows[e].actName;return{json:n,png:i,actName:o}},t.createBrowMCById=function(e){var n=t.getBrowAniDataById(e);if(!n)return null;var i=RES.getRes(n.json),o=RES.getRes(n.png),a=new egret.MovieClipDataFactory(i,o),r=new egret.MovieClip(a.generateMovieClipData(n.actName));return r},t.isNeedXMoveById=function(e){return t.brows[e].xMove},t.getBrowAniWHById=function(e){var n=t.brows[e].width,i=t.brows[e].height;return{width:n,height:i}},t.getBrowAniLastStayById=function(e){return t.brows[e].fStay},t.BrowID={BROW_MIN:1,BROW_666:1,BROW_TORTISE:2,BROW_TOMATO:3,BROW_LOVE:4,BROW_GOOD:5,BROW_MAX:5},t.brows=(_a={},_a[t.BrowID.BROW_666]={json:"pdk_brow666Ani_json",png:"pdk_brow666Ani_png",actName:"brow666",xMove:!1,width:260,height:260},_a[t.BrowID.BROW_TORTISE]={json:"pdk_browTortiseAni_json",png:"pdk_browTortiseAni_png",actName:"browTortise",xMove:!1,width:170,height:118},_a[t.BrowID.BROW_TOMATO]={json:"pdk_browTomatoAni_json",png:"pdk_browTomatoAni_png",actName:"browTomato",xMove:!1,width:230,height:220,fStay:.4},_a[t.BrowID.BROW_LOVE]={json:"pdk_browLoveAni_json",png:"pdk_browLoveAni_png",actName:"browLove",xMove:!1,width:194,height:200},_a[t.BrowID.BROW_GOOD]={json:"pdk_browGoodAni_json",png:"pdk_browGoodAni_png",actName:"browGood",xMove:!0,width:208,height:330},_a),t}();__reflect(PDKBrowData.prototype,"PDKBrowData");var _a,PDKalien;!function(t){var e=function(){function t(){}return t.init=function(t){this.ID=t},t.getName=function(t,e){return void 0===e&&(e=null),(e||!this.ID||""==this.ID?e:this.ID)+"_"+t},t.getItem=function(t,e){return void 0===e&&(e=null),egret.localStorage.getItem(this.getName(t,e))},t.setItem=function(t,e,n){return void 0===n&&(n=null),egret.localStorage.setItem(this.getName(t,n),e)},t.getItemObj=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i;try{i=JSON.parse(this.getItem(t,n))}catch(o){}return i||(i=e),i},t.setItemObj=function(t,e,n){return void 0===n&&(n=null),this.setItem(t,JSON.stringify(e),n)},t.ID="",t}();t.localStorage=e,__reflect(e.prototype,"PDKalien.localStorage")}(PDKalien||(PDKalien={}));var PDKDebugHelper=function(){function t(){}return t.isAdmin=function(){return"seacole"==PDKMainLogic.instance.selfData.nickname.substr(0,7)?!0:!1},t}();__reflect(PDKDebugHelper.prototype,"PDKDebugHelper");var PDKErrorConfig=function(){function t(){}return t.BMG_LOAD_ERROR="BMG_LOAD_ERROR",t.CONFIG_LOAD_ERROR="CONFIG_LOAD_ERROR",t.RESOURCE_LOAD_ERROR="RESOURCE_LOAD_ERROR",t.REPORT_ERROR="REPORT_ERROR",t}();__reflect(PDKErrorConfig.prototype,"PDKErrorConfig");var PDKEventNames=function(){function t(){}return t.PGAME_RECORD_DATA_REFRESH="personalGameRecordDataRefresh",t.INVITE_DATA_REFRESH="inviteDataRefresh",t.LOADING_PROGRESS="loadingProgress",t.BUTTON_BAR_TAP="buttonBarTap",t.CLOCK_0="clock0",t.SELECT_CHAT="selectChat",t.SELECT_CARDS="selectCards",t.TAP_SEAT="tapSeat",t.LOG="log",t.CONTINUE_PLAY="continuePlay",t.SHOW_DISCONNECT="showDisconnect",t.HIDE_DISCONNECT="hideDisconnect",t.SHOW_WAITING="showWaiting",t.HIDE_WAITING="hideWaiting",t.SHOW_GAME_EFFECT="showGameEffect",t.SHOW_TOAST="showToast",t.SHOW_PAYCHAT="showPayChat",t.SHOW_ANNOUNCE="showAnnounce",t.HIDE_ANNOUNCE="hideAnnounce",t.SHOW_TOP_NOTIFY="showTopNotify",t.HIDE_TOP_NOTIFY="hideTopNotify",t.SHOW_LOTTERY="showLottery",t.HIDE_LOTTERY="hideLottery",t.MY_USER_INFO_UPDATE="myUserInfoUpdate",t.REFRESH_MATCH_LIST="refreshMatchList",t.MATCH_CD_NOTIFICATION="matchCDNotification",t.BAG_INFO_REFRESH="bagInfoRefresh",t.BAG_COUNT_CHANGE="bagCountChange",t.MAIL_LIST_REFRESH="mailListRefresh",t.MAIL_UNREAD_UPDATE="mailUnOpenUpdate",t.MISSION_LIST_REFRESH="missionListRefresh",t.GOLD_UPDATE="goldUpdate",t.GOLD_RAIN_EFFECT="goldRainEffect",t.WX_SHARE="wxShare",t.CONNECT_SERVER="connectToServer",t.SERVER_CLOSE="serverClose",t.SERVER_ERROR="serverError",t.LOGIN_SUCCESS="LOGIN_SUCCESS",t.FRIEND_REQ_CHAGNE="FRIEND_REQ_CHAGNE",t.FRIEND_SEND_CHAGNE="FRIEND_SEND_CHAGNE",t.ENTER_BACKGROUND="enterBackground",t.USER_FRREWARD_GET_SUCC="USER_FRREWARD_GET_SUCC",t.USER_DTREWARD_GET_SUCC="USER_DTREWARD_GET_SUCC",t.ACT_RED_CHANGE="ACT_RED_CHANGE",t.USER_SHARE_RESULT="USER_SHARE_RESULT",t.USER_RED_COUNT_CHANGE="USER_RED_COUNT_CHANGE",t.HORN_TALK_RECORDS_CHANGE="HORN_TALK_RECORDS_CHANGE",t.CENTER_ROOM_HORN_POS="CENTER_ROOM_HORN_POS",t.NATIONAL_INFO_CHANGE="NATIONAL_INFO_CHANGE",t.TO_NORMAL_MATCH="TO_NORMAL_MATCH",t.CLOSE_REVIVE_PANEL="CLOSE_REVIVE_PANEL",t.BUY_REVIVE_SUCC="BUY_REVIVE_SUCC",t.ACCOUNT_ERROR="ACCOUNT_ERROR",t.HIDE_MOSTTOP_TIP="HIDE_MOSTTOP_TIP",t.RECV_SOCKET_DATA="RECV_SOCKET_DATA",t.START_OTHER_GAME="START_OTHER_GAME",t.SERVER_HASUPDATE="SERVER_HASUPDATE",t.FRECHARGE_HASUPDATE="FRECHARGE_HASUPDATE",t.LOGINAPP_HASUPDATE="LOGINAPP_HASUPDATE",t.GET_CARDS_RECORDER_REWARD_REQ="user.GetCardsRecorderRewardReq",t.GET_FRESHMAN_REWARD_REQ="user.GetFreshManRewardReq",t.GET_FRESHMAN_REWARD_REP="user.GetFreshManRewardRep",t.CREATE_PERSONAL_GAME_REQ="user.CreatePersonalGameReq",t.CREATE_PERSONAL_GAME_REP="user.CreatePersonalGameRep",t.JOIN_PGAME_REQ="user.JoinPGameReq",t.JOIN_PGAME_REP="user.JoinPGameRep",t.START_PGAME_REQ="user.StartPGameReq",t.START_PGAME_REP="user.StartPGameRep",t.QUERY_ROOMINFO_REQ="user.QueryRoomInfoReq",t.QUERY_ROOMINFO_REP="user.QueryRoomInfoRep",t.QUIT_PGAME_REQ="user.QuitPGameReq",t.QUIT_PGAME_REP="user.QuitRoomRep",t.GAME_DISSOLVE="user.GameDissolve",t.RECONNECT_PGAME_REQ="user.ReconnectPGameReq",t.RECONNECT_PGAME_REP="user.ReconnectPGameRep",t.USER_QUICK_JOIN_REQUEST="user.QuickJoinRequest",t.USER_QUICK_JOIN_RESPONSE="user.QuickJoinResonpse",t.USER_USER_INFO_REQUEST="user.UserInfoRequest",t.USER_USER_INFO_RESPONSE="user.UserInfoResonpse",t.USER_CHECK_RECONNECT_REQ="user.CheckReconnectReq",t.USER_CHECK_RECONNECT_REP="user.CheckReconnectRep",t.USER_RECONNECT_TABLE_REQ="user.ReconnectTableReq",t.USER_RECONNECT_TABLE_REP="user.ReconnectTableRep",t.USER_LOGIN_RESPONSE="user.loginResponse",t.USER_PLAYERS_AMOUNT_REQ="user.PlayersAmountReq",t.USER_PLAYERS_AMOUNT_REP="user.PlayersAmountRep",t.USER_MODIFY_USER_INFO_REQ="user.ModifyUserInfoReq",t.USER_MODIFY_USER_INFO_REP="user.ModifyUserInfoRep",t.USER_REDCOIN_RANKING_LIST_REQ="user.RedcoinRankingListReq",t.USER_REDCOIN_RANKING_LIST_REP="user.RedcoinRankingListRep",t.USER_OPERATE_REP="user.OperateRep",t.USER_OPERATE_REQ="user.OperateReq",t.USER_DAY_SIGN_IN_REQ="user.DaySigninOptReq",t.USER_DAY_SIGN_IN_REP="user.DaySigninOptRep",t.USER_NOTIFY_KICK_OUT="user.NotifyKickout",t.USER_MATCH_SING_UP_INFO_REQ="user.MatchSignupInfoReq",t.USER_MATCH_SING_UP_INFO_REP="user.MatchSignupInfoRep",t.USER_MATCH_SING_UP_REQ="user.MatchSignupReq",t.USER_MATCH_SING_UP_REP="user.MatchSignupRep",t.USER_MATCH_START_NTF="user.MatchStartNtf",t.USER_MATCH_INFO_NTF="user.MatchInfoNtf",t.USER_ENTER_MATCH_REQ="user.EnterMatchReq",t.USER_ENTER_MATCH_REP="user.EnterMatchRep",t.USER_RED_PACKET_ANNOUNCE="user.RedPacketAnnounce",t.USER_BAG_INFO_REQ="user.BagInfoReq",t.USER_BAG_INFO_REP="user.BagInfoRep",t.USER_GIVE_UP_MATCH_REQ="user.GiveupMatchReq",t.USER_GIVE_UP_MATCH_REP="user.GiveupMatchRep",t.USER_ALMS_REQ="user.AlmsReq",t.USER_ALMS_REP="user.AlmsRep",t.USER_RECHARGE_RESULT_NOTIFY="user.RechargeResultNotify",t.USER_REDCOIN_EXCHANGE_GOODS_REQ="user.RedcoinExchangeGoodsReq",t.USER_REDCOIN_EXCHANGE_GOODS_REP="user.RedcoinExchangeGoodsRep",t.USER_LOTTERY_RED_COIN_REQ="user.LotteryRedcoinReq",t.USER_LOTTERY_RED_COIN_REP="user.LotteryRedcoinRep",t.USER_PAY_TO_CHAT_REQ="user.Pay2chatReq",t.USER_PAY_TO_CHAT_REP="user.Pay2chatRep",t.USER_FRESH_MAN_REDCOIN_LOTTERY_CHANCEGOT="user.FreshManRedcoinLotteryChanceGot",t.USER_GET_TASKREW_REQ="user.GetDayTaskRewardReq",t.USER_GET_TASKREW_REP="user.GetDayTaskRewardRep",t.USER_GET_FRREWARD_REQ="user.GetFirstRechargeRewardReq",t.USER_GET_FRREWARD_REP="user.GetFirstRechargeRewardRep",t.USER_GET_REWARD_REQ="user.GetRewardReq",t.USER_GET_REWARD_REP="user.GetRewardRep",t.USER_GET_ACTInfo_REQ="user.GetActivityInfoReq",t.USER_GET_ACTInfo_REP="user.GetActivityInfoRep",t.USER_DiamondGame_REQ="user.DiamondGameReq",t.USER_DiamondGame_REP="user.DiamondGameRep",t.USER_MailList_REP="user.MailListRep",t.USER_MailModify_REP="user.MailModifyRep",t.USER_MailUnread_REP="user.MailUnreadRep",t.USER_MailOperate_REQ="user.MailReq",t.USER_MailGetReward_REP="user.MailGetRewardRep",t.QUIT_WAITING_QUEUE_REQ="user.QuitWaitingQueueReq",t.USER_MatchOperate_REQ="user.MatchOperateReq",t.USER_MatchOperate_REP="user.MatchOperateRep",t.GAME_RECONNECT_REP="game.ReconnectRep",t.GAME_USER_ONLINE="game.UserOnline",t.GAME_USER_INFO_IN_GAME_REQ="game.UserInfoInGameReq",t.GAME_USER_INFO_IN_GAME_REP="game.UserInfoInGameRep",t.GAME_SET_SESSION="game.SetSession",t.GAME_GAME_START_NTF="game.GameStartNtf",t.GAME_SET_CARDS="game.SetCards",t.GAME_ADD_CARD="game.AddCard",t.GAME_UPDATE_GAME_INFO="game.UpdateGameInfo",t.GAME_ASK_MASTER="game.AskMaster",t.GAME_ANSWER_MASTER="game.AnswerMaster",t.GAME_SET_SCORE="game.SetScore",t.GAME_SHOW_CARD="game.ShowCard",t.GAME_ASK_PLAY_CARD="game.AskPlayCard",t.GAME_USE_CARD_NTF="game.UseCardNtf",t.GAME_TALK_NTF="game.TalkNtf",t.GAME_OPERATE_REQ="game.OperateReq",t.GAME_OPERATE_REP="game.OperateRep",t.GAME_GAME_END="game.GameEnd",t.GAME_ENTER_TABLE="game.EnterTable",t.GAME_LEAVE_TABLE="game.LeaveTable",t.GAME_TABLE_INFO="game.TableInfo",t.GAME_GIVE_UP_GAME_REQ="game.GiveUpGameReq",t.GAME_GIVE_UP_GAME_REP="game.GiveUpGameRep",t.GAME_ASK_READY="game.AskReady",t.GAME_GET_READY_REQ="game.GetReadyReq",t.GAME_GET_READY_REP="game.GetReadyRep",t.GAME_USER_OFFLINE="game.UserOffline",t.GAME_CTS_PDK_READY="game.CTSGPdkReady",t.GAME_STC_PDK_READY="game.STCGPdkReady",t.GAME_STC_PDK_GIVECARDS="game.STCGPdkGiveCards",t.GAME_CTS_PDK_OUTCARD="game.CTSGPdkOutCard",t.GAME_STC_PDK_OUTCARD="game.STCGPdkOutCard",t.GAME_STC_PDK_END="game.STCGPdkEnd",t.GAME_CTS_PDK_CARD_HOLDER="game.CTSPdkCardHolder",t.GAME_STC_PDK_CARD_HOLDER="game.STCPdkCardHolder",t.GAME_STC_PDK_RECONNECT="game.STCPdkReconnect",t}();__reflect(PDKEventNames.prototype,"PDKEventNames");var PDKGameConfig=function(){function t(){}return t.getRoomConfigById=function(t){var e;return this.roomList.forEach(function(n){return n.roomID==t?(e=n,!0):void 0}),e},t.getSuitableRoomConfig=function(t,e){void 0===e&&(e=1);for(var n=0;n<this.roomList.length;++n){var i=this.roomList[n];if(1==i.roomType&&i.roomFlag==e&&i.maxScore>t&&i.minScore<=t)return i}return null},t.getRoomConfigByMatchId=function(t){for(var e=0;e<this.roomList.length;++e)if(this.roomList[e].matchId==t)return this.roomList[e]},t.setMatchSignupFlag=function(t,e){this.roomList.forEach(function(n){n.matchId==t&&(n.is_signup=e)})},t.anyMatchSignuped=function(){for(var t=0;t<this.roomList.length;++t)if(this.roomList[t].is_signup>0)return!0;return!1},t.getRoomConfig=function(t){var e=this.getRoomConfigById(t);return e||(e=this.getRoomConfigByMatchId(t)),e},t.getMatchConfigById=function(t){for(var e in this.matchConfig)if(parseInt(e)==t)return this.matchConfig[e]},t.init=function(){PDKlang=new PDKLanguage(RES.getRes("pdklang")),this.CARD_WIDTH*=this.CARD_SCALE,this.CARD_HEIGHT*=this.CARD_SCALE,this.CARD_GAP_H*=this.CARD_SCALE,this.CARD_OFFSET=this.CARD_WIDTH-this.CARD_GAP_H},t.getUrl=function(e){var n=this;PDKalien.Ajax.GET((this.DEBUG?this.RESOURCE_URL:PDKlang.config_url)+"geturl.php",{},function(i){var o=JSON.parse(i);console.log(">>>>>>>>>>"+i),n.DEBUG||(t.WEB_SERVICE_URL=o.WEB_SERVICE_URL,t.WX_LOGIN_URL=o.WX_LOGIN_URL,t.RESOURCE_URL=o.RESOURCE_URL,t.RECHARGE_URL=o.RECHARGE_URL,t.REGISTER_URL=o.REGISTER_URL,t.PASSWORD_URL=o.PASSWORD_URL,t.HOME_PAGE_URL=o.HOME_PAGE_URL,t.DOWNLOAD_PAGE_URL=o.DOWNLOAD_PAGE_URL,t.LOBBY_PAGE_URL=o.LOBBY_PAGE_URL),console.log("WX_LOGIN_URL:"+t.WX_LOGIN_URL),console.log("WEB_SERVICE_URL:"+t.WEB_SERVICE_URL),console.log("RESOURCE_URL:"+t.RESOURCE_URL),console.log("RECHARGE_URL:"+t.RECHARGE_URL),t.urlData=o,e()},function(){PDKwebService.postError(PDKErrorConfig.CONFIG_LOAD_ERROR,"geturl.php")})},t.getUrlData=function(e){e(t.urlData)},t.initServer=function(t){if("true"==PDKlang.debug){var e=PDKalien.localStorage.getItem("server_url");e&&(t=e)}this.SERVER_URL=t,console.log("SERVER_URL===>",this.SERVER_URL),this.init_SERVER_URL_TAIL()},t.init_SERVER_URL_TAIL=function(){var e=t.SERVER_URL,n=e.split("."),i=n[0],o=i.substr(i.length-1);t.SERVER_URL_TAIL=o,console.log("SERVER_URL_TAIL===>",t.SERVER_URL_TAIL)},t.getServerUrl=function(t,e,n){},t.resetRoomList=function(){this.roomList=JSON.parse(JSON.stringify(this.roomListBak))},t._formatChatCost=function(t){var e={},n=null;for(var i in t)n=t[i].split(":"),e[Number(i)+1]={id:Number(n[0]),cost:Number(n[1])};return e},t.parseShareRewardCfg=function(){var t=this.dbsConfig.day_share_reward.split("|");if(t){for(var e={},n=null,i=0;i<t.length;++i)n=t[i].split(":"),e[n[0]]=parseInt(n[1]);this._dayShareCfg=e}},t._formatRooms=function(t){var e={};t.forEach(function(t){e[t.gameID]=t});var n=e[9],i=n.rooms,o=[],a=[],r=[];this.roomList=i.sort(function(t,e){return t.roomID-e.roomID}),this.roomList.forEach(function(t){1==t.roomType&&(1==t.roomFlag?o.push(t):a.push(t)),"pdk"==t.gameType&&r.push(t)}),this.roomListBak=this.roomList,this.setCfgByField("goldRooms",o),this.setCfgByField("diamondRooms",a),this.setCfgByField("pdkRooms",r),this.setCfgByField("allGamesCfg",e)},t.loadConfigs=function(e){var n=this;PDKSceneLoading.setLoadingText("加载配置。。。"),this.allCfgs={},PDKalien.Ajax.GET((this.DEBUG?this.RESOURCE_URL:PDKlang.config_url)+"config.php",{id:this.gameId},function(i){var o=JSON.parse(i);n.allCfgs=o,n.dbsConfig=o.dbs_config,n.rid2gt=o.rid2gt,n.chatCost=t._formatChatCost(n.dbsConfig.chat_consume);var a=o.custom;n.almsConfig=n.dbsConfig.alms,n._dayShareCfg=n.dbsConfig.day_share_reward,n.parseShareRewardCfg(),n._diamondExCfg=n.dbsConfig.diamond_exc,n.currencyRatio=a.currency_ratio,n.rechargeRatio=a.recharge_ratio,n.exchangeRatio=a.exchange_ratio,PDKlang.exchange_roomid=a.exchange_roomid;var r=n.dbsConfig.login_app_reward.split("|");if(r){for(var s={},h=null,c=0;c<r.length;++c)h=r[c].split(":"),s[h[0]]=parseInt(h[1]);n.loginAppRew=s}n.wxService=a.qq,n.extendWX=a.extendWX,n.signInRewardConfig=n.dbsConfig.daysignin.map(function(t){return PDKUtils.parseGoodsString(t)}),n._formatRooms(o.game),n._browList=o.game_prop,n._dayTaskList=o.day_task,t._formatFRechargeDays(n.dbsConfig.firstrechargereward.reward),n.roomList.sort(function(t,e){return t.roomID-e.roomID}),n.matchConfig=o.match,n.goodsConfig=o.goods,n.rechargeConfig=o.recharge,n.exchangeConfig=o.red_coin_exchange,n.exchangeGoodsConfig=o.red_coin_goods,n.personalGameConfig=o.personalgame,n.testers=o.testers,n.cardsRecorderConfig=o.cards_recorder_buy_option,e(o)})},t._formatNationalLoginRewCfg=function(){for(var t={},e=0,n=0,i=null,o=this.nationalCfg.daysignin,a=0;a<o.length;++a)i=o[a].split(":"),e=Number(i[0]),n=Number(i[1]),t[a+1]={id:e,num:n};this.nationalCfg.daysignin=t},t._formatFRechargeDays=function(t){for(var e=null,n={},i=null,o=0;o<t.length;++o){e=t[o].split("|"),n[o]=[];for(var a=0;a<e.length;++a)i=e[a].split(":"),n[o].push({id:parseInt(i[0]),num:parseInt(i[1])})}this._fRechargeCfg=n},t.getBrowCfgById=function(t){var e=null;if(this._browList)for(var n=0;n<this._browList.length;++n)if(t==this._browList[n].id)return{id:this._browList[n].id,currency:this._browList[n].currency,price:this._browList[n].price};return e},t.getDayTaskList=function(){return this._dayTaskList},t.getFRechargeRewByDay=function(t){return 1>t?null:this._fRechargeCfg&&this._fRechargeCfg[t-1]?this._fRechargeCfg[t-1]:null},t.getFRechargeInfo=function(){for(var e=0;e<t.rechargeConfig.length;++e)if(t.rechargeConfig[e].firstrecharge)return t.rechargeConfig[e];return PDKLogUtil.error("getFRechargeInfo------error----->"),null},t.getReviveBagInfo=function(e){for(var n=0;n<t.rechargeConfig.length;++n)if(t.rechargeConfig[n].product_id==e)return t.rechargeConfig[n];return PDKLogUtil.error("getReviveBagInfo------error----->"),null},t.getLoginAppRew=function(){return this.loginAppRew},t.getItemNameById=function(t){var e=this._itemName[t];return e?e:null},t.getLoginAppRewText=function(){if(this.loginAppRew){var t="",e=null;for(var n in this.loginAppRew)e=this.getItemNameById(Number(n)),e&&(t+=e+"x"+this.loginAppRew[n]+"\n");return t}return""},t.getNationalCfg=function(){return this.nationalCfg},t.isInNationalTime=function(){var t={isInTime:!1,isBefore:!1,isAfter:!1};if(this.nationalCfg&&this.nationalCfg.trigger_time&&this.nationalCfg.finish_time){var e=(new Date).getTime(),n=1e3*this.nationalCfg.trigger_time,i=1e3*this.nationalCfg.finish_time;e>=n&&i>=e?t.isInTime=!0:n>e?(t.isInTime=!1,t.isBefore=!0,t.isAfter=!1):e>i&&(t.isInTime=!1,t.isBefore=!1,t.isAfter=!0)}return t},t.isTimeToGetNationalInviteRew=function(){if(this.nationalCfg&&this.nationalCfg.finish_time){var t=(new Date).getTime(),e=1e3*this.nationalCfg.finish_time;if(t>=e)return!0}return!1},t.getNationalInviteRewByNum=function(t){if(this.nationalCfg&&this.nationalCfg.invite&&4==this.nationalCfg.invite.length){var e=this.nationalCfg.invite,n=e[0].e,i=e[1].e,o=e[2].e,a=e[3].e,r=.01*e[0].reward,s=.01*e[1].reward,h=.01*e[2].reward,c=.01*e[3].reward;return n>=t?t*r:i>=t?(t-n)*s+r*n:o>=t?n*r+s*(i-n)+(t-i)*h:a>=t?n*r+s*(i-n)+(o-i)*h+(t-o)*c:n*r+(i-n)*s+(o-i)*h+(a-o)*c}return 0},t.getNationalLoginRewByDay=function(t){if(this.nationalCfg&&this.nationalCfg.daysignin&&this.nationalCfg.daysignin[t]){var e=this.nationalCfg.daysignin[t];if(e){var n=(a={},a[0]="金豆x{0}",a[1]="奖杯x{0}",a[2]="记牌器x{0}小时",a[101]="表情免费次数x{0}次",a),i=n[e.id],o=e.num;if(1==e.id&&(o=.01*o),i)return i=i.replace("{0}",o)}}return null;var a},t.shouldShowNationalBtn=function(){var t="2017-09-30 23:50:00",e=new Date(Date.parse(t.replace(/-/g,"/"))).getTime(),n=(new Date).getTime();return n>=e?!0:!1},t.getNationalInviteRewTimeOut=function(){var t="2017-10-15 00:00:00",e=new Date(Date.parse(t.replace(/-/g,"/"))).getTime(),n=(new Date).getTime();return n>=e?!0:!1},t.getChatCostInfoByType=function(t){return this.chatCost&&this.chatCost[t]?this.chatCost[t]:null},t.copyText=function(t,e,n,i){void 0===i&&(i=!1);var o=e;if(PDKalien.Native.instance.isNative)PDKalien.Native.instance.toClipboard(o),i?PDKToast.show("复制成功"):PDKAlert.show("复制"+n+"成功!");else{var a=document.getElementById("runfastCopyTex"),r=document.getElementById("runfastCopyBtn");a.style.visibility="visible",a.value=o;var s=new Clipboard(".copyBtn");s.on("success",function(t){i?PDKToast.show("复制成功"):PDKAlert.show("复制"+n+"成功!")}),s.on("error",function(t){PDKAlert.show("复制"+n+"失败")}),r.click(),a.style.visibility="hidden"}},t.getShareRewCfg=function(){return this._dayShareCfg},t.getDiamondExCfg=function(){return this._diamondExCfg},t.getRid2gt=function(t){return this.rid2gt&&this.rid2gt[t]?this.rid2gt[t]:null},t.getField=function(e,n){var i=null;if("string"==typeof n)return i=e[n];var o=0;if(e[n[o]]){if(n.length<=1)return i=e[n[o]];i=t.getField(e[n[o]],n.slice(o+1))}return i},t.getCfgByField=function(e){var n=e.split("."),i=null;return i=t.getField(this.allCfgs,n)},t.setCfgByField=function(t,e){return this.allCfgs[t]=e},t.downApp=function(){var t="http://sgpdk.16w.com/wx/?src=pdk";window.top.location.href=t},t.initGameUrlsCfg=function(t){var e=this;PDKwebService.getGameUrlsCfg(function(n){e.allCfgs.custom.wxRedUrl=n.wxRedUrl,e.reportUrl=n.reportUrl,t()})},t.DEBUG=!1,t.IS_NATIVE_DEBUG=!1,t.IS_NATIVE_SHOW_TIP=!0,t.gameName="pdk",t.gameAlice="pdk",t.gameId=3,t.platform="bode",t.CHAT_COUNT_DOWN=1,t.CARD_SCALE=1,t.CARD_WIDTH=140,t.CARD_HEIGHT=178,t.CARD_GAP_H=50,t.CARD_GAP_V=100,t.SERVER_URL="ws://192.168.0.91:9001/ws",t.WX_LOGIN_URL="http://www.htgames.cn/zhanghaichuan",t.WEB_SERVICE_URL="http://192.168.0.120:8090/",t.REPORT_URL="http://120.27.162.46:8866/_.gif",t.RESOURCE_URL="http://192.168.0.81/laoqifeng/platform/",t.RECHARGE_URL="http://pay.exunsoul.com:8998/index/pay?account=",t.REGISTER_URL="http://reg.gamebode.com/regist.html",t.PASSWORD_URL="http://reg.gamebode.com/motify.html",t.HOME_PAGE_URL="http://reg.gamebode.com/index.html",t.DOWNLOAD_PAGE_URL="http://reg.gamebode.com/index.html",t.LOBBY_PAGE_URL="http://reg.gamebode.com/game_list_1.html",t.EXCHANGE_URL="http://192.168.0.86:8998/coin/index",t.currencyRatio=1,t.rechargeRatio=1e3,t.exchangeRatio=100,t.wxService="",t.extendWX="",t.loginAppRew=null,t.reportUrl="http://t.cn/RQ29yLH",t._itemName=(_a={},_a[0]="金豆",_a[1]="奖杯",_a[2]="记牌器",_a[3]="钻石",_a[101]="表情免费次数",_a[41001]="初级场奖杯抽奖机会",_a[41002]="中级场奖杯抽奖机会",_a[41003]="高级场奖杯抽奖机会",_a),t}();__reflect(PDKGameConfig.prototype,"PDKGameConfig");var PDKlang,_a,PDKGameData=function(t){function e(){var e=t.call(this)||this;return e.name="save",e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e}(PDKDataStorage);__reflect(PDKGameData.prototype,"PDKGameData");var PDKLanguage=function(t){function e(e){var n=t.call(this)||this;return n.splitCache={},n.id=new PDKLanguageIds,PDKalien.PDKUtils.injectProp(n,e),n}return __extends(e,t),e.prototype.split=function(t,e){var n=this.splitCache[t];return n||(n=this.splitCache[t]=PDKlang[t].split(",")),n[e]},e.prototype.format=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return PDKalien.StringUtils.formatApply(this[t],e)},e}(PDKLanguagePack);__reflect(PDKLanguage.prototype,"PDKLanguage");var _pdk_nativeBridge=PDKalien.Native.instance,RunFastMain=function(t){function e(n){var i=t.call(this)||this;return e._instance=i,pdkServer._isInDDZ=!1,pdkServer._isFirstFromDDZ=!1,pdkServer._isReconnected=!1,console.log("RunFastMain------------>constructor",n),pdkServer.initFromParams(n),i}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),e.prototype._initExt=function(){if(_pdk_nativeBridge.isAndroidWebView()){var t=console.log.bind(console);console.log=function(){for(var e=arguments,n=e.length,i="[js]",o=0;n>o;o++){var a=e[o];if("object"==typeof a){var r=JSON.stringify(e[o]);i+=r?r:e[o]}else i+=e[o];i+="  "}e=null,t(i)}}egret.DisplayObject.prototype.addClickListener=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var i=this,o=i.scaleX,a=i.scaleY,r=function(){i.touchEnabled&&(i._hasTouchBegin=!0,n&&egret.Tween.get(i).to({scaleX:o+.1,scaleY:a+.1},50))},s=function(n){i._hasTouchBegin&&(n.stopImmediatePropagation(),egret.Tween.get(i).to({scaleX:o,scaleY:a},50),t&&t.call(e,n)),i._hasTouchBegin=!1},h=function(){i._hasTouchBegin=!1,n&&egret.Tween.get(i).to({scaleX:o,scaleY:a},50)},c=function(){i._hasTouchBegin=!1,n&&egret.Tween.get(i).to({scaleX:o,scaleY:a},50)},l=function(){p(!1)},p=function(t){var e="addEventListener";t||(e="removeEventListener"),i._hasTouchBegin=!1,i[e](egret.TouchEvent.TOUCH_BEGIN,r),i[e](egret.TouchEvent.TOUCH_END,s),i[e](egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,h),i[e](egret.TouchEvent.TOUCH_CANCEL,c),i[e](egret.Event.REMOVED_FROM_STAGE,l)};p(!0)},egret.ImageLoader.crossOrigin="anonymous";console.log.bind(console),console.error.bind(console),console.warn.bind(console),console.info.bind(console)},e.prototype.doNativeInit=function(){if(console.log("doNativeInit===========>",_pdk_nativeBridge.isNative,egret.Capabilities.os),_pdk_nativeBridge.isNative){var t=3,e="C9029BAFD559F19C50E0247E2E9B57353",n="C2E5D5868229A2EFA0563E5C3A3A66881",i="wx2f626b869698b735",o=e,a="cbe075303b",r="cec021ffbd",s=a,h=!1,c="adbddfsf",l="223",p=!1;
"iOS"==egret.Capabilities.os&&(o=n,s=r);var d={logLevel:t,deAppId:o,deChannelId:"",wxAppId:i,hasAli:!1,xgDebug:p,xgAccount:c,xgTag:l,bugAppId:s,bugDebug:h};_pdk_nativeBridge.setKeepScreenOn(!0),_pdk_nativeBridge.getAppChannelId(function(t){d.deChannelId=t,_pdk_nativeBridge.call("initNative",d,function(t){var e=JSON.parse(t);console.log("initNative-------->",t,e.result)})})}},e.prototype.initMta=function(){if(!PDKalien.Native.instance.isNative){var t=document.createElement("script");t.src="https://pingjs.qq.com/h5/stats.js?v2.0.2",t.setAttribute("name","MTAH5"),t.setAttribute("sid","500485827");var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},e.prototype.createChildren=function(){this._initExt(),t.prototype.createChildren.call(this),RES.setMaxLoadingThread(8);var e=_pdk_nativeBridge.getUrlArg();_pdk_nativeBridge.setInMiniApp(e.egretnative),this.doGameInit()},e.prototype.doGameInit=function(){this.doNativeInit(),e._instance=this,this._resetCfgAndRoomFalse(),PDKAdvanceMethod.start(),PDKReportor.instance.start(),this.init()},e.prototype.init=function(){"iOS"==egret.Capabilities.os&&(this.stage.frameRate=45),PDKalien.Dispatcher.init(),PDKalien.StageProxy.init(this.stage,this),PDKalien.PDKSceneManager.init(this),PDKalien.localStorage.init(PDKGameConfig.gameName),PDKalien.TickerManager.activate(),new PDKObjectPoolInit,console.log("DEBUG :"+PDKGameConfig.DEBUG),egret.registerImplementation("eui.IAssetAdapter",new PDKAssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new PDKThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/runfast.res.json","resource/")},e.prototype.onGotEnvInfo=function(t){PDKalien.PDKUtils.injectProp(PDKEnvironment,t)},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/runfast.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("pdkpreload")},e.prototype._onWXReadyCallInit=function(){var t=PDKalien.Native.instance;t.isNative||(t.initWXFunc(),t.wxConfig())},e.prototype._initH5Info=function(){var t=this,e=_pdk_nativeBridge.getUrlArg();console.log("_initH5Info=====>",_pdk_nativeBridge.isNative),_pdk_nativeBridge.isNative||(e.wx_code?(_pdk_nativeBridge.setChannelName("wxmp"),window.top.isWXReady()?this._onWXReadyCallInit():window.top.onWXReadyFunc(function(){t._onWXReadyCallInit()})):e.ali_code&&_pdk_nativeBridge.setChannelName("ali"))},e.prototype._doCreateScene=function(){PDKSceneLoading.setLoadingText("资源加载中。。。"),PDKalien.PDKSceneManager.register(PDKSceneNames.LOGIN,PDKSceneLogin,"pdkpreload"),PDKalien.PDKSceneManager.register(PDKSceneNames.ROOM,PDKSceneRoom,"pdkpreload"),PDKalien.PDKSceneManager.register(PDKSceneNames.PDKGAMESEL,PDKSceneGameSel,"pdkroom"),PDKalien.PDKSceneManager.register(PDKSceneNames.PLAY,ScenePDKPlay,"pdkplay"),RES.loadGroup("pdkcommon"),PDKSceneLoading.setLoadingText("获取配置。。。"),console.log("----1------"),PDKwebService.loadLog(1,1),console.log("----2------"),this._initH5Info(),console.log("----3------"),this.createScene()},e.prototype.onResourceLoadComplete=function(t){var e=this;"pdkcommon"==t.groupName?this._onRoomLoadOver():"pdkpreload"==t.groupName&&(PDKGameConfig.init(),PDKGameConfig.getUrl(function(){PDKalien.PDKSceneManager.register(PDKSceneNames.LOADING,PDKSceneLoading,"pdkpreload"),PDKalien.StageProxy.addEvent(),RES.loadGroup("pdkplay"),RES.loadGroup("pdkfont"),RES.loadGroup("pdksounds"),console.log("onResourceLoadComplete--------->1");var t=!0;_pdk_nativeBridge.isNative?(t=!1,_pdk_nativeBridge.closeStartImg()):window.parent&&window.parent.postMessage("hideProgress","*"),console.log("onResourceLoadComplete--------->2"),PDKalien.PDKSceneManager.show(PDKSceneNames.LOADING,{showCopyRight:t}),console.log("onResourceLoadComplete--------->3"),_pdk_nativeBridge.isNative?(PDKSceneLoading.setLoadingText("检测版本更新。。。"),_pdk_nativeBridge.checkAppUpdate(function(){e._doCreateScene()})):e._doCreateScene(),console.log("onResourceLoadComplete--------->4")}))},e.prototype.onResourceLoadError=function(t){egret.warn("Group:"+t.groupName+" has failed to load"),PDKToast.show("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){},e.prototype._resetCfgAndRoomFalse=function(){this._cfgLoadOver=!1,this._roomLoadOver=!1},e.prototype._onRoomLoadOver=function(){this._roomLoadOver=!0,this._checkRoomAndCfgOkAndStart()},e.prototype._onCfgInitOver=function(){this._cfgLoadOver=!0,this._checkRoomAndCfgOkAndStart()},e.prototype._checkRoomAndCfgOkAndStart=function(){console.log("_checkRoomAndCfgOkAndStart=======>"+this._cfgLoadOver+"|"+this._roomLoadOver),this._cfgLoadOver&&this._roomLoadOver&&(this._resetCfgAndRoomFalse(),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),PDKMainLogic.instance.delayStart())},e.prototype.createScene=function(){var t=this;console.log("createScene============>"),async.parallel([function(t){PDKalien.PDKSceneManager.addTopScene(PDKSceneNames.COMMON,PDKSceneCommon),PDKalien.PDKSceneManager.addEffectScene(PDKSceneNames.EFFECT,PDKSceneEffect),PDKalien.PDKSceneManager.addMostTopScene(PDKSceneNames.MOST_TOP,PDKSceneMostTop);var e=RES.getRes("runfast_badwords_txt"),n=e.split("\n");PDKUtils.setSensitiveWord(n),PDKalien.Native.instance.getDeviceUUID(function(e){PDKGameConfig.IS_NATIVE_SHOW_TIP=!e.not_show_tip,PDKwebService.uuid=e.uuid,t()},PDKGameConfig.platform)},function(t){PDKGameConfig.loadConfigs(function(e){t()})}],function(){t._onCfgInitOver()})},e}(eui.UILayer);__reflect(RunFastMain.prototype,"RunFastMain");var PDKResNames=function(){function t(){}return t.bank_panel_inner_bg="bank_panel_inner_bg",t.bank_word_30="bank_word_30",t.bank_word_31="bank_word_31",t.bank_word_32="bank_word_32",t.bank_word_33_h="bank_word_33_h",t.bank_word_33_n="bank_word_33_n",t.bank_word_34_h="bank_word_34_h",t.bank_word_34_n="bank_word_34_n",t.bank_word_35_h="bank_word_35_h",t.bank_word_35_n="bank_word_35_n",t.bank_word_36="bank_word_36",t.pdk_common_alert_bg="pdk_common_alert_bg",t.pdk_common_avatar_bg="pdk_common_avatar_bg",t.pdk_common_avatar_light="pdk_common_avatar_light",t.pdk_common_avatar_mask="pdk_common_avatar_mask",t.pdk_common_bg_inner="pdk_common_bg_inner",t.common_btn_21_h="common_btn_21_h",t.common_btn_21_n="common_btn_21_n",t.common_btn_6_h="common_btn_6_h",t.common_btn_6_n="common_btn_6_n",t.common_btn_add_favorite_h="common_btn_add_favorite_h",t.common_btn_add_favorite_n="common_btn_add_favorite_n",t.pdk_common_btn_back_small_h="pdk_common_btn_back_small_h",t.pdk_common_btn_back_small_n="pdk_common_btn_back_small_n",t.pdk_common_btn_blue_d="pdk_common_btn_blue_d",t.pdk_common_btn_blue_h="pdk_common_btn_blue_h",t.pdk_common_btn_blue_n="pdk_common_btn_blue_n",t.pdk_common_close_h="pdk_common_close_h",t.common_btn_close_icon_c="common_btn_close_icon_c",t.common_btn_close_icon_h="common_btn_close_icon_h",t.common_btn_close_icon_n="common_btn_close_icon_n",t.pdk_common_close_n="pdk_common_close_n",t.common_btn_gb_h="common_btn_gb_h",t.common_btn_gb_n="common_btn_gb_n",t.common_btn_get_code_d="common_btn_get_code_d",t.common_btn_get_code_h="common_btn_get_code_h",t.common_btn_get_code_n="common_btn_get_code_n",t.common_btn_increase="common_btn_increase",t.pdk_common_btn_lab_cancel_h="pdk_common_btn_lab_cancel_h",t.pdk_common_btn_lab_cancel_n="pdk_common_btn_lab_cancel_n",t.pdk_common_btn_lab_confirm_h="pdk_common_btn_lab_confirm_h",t.pdk_common_btn_lab_confirm_n="pdk_common_btn_lab_confirm_n",t.common_btn_lab_reconnect_h="common_btn_lab_reconnect_h",t.common_btn_lab_reconnect_n="common_btn_lab_reconnect_n",t.pdk_common_btn_lsx_h="pdk_common_btn_lsx_h",t.pdk_common_btn_lsx_n="pdk_common_btn_lsx_n",t.pdk_common_btn_lx_h="pdk_common_btn_lx_h",t.pdk_common_btn_lx_n="pdk_common_btn_lx_n",t.pdk_common_btn_orange1_1="pdk_common_btn_orange1_1",t.pdk_common_btn_orange1_2="pdk_common_btn_orange1_2",t.pdk_common_btn_orange1_3="pdk_common_btn_orange1_3",t.pdk_common_btn_orange2_h="pdk_common_btn_orange2_h",t.pdk_common_btn_orange2_n="pdk_common_btn_orange2_n",t.pdk_common_btn_orange_d="pdk_common_btn_orange_d",t.pdk_common_btn_orange_h="pdk_common_btn_orange_h",t.pdk_common_btn_orange_n="pdk_common_btn_orange_n",t.pdk_common_btn_plus_h="pdk_common_btn_plus_h",t.pdk_common_btn_plus_n="pdk_common_btn_plus_n",t.common_btn_reduce="common_btn_reduce",t.common_btn_register_h="common_btn_register_h",t.common_btn_register_n="common_btn_register_n",t.common_btn_return_d="common_btn_return_d",t.common_btn_return_h="common_btn_return_h",t.pdk_common_btn_return_n="pdk_common_btn_return_n",t.common_btn_to_register_h="common_btn_to_register_h",t.common_btn_to_register_n="common_btn_to_register_n",t.pdk_common_dropdown_bg="pdk_common_dropdown_bg",t.pdk_common_dropdown="pdk_common_dropdown",t.pdk_common_dropdown_checkbox="pdk_common_dropdown_checkbox",t.pdk_common_dropdown_d="pdk_common_dropdown_d",t.pdk_common_dropdown_h="pdk_common_dropdown_h",t.pdk_common_dropdown_n="pdk_common_dropdown_n",t.pdk_common_gold_bg="pdk_common_gold_bg",t.pdk_common_h_slider_thumb_button="pdk_common_h_slider_thumb_button",t.pdk_common_h_slider_track="pdk_common_h_slider_track",t.pdk_common_h_slider_track_highlight="pdk_common_h_slider_track_highlight",t.common_light="common_light",t.pdk_common_match_info_bg="pdk_common_match_info_bg",t.pdk_common_progress_circle_thumb="pdk_common_progress_circle_thumb",t.pdk_common_progress_circle_track="pdk_common_progress_circle_track",t.pdk_common_progress_thumb="pdk_common_progress_thumb",t.pdk_common_progress_thumb_layer_0="pdk_common_progress_thumb_layer_0",t.pdk_common_progress_thumb_layer_1="pdk_common_progress_thumb_layer_1",t.pdk_common_progress_thumb_layer_2="pdk_common_progress_thumb_layer_2",t.pdk_common_progress_thumb_repeat="pdk_common_progress_thumb_repeat",t.pdk_common_progress_track="pdk_common_progress_track",t.pdk_common_radio_1="pdk_common_radio_1",t.pdk_common_radio_2="pdk_common_radio_2",t.pdk_common_switch_lab_off="pdk_common_switch_lab_off",t.pdk_common_switch_lab_on="pdk_common_switch_lab_on",t.pdk_common_tab_button_h="pdk_common_tab_button_h",t.pdk_common_tab_button_n="pdk_common_tab_button_n",t.pdk_common_tab_tutton_h="pdk_common_tab_tutton_h",t.pdk_common_tab_tutton_n="pdk_common_tab_tutton_n",t.pdk_common_text_input_bg2="pdk_common_text_input_bg2",t.pdk_common_text_input_bg="pdk_common_text_input_bg",t.pdk_common_toast="pdk_common_toast",t.common_waiting_bg_1="common_waiting_bg_1",t.common_waiting_bg_2="common_waiting_bg_2",t.pdk_common_word_15="pdk_common_word_15",t.common_word_16="common_word_16",t.exchange_btn_1="exchange_btn_1",t.exchange_btn_2="exchange_btn_2",t.exchange_btn_3_h="exchange_btn_3_h",t.exchange_btn_3_n="exchange_btn_3_n",t.exchange_btn_4_h="exchange_btn_4_h",t.exchange_btn_4_n="exchange_btn_4_n",t.exchange_btn_5_h="exchange_btn_5_h",t.exchange_btn_6_h="exchange_btn_6_h",t.exchange_btn_6_n="exchange_btn_6_n",t.exchange_btn_7_h="exchange_btn_7_h",t.exchange_btn_7_n="exchange_btn_7_n",t.exchange_btn_word_1_h="exchange_btn_word_1_h",t.exchange_btn_word_1_n="exchange_btn_word_1_n",t.exchange_btn_word_2_h="exchange_btn_word_2_h",t.exchange_btn_word_2_n="exchange_btn_word_2_n",t.exchange_btn_word_3_h="exchange_btn_word_3_h",t.exchange_btn_word_3_n="exchange_btn_word_3_n",t.exchange_btn_word_4="exchange_btn_word_4",t.exchange_image_1="exchange_image_1",t.exchange_image_10="exchange_image_10",t.exchange_image_11="exchange_image_11",t.exchange_image_12="exchange_image_12",t.exchange_image_13="exchange_image_13",t.exchange_image_14="exchange_image_14",t.exchange_image_15="exchange_image_15",t.exchange_image_16="exchange_image_16",t.exchange_image_17="exchange_image_17",t.exchange_image_18="exchange_image_18",t.exchange_image_19="exchange_image_19",t.exchange_image_2="exchange_image_2",t.exchange_image_20="exchange_image_20",t.exchange_image_21="exchange_image_21",t.exchange_image_22="exchange_image_22",t.exchange_image_23="exchange_image_23",t.exchange_image_24="exchange_image_24",t.exchange_image_25="exchange_image_25",t.exchange_image_26="exchange_image_26",t.exchange_image_27="exchange_image_27",t.exchange_image_29="exchange_image_29",t.exchange_image_3="exchange_image_3",t.exchange_image_30="exchange_image_30",t.exchange_image_31="exchange_image_31",t.exchange_image_32="exchange_image_32",t.exchange_image_33="exchange_image_33",t.exchange_image_34="exchange_image_34",t.exchange_image_35="exchange_image_35",t.exchange_image_4="exchange_image_4",t.exchange_image_6="exchange_image_6",t.exchange_image_9="exchange_image_9",t.pdk_icon_amount="pdk_icon_amount",t.pdk_icon_clock="pdk_icon_clock",t.pdk_icon_gold="pdk_ico_gold",t.icon_head1="icon_head1",t.icon_head2="icon_head2",t.icon_head3="icon_head3",t.icon_head4="icon_head4",t.icon_head5="icon_head5",t.icon_head6="icon_head6",t.icon_head7="icon_head7",t.icon_head8="icon_head8",t.pdk_icon_head_default="pdk_icon_head_default",t.pdk_icon_master="pdk_icon_master",t.pdk_icon_master_card="pdk_icon_master_card",t.pdk_icon_room_0="pdk_icon_room_0",t.pdk_icon_room_1="pdk_icon_room_1",t.pdk_icon_score="pdk_icon_score",t.pdk_icon_sign_up="pdk_icon_sign_up",t.loading_icon="loading_icon",t.loading_logo="loading_logo",t.login_bg_3_2="login_bg_3_2",t.login_bg_3="login_bg_3",t.login_bg_4="login_bg_4",t.login_bg_5="login_bg_5",t.login_bg_6="login_bg_6",t.login_bt_word_wjmm_h="login_bt_word_wjmm_h",t.pdk_login_bt_word_wjmm_n="pdk_login_bt_word_wjmm_n",t.login_bt_word_zczh_h="login_bt_word_zczh_h",t.pdk_login_bt_word_zczh_n="pdk_login_bt_word_zczh_n",t.login_btn_collect_h="login_btn_collect_h",t.login_btn_collect_n="login_btn_collect_n",t.pdk_login_btn_dl_h="pdk_login_btn_dl_h",t.pdk_login_btn_dl_n="pdk_login_btn_dl_n",t.login_btn_home_page_h="login_btn_home_page_h",t.login_btn_home_page_n="login_btn_home_page_n",t.login_btn_ksdl_h="login_btn_ksdl_h",t.login_btn_ksdl_n="login_btn_ksdl_n",t.login_btn_ls_h="login_btn_ls_h",t.login_btn_ls_n="login_btn_ls_n",t.login_btn_word_ksdl_h="login_btn_word_ksdl_h",t.login_btn_word_ksdl_n="login_btn_word_ksdl_n",t.login_btn_word_ls_h="login_btn_word_ls_h",t.login_btn_word_ls_n="login_btn_word_ls_n",t.login_panel_bg="login_panel_bg",t.match_bg_1="match_bg_1",t.match_btn_exit_h="match_btn_exit_h",t.match_btn_exit_n="match_btn_exit_n",t.match_btn_exit_txt_h="match_btn_exit_txt_h",t.match_btn_exit_txt_n="match_btn_exit_txt_n",t.match_btn_help_h="match_btn_help_h",t.match_btn_help_n="match_btn_help_n",t.match_btn_join_h="match_btn_join_h",t.match_btn_join_n="match_btn_join_n",t.match_btn_reward_h="match_btn_reward_h",t.match_btn_reward_n="match_btn_reward_n",t.match_btn_sign_up_h="match_btn_sign_up_h",t.match_btn_sign_up_n="match_btn_sign_up_n",t.match_finish_bg="match_finish_bg",t.match_finish_top="match_finish_top",t.match_float_bg="match_float_bg",t.match_panel_bg_2="match_panel_bg_2",t.match_panel_bg="match_panel_bg",t.match_waiting_1_h="match_waiting_1_h",t.match_waiting_1_n="match_waiting_1_n",t.match_waiting_2_h="match_waiting_2_h",t.match_waiting_2_n="match_waiting_2_n",t.match_waiting_3_h="match_waiting_3_h",t.match_waiting_3_n="match_waiting_3_n",t.match_waiting_4_h="match_waiting_4_h",t.match_waiting_4_n="match_waiting_4_n",t.match_word_17="match_word_17",t.match_word_18="match_word_18",t.match_word_19="match_word_19",t.match_word_20="match_word_20",t.match_word_21="match_word_21",t.match_word_22="match_word_22",t.match_word_24="match_word_24",t.match_word_26="match_word_26",t.match_word_29="match_word_29",t.match_word_4="match_word_4",t.match_word_5="match_word_5",t.match_word_6="match_word_6",t.pdk_play_bg_1="pdk_play_bg_1",t.pdk_play_bg_2="pdk_play_bg_2",t.pdk_play_bg_3="pdk_play_bg_3",t.pdk_play_bg_4="pdk_play_bg_4",t.pdk_play_bg_5="pdk_play_bg_5",t.play_bg_6="play_bg_6",t.play_bottom_bar_bg="play_bottom_bar_bg",t.play_bottom_bar_bg_long="play_bottom_bar_bg_long",t.play_btn_anger_h="play_btn_anger_h",t.play_btn_anger_n="play_btn_anger_n",t.play_btn_chat_1="play_btn_chat_1",t.play_btn_chat_2="play_btn_chat_2",t.play_btn_praiser_h="play_btn_praiser_h",t.play_btn_praiser_n="play_btn_praiser_n",t.play_btn_ridiculer_h="play_btn_ridiculer_h",t.play_btn_ridiculer_n="play_btn_ridiculer_n",t.pdk_play_btn_trusteeship_d="pdk_play_btn_trusteeship_d",t.pdk_play_btn_trusteeship_h="pdk_play_btn_trusteeship_h",t.pdk_play_btn_trusteeship_n="pdk_play_btn_trusteeship_n",t.play_btn_urge_h="play_btn_urge_h",t.play_btn_urge_n="play_btn_urge_n",t.pdk_play_btn_word_1_d="pdk_play_btn_word_1_d",t.pdk_play_btn_word_1_h="pdk_play_btn_word_1_h",t.pdk_play_btn_word_1_n="pdk_play_btn_word_1_n",t.pdk_play_btn_word_2_d="pdk_play_btn_word_2_d",t.pdk_play_btn_word_2_h="pdk_play_btn_word_2_h",t.pdk_play_btn_word_2_n="pdk_play_btn_word_2_n",t.pdk_play_btn_word_3_h="pdk_play_btn_word_3_h",t.pdk_play_btn_word_3_n="pdk_play_btn_word_3_n",t.pdk_play_btn_word_again_d="pdk_chongxuan_gray",t.pdk_play_btn_word_again_h="pdk_chongxuan_yellow",t.pdk_play_btn_word_again_n="pdk_chongxuan_yellow",t.pdk_play_btn_word_come_d="pdk_chupai_gray",t.pdk_play_btn_word_come_h="pdk_chupai_green",t.pdk_play_btn_word_come_n="pdk_chupai_green",t.pdk_play_btn_word_continue_h="pdk_play_btn_word_continue_h",t.pdk_play_btn_word_continue_n="pdk_play_btn_word_continue_n",t.pdk_play_btn_word_exchange_h="pdk_play_btn_word_exchange_h",t.pdk_play_btn_word_exchange_n="pdk_play_btn_word_exchange_n",t.pdk_play_btn_word_getready_h="pdk_play_btn_word_getready_h",t.pdk_play_btn_word_getready_n="pdk_play_btn_word_getready_n",t.pdk_play_btn_word_no_d="pdk_buchu_gray",t.pdk_play_btn_word_no_h="pdk_buchu_yellow",t.pdk_play_btn_word_no_n="pdk_buchu_yellow",t.pdk_play_btn_word_nocall_h="pdk_play_btn_word_nocall_h",t.pdk_play_btn_word_nocall_n="pdk_play_btn_word_nocall_n",t.pdk_play_btn_word_prompt_d="pdk_tishi_gray",t.pdk_play_btn_word_prompt_h="pdk_tishi_yellow",t.pdk_play_btn_word_prompt_n="pdk_tishi_yellow",t.play_bubble="play_bubble",t.pdk_play_card_count_bg="pdk_play_card_count_bg",t.play_chat_bg="play_chat_bg",t.play_failed="play_failed",t.pdk_play_hand_ok="pdk_play_hand_ok",t.pdk_play_master_card_bg="pdk_play_master_card_bg",t.pdk_play_match_detail_bg="pdk_play_match_detail_bg",t.pdk_play_match_place_info_bg="pdk_play_match_place_info_bg",t.pdk_play_name_bg="pdk_play_name_bg",t.pdk_play_robot="pdk_play_robot",t.pdk_play_robot_eye="pdk_play_robot_eye",t.play_success="play_success",t.pdk_play_word_1="pdk_play_word_1",t.pdk_play_word_2="pdk_play_word_2",t.pdk_play_word_3="pdk_play_word_3",t.pdk_play_word_4_2="pdk_play_word_4_2",t.pdk_play_word_4="pdk_play_word_4",t.pdk_play_word_5="pdk_play_word_5",t.pdk_play_word_6="pdk_play_word_6",t.pdk_play_word_7="pdk_play_word_7",t.profile_txt_1="profile_txt_1",t.recharge_bg_34="recharge_bg_34",t.recharge_bg_35="recharge_bg_35",t.recharge_bg_36="recharge_bg_36",t.recharge_bg_37="recharge_bg_37",t.recharge_bg_38="recharge_bg_38",t.recharge_bg_39="recharge_bg_39",t.recharge_bg_40="recharge_bg_40",t.redgift_bg="redgift_bg",t.redgift_happy="redgift_happy",t.redgift_icon="redgift_icon",t.redgift_label_bg="redgift_label_bg",t.redgift_sorry="redgift_sorry",t.room_ads_collect="room_ads_collect",t.room_bg_1="room_bg_1",t.room_bg_2="room_bg_2",t.room_bg_3="room_bg_3",t.room_btn_bank_h="room_btn_bank_h",t.room_btn_bank_n="room_btn_bank_n",t.room_btn_lobby_h="room_btn_lobby_h",t.room_btn_lobby_n="room_btn_lobby_n",t.room_btn_setup_d="room_btn_setup_d",t.room_btn_setup_h="room_btn_setup_h",t.room_btn_setup_n="room_btn_setup_n",t.room_channel_icon_0="room_channel_icon_0",t.room_channel_icon_1="room_channel_icon_1",t.room_channel_lab_0="room_channel_lab_0",t.room_channel_lab_1="room_channel_lab_1",t.room_item_ads="room_item_ads",t.room_item_bg="room_item_bg",t.room_item_bottom="room_item_bottom",t.room_match_item_bg="room_match_item_bg",t.pdk_room_seprate="pdk_room_seprate",t.room_tip_gold_can_get="room_tip_gold_can_get",t.room_word_0="room_word_0",t.room_word_13="room_word_13",t.room_word_14="room_word_14",t.room_word_1="room_word_1",t.room_word_23="room_word_23",t.room_word_25="room_word_25",t.room_word_27="room_word_27",t.room_word_28="room_word_28",t.room_word_30="room_word_30",t.room_word_2="room_word_2",t.room_word_3="room_word_3",t.room_word_8="room_word_8",t.pdk_setting_btn_about_h="pdk_setting_btn_about_h",t.pdk_setting_btn_about_n="pdk_setting_btn_about_n",t.pdk_setting_btn_feedback_h="pdk_setting_btn_feedback_h",t.pdk_setting_btn_feedback_n="pdk_setting_btn_feedback_n",t.pdk_setting_btn_help_h="pdk_setting_btn_help_h",t.pdk_setting_btn_help_n="pdk_setting_btn_help_n",t.pdk_setting_btn_logout_d="pdk_setting_btn_logout_d",t.pdk_setting_btn_logout_h="pdk_setting_btn_logout_h",t.pdk_setting_btn_logout_n="pdk_setting_btn_logout_n",t.pdk_setting_word_1="pdk_setting_word_1",t.pdk_setting_word_2="pdk_setting_word_2",t.pdk_setting_word_3="pdk_setting_word_3",t.PDKlang="lang",t.sheet_loading="sheet_loading",t.sheet_bank_c="sheet_bank_c",t.sheet_common="sheet_common",t.sheet_common_c="sheet_common_c",t.sheet_icon_c="sheet_icon_c",t.pdk_sheet_login_c="pdk_sheet_login_c",t.sheet_match="sheet_match",t.sheet_match_c="sheet_match_c",t.sheet_play="sheet_play",t.pdk_sheet_play_c="pdk_sheet_play_c",t.sheet_profile_c="sheet_profile_c",t.sheet_redgift="sheet_redgift",t.sheet_room_c="sheet_room_c",t.sheet_setting="sheet_setting",t.sheet_poker="sheet_poker",t.sheet_recharge="sheet_recharge",t.runfast_game_proto="runfast_game_proto",t.runfast_user_proto="runfast_user_proto",t.font_num_0="font_num_0",t.font_num_1="font_num_1",t.font_num_2="font_num_2",t.font_num_3="font_num_3",t.font_num_6="font_num_6",t.font_num_7="font_num_7",t.font_num_8="font_num_8",t.font_num_9="font_num_9",t.login_bg="login_bg",t.play_bg="play_bg",t.room_bg="room_bg",t.pdk_bgm="pdk_bgm",t.Man_1="Man_1",t.Man_10="Man_10",t.Man_11="Man_11",t.Man_12="Man_12",t.Man_13="Man_13",t.Man_14="Man_14",t.Man_15="Man_15",t.Man_2="Man_2",t.Man_3="Man_3",t.Man_4="Man_4",t.Man_5="Man_5",t.Man_6="Man_6",t.Man_7="Man_7",t.Man_8="Man_8",t.Man_9="Man_9",t.Man_buyao1="Man_buyao1",t.Man_buyao2="Man_buyao2",t.Man_buyao3="Man_buyao3",t.Man_buyao4="Man_buyao4",t.Man_dui1="Man_dui1",t.Man_dui10="Man_dui10",t.Man_dui11="Man_dui11",t.Man_dui12="Man_dui12",t.Man_dui13="Man_dui13",t.Man_dui2="Man_dui2",t.Man_dui3="Man_dui3",t.Man_dui4="Man_dui4",t.Man_dui5="Man_dui5",t.Man_dui6="Man_dui6",t.Man_dui7="Man_dui7",t.Man_dui8="Man_dui8",t.Man_dui9="Man_dui9",t.Man_feiji="Man_feiji",t.Man_jiabei="Man_jiabei",t.Man_liandui="Man_liandui",t.Man_NoOrder="Man_NoOrder",t.Man_Order="Man_Order",t.Man_sandaiyi="Man_sandaiyi",t.Man_sandaiyidui="Man_sandaiyidui",t.Man_shunzi="Man_shunzi",t.Man_sidaier="Man_sidaier",t.Man_sidailiangdui="Man_sidailiangdui",t.Man_tuple1="Man_tuple1",t.Man_tuple10="Man_tuple10",t.Man_tuple11="Man_tuple11",t.Man_tuple12="Man_tuple12",t.Man_tuple13="Man_tuple13",t.Man_tuple2="Man_tuple2",t.Man_tuple3="Man_tuple3",t.Man_tuple4="Man_tuple4",t.Man_tuple5="Man_tuple5",t.Man_tuple6="Man_tuple6",t.Man_tuple7="Man_tuple7",t.Man_tuple8="Man_tuple8",t.Man_tuple9="Man_tuple9",t.Man_wangzha="Man_wangzha",t.Man_zhadan="Man_zhadan",t.Woman_1="Woman_1",t.Woman_10="Woman_10",t.Woman_11="Woman_11",t.Woman_12="Woman_12",t.Woman_13="Woman_13",t.Woman_14="Woman_14",t.Woman_15="Woman_15",t.Woman_2="Woman_2",t.Woman_3="Woman_3",t.Woman_4="Woman_4",t.Woman_5="Woman_5",t.Woman_6="Woman_6",t.Woman_7="Woman_7",t.Woman_8="Woman_8",t.Woman_9="Woman_9",t.Woman_buyao1="Woman_buyao1",t.Woman_buyao2="Woman_buyao2",t.Woman_buyao3="Woman_buyao3",t.Woman_buyao4="Woman_buyao4",t.Woman_dui1="Woman_dui1",t.Woman_dui10="Woman_dui10",t.Woman_dui11="Woman_dui11",t.Woman_dui12="Woman_dui12",t.Woman_dui13="Woman_dui13",t.Woman_dui2="Woman_dui2",t.Woman_dui3="Woman_dui3",t.Woman_dui4="Woman_dui4",t.Woman_dui5="Woman_dui5",t.Woman_dui6="Woman_dui6",t.Woman_dui7="Woman_dui7",t.Woman_dui8="Woman_dui8",t.Woman_dui9="Woman_dui9",t.Woman_feiji="Woman_feiji",t.Woman_liandui="Woman_liandui",t.Woman_NoOrder="Woman_NoOrder",t.Woman_Order="Woman_Order",t.Woman_Rob1="Woman_Rob1",t.Woman_Rob2="Woman_Rob2",t.Woman_Rob3="Woman_Rob3",t.Woman_sandaiyi="Woman_sandaiyi",t.Woman_sandaiyidui="Woman_sandaiyidui",t.Woman_shunzi="Woman_shunzi",t.Woman_sidaier="Woman_sidaier",t.Woman_sidailiangdui="Woman_sidailiangdui",t.Woman_tuple1="Woman_tuple1",t.Woman_tuple10="Woman_tuple10",t.Woman_tuple11="Woman_tuple11",t.Woman_tuple12="Woman_tuple12",t.Woman_tuple13="Woman_tuple13",t.Woman_tuple2="Woman_tuple2",t.Woman_tuple3="Woman_tuple3",t.Woman_tuple4="Woman_tuple4",t.Woman_tuple5="Woman_tuple5",t.Woman_tuple6="Woman_tuple6",t.Woman_tuple7="Woman_tuple7",t.Woman_tuple8="Woman_tuple8",t.Woman_tuple9="Woman_tuple9",t.Woman_wangzha="Woman_wangzha",t.Woman_zhadan="Woman_zhadan",t.sheet_exchange="sheet_exchange",t.font_num_10="font_num_10",t.font_num_12="font_num_12",t.pdk_ani_coin_png="pdk_ani_coin_png",t.pdk_ani_coin_json="pdk_ani_coin_json",t.bgm_play="bgm_play",t.bgm_room="bgm_room",t.pdk_effect_gold_rain="pdk_effect_gold_rain",t}();__reflect(PDKResNames.prototype,"PDKResNames");var PDKSceneNames=function(){function t(){}return t.LOADING="loading",t.MOST_TOP="mostTop",t.EFFECT="effect",t.EFFECT2="effect2",t.COMMON="pdkcommon",t.COVER="cover",t.MENU="menu",t.GUIDE="guide",t.ROOM="pdkroom",t.PDKGAMESEL="pdkgamesel",t.LEVEL="level",t.LOADING_TIP="loadingTip",t.LOGIN="login",t.PLAY="pdkplay",t.RESULT="result",t.COLLECTIONS="collections",t.GIFT="gift",t.RECHARGE="recharge",t}();__reflect(PDKSceneNames.prototype,"PDKSceneNames");var _encrypt=PDKalien.Encrypt.encryptStr,_decrypt=PDKalien.Encrypt.encryptStr,PDKUserData=function(t){function e(){var e=t.call(this)||this;return e.name="user",e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(t){this.prefix=t},e.prototype._setValue=function(t,e,n){void 0===n&&(n=!1);var i=_encrypt(t),o=_encrypt(e);this.setItem(i,o,n)},e.prototype._getValue=function(t){var e=_encrypt(t),n=this.save[e]||null;return n&&(n=_decrypt(n)),n},e.saveLocalPhone=function(t){var e=_encrypt("phone"),n=_encrypt(t);PDKalien.localStorage.setItem(e,n)},e.saveLocalAli=function(t,e){var n=_encrypt("ali"),i=_encrypt(t+"|"+e);PDKalien.localStorage.setItem(n,i)},e.getLocalAli=function(){var t=_encrypt("ali"),e=PDKalien.localStorage.getItem(t);if(e){var n=_decrypt(e),i=n.split("|");if(i.length<2)return null;var o=i[0],a=i[1];return{account:o,name:a}}return null},e.getLocalPhone=function(){var t=_encrypt("phone"),e=PDKalien.localStorage.getItem(t);if(e){var n=_decrypt(e);return n}return null},e.prototype.setToken=function(t,e){void 0===e&&(e=!1);var n="token",i=t;this._setValue(n,i,e)},e.prototype.setUid=function(t,e){void 0===e&&(e=!1);var n="uid",i=t;this._setValue(n,i,e)},e.prototype.setSk=function(t,e){void 0===e&&(e=!1);var n="sk",i=t;this._setValue(n,i,e)},e.prototype.getToken=function(){var t="token";return this._getValue(t)},e.prototype.getUid=function(){var t="uid";return this._getValue(t)},e.prototype.getSk=function(){var t="sk";return this._getValue(t)},e}(PDKDataStorage);__reflect(PDKUserData.prototype,"PDKUserData");var PDKUserInfoData=function(){function t(){this._sysTalkMaxN=10,this._hornTalkRecMaxN=20,this._bRealname=!1,this._friends={req:[],list:[],leftSendNum:0,sendNum:0},this.winRate=0,this.base64=!1,this.game=0,this.isPlaying=!1,this.bgImg="",this.whatsup="",this.clean()}return Object.defineProperty(t.prototype,"realName",{get:function(){return this._bRealname},set:function(t){this._bRealname=t},enumerable:!0,configurable:!0}),t.prototype.setFriends=function(t){this._friends=t,this._friendsReqChange(),this.setHasSendNum(t.sendNum)},t.prototype.setHasSendNum=function(t){this._friends.sendNum=t,this.calculateLeftSendNum(),PDKalien.Dispatcher.dispatch(PDKEventNames.FRIEND_SEND_CHAGNE)},t.prototype.calculateLeftSendNum=function(){var t=this._vipLevel;if(t>=1){var e=PDKGameConfig.getCfgByField("friends_cfg.limit"),n=e[t].giftcnt-this._friends.sendNum;0>n&&(n=0),this._friends.leftSendNum=n}else this._friends.leftSendNum=0},t.prototype.getHasSendNum=function(){return this._friends.sendNum},t.prototype._friendsReqChange=function(){var t=this._friends,e=t.req.length;PDKalien.Dispatcher.dispatch(PDKEventNames.FRIEND_REQ_CHAGNE,{num:e})},t.prototype.removeFromFriendList=function(t){if(this._friends[t])for(var e=this._friends.list,n=e.length,i=0;n>i;++i)if(e[i].fakeuid==t){e.splice(i,1);break}this._friends[t]=!1},t.prototype.getFriendsList=function(){return this._friends.list},t.prototype.removeFromFriendReq=function(t){for(var e=this._friends.req,n=e.length,i=0;n>i;++i)if(e[i].fakeuid==t){e.splice(i,1);break}this._friendsReqChange()},t.prototype.getFriendsReq=function(){return this._friends.req},t.prototype.getLeftSendNum=function(){return this._friends.leftSendNum},t.prototype.isMyFriend=function(t){return this._friends&&this._friends[t]?!0:!1},t.prototype.hasRecorder=function(){return this.cardsRecorder&&this.cardsRecorder.length>=7&&this.cardsRecorder[6]>0?!0:!1},t.prototype.todayHasBuyRevive=function(){return this.diamondrelive>=1?!0:!1},t.prototype.setTodayHasBuyRevive=function(){this.diamondrelive+=1},t.prototype.isMaxBuyDiamondRevive=function(){var t=this.getDiamondReviveMaxBuy();return this.diamondrelive>=t?!0:!1},t.prototype.getDiamondReviveMaxBuy=function(){for(var t=PDKGameConfig.rechargeConfig,e=0;e<t.length;++e)if(10009==t[e].product_id)return t[e].maxBuyNum;return 3},t.prototype.initData=function(e){var n=this;e.cardsRecorder&&e.cardsRecorder.length<1&&(e.cardsRecorder=null),PDKalien.PDKUtils.injectProp(this,e,function(e,i,o){"nickname"==i?o&&("参赛玩家"!=o?e.nickname=PDKBase64.decode(o):e.nickname=o):"sex"==i?t.updateSex(e,o):"gold"==i||"redcoingot"==i||"totalwincnt"==i||"totallosecnt"==i||"totaldrawcnt"==i||"diamondgiftgot"==i||"diamondrelive"==i||"godlrelive"==i?(e[i]=parseInt(o),"redcoingot"==i&&(e[i]=e[i]/100)):"frechargerewardday"==i?(o>=1&&9>=o||-1==o)&&(e[i]=parseInt(o),-1!=o&&PDKalien.Dispatcher.dispatch(PDKEventNames.FRECHARGE_HASUPDATE)):"showredpoint"==i?o&&o.length>=1&&(e[i]=o):"otherrcchance"==i?o&&o.length>=2&&(e[i]=o):"poolreward"==i?o&&o.length>=2&&(e[i]=o):"wincnt"==i?o&&o.length>=1&&(e[i]=o):"daytaskprogress"==i?o.length>=1&&(e[i]=o):"daytaskstatus"==i?o&&o.length>=PDKGameConfig.getDayTaskList().length&&(e[i]=o,n._calculateOverTaskNum(o)):"invitetaskstatus"==i?o&&o.length>=2&&(e[i]=o):"imageid"==i?o&&0==o.indexOf("head")&&o.length<=10?e[i]="pdk_icon_head_default":e[i]=o:"praise"==i?o&&o>=5&&(e[i]=o):"ivtrwddayrcd"==i?o&&o.length>=2&&(e[i]=o):"primarydmrcge"==i?o&&o.length>=1&&(e[i]=o):"vipdata"==i?o&&o.length>=1&&(e[i]=o,n._calcuateVipLevel()):"params"==i?o.length>=1&&(n.monthcardinfo=o):"playrecords"==i?o&&o.length>=1&&(n.playrecords=o):"uid"==i||"fakeuid"==i?o&&(e[i]=o):e[i]=o}),0==this.sex&&t.updateSex(this,0),0!=this.recorderfirstrewardgot||e.recorderfirstrewardgot||(this.recorderfirstrewardgot=null)},t.updateSex=function(t,e){void 0===e&&(e=0),t.sex=e,t.sexStr=PDKlang.sex[t.sex],t.sexVoiceStr=PDKlang.sexVoice[t.sex]},t.prototype._calculateOverTaskNum=function(t){for(var e=0,n=0;n<t.length;++n)1==t[n]&&(e+=1);this._dayTaskOverNum=e},t.prototype.getWinRate=function(){var t=this.totalwincnt+this.totaldrawcnt+this.totallosecnt;return 0==t||0==this.totalwincnt?0:(this.totalwincnt||0)/t},t.prototype.getGold=function(){return this.gold},t.prototype.addGold=function(t){var e=this.gold+t;this.gold=e,0>e&&(this.gold=0)},t.prototype.getInviteTaskPre=function(){return this.invitetaskstatus[0]
},t.prototype.getInviteTaskStatus=function(){return this.invitetaskstatus},t.prototype.getDayTaskPre=function(){return this.daytaskprogress},t.prototype.getDayTaskAllTStatus=function(){return this.daytaskstatus},t.prototype.getDayTaskOverCount=function(){return this._dayTaskOverNum},t.prototype.isNotBuyFRecharge=function(){return-1==this.frechargerewardday?!0:!1},t.prototype.isHadGetFRechargeRew=function(){return this.frechargerewardday>=2&&this.frechargerewardday<=9?!0:!1},t.prototype.isGetTodayFRechargeRew=function(){return 8==this.frechargerewardday?!0:!1},t.prototype.isFRechargeRewGetOver=function(){return this.frechargerewardday>=1&&this.frechargerewardday<=7?!1:!0},t.prototype.getFRechargeRewGetDay=function(){return this.frechargerewardday},t.prototype.setFRechargeTodayHasGet=function(){this.frechargerewardday=8,PDKalien.Dispatcher.dispatch(PDKEventNames.USER_FRREWARD_GET_SUCC)},t.prototype.isTodayHasSign=function(){return this.todayHasSign},t.prototype.setTodaySigned=function(t){this.todayHasSign=t},t.prototype.isSignGoldAddByFRecharge=function(){return this.signrewardaddremain&&this.signrewardaddremain>0?!0:!1},t.prototype.isNotGetFRechargeSignAdd=function(){return 7==this.signrewardaddremain?!0:!1},t.prototype.signSuccSubSignAddRemin=function(){!this.isNotBuyFRecharge()&&this.isHadGetFRechargeRew()&&this.signrewardaddremain&&(this.signrewardaddremain-=1,this.signrewardaddremain<0&&(this.signrewardaddremain=0))},t.prototype.setTaskHasGetRew=function(t){for(var e=0;e<this.daytaskstatus.length;++e)if(e+1==t){this.daytaskstatus[e]=2;break}this._calculateOverTaskNum(this.daytaskstatus)},t.prototype.setInviteTaskHasGetRew=function(t){for(var e=0;e<this.invitetaskstatus.length;++e)if(e==t){this.invitetaskstatus[e]=2;break}PDKalien.Dispatcher.dispatch(PDKEventNames.USER_DTREWARD_GET_SUCC)},t.prototype.addHornTalkRec=function(t){if(t&&t.nickname&&t.msg){var e=new Date(t.time),n=e.getHours(),i=e.getMinutes(),o=e.getSeconds();10>n&&(n="0"+n),10>i&&(i="0"+i),10>o&&(o="0"+o);var a=n+":"+i+":"+o,r={time:a,name:PDKBase64.decode(t.nickname),msg:t.msg,isUser:!0};this._hornTalkRec.length>=this._hornTalkRecMaxN&&this._hornTalkRec.shift(),this._hornTalkRec.push(r),this._hornTalkShowList.push(r),PDKalien.Dispatcher.dispatch(PDKEventNames.HORN_TALK_RECORDS_CHANGE,r)}},t.prototype.addHornTalkRecByHttp=function(t){if(t&&t.nickname&&t.msg&&t.add_time){var e=t.add_time.substr(-8),n=t.nickname,i=t.msg,o={time:e,name:n,msg:i,isUser:!0};this._hornTalkRec.length>=this._hornTalkRecMaxN&&this._hornTalkRec.shift(),this._hornTalkRec.push(o)}},t.prototype.cleanLocalHornRecByHttp=function(){this._hornTalkRec=[]},t.prototype.setHornTalkRecMaxLen=function(t){this._hornTalkRecMaxN=t},t.prototype.getHornTalkRecList=function(){return this._hornTalkRec},t.prototype.getHornTalkShowLen=function(){return this._hornTalkShowList.length},t.prototype.getFrontHornTalkShow=function(){var t=null;return this._hornTalkShowList.length>0&&(t=this._hornTalkShowList[0],this._hornTalkShowList.shift()),t},t.prototype.addSysTalkRec=function(t){this._sysTalkRec[0]={msg:t,isUser:!1},PDKalien.Dispatcher.dispatch(PDKEventNames.HORN_TALK_RECORDS_CHANGE)},t.prototype.getSysTalkRecList=function(){return this._sysTalkRec},t.prototype.setNationalActInfo=function(t){this._nationalInfo=t,PDKalien.Dispatcher.dispatch(PDKEventNames.NATIONAL_INFO_CHANGE)},t.prototype.getNationalGetLoginRewDay=function(){return this._nationalInfo&&this._nationalInfo.getRewDay?this._nationalInfo.getRewDay:0},t.prototype.hasGetNationalTodayLoginRew=function(){return this._nationalInfo&&2==this._nationalInfo.todayGet?!0:!1},t.prototype.getNationalInviteNum=function(){return this._nationalInfo&&this._nationalInfo.inviteNum?this._nationalInfo.inviteNum:0},t.prototype.getNationalInviteRew=function(){return this._nationalInfo&&this._nationalInfo.inviteNum?PDKGameConfig.getNationalInviteRewByNum(this._nationalInfo.inviteNum):0},t.prototype.hasGetNationalInviteRew=function(){return this._nationalInfo&&this._nationalInfo.getInviteRew&&2==this._nationalInfo.getInviteRew?!0:!1},t.prototype.hasGetNewDiamond=function(){return 1==this.diamondgiftgot?!0:!1},t.prototype.setHasGetNewDiamond=function(){this.diamondgiftgot=1},t.prototype.setNationalGetLoginRewDay=function(t){this._nationalInfo.getRewDay=t,this._nationalInfo.todayGet=2},t.prototype.getFreeBrowCount=function(){return this.freeBrowCount},t.prototype.setFreeBrowCount=function(t){this.freeBrowCount=t},t.prototype.addFreeBrowCount=function(t){var e=this.freeBrowCount+t;e>=0?this.freeBrowCount=e:this.freeBrowCount=0},t.prototype.shouldShowTaskRed=function(){return this.showredpoint&&this.showredpoint.length>=1&&1==this.showredpoint[0]?!0:!1},t.prototype.shouldShowActFirstRechareRedRed=function(){return this.showredpoint&&this.showredpoint.length>=2&&1==this.showredpoint[1]?!0:!1},t.prototype.shouldShowActDownAppRed=function(){return this.showredpoint&&this.showredpoint.length>=3&&1==this.showredpoint[2]?!0:!1},t.prototype.shouldShowActThanksRed=function(){return this.showredpoint&&this.showredpoint.length>=4&&1==this.showredpoint[3]?!0:!1},t.prototype.setNotShowTaskRed=function(){this.showredpoint[0]=0},t.prototype.setNotShowActFirstRechargeRed=function(){this.showredpoint[1]=0,this.updateActRed()},t.prototype.setNotShowActDownAppRed=function(){this.showredpoint[2]=0,this.updateActRed()},t.prototype.setNotShowActThanksRed=function(){this.showredpoint[3]=0,this.updateActRed()},t.prototype.setNotLoginApp=function(t){this.notLoginApp=t},t.prototype.shouldShowActRed=function(){if(this.showredpoint&&this.showredpoint.length>1)for(var t=1;t<this.showredpoint.length;++t)if(0!=this.showredpoint[t])return!0;return!1},t.prototype.updateActRed=function(){PDKalien.Dispatcher.dispatch(PDKEventNames.ACT_RED_CHANGE)},t.prototype.hasNotLoginApp=function(){return this.notLoginApp},t.prototype.getNorRoomRedNum=function(){var t=0;if(this.wincnt)for(var e=0;e<this.wincnt.length;++e)t+=this.wincnt[e].chance;return t},t.prototype.getRoomCanGetRed=function(t){if(this.wincnt&&this.wincnt.length)for(var e=0;e<this.wincnt.length;e++)if(this.wincnt[e].roomid==t){var n=this.wincnt[e].chance;return!n||0>=n?!1:!0}return!1},t.prototype.getRoomNeedWinCntGetRed=function(t){var e=5;if((9001==pdkServer.roomInfo.roomID||9002==pdkServer.roomInfo.roomID)&&(e=3),(9003==pdkServer.roomInfo.roomID||9004==pdkServer.roomInfo.roomID||9005==pdkServer.roomInfo.roomID)&&(e=1),this.wincnt&&this.wincnt.length)for(var n=0;n<this.wincnt.length;n++)if(this.wincnt[n].roomid==t){var i=this.wincnt[n].cnt;return!i||0>=i?(i=0,e):e-i%e}return e},t.prototype.getOneNorRoomRedFromSmall=function(){if(this.wincnt)for(var t=0;t<this.wincnt.length;++t)if(this.wincnt[t].chance>0)return this.wincnt[t];return null},t.prototype.initPraise=function(t){t.length<5||(this.praise=t)},t.prototype._calcuateVipLevel=function(){var t=PDKGameConfig.getCfgByField("vip_config"),e=t.upgrade.length,n=0,i=0,o=this.vipdata;if(this._vipLevel=0,!(o&&o.length>=1&&(i=o[0],1>i))){if(i>=t.upgrade[e-1].exp)return void(this._vipLevel=e);for(;e-1>n;){if(this.vipdata[0]>=t.upgrade[n].exp&&this.vipdata[0]<t.upgrade[n+1].exp)return void(this._vipLevel=n+1);n++}}},t.prototype.getCurVipLevel=function(){return this._vipLevel},t.prototype.getCurExp=function(){var t=this.vipdata;return t&&t.length>=1?t[0]:0},t.prototype.hasGetTodayVipRew=function(){var t=this.vipdata;if(t&&t.length>=2){var e=pdkServer.getServerStamp(),n=PDKalien.PDKUtils.isTwoStampSameDay(1e3*t[1],e);if(n)return!0}return!1},t.prototype.setHasGetTodayVipRew=function(){var t=this.vipdata,e=t.length,n=pdkServer.tsServer;2>e?1>e?this.vipdata=[1,n]:this.vipdata.push(n):this.vipdata[1]=n},t.prototype.setHasTodayAppLucky=function(){var t=this.monthcardinfo,e=t.length,n=pdkServer.tsServer;e>=6&&(t[5]=n)},t.prototype.getTodayVipLucky=function(){if(this.vipdata.length>=3){var t=1e3*this.vipdata[2],e=pdkServer.getServerStamp();if(e>t){var n=PDKGameConfig.getCfgByField("custom.vipLuckyCfg.hourRange"),i=n.split("|"),o=PDKalien.PDKUtils.checkCurHourisInHourRange(Number(i[0]),Number(i[1]));if(0>=t)return{inTime:o};var a=PDKalien.PDKUtils.checkTwoTimestampIsOtherDay(t,e);return a?{inTime:o}:{inTime:!1,hasLuck:!0}}}return{inTime:!1}},t.prototype.getRoomPlayCount=function(t){for(var e=this.playrecords,n=e.length,i=0;n>i;++i)if(e[i].roomid==t)return e[i].played;return 0},t.prototype.getRoomWinCount=function(t){for(var e=this.playrecords,n=e.length,i=0;n>i;++i)if(e[i].roomid==t)return e[i].win;return 0},t.prototype.clean=function(){this._friends={req:[],list:[],leftSendNum:0,sendNum:0},this.playrecords=[],this.vipdata=[],this._vipLevel=0,this.primarydmrcge=[0,0],this.invitetaskstatus=[0,0],this.diamondrelive=0,this.goldrelive=0,this.showredpoint=[0,0,0,0],this.freeBrowCount=0,this._nationalInfo={getRewDay:0,todayGet:0,inviteNum:0,getInviteRew:0},this._hornTalkShowList=[],this._hornTalkRec=[],this._sysTalkRec=[],this.uid=0,this.nickname=null,this.diamondgiftgot=null,this.money=0,this.gold=0,this.exp=0,this.vipexp=0,this.sex=0,this.sexStr=null,this.sexVoiceStr=null,this.imageid=null,this.havesecondpwd=0,this.isbinding=0,this.wincnt=[],this.drawcnt=0,this.fakeuid=0,this.bindphone=null,this.redcoin=0,this.seatid=0,this.freshmanredcoinsent=0,this.beans=null,this.rcminexcexpiretime=0,this.rcminexcchanceused=null,this.freshrewardgot=null,this.redcoingot=0,this.totalwincnt=0,this.totallosecnt=0,this.totaldrawcnt=0,this.recorderfirstrewardgot=0,this.cardsRecorder=null,this._dayTaskOverNum=0,this.daytaskprogress=[0,0,0,0,0,0],this.praise=[0,0,-1,-1,-1],this.daytaskstatus=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.frechargerewardday=null,this.todayHasSign=null,this.signrewardaddremain=null,this.notLoginApp=!1,this.primarydmrcge=0,this.monthcardinfo=[0,0,0,0,0]},t.prototype.getRoomWinCntInfo=function(t){var e=null;if(this.wincnt)for(var n=this.wincnt.length,i=0;n>i;++i)if(this.wincnt[i].roomid==t){e=this.wincnt[i];break}return e},t}();__reflect(PDKUserInfoData.prototype,"PDKUserInfoData");var PDKWxHelper=function(){function t(){}return t.share=function(t,e,n){if(void 0===n&&(n=[]),PDKalien.Native.instance.isWXMP&&!pdkServer._isInDDZ){var i=PDKUserData.instance,o=i.getItem("sk");o||(o="",PDKReportor.instance.reportCodeError("sk error share"));var a={};a.imgUrl=PDKGameConfig.RESOURCE_URL+"shareIcon.jpg",a.title1=PDKlang.thirdPartWxMp.title2,a.link1=PDKGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+o,t==this.SHARE_FREE_GAME?(a.title2=PDKlang.thirdPartWxMp.title3,a.desc2=PDKalien.StringUtils.format(PDKlang.thirdPartWxMp.desc3,n[2],n[0],n[1]),a.link2=PDKGameConfig.WX_LOGIN_URL+"?state=3&share_room="+n[2]):(a.title2=PDKlang.thirdPartWxMp.title2,a.desc2=PDKlang.thirdPartWxMp.desc2,a.link2=PDKGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+o),PDKalien.Native.instance.share(a,e)}},t.shareDownApp=function(t){var e={},n=PDKUserData.instance,i=n.getItem("sk");e.title=PDKlang.thirdPartWxMp.title2,e.description=PDKlang.thirdPartWxMp.desc2,e.shareType=0,e.sharePlatform=2,e.url="https://wx.yiyuc.com/appshare/qrcode.php?sk="+i,PDKalien.Native.instance.share(e,t)},t._onShareRet=function(t){var e=!1;3==t.code&&(e=!0,PDKPanelShare.instance.close()),PDKalien.Dispatcher.dispatch(PDKEventNames.USER_SHARE_RESULT,{shareSucc:e})},t.doWebH5ShareCfg=function(){t.share(2,t._onShareRet.bind(t))},t.doNativeShare=function(){t.shareForNative(2,t._onShareRet.bind(t))},t.shareForNative=function(t,e,n){void 0===n&&(n=[]);var i=2,o=PDKUserData.instance,a=o.getItem("sk");a||(a="");var r=!0,s=PDKGameConfig.WX_LOGIN_URL+"?state=3&share_sk="+a,h="http://sgpdk.16w.com/wx/",c="http://sgpdk.16w.com/wx/",l={};r?l.url=s:(l.url=c,"iOS"==egret.Capabilities.os&&(l.url=h)),l.title=PDKlang.thirdPartWxMp.title2,l.description=PDKlang.thirdPartWxMp.desc2,t==this.SHARE_FREE_GAME&&(l.title=PDKlang.thirdPartWxMp.title3,l.description=PDKalien.StringUtils.format(PDKlang.thirdPartWxMp.desc3,n[2],n[0],n[1]),l.url=PDKGameConfig.WX_LOGIN_URL+"?state=3&share_room="+n[2]),l.shareType=0,l.sharePlatform=i,PDKalien.Native.instance.share(l,e)},t.shareImageNative=function(t,e,n){if(void 0===n&&(n=[]),!PDKalien.Native.instance.isNative)return void console.log("shareImageNative not native!");var i=2;switch(t){case this.SHARE_IMAGE_TO_FRIENDS:i=2;break;case this.SHARE_IMAGE_TO_TIMELINE:default:i=3}var o={};o.title=PDKlang.thirdPartWxMp.title2,o.shareType=1,o.url=n[0],o.sharePlatform=i,o.description="",PDKalien.Native.instance.share(o,e)},t.NATIVE_SHARE_SUCC=0,t.SHARE_FREE_GAME=1,t.SHARE_GAME=2,t.SHARE_IMAGE_BASE=10,t.SHARE_IMAGE_TO_TIMELINE=11,t.SHARE_IMAGE_TO_FRIENDS=12,t}();__reflect(PDKWxHelper.prototype,"PDKWxHelper");var PDKNormalButton=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bgRes="",e}return __extends(e,t),Object.defineProperty(e.prototype,"bgUp",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_n")?"_n":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgDown",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_h")?"_h":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgDisabled",{get:function(){return this._bgRes?this._bgRes+(RES.hasRes(this._bgRes+"_d")?"_d":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgRes",{get:function(){return this._bgRes},set:function(t){this._bgRes=t,this.bgDisplay&&(this.bgDisplay.source=this.bgUp)},enumerable:!0,configurable:!0}),e}(eui.Button);__reflect(PDKNormalButton.prototype,"PDKNormalButton");var PDKStateButton=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelIconDisplay=null,e._labelIcon="",e.bgImg=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"iconUp",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_n")?"_n":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconDown",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_h")?"_h":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconDisabled",{get:function(){return this._labelIcon?this._labelIcon+(RES.hasRes(this._labelIcon+"_d")?"_d":""):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelIcon",{get:function(){return this._labelIcon},set:function(t){this._labelIcon=t,this.iconDisplay&&(this.iconDisplay.source=this.iconUp)},enumerable:!0,configurable:!0}),e}(eui.Button);__reflect(PDKStateButton.prototype,"PDKStateButton");var PDKAssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(PDKAssetAdapter.prototype,"PDKAssetAdapter",["eui.IAssetAdapter"]);var PDKThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(PDKThemeAdapter.prototype,"PDKThemeAdapter",["eui.IThemeAdapter"]);var PDKActListItem=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalColor=8866329,e.selColor=14770739,e.normalBg="pdk_common_btn1_n",e.selBg="pdk_common_btn1_h",e}return __extends(e,t),e.prototype._showFlagImg=function(t){this.flagImg.visible=t},e.prototype._setTit=function(t){this.titLabel.text=t},e.prototype._setSelect=function(){this.bgImg.source=this.selBg,this.titLabel.textColor=this.selColor},e.prototype._setNormal=function(){this.bgImg.source=this.normalBg,this.titLabel.textColor=this.normalColor},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this._setTit(this.data.tit),this.data.sel?this._setSelect():this._setNormal(),this.data["new"]?this._showFlagImg(!0):this._showFlagImg(!1)},e}(eui.ItemRenderer);__reflect(PDKActListItem.prototype,"PDKActListItem");var PDKAvatar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefault(),this._initTouchEvent(),this.imgMask&&(this.imgAvatar.mask=this.imgMask)},e.prototype.getHeadCenGlobalPos=function(){if(!this._headCGlobalPos){var t=this.imgAvatar.x,e=this.imgAvatar.y,n=this.imgAvatar.width,i=this.imgAvatar.height;new egret.Point(0,0);this._headCGlobalPos=this.imgAvatar.localToGlobal(t+.5*n,e+.5*i)}return this._headCGlobalPos},e.prototype._initDefault=function(){this._headTouchFunc=null,this.bg_img.touchEnabled=!1,this._showVipGrp(!1)},e.prototype._initTouchEvent=function(){this.bg_img.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTouchHead,this)},e.prototype._onTouchHead=function(){this._headTouchFunc&&this._headTouchFunc()},e.prototype.setHeadTouchFunc=function(t){this._headTouchFunc=t},e.prototype.setHeadTouch=function(t){this.bg_img.touchEnabled=t},e.prototype.setQuitFlagVisible=function(t){this.quitFlag.visible=t},e.prototype.setOwnerFlagVisible=function(t){this.ownerFlag.visible=t},e.prototype._showVipGrp=function(t){this.vipGrp.visible=t},e.prototype.setVipLevel=function(t){this._vipLevel=t;var e=!1;t>=1&&(e=!0,this.vipLabel.text="VIP"+t),this._showVipGrp(e)},Object.defineProperty(e.prototype,"imageId",{set:function(t){var e=t;t&&t!=this.imgAvatar.source&&(-1!=t.indexOf("http://")&&(e=t.replace("http://","https://")),this.imgAvatar.source=e)},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this.imgAvatar.source=null,this._showVipGrp(!1)},e}(eui.Component);__reflect(PDKAvatar.prototype,"PDKAvatar");var PDKButtonBar=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this)},e.prototype.onGrpButtonTap=function(t){var e={},n=t.target.name;n.indexOf("score")>=0?(e.action="setScore",e.score=parseInt(n.substr(6,1))):e.action=n,this.dispatchEventWith(PDKEventNames.BUTTON_BAR_TAP,!1,e)},e.prototype.switchState=function(t,e){if(void 0===e&&(e=-1),this.currentState=t,e>=0)for(var n=1;3>=n;n++){var i=this["score_"+n];i.enabled=n>e}},e.prototype.modifyButton=function(t,e){var n=this;egret.callLater(function(){var i=n.grpButton.getChildByName(t);i&&(i.enabled=e)},this)},e.prototype.hideButton=function(t,e){var n=this;egret.callLater(function(){var i=n.grpButton.getChildByName(t);i&&(i.visible=!e)},this)},e}(eui.Component);__reflect(PDKButtonBar.prototype,"PDKButtonBar");var PDKButtonDoTaskSkin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaultUI(),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0)},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this),this.mNormal_img[e](egret.TouchEvent.TOUCH_BEGIN,this._onTouchNormalBegin,this),this.mNormal_img[e](egret.TouchEvent.TOUCH_END,this._onTouchNormalEnd,this),this.mNormal_img[e](egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._onTouchNormalCancel,this),this.mNormal_img[e](egret.TouchEvent.TOUCH_CANCEL,this._onTouchNormalCancel,this)},e.prototype._onTouchNormalBegin=function(){this.mNormal_img.source=this._press},e.prototype._onTouchNormalEnd=function(){this.mNormal_img.source=this._noraml,this._clickFunc&&this._clickFunc()},e.prototype._onTouchNormalCancel=function(){this.mNormal_img.source=this._noraml},e.prototype._initDefaultUI=function(){this._noraml=this.mNormal_img.source,this._press=this.mPress_img.source,this.mNormal_img.visible=!0,this.mPress_img.visible=!1},e.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},e.prototype.setClickFunc=function(t){t&&(this._clickFunc=t)},e.prototype.setPngs=function(t,e){this._noraml=t,this._press=e,this.mNormal_img.source=this._noraml},e.prototype.enableTouch=function(t){this.mNormal_img.touchEnabled=t},e.prototype.setOnePngAndForbidTouch=function(t){this.mNormal_img.source=t,this.enableTouch(!1)},e}(eui.Component);__reflect(PDKButtonDoTaskSkin.prototype,"PDKButtonDoTaskSkin");var PDKCDClock=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.start=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0),this.labNum.text=t.toString(),this._endTime=pdkServer.tsServer+t,this._second=t,this._oncomplete=e,this._timer=egret.setInterval(this.renderTime.bind(this),this,1e3),this.visible=n},e.prototype.stop=function(t){void 0===t&&(t=!1),this.labNum.text="",this._timer&&(egret.clearInterval(this._timer),this._timer=0),this._oncomplete&&this._oncomplete(),t&&(this.visible=!1)},e.prototype.renderTime=function(){this._second--,this._second<0&&(this._second=0,this.stop());var t=this._second;this.labNum.text=t.toString()},e}(eui.Component);__reflect(PDKCDClock.prototype,"PDKCDClock");var PDKCDProgressBar=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._offset=-Math.PI/2,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addChild(this._mask=new egret.Shape),this.thumb.mask=this._mask;var e=this.thumb.width,n=this.thumb.height;this._radius=Math.sqrt(e*e+n*n)/2,this._center={x:this.thumb.width/2,y:this.thumb.height/2}},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&this._setValue(this._value=t)},enumerable:!0,configurable:!0}),e.prototype._setValue=function(t){var e=this._mask.graphics,n=t,i=this._radius,o=this._center.x,a=this._center.y;e.clear(),e.beginFill(16711680),e.moveTo(o,a),e.drawArc(o,a,i,n,2*Math.PI+this._offset),e.lineTo(o,a),e.endFill()},e.prototype.onSecond=function(t){this.labelDisplay&&(this.labelDisplay.text=t.toString())},e.prototype.play=function(t,e){void 0===e&&(e=0),this.value=this._offset,this._tween=egret.Tween.get(this).wait(e).to({value:2*Math.PI+this._offset},1e3*t),this._timer>0&&egret.clearInterval(this._timer),this._timer=PDKCountDownService.register(t,this.onSecond.bind(this)),this.visible=!0},e.prototype.stop=function(){this._tween&&this._tween.setPaused(!0),this._timer>0&&egret.clearInterval(this._timer),this.visible=!1},e}(eui.Component);__reflect(PDKCDProgressBar.prototype,"PDKCDProgressBar");var PDKChatBubble=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.play=function(t){var e=this;this.labContent.text=t,this.visible=!0,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},200).wait(5e3).to({alpha:0},200).call(function(){e.visible=!1})},e}(eui.Component);__reflect(PDKChatBubble.prototype,"PDKChatBubble");var PDKChatList=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=components.PDKChatListSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKIRUpDownIcon,this.list.dataProvider=new eui.ArrayCollection(PDKlang.chatList),this.list.addEventListener(egret.Event.CHANGE,this.onSelectItem,this)},e.prototype.onSelectItem=function(t){var e=this;this._callback(this.list.selectedIndex),egret.callLater(function(){e.list.selectedIndex=-1},this),this.close()},e.prototype.show=function(t){this._callback=t,egret.Tween.get(this.grp,null,null,!0).to({scrollV:0},200,egret.Ease.cubicIn)},e.prototype.close=function(t){void 0===t&&(t=!0),t?egret.Tween.get(this.grp,null,null,!0).to({scrollV:-this.height},200,egret.Ease.cubicIn):this.grp.scrollV=-this.height},e}(eui.Component);__reflect(PDKChatList.prototype,"PDKChatList");var PDKExchangeShowInfo=function(t){function e(){var e=t.call(this)||this;return e._exchageViews=[],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.removeFromStage,e),e}return __extends(e,t),e.prototype.createChildren=function(){this._exservice=PDKMsgInfoService.instance;for(var t=0;3>t;t++){var e=new PDKExchangeShowInfoView;e.touchChildren=!1,e.touchEnabled=!1,e.alpha=0,this.addChild(e),this._exchageViews.push(e)}},e.prototype.addToStage=function(t){this.onShow()},e.prototype.removeFromStage=function(t){this.onHide()},e.prototype.onShow=function(){this._timer||(this._timer=new egret.Timer(1e3,0)),this._timer.addEventListener(egret.TimerEvent.TIMER,this.showing,this),this._timer.start()},e.prototype.onHide=function(){null!=this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.showing,this),this._timer=null)},e.prototype.showing=function(){var t=this._exchageViews.pop();if(t){var e=this._exservice._showInfoQueen.shift();e?(t.setData(e),t.x=0,t.y=0,t.alpha=1,egret.Tween.get(t).to({x:0,y:-50},1e3).to({x:0,y:-150,alpha:0},2e3).call(this.showend,this,[t])):this._exchageViews.push(t)}},e.prototype.showend=function(t){this._exchageViews.push(t)},e}(eui.Component);__reflect(PDKExchangeShowInfo.prototype,"PDKExchangeShowInfo");var PDKExchangeShowInfoView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=components.PDKExchangeShowInfoSkin},e.prototype.setData=function(t){t.hasOwnProperty("nickname")?this.lbl_name.text=t.nickname:this.lbl_name.text="",this.lbl_coin.textFlow=(new egret.HtmlTextParser).parser("抽得<font color='#F0FF00'>"+PDKUtils.exchangeRatio(t.money,!0)+"</font> 奖杯")},e}(eui.Component);__reflect(PDKExchangeShowInfoView.prototype,"PDKExchangeShowInfoView");var _allCfg=(_a={},_a[1]="{0}元微信红包",_a[4]="{0}元话费",_a[5]="{0}元京东卡",_a[6]="{0}元话费充值卡",_a[7]="{0}奖杯",_a[8]="{0}奖杯",_a),_stCfg=(_b={},_b[3]="领取",_b[4]="已领取",_b[5]="充值中",_b[6]="充值失败",_b[7]="邮件补发",_b),PDKFeiHistoryItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),null!=this.data){var e=new Date(1e3*this.data.recordtime),n=PDKalien.TimeUtils.timeFormatForEx(e,"-","-","",!1);this.exTimeLabel.text="领取日期:  "+n,this.typeImg.source="exchange_"+this.data.goodsid,this._initDesc(),this._initStatus(),this.statusBgImg.addClickListener(this._onClickStatus,this,!1)}},e.prototype._initStatus=function(){var t=this.data,e=t.status,n=this.data.goodsid;3==e?(this.statusBgImg.source="pdk_common_btn_orange3",this.statusBgImg.touchEnabled=!0):4==e&&(5==n||6==n)?(this.statusBgImg.source="pdk_common_btn_orange3",this.statusBgImg.touchEnabled=!0):(this.statusBgImg.source="pdk_common_btn_orange2_gray",this.statusBgImg.touchEnabled=!1),_stCfg[e]&&(this.exStatusLabel.text=_stCfg[e],4==e&&(5==n||6==n)&&(this.exStatusLabel.text="查看卡密"))},e.prototype._initDesc=function(){var t=this.data;if(_allCfg[t.goodsid]){var e=_allCfg[t.goodsid];e=e.replace("{0}",t.goodsamount),this.exDescLabel.text=e}},e.prototype.updateInfo=function(t){this.data=t},e.prototype._onClickStatus=function(){var t=this,e=this.data;e.item=this;var n=e.status;if("1"==e.goodsid){if(3!=n)return;return void PDKwebService.goRechageFei({uid:pdkServer.uid,coinid:e.id},function(e){0==e.code?(PDKToast.show("领取微信红包成功！请留意公众号通知。"+e.message),t&&(t.data.status=4,t.updateInfo(t.data))):PDKToast.show("领取微信红包失败！错误原因："+e.message)})}(3==n||4==n)&&PDKPanelFeiEx.getInstance().show(e)},e}(eui.ItemRenderer);__reflect(PDKFeiHistoryItem.prototype,"PDKFeiHistoryItem");var _a,_b,PDKFlyGold=function(t){function e(){var e=t.call(this)||this;return e.skinName=components.PDKFlyGoldSkin,e}return __extends(e,t),e.prototype.fly=function(t,e,n,i,o){void 0===o&&(o=1e3),this.visible=!0,this.rotation=360*Math.random();var a=t+123,r=e+68,s=o;this.x=a,this.y=r;var h=this.getBezier(t,e,n,i);egret.Tween.get(this,null,null,null).to({x:n,y:i,rotation:this.rotation+180,_bezier:h},s).call(this.flyEnd,this)},e.prototype.flyEnd=function(){this.visible=!1,this.dispatchEvent(new egret.Event("flyComplete"))},e.prototype.getBezier=function(t,e,n,i){var o,a,r,s=15,h=n-t,c=i-e,l=Math.random(),p=[];r=Math.abs(h)<Math.abs(c)?.5>l?1:2:.5>l?3:4;for(var d,u=2,_=1;u>_;_++)d=0+50*Math.random(),1==r||2==r?(a=e+(i-e)/u*_,o=1==r?t+(n-t)/u*_-s-d:t+(n-t)/u*_+s+d):(o=t+(n-t)/u*_,a=3==r?e+(i-e)/u*_+s+d:e+(i-e)/u*_-s-d),p.push({x:o,y:a});return p},e}(eui.Component);__reflect(PDKFlyGold.prototype,"PDKFlyGold");var PDKGCardsGold=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setData=function(t){t&&null!=t||(t=0),this.gold.text=t},e}(eui.Component);__reflect(PDKGCardsGold.prototype,"PDKGCardsGold");var PDKGold=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnRecharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRechargeTap,this)},e.prototype.onBtnRechargeTap=function(t){"withButton"==this.currentState?pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show():"diamondBuy"==this.currentState&&(pdkServer._isInDDZ?this.openDDZShop(1):PDKPanelExchange2.instance.show(1))},e.prototype.openDDZShop=function(t){void 0===t&&(t=0),pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:t})},e.prototype._formatGold=function(t){this.nGold=t;var e=""+t;return t>=1e6?e=e.substring(0,e.length-4)+"万":t>1e5&&(e=e.substr(0,2)+"."+e.substr(2,1)+"万"),e},e.prototype.updateGold=function(t){t||(t=0),console.log("updateGold-------------》",t),this.labGold&&(this.labGold.text=this._formatGold(t))},e.prototype.updateDiamondNum=function(t,e){if(t||(t=0),this.labGold){var n=Number(this.nGold),i=n+t;console.log("updatenDiamond-------------》",n,t,i),this.labGold.text=this._formatGold(i)}},e.prototype.setEmpty=function(){this.labGold.text=""},e.prototype.showDiamond=function(){this.imgIcon.source="pdk_icon_diamond"},e.prototype.setType=function(t,e){if(void 0===e&&(e=0),this._isMatch=t)switch(e){case 0:this.imgIcon.source=PDKResNames.pdk_icon_score;break;case 1:this.imgIcon.source=PDKResNames.pdk_icon_gold}else this.imgIcon.source=PDKResNames.pdk_icon_gold;this.btnRecharge.visible=!t},e}(eui.Component);__reflect(PDKGold.prototype,"PDKGold");var PDKGoldRainEffectLayer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.play=function(){var t=this;if(!this._goldItems){this._goldItems=[];for(var e=new egret.MovieClipDataFactory(RES.getRes(PDKResNames.pdk_ani_coin_json),RES.getRes(PDKResNames.pdk_ani_coin_png)),n=0;35>n;n++){var i=new GoldItem(e);this._goldItems.push(i)}}this._goldItems.forEach(function(e){t.addChild(e),e.playFall()}),PDKalien.PDKSoundManager.instance.playEffect(PDKResNames.pdk_effect_gold_rain)},e}(eui.Group);__reflect(PDKGoldRainEffectLayer.prototype,"PDKGoldRainEffectLayer");var GoldItem=function(t){function e(e){var n=t.call(this)||this;return n._mc=new egret.MovieClip(e.generateMovieClipData("coin")),n.addChild(n._mc),n._mc.scaleX=n._mc.scaleY=.8,n}return __extends(e,t),e.prototype.playFall=function(){var t=this;this.x=Math.random()*this.stage.stageWidth,this.y=-70,this.alpha=1,this._mc.play(-1),egret.Tween.get(this,null,null,!0).wait(1e3*Math.random()).to({y:this.stage.stageHeight-53},1500,egret.Ease.bounceOut).to({alpha:0},200).call(function(){t.parent.removeChild(t)})},e}(egret.DisplayObjectContainer);__reflect(GoldItem.prototype,"GoldItem");var PDKotherGameCfg=(_a={},_a[2]={name:"crazy32",urlRoot:"http://192.168.0.81/laoqifeng/doudizhu/games/c32test/web/171207160146/",mainJs:"main.min.js",gameId:3,listenAllProto:!1,entryClassName:"Crazy32GameEntry"},_a[3]={name:"niuniu",urlRoot:"http://192.168.0.235:8085/",mainJs:"main.min.js",gameId:4,listenAllProto:!1,entryClassName:"NiuNiuMain"},_a[4]={name:"fish",urlRoot:"http://192.168.0.5:8086/",mainJs:"main.min.js",gameId:5,listenAllProto:!0,entryClassName:"FishMain"},_a),_a,PDKHornTalkItem=function(t){function e(){var e=t.call(this)||this;
return e._enableEvent(!0),e}return __extends(e,t),e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},e.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&this._initByData()},e.prototype._initByData=function(){var t=this.data,e="";if(t.isUser){var n=t.name.substr(0,9);e="<font color='#ffffff'>【"+n+"】:</font> <font color='#654116'>"+t.msg+"</font>"}else e="<font color='#FFEA00'>【 系统 】</font><font color='#FFEA00'>"+t.msg+"</font>";var i=(new egret.HtmlTextParser).parser(e);this.text_label.textFlow=i},e}(eui.ItemRenderer);__reflect(PDKHornTalkItem.prototype,"PDKHornTalkItem");var PDKInviteListItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.itemIndex%2==0?this.bg.visible=!0:this.bg.visible=!1,"0"==this.data.status?this.status.source="invite_6":this.status.source="invite_5",this.data.nickname.length>9&&(this.data.nickname=this.data.nickname.substr(0,6),this.data.nickname=this.data.nickname+"..."),this.lbName.text=this.data.nickname,this.lbTime.text=this.data.add_time},e}(eui.ItemRenderer);__reflect(PDKInviteListItem.prototype,"PDKInviteListItem");var PDKLoading=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._count=8,e.R=50,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addChild(this._container=new egret.DisplayObjectContainer);for(var e=2*Math.PI/this._count,n=0;n<this._count;n++){var i=new PDKLoadingItem;i.play(e*(this._count-n-1)),this._container.addChild(i),i.x=Math.cos(e*n)*this.R,i.y=Math.sin(e*n)*this.R}},e.prototype.play=function(){PDKalien.TickerManager.register(this)},e.prototype.stop=function(){PDKalien.TickerManager.unregister(this)},e.prototype.update=function(){PDKalien.PDKUtils.enumChildren(this._container,function(t){t.update()})},e}(eui.Group);__reflect(PDKLoading.prototype,"PDKLoading",["PDKalien.ITicker"]);var PDKLoadingItem=function(t){function e(){var e=t.call(this,RES.getRes(PDKResNames.loading_icon))||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.anchorOffsetX=this.anchorOffsetY=this.width/2},e.prototype.update=function(){this._radius+=.08,this.alpha=this.scaleX=this.scaleY=(Math.sin(this._radius+this._offset)+1)/2},e.prototype.play=function(t){this._offset=t,this._radius=0},e}(egret.Bitmap);__reflect(PDKLoadingItem.prototype,"PDKLoadingItem");var PDKLoadingProcess=function(t){function e(){var e=t.call(this)||this;e.group=new eui.Group,e.group.width=584,e.group.height=93,e.addChild(e.group),e.back=new eui.Image(RES.getRes("loding_image_23")),e.back.scale9Grid=new egret.Rectangle(38,6,231,7),e.back.x=0,e.back.y=71,e.back.width=584,e.group.addChild(e.back),e.scroller1=new eui.Scroller,e.scroller1.width=0,e.scroller1.height=21,e.scroller1.x=0,e.scroller1.y=71;var n=new eui.Group;e.scroller1.viewport=n,e.pro=new eui.Image(RES.getRes("loding_image_24")),e.pro.scale9Grid=new egret.Rectangle(38,7,231,6),e.pro.width=584,n.addChild(e.pro);for(var i=18;560>i;i+=18){var o=new eui.Image(RES.getRes("loding_image_25"));o.x=i,o.y=5,n.addChild(o)}var a=new eui.Image(RES.getRes("loding_image_26"));a.scale9Grid=new egret.Rectangle(51,6,200,2),a.width=584,n.addChild(a);var r=new eui.Image(RES.getRes("loding_image_27"));return r.scale9Grid=new egret.Rectangle(38,11,231,3),r.width=584,n.addChild(r),e.group.addChild(e.scroller1),e.light=new eui.Image(RES.getRes("loding_image_28")),e.light.x=0,e.light.y=76,e.group.addChild(e.light),e.plane=new eui.Image(RES.getRes("loding_image_29")),e.plane.x=0,e.plane.y=29,e.group.addChild(e.plane),e.lab1=new eui.Label,e.lab1.size=18,e.lab1.text="加载中...",e.lab1.fontFamily="微软雅黑",e.lab1.horizontalCenter=0,e.lab1.y=7,e.lab1.textColor=354118,e.group.addChild(e.lab1),e}return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.setProcess=function(t,e){t>e&&(t=e),this.scroller1.width=t/e*this.pro.width,this.light.x=this.scroller1.width-this.light.width+4,this.light.x>this.pro.width-this.light.width-4&&(this.light.x=this.pro.width-this.light.width-4),this.plane.x=this.scroller1.width-this.plane.width+17,this.lab1.text=t+"/"+e},e}(eui.Component);__reflect(PDKLoadingProcess.prototype,"PDKLoadingProcess");var PDKMarqueeText=function(t){function e(){var e=t.call(this)||this;return e.announceonly=!1,e._bInLobby=!1,e._bScrolling=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.skinName=components.PDKMarqueeSkin,this.m_width=this.maskR.width,this.step=3,this.bg_img.addClickListener(this._onClickOpenHornTalk,this,!1)},e.prototype.clear=function(){this.stop()},e.prototype.addToStage=function(t){this.x=PDKalien.StageProxy.stage.stageWidth-this.width>>1,this.y=114,PDKalien.StageProxy.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.bg_img.addClickListener(this._onClickOpenHornTalk,this,!1)},e.prototype.removeFromStage=function(t){PDKalien.StageProxy.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.clear()},e.prototype.onResize=function(t){this.x=PDKalien.StageProxy.stage.stageWidth-this.width>>1},e.prototype.show=function(t){void 0===t&&(t=null),this._bScrolling||(this.announceonly=t,this.txt.text="",this.txt.x=this.maskR.x,this.checkNext())},e.prototype.onMouseOver=function(t){this.isMouseOver=!0},e.prototype.onMouseOut=function(t){this.isMouseOver=!1},e.prototype.deleteAnnounce=function(){PDKMsgInfoService.instance.deleteAnnounce(),this._bScrolling=!1,this.announceonly=!1},e.prototype._showOneMsgByHornRec=function(t){var e=t,n=e.name.substr(0,9),i={type:4,text:"",time:3e3};i.text="<font color='#ffffff'>【"+n+"】:</font> <font color='#F0FF00'>"+e.msg+"</font>",this.showOne(i,!1)},e.prototype._showOneMsgByChouRec=function(t){t.hasOwnProperty("nickname")||(t.nickname="");var e={type:3,text:"",time:4e3},n="金豆场";t.room_id&&(n=PDKlang.exchange_roomid[t.room_id]),n||(n="金豆场"),e.text="恭喜<font color='#F0FF00'>"+t.nickname.substr(0,9)+"</font>在"+n+"抽得<font color='#F0FF00'>"+PDKUtils.exchangeRatio(t.money,!0)+"</font> 奖杯",this.showOne(e,!1)},e.prototype.showLast=function(t){void 0===t&&(t=1),console.log("showLast------------->",t),this.txt.text="",this.txt.x=this.maskR.x,this.announceonly=!1,egret.Tween.removeTweens(this.txt);var e=PDKMsgInfoService.instance;if(e.announce&&e.announce.length>0){this.announceonly=!0;var n=this.getNextText();this.showOne(n)}else if(1==t){var i=PDKMainLogic.instance.selfData.getHornTalkRecList();if(i.length>0){var o=i[i.length-1];this._showOneMsgByHornRec(o)}}else if(2==t){var i=PDKMsgInfoService.instance.getOneChouMaxInfo();console.log("showLast2----------",i),i&&this._showOneMsgByChouRec(i)}},e.prototype.showOne=function(t,e,n){var i=this;void 0===e&&(e=!0),void 0===n&&(n=null),this.visible=!0,this.txt.text="",this.txt.textColor=16777215,this.txt.textFlow=(new egret.HtmlTextParser).parser(t.text),this.txt.x=this.m_width;var o=-this.txt.width,a=50*Math.floor((this.txt.x-o)/this.step);this.txt.alpha=1,this.txt.cacheAsBitmap=!1,this.txt.validateNow(),this.announceonly?(this._bScrolling=!0,this.txt.cacheAsBitmap=!0,egret.Tween.get(this.txt).to({x:o},a).call(this.deleteAnnounce.bind(this))):(this._bScrolling=!0,1==t.type?(this.txt.cacheAsBitmap=!0,egret.Tween.get(this.txt).to({x:o},a).call(this.checkNext.bind(this,!0))):(this.txt.x=.5*(this.m_width-this.txt.measuredWidth),this.txt.visible=!1,this.txt.alpha=0,egret.Tween.get(this.txt).set({visible:!0}).to({alpha:1},200).wait(t.time).to({alpha:0},1e3).wait(1e3).call(function(){e&&i.checkNext(!0),n&&n()})))},e.prototype.checkNext=function(t){void 0===t&&(t=!1),t&&PDKMsgInfoService.instance.deleteAnnounce(),this.announceonly=!1;var e=this.getNextText();""==e.text?this.stop():this.showOne(e)},e.prototype.getNextText=function(){var t=PDKMsgInfoService.instance,e=PDKMainLogic.instance.selfData,n={type:1,text:"",time:3e3},i=null;if(t.announce&&t.announce.length>0){this.imgRedCoin.visible=!1,this.imgTrumpet.visible=!0,this.txt.textColor=16047376;var o=t.announce;n.type=1,n.text="<font color='#FFEA00'>【 系统 】</font><font color='#FFEA00'>"+o+"</font>"}else if(i)n.type=1,n.text=i;else if(t._showInfoQueen&&t._showInfoQueen.length){this.imgRedCoin.visible=!0,this.imgTrumpet.visible=!1;var a=t.getOneChouInfoFromFront(!0);if(n.type=3,n.time=4e3,a){a.hasOwnProperty("nickname")||(a.nickname="");var r="",s="金豆场";a.room_id&&(s=PDKlang.exchange_roomid[a.room_id]),s||(s="金豆场"),r+="恭喜<font color='#F0FF00'>"+a.nickname.substr(0,9)+"</font>在"+s+"抽得<font color='#F0FF00'>"+PDKUtils.exchangeRatio(a.money,!0)+"</font>奖杯",n.text=r}else n.text=""}else if(t.lottery&&t.lottery.nickname&&t.lottery.c_rewarddes)n.type=5,n.text="恭喜<font color='#F0FF00'>"+t.lottery.nickname.substr(0,9)+"</font>夺宝获得<font color='#F0FF00'>"+t.lottery.c_rewarddes+"</font>",t.delLottery();else if(e.getHornTalkShowLen()>0){var h=e.getFrontHornTalkShow();if(!h||!h.name||!h.msg)return"";n.type=4,n.text="<font color='#FFFFFF'>【"+h.name.substr(0,9)+"】:</font>  <font color='#F0FF00'>"+h.msg+"</font>"}else if(t.matchChampionMsg&&t.matchChampionMsg.length){this.imgRedCoin.visible=!0,this.imgTrumpet.visible=!1;var a=t.matchChampionMsg.shift();if(n.type=2,n.time=6e3,a){var c=a.content.split("|");4==c.length?n.text="恭喜<font color='#F0FF00'>"+c[0].substr(0,6)+"</font>夺得<font color='#F0FF00'>"+c[1]+"</font>第"+c[2]+"名,获得:<font color='#F0FF00'>"+c[3]+"</font>":3==c.length?n.text="<font color='#F0FF00'>"+c[0]+"</font>"+c[1]+"<font color='#F0FF00'>"+c[2]+"</font>":n.text=a.content}else n.text=""}return n},e.prototype.stop=function(){this._bScrolling=!1,egret.Tween.removeTweens(this.txt)},e.prototype.setInLobby=function(t){this._bInLobby=t},e.prototype.enableSendHorn=function(t){t=!1,this.bg_img.touchEnabled=t,this.openHorn_img.visible=t},e.prototype._onClickOpenHornTalk=function(){PDKPanelHornTalk.getInstance().show()},e.prototype._getRankNext=function(){var t=this.inviteRankList||[],e=t.shift();if(e){var n={type:4,text:"",time:3e3};n.text="<font color='#F0FF00'>"+e.nickname+" </font>通过邀请已累计获得<font color='#F0FF00'>"+e.coin+"</font>钻石",this.showOne(n,!1,this._getRankNext.bind(this))}else this.stop()},e.prototype.showByInviteRankList=function(t){this.inviteRankList=t,this._bScrolling||this._getRankNext()},e}(eui.Component);__reflect(PDKMarqueeText.prototype,"PDKMarqueeText"),window.PDKMarqueeText=PDKMarqueeText;var PDKMasterCards=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;3>e;e++){var n=PDKCard.create({pid:0});n.scaleX=n.scaleY=.4,n.x=62*e,this.container.addChild(n)}},e.prototype.initData=function(){var t=this;[0,0,0].forEach(function(e,n){var i=t.container.getChildAt(n);i.showBack()}),this.updateScore(0,1)},e.prototype.showCards=function(t,e){var n=this;t.forEach(function(t,i){var o=n.container.getChildAt(i);o.pokerId=t,o.showFront(!e)})},e.prototype.updateScore=function(t,e){var n=""+t;t>=1e4&&(n=""+t/1e4+"万"),this.labBase.text=n,this.labMultiple.text=e.toString()},e.prototype.updateMultiple=function(t){0>t||(this.labMultiple.text=""+t)},e}(eui.Component);__reflect(PDKMasterCards.prototype,"PDKMasterCards");var PDKNavigationPage=PDKalien.PDKNavigationPage,Page=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=components.PDKPageSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100},e.prototype.beforeShow=function(t,e){"push"==t&&(this.label.text=e.label,this.bg.fillColor=Math.floor(16777215*Math.random()))},e}(PDKNavigationPage);__reflect(Page.prototype,"Page");var PDKQProgressBar=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maximum=100,e._minimum=0,e._value=0,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpThumb.mask=this.imgThumbMask,this._maxWidth=this.grpThumb.width},e.prototype.startAnimation=function(){this.imgRepeat.play()},e.prototype.stopAnimation=function(){this.imgRepeat.stop()},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=Math.max(Math.min(t,this.maximum),0),this.updateValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum=t,this.updateValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._minimum=t,this.updateValue()},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.labelDisplay.text=this._value+"/"+this._maximum;var t=this._maxWidth*(this._value/this._maximum);egret.Tween.get(this.grpThumb,null,null,!0).to({width:t},100),egret.Tween.get(this.imgThumbMask,null,null,!0).to({width:t},100)},e}(eui.Component);__reflect(PDKQProgressBar.prototype,"PDKQProgressBar");var PDKRedPacketProcess=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.light.visible=1==this.data},e.prototype.getLightImg=function(){return this.light},e}(eui.ItemRenderer);__reflect(PDKRedPacketProcess.prototype,"PDKRedPacketProcess");var PDKRobot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),new PDKalien.Wave(this.eye,1e3,e.eyeAni)},e.eyeAni=function(t){return{alpha:(Math.sin(t)+1)/2}},e}(eui.Component);__reflect(PDKRobot.prototype,"PDKRobot");var PDKShopItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnConfirmTap,this)},e.prototype._refreshLeftTime=function(){var t=(new Date).getTime(),e=PDKUtils.getTimeStampDiff(t,this.data.timeStamp,"minute");e=Math.floor(e);var n=e/60;return n=Math.floor(n),e%=60,0==n&&0==e?(this._showPreAndTime(!1),void PDKPanelExchange2.instance.onTimeExpired([this.data.goodsid])):void(this.labAddition.text="剩"+n+"小时")},e.prototype._clearRepeatInterval=function(){this.mTimeInterval&&(egret.clearInterval(this.mTimeInterval),this.mTimeInterval=0)},e.prototype._showPreAndTime=function(t){var e=this;t?(this._clearRepeatInterval(),this._refreshLeftTime(),this.mTimeInterval=egret.setInterval(function(){e._refreshLeftTime()},this,6e4)):this._clearRepeatInterval(),this.grpAddition.visible=t,this.mPre_img.visible=t},e.prototype._doExchange=function(){var t,e=this;if(PDKPanelExchange2.instance.lv_goods.selectedItem){var n=PDKPanelExchange2.instance.lv_goods.selectedItem,i=n.amount;if(0==n.goodsid)t=PDKalien.StringUtils.format(PDKlang.exchange_redcoin_gold,i);else if(1==n.goodsid)t=PDKalien.StringUtils.format(PDKlang.exchange_redcoin_red,i);else if(4==n.goodsid){var o="确定领取{0}元话费？";t=PDKalien.StringUtils.format(o,n.amount)}else if(6==n.goodsid){var o="确定领取{0}元话费充值卡？领取成功后将获得充值卡的卡号和密码，需要自己下载运营商APP充值！";t=PDKalien.StringUtils.format(o,n.amount)}else if(5==n.goodsid){var o="确定领取{0}元京东卡？";t=PDKalien.StringUtils.format(o,n.amount)}else if(7==n.goodsid){var o="确定领取{0}元支付宝红包？";t=PDKalien.StringUtils.format(o,n.amount)}else if(0==n.product_id){var o="确定领取{0}";1==n.item_type?o+="金豆？":3==n.item_type&&(o+="钻石？"),t=PDKalien.StringUtils.format(o,n.num)}var a=PDKUserData.instance;if(!a.getItem("bindinfo",!1))return void PDKPanelBindPhone.getInstance().showNew();PDKAlert.show(t,1,function(t){if("confirm"==t){var i=n.coin/100;0==n.product_id&&(i=n.money);var o=(PDKMainLogic.instance.selfData.redcoin||0)/100;if(i>o)return void egret.setTimeout(function(){PDKAlert.show("奖杯不足！")},e,300);PDKExchangeService.instance.doRedExchange(n)}})}},e.prototype._doBuy=function(){PDKRechargeService.instance.doRecharge(this.data.product_id)},e.prototype.onBtnConfirmTap=function(t){this.data.amount?this._doExchange():0==this.data.product_id?this._doExchange():this._doBuy()},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=!1,n="金豆",i=0,o="";this.data.item_type?1==this.data.item_type||(2==this.data.item_type?(i=1,n="话费",o=""):3==this.data.item_type&&(i=2,n="钻石")):i=this.data.goodsid;var a="",r=PDKlang.currency;a=4==this.data.goodsid?this.data.amount+"元话费":5==this.data.goodsid?this.data.amount+"元京东卡":6==this.data.goodsid?this.data.amount+"元话费卡":7==this.data.goodsid?this.data.amount+"元支付宝红包":this.data.num+n,0==this.data.product_id&&(r=""),this.labGold.text=a,this.imgIcon.source=PDKGoodsItem.parseUrl(i),this.btnConfirm.money_label.text=o+this.data.money+r,this.data.addition>0&&(this.labAddition.text=PDKlang.format(PDKlang.id.recharge_addition,this.data.addition)),this.btnConfirm.skin._Image1.source="pdk_buybtn_n",this.data.amount?(this.mPre_img.visible=!0,this.exchange_img.visible=!0,0==this.data.goodsid?this.labGold.text=this.data.amount+PDKlang.gold:1==this.data.goodsid||4==this.data.goodsid?(this.labGold.text=o+PDKUtils.exchangeRatio(this.data.amount,!0),1==this.data.amount&&this.data.first&&this.data.timeStamp&&(e=!0)):6==this.data.goodsid?(this.mPre_img.source="exchange_pre2",e=!0):7==this.data.goodsid&&(this.data.first?(this.mPre_img.source="exchange_pre",e=!0):e=!1),this._showPreAndTime(e),this.btnConfirm.money_label.text=o+this.data.coin/100):(this.mPre_img.visible=!1,this.exchange_img.visible=!1,this.btnConfirm.money_label.horizontalCenter=0,0==this.data.product_id&&(this.btnConfirm.skin._Image1.source="pdk_buybtn_n",this.exchange_img.visible=!0,this.mPre_img.visible=!0,this.mPre_img.source="exchange_pre1")),this.grpAddition.visible=this.data.addition>0||this.data.first},e}(eui.ItemRenderer);__reflect(PDKShopItem.prototype,"PDKShopItem");var PDKToast=function(){function t(){}return t.show=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=0),PDKalien.Dispatcher.dispatch(PDKEventNames.SHOW_TOAST,{content:t,color:e,delay:n})},t}();__reflect(PDKToast.prototype,"PDKToast");var PDKUserInfoView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.update=function(t){this.updateHeadImage(t.imageid),this.updateNickname(t),isNaN(t.gold)||this.updateGold(t.gold)},e.prototype.updateNickname=function(t){var e=PDKMainLogic.instance.selfData;if(t.uid==e.uid){if(e.nickname){var n=e.nickname.substr(0,10);this.labNickName.text=n+"("+e.fakeuid+")"}}else this.labNickName.text=t.nickname},e.prototype.updateHeadImage=function(t){t&&t!=this.avatar.imageId&&(this.avatar.imageId=t)},e.prototype.clean=function(){this.avatar.clean(),this.labNickName.text="",this.gold.setEmpty()},e.prototype.getAvatarPos=function(){return this._globalPos||(this._globalPos=this.localToGlobal(this.avatar.x+this.avatar.width/2-20,this.avatar.y+this.avatar.height/2-20)),this._globalPos},e.prototype.updateGold=function(t){this.gold.updateGold(t)},e.prototype.updateDiamond=function(t){this.diamond.updateGold(t)},e.prototype.updateDiamondNum=function(t,e){1==e?this.diamond.updateDiamondNum(t,e):this.gold.updateDiamondNum(t,e)},e.prototype.hideGuessRight=function(){this.grpGRLight.visible=!1},e.prototype.playWinGoldAnimate=function(){this.grpGRLight.visible=!0,this.grpAnimate.visible=!0,this.star0.visible=!1,this.star1.visible=!1,this.star2.visible=!1,egret.Tween.get(this.light).set({loop:!0,visible:!0,rotation:0}).to({rotation:360},2e3).to({visible:!1}).wait(1700).call(this.hideGuessRight,this),egret.Tween.get(this.star0).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).to({alpha:1,x:17,y:-9,scale:1.3},800).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:34,y:-11,scale:1.3},1e3).to({alpha:0},100),egret.Tween.get(this.star1).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).wait(200).to({alpha:1,x:5,y:74,scale:1.3},1e3).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:8,y:86,scale:1.3},1e3).to({alpha:0},100),egret.Tween.get(this.star2).set({alpha:.3,x:40,y:40,scale:1,visible:!0}).wait(300).to({alpha:1,x:85,y:28,scale:1.3},1e3).to({alpha:0},100).to({alpha:.3,x:40,y:40,scale:1}).to({alpha:1,x:70,y:74,scale:1.3},1e3).to({alpha:0},100)},e}(eui.Component);__reflect(PDKUserInfoView.prototype,"PDKUserInfoView");var PDKDayTaskItemInfo=function(t){function e(){var e=t.call(this)||this;return e._enableEvent(!0),e}return __extends(e,t),e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this),pdkServer[e](PDKEventNames.USER_GET_TASKREW_REP,this._onRecvGetRewRep,this)},e.prototype._onRemoveFromStage=function(){this._enableEvent(!1)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&this._initByData()},e.prototype._initByData=function(){if(this.info_group.visible=!0,this._tStatusFunc=(e={},e[0]=this._onNotOverBtn.bind(this),e[1]=this._onHasOverBtn.bind(this),e[2]=this._onHasGetRewardBtn.bind(this),e),this.data.total<=0&&(this.data.total=1),this.data.rew&&2==this.data.rew.length){var t=this.data.num;t>this.data.total&&(t=this.data.total),this._nMinWidth=this.mPro_img.texture.textureWidth,this._fMinPro=this._nMinWidth/this.mProBg_img.width,this._initRewPng(this.data.rew),this._initProgress(t,this.data.total),this._initTaskDesc(this.data.taskDesc1),this._initRewSucc(),this._initDescExt(this.data.taskDesc2),this._initBtnAndFunc(this.data.status),this.mTaskDesc1_label.x=this.mTaskDesc_label.x+this.mTaskDesc_label.width}var e},e.prototype._initRewSucc=function(){var t=(s={},s[0]="金豆x{0}",s[41003]="高级奖杯x{0}个",s[2]="记牌器x{0}小时",s[1]="奖杯x{0}",s),e=this.data.rew[0].id,n=this.data.rew[0].num,i=this.data.rew[1].id,o=this.data.rew[1].num,a=t[e],r=t[i];this.data.rewDesc="\n1."+a.replace("{0}",n)+"  2."+r.replace("{0}",o);var s},e.prototype._initRew0ByIdAndNum=function(t,e){this.mReward0High_img.visible=!0,41003==t?(this.mReward0_img.source="task_red1",this.mReward0Num_label.text="x"+e):0==t&&(this.mReward0_img.source="pdk_room_0",this.mReward0Num_label.text=""+e,this.mReward0High_img.visible=!1)},e.prototype._initRew1ByIdAndNum=function(t,e){1==t?(this.mReward1_img.source="task_re2",this.mReward1Num_label.text=e+"元"):2==t&&(this.mReward1_img.source="pdk_room_2",this.mReward1Num_label.text=e+"小时")},e.prototype._initRewPng=function(t){this._initRew0ByIdAndNum(t[0].id,t[0].num),this._initRew1ByIdAndNum(t[1].id,t[1].num)},e.prototype._initTaskDesc=function(t){this.mTaskDesc_label.text=t},e.prototype._initDescExt=function(t){this.mTaskDesc1_label.text=t},e.prototype._onPlayNormalMatch=function(){PDKPanelDayTask.getInstance().close(),PDKalien.Dispatcher.dispatch(PDKEventNames.TO_NORMAL_MATCH)},e.prototype._onInviteFriend=function(){PDKalien.Native.instance.isNative?PDKWxHelper.doNativeShare():PDKPanelShare.instance.showInviteFriend()},e.prototype._onGetRewardReq=function(){var t={taskid:this.data.id};pdkServer.send(PDKEventNames.USER_GET_TASKREW_REQ,t)},e.prototype._getTextByResult=function(t){var e=null;if(0==t)e="领取以下奖励成功:"+this.data.rewDesc;else{var n=(i={},i[1]=PDKlang.taskNotExist,i[2]=PDKlang.taskNotOver,i[3]=PDKlang.taskHasGetRew,i);e=n[t]?n[t]:"领取奖励失败 "}return e;var i},e.prototype._onRecvGetRewRep=function(t){if(t.data.taskid==this.data.id){var e=this._getTextByResult(t.data.result);PDKAlert.show(e,0,null,"left"),0==t.data.result&&(PDKMainLogic.instance.selfData.setTaskHasGetRew(t.data.taskid),egret.setTimeout(function(){this._onHasGetRewardBtn()},this,200))}},e.prototype._initProgress=function(t,e){var n=t/e;if(this.mPro_label.text=t+"/"+e,n<this._fMinPro){if(0==n)return void(this.mPro_img.visible=!1);this.mPro_img.width=this._nMinWidth}else n>=1?this.mPro_img.width=this.mProBg_img.width:this.mPro_img.width=n*this.mProBg_img.width;this.mPro_img.visible=!0},e.prototype._initBtnAndFunc=function(t){this._tStatusFunc[t]?this._tStatusFunc[t]():PDKLogUtil.info("_initBtnAndFunc=====error=======>",t)},e.prototype._onNotOverBtn=function(){this.mDoTask_btn.setPngs("task_doTask_n","task_doTask_p"),1==this.data.condition?this.mDoTask_btn.setClickFunc(this._onPlayNormalMatch.bind(this)):this.mDoTask_btn.setClickFunc(this._onInviteFriend.bind(this)),this.mDoTask_btn.enableTouch(!0)},e.prototype._onHasOverBtn=function(){this.mDoTask_btn.setPngs("task_getReward_n","task_getReward_p"),this.mDoTask_btn.enableTouch(!0),this.mDoTask_btn.setClickFunc(this._onGetRewardReq.bind(this))},e.prototype._onHasGetRewardBtn=function(){this.mDoTask_btn.setOnePngAndForbidTouch("task_get")},e}(eui.ItemRenderer);__reflect(PDKDayTaskItemInfo.prototype,"PDKDayTaskItemInfo");var PDKAdvanceMethod=function(){function t(){}return t.start=function(){if("iOS"==egret.Capabilities.os){console.log("replace Array.sort");var t=Array.prototype.sort;Array.prototype.sort=function(e){if(e&&"function"==typeof e){if(this.length<2)return this;for(var n=0,i=n+1,o=this.length,a=void 0,r=!1,s=0;o>n;n++)for(i=n+1;o>i;i++)s=e.call(this,this[n],this[i]),r=("number"==typeof s?s:s?1:0)>0,r&&(a=this[n],this[n]=this[i],this[i]=a);return this}return t.call(this)}}},t}();__reflect(PDKAdvanceMethod.prototype,"PDKAdvanceMethod");var PDKDragonGameFeiJi=function(t){function e(){var e=t.call(this,"pdk_gm_feiji")||this;return e.armature=e.addArmature("pdk_gm_feiji"),e.armature.animation.timeScale=.75,e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){this.x=PDKalien.StageProxy.stage.stageWidth>>1,this.y=PDKalien.StageProxy.stage.stageHeight>>1},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_gm_feiji",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_gm_feiji",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameFeiJi.prototype,"PDKDragonGameFeiJi");var PDKDragonGameLianDui=function(t){function e(e){var n=t.call(this,"pdk_gm_shunziliandui")||this;return n.needMinnor=e,n.armature=n.addArmature("pdk_shunziliandui"),n.armature.display.scaleX=1.2,n.armature.display.scaleY=1.2,n.armature.animation.timeScale=.6,n}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_liandui",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_liandui",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameLianDui.prototype,"PDKDragonGameLianDui");var PDKDragonGameSanDaiEr=function(t){function e(e){var n=t.call(this,"pdk_gm_shunziliandui")||this;return n.needMinnor=e,n.armature=n.addArmature("pdk_shunziliandui"),n.armature.display.scaleX=1.2,n.armature.display.scaleY=1.2,n.armature.animation.timeScale=.6,n}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_sandaier",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_sandaier",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameSanDaiEr.prototype,"PDKDragonGameSanDaiEr");var PDKDragonGameSanDaiYi=function(t){function e(e){var n=t.call(this,"pdk_gm_shunziliandui")||this;return n.needMinnor=e,n.armature=n.addArmature("pdk_shunziliandui"),n.armature.display.scaleX=1.2,n.armature.display.scaleY=1.2,n.armature.animation.timeScale=.6,n}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_sandaiyi",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_sandaiyi",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameSanDaiYi.prototype,"PDKDragonGameSanDaiYi");var PDKDragonGameShunZi=function(t){function e(e){var n=t.call(this,"pdk_gm_shunziliandui")||this;return n.needMinnor=e,n.armature=n.addArmature("pdk_shunziliandui"),n.armature.display.scaleX=1.2,n.armature.display.scaleY=1.2,n.armature.animation.timeScale=.6,n}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_shunzi",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_shunzi",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameShunZi.prototype,"PDKDragonGameShunZi");var PDKDragonGameSiDaiEr=function(t){function e(e){var n=t.call(this,"pdk_gm_shunziliandui")||this;return n.needMinnor=e,n.armature=n.addArmature("pdk_shunziliandui"),n.armature.display.scaleX=1.2,n.armature.display.scaleY=1.2,n.armature.animation.timeScale=.6,n}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_sidaier",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_sidaier",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonGameSiDaiEr.prototype,"PDKDragonGameSiDaiEr");var PDKDragonGameZhaDan=function(t){function e(){var e=t.call(this,"pdk_gm_zhadan")||this;return e.armature=e.addArmature("pdk_gm_zhadan"),e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){this.x=PDKalien.StageProxy.stage.stageWidth>>1,this.y=PDKalien.StageProxy.stage.stageHeight>>1},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_gm_zhadan",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_gm_zhadan",1,1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)
},e}(PDKDragonBase);__reflect(PDKDragonGameZhaDan.prototype,"PDKDragonGameZhaDan");var PDKDragonHongBao=function(t){function e(){var e=t.call(this,"pdk_hongbao")||this;return e.armature1=e.addArmature("pdk_hongbao"),e.armature2=e.addArmature("pdk_hongbao"),e.btn=new PDKStateButton,e.btn.skinName=ui.PDKPlayOrangeButtonSkin,e.btn.labelIcon="pdk_play_btn_13_h",e.btn.x=-100,e.btn.y=203,e.addChild(e.btn),e.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTap,e),e.btn.visible=!1,e.stop1(),e.stop2(),e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e)},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e)},e.prototype.onResize=function(t){this.x=PDKalien.StageProxy.stage.stageWidth>>1,this.y=PDKalien.StageProxy.stage.stageHeight>>1},e.prototype.stop1=function(){this.armature1.removeEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this),this.armature1.animation.gotoAndStop("pdk_hongbao1",1),this.armature1.display.visible=!1},e.prototype.stop2=function(){this.armature2.removeEventListener(egret.Event.COMPLETE,this.onComplete2.bind(this),this),this.armature2.animation.gotoAndStopByFrame("pdk_hongbao2",1),this.armature2.display.visible=!1},e.prototype.play1=function(t){this.stop2(),this.armature1.display.visible=!0,this.btn.visible=!1,t?(this.armature1.animation.gotoAndPlayByFrame("pdk_hongbao1",1,1),this.armature1.addEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this)):this.armature1.animation.gotoAndPlayByFrame("pdk_hongbao1",55,1)},e.prototype.play2=function(){this.stop1(),this.armature2.display.visible=!0,this.btn.visible=!1,this._closeImg=new eui.Image("pdk_common_close_n"),this.addChild(this._closeImg),this._closeImg.addClickListener(this._onTouchClose,this),this.parent&&(this._closeImg.x=.5*this.parent.width-400,this._closeImg.y=.5*-this.parent.height+180),this.armature2.addEventListener(egret.Event.COMPLETE,this.onComplete2.bind(this),this),this.armature2.animation.gotoAndPlayByFrame("pdk_hongbao2",1,1)},e.prototype.onComplete1=function(t){this.dispatchEvent(new egret.Event(egret.Event.COMPLETE))},e.prototype.onComplete2=function(t){this.btn.visible=!0},e.prototype.onTap=function(t){this.stop1(),this.stop2(),this.parent&&this.parent.removeChild(this),PDKExchangeService.instance.doChou(1003)},e.prototype._onTouchClose=function(){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonHongBao.prototype,"PDKDragonHongBao");var PDKDragonHongBaoWarn=function(t){function e(){var e=t.call(this,"hongbaodonghua")||this;return e.armature1=e.addArmature("hongbaodonghua"),e.armature2=e.addArmature("hongbaodonghua"),e.stop1(),e.stop2(),e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e)},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e)},e.prototype.onResize=function(t){this.x=.5*PDKalien.StageProxy.stage.stageWidth+424,this.y=.5*PDKalien.StageProxy.stage.stageHeight+16},e.prototype.stop1=function(){this.armature1.removeEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this),this.armature1.animation.gotoAndStop("hongbaodonghua1",1),this.armature1.display.visible=!1},e.prototype.stop2=function(){this.armature2.animation.gotoAndStopByFrame("hongbaodonghua2",1),this.armature2.display.visible=!1},e.prototype.play1=function(){this.stop2(),this.armature1.display.visible=!0,this.armature1.animation.gotoAndPlayByFrame("hongbaodonghua1",1,1),this.armature1.addEventListener(egret.Event.COMPLETE,this.onComplete1.bind(this),this)},e.prototype.play2=function(){this.rect||(this.rect=new eui.Rect(this.armature2.display.width,this.armature2.display.height),this.rect.x=-this.rect.width>>1,this.rect.y=-this.rect.height>>1,this.rect.alpha=.01,this.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addChild(this.rect)),this.stop1(),this.armature2.display.visible=!0,this.armature2.animation.gotoAndPlayByFrame("hongbaodonghua2",1,-1)},e.prototype.onComplete1=function(t){this.stop1(),this.play2()},e.prototype.onTap=function(t){},e}(PDKDragonBase);__reflect(PDKDragonHongBaoWarn.prototype,"PDKDragonHongBaoWarn");var PDKDragonJingDeng=function(t){function e(){var e=t.call(this,"pdk_jingdeng")||this;return e.armature=e.addArmature("pdk_jingdeng"),e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.stop=function(){this.armature.animation.gotoAndStopByFrame("pdk_jingdeng",1)},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_jingdeng",1,-1)},e.prototype.onComplete=function(t){this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonJingDeng.prototype,"PDKDragonJingDeng");var PDKDragonManager=function(){function t(){this.dragonbonesFactory=new dragonBones.EgretFactory,this.register()}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.addDragon=function(t,e,n){this.dragonbonesFactory.getDragonBonesData(t.name)||(this.dragonbonesFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(t)),this.dragonbonesFactory.addTextureAtlasData(this.dragonbonesFactory.parseTextureAtlasData(n,e)))},t.prototype.getDragon=function(t){return this.dragonbonesFactory.buildArmature(t)},t.prototype.register=function(){egret.Ticker.getInstance().register(function(t){dragonBones.WorldClock.clock.advanceTime(.02)},this)},t}();__reflect(PDKDragonManager.prototype,"PDKDragonManager");var PDKDragonMatch9Rule=function(t){function e(){var e=t.call(this,"guize")||this;return e.guize=e.addArmature("guize"),e.touchEnabled=!0,e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.onResize(e)},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.onResize=function(t){this.x=PDKalien.StageProxy.stage.stageWidth>>1,this.y=PDKalien.StageProxy.stage.stageHeight>>1},e.prototype.stop=function(){this.guize.animation.gotoAndStopByFrame("guize",1)},e.prototype.play=function(t){void 0===t&&(t=null),this.callback=t,this.guize.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.guize.animation.gotoAndPlayByFrame("guize",1,1)},e.prototype.onComplete=function(t){this.callback&&this.callback(),this.parent&&this.parent.removeChild(this)},e}(PDKDragonBase);__reflect(PDKDragonMatch9Rule.prototype,"PDKDragonMatch9Rule");var PDKDragonSign=function(t){function e(){var e=t.call(this,"pdk_sign")||this;return e.armature=e.addArmature("pdk_sign"),e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop()},e.prototype.stop=function(){this.timeOutId&&egret.clearTimeout(this.timeOutId),this.armature.removeEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndStop("pdk_sign")},e.prototype.play=function(){this.armature.addEventListener(egret.Event.COMPLETE,this.onComplete.bind(this),this),this.armature.animation.gotoAndPlayByFrame("pdk_sign",1,1)},e.prototype.onComplete=function(t){this.armature.animation.gotoAndPlayByFrame("pdk_sign",30,1)},e}(PDKDragonBase);__reflect(PDKDragonSign.prototype,"PDKDragonSign");var PDKDragonSignBtn=function(t){function e(){var e=t.call(this,"signBtn")||this;return e.armature=e.addArmature("signBtn"),e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.addToStage=function(e){t.prototype.addToStage.call(this,e),this.play()},e.prototype.removeFromStage=function(e){t.prototype.removeFromStage.call(this,e),this.stop(),this.parent&&this.parent.removeChild(this)},e.prototype.stop=function(){this.armature.animation.gotoAndStop("signBtn")},e.prototype.play=function(){this.armature.animation.gotoAndPlayByFrame("signBtn",1,-1)},e}(PDKDragonBase);__reflect(PDKDragonSignBtn.prototype,"PDKDragonSignBtn");var PDKIRButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgIcon.source=this.iconUp,this.imgBg.source=this.bgUp},Object.defineProperty(e.prototype,"iconUp",{get:function(){return this.data?this.data.icon+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconDown",{get:function(){return this.data?this.data.icon+"_h":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgUp",{get:function(){return this.data?this.data.bg+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgDown",{get:function(){return this.data?this.data.bg+"_h":""},enumerable:!0,configurable:!0}),e}(eui.ItemRenderer);__reflect(PDKIRButton.prototype,"PDKIRButton");var PDKIRContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.item.setData(this.data)},e}(eui.ItemRenderer);__reflect(PDKIRContainer.prototype,"PDKIRContainer");var PDKIRUpDownIcon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.img.source=this.iconUp},Object.defineProperty(e.prototype,"iconUp",{get:function(){return this.data?this.data.icon+"_n":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconDown",{get:function(){return this.data?this.data.icon+"_h":""},enumerable:!0,configurable:!0}),e}(eui.ItemRenderer);__reflect(PDKIRUpDownIcon.prototype,"PDKIRUpDownIcon");var PDKCreateTable=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return e.infoList=[],e.basescore=[],e.maxodd=[],e.roundcnt=[],e.scorelimit=[],e.createcost=[],e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=components.PDKCreateTableSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);PDKEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreate,this),pdkServer.addEventListener(PDKEventNames.CREATE_PERSONAL_GAME_REP,this.onCreateRep,this)},e.prototype.updateCreateCost=function(t){var e=0;t&&this.createcost&&this.createcost[t]&&(e=this.createcost[t]),e&&e>0?this.lbcreatecost.text="创建费用: "+e:this.lbcreatecost.text="创建费用: 免费"},e.prototype.onCreateRep=function(t){var e=t.data;if(0!=e.result)7==e.result||11==e.result||4==e.result?PDKPanelRechargeTips.instance.show():PDKImgToast.instance.show(this,PDKlang.createPGameErr[e.result]);else{var n={roomID:e.roomid,maxodd:this.maxodd[this.info2.Index],maxround:this.roundcnt[this.info1.Index],baseScore:this.basescore[this.info3.Index],matchType:1,personalgame:!0,enterTableData:this.enterTableData,owner:pdkServer.uid};PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,n,PDKalien.sceneEffect.Fade),this.dealAction()}},e.prototype.onCreate=function(t){var e=PDKMainLogic.instance.selfData.gold;return e<this.scorelimit[this.info4.Index]?void PDKPanelRechargeTips.instance.show():void pdkServer.CreatePersonalGameReq(1,this.basescore[this.info3.Index],this.roundcnt[this.info1.Index],this.maxodd[this.info2.Index],this.scorelimit[this.info4.Index])},e.prototype.show=function(t){if(void 0===t&&(t=null),!this.basescore||this.basescore.length<1){var e=PDKGameConfig.personalGameConfig.ddz;this.basescore=e.basescore,this.maxodd=e.maxodd,this.roundcnt=e.roundcnt,this.scorelimit=e.scorelimit,this.createcost=e.createcost}this.info1.setData(this.roundcnt),this.info2.setData(this.maxodd),this.info3.setData(this.basescore,this),this.info4.setData(this.scorelimit),this._callback=t,this.popup()},e.prototype.onBtnCloseClick=function(t){this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKCreateTable.prototype,"PDKCreateTable");var PDKCreateTableInfo=function(t){function e(){var e=t.call(this)||this;return e.data=[],e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;4>e;++e)this["img"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.radioClicked,this)},e.prototype.radioClicked=function(t){var e=Number(t.currentTarget.name);(0>e||e>this.data.length)&&(e=0),this.setIndex(e)},e.prototype.setData=function(t,e){void 0===e&&(e=null),this.data=t,this.parent_view=e;for(var n=0;4>n;++n)n<t.length?(this["img"+n].visible=!0,this["lb"+n].visible=!0,"0"==this.data[n].toString()?this["lb"+n].text="无限制":this["lb"+n].text=this.data[n].toString()):(this["img"+n].visible=!1,this["lb"+n].visible=!1);this.setIndex(0)},e.prototype.setIndex=function(t){t||(t=0);for(var e=0;4>e;++e)e==t?(this["img"+e].source="personal_radio_c",this["lb"+e].textColor=16774656):(this["img"+e].source="personal_radio_n",this["lb"+e].textColor=16777215);this.index=t,this.parent_view&&this.parent_view.updateCreateCost(this.index)},Object.defineProperty(e.prototype,"Index",{get:function(){return this.index},enumerable:!0,configurable:!0}),e}(eui.Component);__reflect(PDKCreateTableInfo.prototype,"PDKCreateTableInfo");var PDKHistoryItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.lbOwner.text=this.data.owner_cn,this.lbTime.text=this.data.createtime,this.lbCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CheckDetailClick,this)},e.prototype.CheckDetailClick=function(t){PDKPersonalDetail.instance.show(this.data.gameinfo)},e}(eui.ItemRenderer);__reflect(PDKHistoryItem.prototype,"PDKHistoryItem");var PDKHistoryRecord=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=components.PDKHistoryRecordSkin,this.list.itemRenderer=PDKHistoryItem,this._dataProvide||(this._dataProvide=new eui.ArrayCollection([]),this.list.dataProvider=this._dataProvide)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKHistoryItem,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.scroll2end,this),PDKPersonalGameHistory.instance.addEventListener(PDKEventNames.PGAME_RECORD_DATA_REFRESH,this.onGameRecordDataUpdate,this)},e.prototype.onGameRecordDataUpdate=function(t){var e=t.data;this._dataProvide.source=e,this._dataProvide.refresh()},e.prototype.scroll2end=function(t){PDKPersonalGameHistory.instance.getDataList()},e.prototype.show=function(t,e){void 0===e&&(e=null),this._dataProvide.source=t,this._dataProvide.refresh(),this.scroller.viewport.scrollV=0,this._callback=e,this.popup()},e.prototype.onBtnCloseClick=function(t){this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKHistoryRecord.prototype,"PDKHistoryRecord");var PDKImgToast=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=personal.PDKToastSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.enableTouch=function(t){this.touchEnabled=t,this.lb.touchEnabled=t,this.bgImg.touchEnabled=t},e.prototype.show=function(t,e){var n=this;t.contains(this)&&t.removeChild(this),t.addChild(this),this.x=t.width/2-this.width/2,this.y=t.height/2-this.height/2,this.lb.text=e,this.alpha=0,egret.Tween.get(this,null,null,!0).to({alpha:1},300).wait(1500).to({alpha:0},300).call(function(){t.contains(n)&&t.removeChild(n)})},e}(eui.Component);__reflect(PDKImgToast.prototype,"PDKImgToast");var PDKImgWordBtn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setTit=function(t){this.titImg.source=t,this.newSrc=t},e.prototype.useNewTit=function(){this.newSrc&&(this.titImg.source=this.newSrc)},e.prototype.setDisable=function(){this.infoGroup.touchEnabled=!1,this.touchEnabled=!1,this.bgImg.source="pdk_common_btn_orange2_gray",this.useNewTit()},e.prototype.setEnable=function(){this.bgImg.source="pdk_common_btn_orange2_n",this.infoGroup.touchEnabled=!0,this.touchEnabled=!0,this.useNewTit()},e}(eui.Component);__reflect(PDKImgWordBtn.prototype,"PDKImgWordBtn");var PDKJoinTable=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=personal.PDKJoinTableSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this);for(var e=0;12>e;++e)this["btn"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNumberClick,this);this.roomid=0,pdkServer.addEventListener(PDKEventNames.JOIN_PGAME_REP,this.onJoinRep,this)},e.prototype.onNumberClick=function(t){var e=Number(t.currentTarget.name);if(10>e){if(!(this.roomid<1e5))return;this.roomid=10*this.roomid+e}else 10==e?this.roomid=Math.floor(this.roomid/10):11==e&&(this.roomid=0);this.lbRoomID.text=0==this.roomid?"":this.roomid.toString()},e.prototype.onJoinRep=function(t){var e=t.data;0!=e.result&&(2==e.result?PDKPanelRechargeTips.instance.show():PDKImgToast.instance.show(this,PDKlang.joinPGameErr[e.result]))},e.prototype.onShare=function(t){},e.prototype.onSearch=function(t){pdkServer.QueryRoomInfoReq(this.roomid)},e.prototype.onJoin=function(t){pdkServer.JoinPGameReq(this.roomid)},e.prototype.setPlayerInfo=function(t,e,n){this["player"+t].imageId=e,this["PInfo"+t].setName(n)},e.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.roomid=0,this.lbOwner.text="",this.lbRoomID.text="",this._callback=t,this.popup(),e&&(this.roomid=e,this.lbRoomID.text=String(e),pdkServer.JoinPGameReq(e))},e.prototype.onBtnCloseClick=function(t){this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKJoinTable.prototype,"PDKJoinTable");var PDKPersonalDetail=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=personal.PDKDetailSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this)},e.prototype.show=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=null),t&&t.length>0)for(var o=0;3>o;++o)t[o]&&this["item"+(o+1)].setData(t[o].nickname,t[o].gold);this.lbLeave.visible=!1,this.imgPoint.visible=!1,this.btnLeave.visible=!1,n&&(this.btnLeave.visible=!0,this.btnLeave.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this)),i&&(this.lbLeave.visible=!0,this.imgPoint.visible=!0,this.lbLeave.text="因"+i+"中途退出，游戏终止"),this._callback=e,this.popup()},e.prototype.onBtnCloseClick=function(t){this._callback&&this._callback("confirm"),this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKPersonalDetail.prototype,"PDKPersonalDetail");var PDKDetailItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setData=function(t,e){this.lbName.text=t,e&&null!=e||(e=0),e>=0?(this.lbGold.text="+"+e,this.lbGold.textColor=6875916):(this.lbGold.text=e,this.lbGold.textColor=16586519)},e}(eui.Component);__reflect(PDKDetailItem.prototype,"PDKDetailItem");var PDKPersonalGame=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=personal.PDKPersnalGameSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreate,this),this.btnJoin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJoin,this),this.btnHistory.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHitory,this)},e.prototype.beforeShow=function(e){t.prototype.beforeShow.call(this,e)},e.prototype.onCreate=function(t){PDKCreateTable.instance.show()},e.prototype.onJoin=function(t){PDKJoinTable.instance.show()},e.prototype.onHitory=function(t){PDKPersonalGameHistory.instance.clearDataList(),PDKPersonalGameHistory.instance.getDataList(),PDKHistoryRecord.instance.show(PDKPersonalGameHistory.instance.source)},e}(PDKalien.PDKNavigationPage);__reflect(PDKPersonalGame.prototype,"PDKPersonalGame");var PDKIPInfItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setName=function(t){this.lbName.text=t},e}(eui.Component);__reflect(PDKIPInfItem.prototype,"PDKIPInfItem");var PDKTableInfo=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=personal.PDKTableInfoSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStart,this),this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShare,this),pdkServer.addEventListener(PDKEventNames.START_PGAME_REP,this.onStartGameRep,this)},e.prototype.onJoinRep=function(t){var e=t.data;0!=e.result&&PDKPanelAlert.instance.show("错误编号"+e.result,0)},e.prototype.onStartGameRep=function(t){var e=t.data;0!=e.result?PDKPanelAlert.instance.show("错误编号"+e.result,0):PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,this.roominfo,PDKalien.sceneEffect.Fade)},e.prototype.onShare=function(t){},e.prototype.onStart=function(t){pdkServer.StartPGameReq(this.roomid)},e.prototype.setPlayerInfo=function(t,e,n){this["player"+t].imageId=e,this["PInfo"+t].setName(n)},e.prototype.show=function(t,e){void 0===e&&(e=null),this.roomid=t.roomid,this.lbRoomid.text=t.roomid,this.lbLimit.text=t.maxodd,this.lbRound.text=t.roundcnt,this.lbBScore.text=t.basescore,this.roominfo={roomid:t.roomid,maxOdds:t.maxodd,roundcnt:t.roundcnt,baseScore:t.basescore,matchType:1,personalgame:!0},t.owner&&this.setPlayerInfo(1,t.owner.imageId,t.owner.nickname),this._callback=e,this.popup()},e.prototype.onBtnCloseClick=function(t){this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKTableInfo.prototype,"PDKTableInfo");var PDKRedRank=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.arr=[],this.dataProvider=new eui.ArrayCollection(this.arr),this.list.itemRenderer=PDKRedRankInfo,this.list.dataProvider=this.dataProvider;var e=PDKalien.PDKEventManager.instance;e.registerOnObject(this,pdkServer,PDKEventNames.USER_REDCOIN_RANKING_LIST_REP,this.onRedcoinRankingListRep,this)},e.prototype.onAddToStage=function(t){PDKalien.PDKEventManager.instance.enableOnObject(this),pdkServer.getRedcoinRankingListReq()},e.prototype.onRemoveFromStage=function(t){PDKalien.PDKEventManager.instance.disableOnObject(this)},e.prototype._checkDataFormat=function(){for(var t=null,e={score:null,nickname:null,ranking:null,uid:0},n=[],i=0;i<this.arr.length;++i)t=this.arr[i],t&&t.score&&t.ranking&&(e=t,e.nickname=e.nickname||"",n.push(e));this.arr=n},e.prototype.onRedcoinRankingListRep=function(t){this.arr=t.data.list,this.myRank.data=this.arr.shift(),this._checkDataFormat(),this.dataProvider.source=this.arr,this.dataProvider.refresh()},e}(eui.Component);__reflect(PDKRedRank.prototype,"PDKRedRank");var PDKRedRankInfo=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data){this.data.score=this.data.score||0,this.data.ranking=this.data.ranking||0;var e=this.data.uid,n=this.data.ranking;e==PDKMainLogic.instance.selfData.uid?(this.score.textColor=15859456,this.nickname.textColor=15859456,this.rank.textColor=15859456):(this.score.textColor=16777215,this.nickname.textColor=16777215,this.rank.textColor=16777215),this.score.text=PDKUtils.exchangeRatio(this.data.score/100,!0),this.nickname.text=PDKBase64.decode(this.data.nickname),this.nickname.text=this.nickname.text.substr(0,10),this.rank1.visible=1==n,this.rank2.visible=2==n,this.rank3.visible=3==n,0==n?this.rank.text="--":this.rank.text=n+"",this.rank.visible=n>3||1>n,this.back.visible=!0}},e}(eui.ItemRenderer);__reflect(PDKRedRankInfo.prototype,"PDKRedRankInfo");var PDKalien;!function(t){var e=function(){function t(t){this._target=t}return t.prototype.fadeIn=function(t){void 0===t&&(t=200),this._duration=t,this._targetAlpha=1,this._target.alpha=0,this._target.visible=!0,this.play()},t.prototype.fadeOut=function(t){void 0===t&&(t=200),this._duration=t,this._targetAlpha=0,this._target.alpha=1,this.play()},t.prototype.play=function(){this._tween=egret.Tween.get(this._target).to({alpha:this._targetAlpha},this._duration).set({visible:this._targetAlpha>0})},t.prototype.stop=function(){this._tween&&egret.Tween.removeTweens(this._target)},t}();t.Fade=e,__reflect(e.prototype,"PDKalien.Fade",["PDKalien.IAnimation"])}(PDKalien||(PDKalien={}));var T_G_PDK=1,PDKPageChannels=function(t){function e(){var e=t.call(this)||this;return e._roomID=0,e.setClickRedNormal(!1),e.pdkRooms=PDKGameConfig.getCfgByField("pdkRooms"),e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=pages.PDKPageChannelSkin,e._ins=this},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize(null),this.resetChannelClick()},e.prototype.resetChannelClick=function(){this._nToGame=0},e.prototype._showPaiLiDownload=function(){var t=PDKGameConfig.wxService,e="招募推广员,加微信:"+t+"\n(点击确定即可复制微信号)";PDKPanelAlert3.instance.show(e,0,function(){PDKGameConfig.copyText(this.parent,t,"微信号("+t+")")})},e.prototype.setWillToGame=function(t){this._nToGame=t},e.prototype.getWillToGame=function(){return this._nToGame},e.prototype.setClickRedNormal=function(t){this._bRedNormal=t},e.prototype.setClickTwoGame=function(t){this._bTwoGame=t},e.prototype.isClickRedRoom=function(){return this._bRedNormal},e.prototype.isClickTwoGame=function(){return this._bTwoGame},e.prototype.getClickRoomID=function(){return this._roomID},e.prototype.onToNormalMatch=function(){this.navigation.push(PDKPageNormalChannel)},e.prototype.onToRedNormal=function(t){void 0===t&&(t=!0),this.setClickRedNormal(!0),pdkServer.checkReconnect()},e.prototype.onToPdkGame=function(){this._roomID=9e3,this.setWillToGame(T_G_PDK),this.setClickTwoGame(!0),pdkServer.checkReconnect()},e.prototype.onSelectChannel=function(t){var e=t.currentTarget.name;switch(this.resetChannelClick(),e){case"pdk":this.onToPdkGame();break;default:this._roomID=0}},e.prototype.beforeShow=function(t){this.enter_pdk.addClickListener(this.onSelectChannel,this),this.enter_normal.addClickListener(this.onSelectChannel,this),this.enter_master.addClickListener(this.onSelectChannel,this),this.enter_master2.addClickListener(this.onSelectChannel,this),this.enter_diy.addClickListener(this.onSelectChannel,this),this.enter_red.addClickListener(this.onSelectChannel,this),this.enter_red2.addClickListener(this.onSelectChannel,this),this.setClickRedNormal(!1),PDKEventManager.instance.enableOnObject(this),PDKMainLogic.instance.hideIndexDownAndRefresh()},e.prototype.beforeHide=function(){PDKEventManager.instance.disableOnObject(this)},e.prototype.onResize=function(t){},e.defName="PDKPageChannels",e._ins=null,e}(PDKalien.PDKNavigationPage);__reflect(PDKPageChannels.prototype,"PDKPageChannels");var PDKIRChannel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgIcon.source="room_channel_icon_"+this.data.id,this.imgLabel.source="room_channel_lab_"+this.data.id,1==this.data.id},e.prototype.playOpenAnimate=function(){this.openFlag.visible=!0,egret.Tween.get(this.openFlag).set({visible:!0,y:87}).to({y:77},446).to({y:87},446).call(this.playOpenAnimate,this)},e}(eui.ItemRenderer);__reflect(PDKIRChannel.prototype,"PDKIRChannel");var PDKPageMatchChannel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=pages.PDKPageMatchChannelSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKIRContainer},e.prototype.addListeners=function(){t.prototype.addListeners.call(this),pdkServer.addEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.REFRESH_MATCH_LIST,this.onRefreshMatchList,this)},e.prototype.removeListeners=function(){t.prototype.removeListeners.call(this),pdkServer.removeEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),PDKalien.Dispatcher.removeEventListener(PDKEventNames.REFRESH_MATCH_LIST,this.onRefreshMatchList,this)},e.prototype.onMatchSignUpInfoRep=function(t){var e=t.data,n=null;this._roomList.some(function(t){return t.matchId==e.matchid?(n=t,!0):void 0}),n&&(n.is_signup=null==e.is_signup?0:e.is_signup,n.today_cnt=null==e.today_cnt?0:e.today_cnt,n.signup_cnt=null==e.signup_cnt?0:e.signup_cnt,n.signUpCountTest=n.signup_cnt+PDKlang.people,n.todayCountText=n.today_cnt+"/"+n.maxDayPlayCnt,this._dataProvide.itemUpdated(n))},e.prototype.onRefreshMatchList=function(t){this._dataProvide.refresh()},e.prototype._setShareSuccGames=function(t){PDKalien.localStorage.setItem("shareSucc",""+t)},e.prototype._getShareSuccGames=function(){var t=PDKalien.localStorage.getItem("shareSucc");return t?Number(t):-1},e.prototype._shouldShareForFree=function(){return!1},e.prototype._onWXShareRet=function(t){var e=t.data.shareSucc;e&&(this.selectedRoom&&this.selectedRoom.matchId&&this._setShareSuccGames(this.selectedRoom.matchId),PDKalien.Dispatcher.removeEventListener(PDKEventNames.USER_SHARE_RESULT,this._onWXShareRet,this)),PDKPanelShare.instance.close()},e.prototype._onFreePopShare=function(){var t=this;PDKAlert.show("成功分享游戏后即可报名免费赛",0,function(){PDKalien.Dispatcher.addEventListener(PDKEventNames.USER_SHARE_RESULT,t._onWXShareRet,t),PDKPanelShare.instance.showInviteFriend()})},e.prototype._onJoinMatch=function(){if(this.selectedRoom.ads);else{for(var t=0;t<PDKGameConfig.roomList.length;++t)if(2==PDKGameConfig.roomList[t].is_signup)return void pdkServer.checkReconnect();
if(this.selectedRoom.is_signup)1==this.selectedRoom.is_signup?PDKPanelMatchCountDown.instance.show(this.selectedRoom):2==this.selectedRoom.is_signup&&pdkServer.checkReconnect();else if(this.selectedRoom.maxOwnGoldLimit&&this.selectedRoom.maxOwnGoldLimit<PDKMainLogic.instance.selfData.gold)PDKAlert.show(PDKalien.StringUtils.formatApply(PDKlang.match_sign_up_result[16],[this.selectedRoom.maxOwnGoldLimit,this.selectedRoom.name]));else{var e=this._shouldShareForFree();e?this._onFreePopShare():PDKPanelMatchSignUp.instance.show(this.selectedRoom)}}},e.prototype.selectRoom=function(e){t.prototype.selectRoom.call(this,e),this._onJoinMatch()},e.prototype.dealRoomList=function(){t.prototype.dealRoomList.call(this),this._roomList.forEach(function(t){t.ads||pdkServer.getMatchSignUpInfo(t.matchId)})},e.prototype.isAfterInNatonalLast500Match=function(){var t="2017-10-07 19:30:00",e=new Date(Date.parse(t.replace(/-/g,"/"))).getTime(),n=(new Date).getTime();return n>=e?!0:!1},e.prototype.beforeShow=function(e){t.prototype.beforeShow.call(this,e);var n=null;n=PDKGameConfig.roomList.filter(function(t){return 2==t.roomType}),n.sort(function(t,e){return t.sortid-e.sortid}),this._roomList=n,this.dealRoomList(),this._dataProvide.source=this._roomList},e.defName="PDKPageMatchChannel",e}(PDKPageChannelBase);__reflect(PDKPageMatchChannel.prototype,"PDKPageMatchChannel");var PDKMatchRoom=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.setData=function(t){if(this.currentState=t.ads?"ads":"normal",!t.ads){if(this.labName.text=t.name,this.lbOpenTime.text=t.shortName,t.hasOwnProperty("startDate")){var e=PDKMatchService.getNextTurn(t);this.labLimit.text=t.limitText=e.nextTime,t.nextIndex=e.nextIndex}else this.labLimit.text=t.limitText;switch(t.matchType){case 0:this.labReward.text=t.rewardText;break;case 1:}this.imgSignUp.visible=t.is_signup}},e}(eui.Component);__reflect(PDKMatchRoom.prototype,"PDKMatchRoom");var PDKPageNormalChannel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=pages.PDKPageNormalChannelSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKIRNormalRoom},e.prototype.addListeners=function(){t.prototype.addListeners.call(this),pdkServer.addEventListener(PDKEventNames.USER_PLAYERS_AMOUNT_REP,this.onPlayersAmount,this)},e.prototype.removeListeners=function(){t.prototype.removeListeners.call(this),pdkServer.removeEventListener(PDKEventNames.USER_PLAYERS_AMOUNT_REP,this.onPlayersAmount,this)},e.prototype.selectRoom=function(e){t.prototype.selectRoom.call(this,e),pdkServer.checkReconnect()},e.prototype.onPlayersAmount=function(t){var e=this,n=t.data;n.info.forEach(function(t,n){var i=e.getRoomById(t.room_id);i&&(i.amount=t.amount)}),this._dataProvide.refresh()},e.prototype.fastJoin=function(){},e.prototype.beforeShow=function(e){t.prototype.beforeShow.call(this,e),this.setRoomType(1)},e.prototype.followCourse=function(){PDKPanelFollowCourse.instance.show()},e.prototype.beforeHide=function(t,e){void 0===e&&(e=null),this.removeListeners()},e.defName="PDKPageNormalChannelSkin",e}(PDKPageChannelBase);__reflect(PDKPageNormalChannel.prototype,"PDKPageNormalChannel");var PDKIRNormalRoom=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),console.log("PDKPageNormalChannel--------->",this.data),this.imgtabdia.visible=!1,this.grpReward.visible=!1,9e3==this.data.roomID?(this.imgIcon.source="pdk_ico_nongmin",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_cjc"):9001==this.data.roomID?(this.imgIcon.source="pdk_ico_nongmin",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_zjc"):9003==this.data.roomID?(this.imgIcon.source="pdk_ico_nongmin",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_gjc"):9002==this.data.roomID?(this.imgtabdia.visible=!0,this.grpReward.visible=!0,this.labtips.text="最高5奖杯",this.imgIcon.source="pdk_tunvlang",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_cjc"):9004==this.data.roomID?(this.imgtabdia.visible=!0,this.grpReward.visible=!0,this.labtips.text="最高50奖杯",this.imgIcon.source="pdk_tunvlang",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_zjc"):9005==this.data.roomID&&(this.imgtabdia.visible=!0,this.grpReward.visible=!0,this.labtips.text="最高100奖杯",this.imgIcon.source="pdk_tunvlang",this.imgBg.source="pdk_gjc_bg",this.imgBottom.source="pdk_gjc_fenshubg",this.imgName.source="pdk_gjc"),9002==this.data.roomID||9004==this.data.roomID||9005==this.data.roomID?this.labLimit.text=PDKlang.format(PDKlang.id.roomLimit2,PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.baseScore)),PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.minScore))):9003==this.data.roomID?this.labLimit.text=PDKlang.format(PDKlang.id.roomLimit3,PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.baseScore)),PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.minScore))):(9e3==this.data.roomID||9001==this.data.roomID)&&(this.labLimit.text=PDKlang.format(PDKlang.id.roomLimit1,PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.baseScore)),PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.minScore)),PDKUtils.roomScoreFormat(PDKUtils.currencyRatio(this.data.maxScore))));this.data.amount||0;9002==this.data.roomID?this.labOnlineCount.text="玩3局抽奖杯":9001==this.data.roomID?this.labOnlineCount.text="赢3局抽奖杯":9e3==this.data.roomID?this.labOnlineCount.text="赢5局抽奖杯":this.labOnlineCount.text="赢1局抽奖杯"},e}(eui.ItemRenderer);__reflect(PDKIRNormalRoom.prototype,"PDKIRNormalRoom");var PDKPanelAct=function(t){function e(){var e=t.call(this)||this;return e._lastSelectIdx=0,e._labels=[],e._selfData=PDKMainLogic.instance.selfData,e}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelActSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent()},e.prototype._onFRechargeUpdate=function(){if(!this._selfData.isNotBuyFRecharge()){for(var t=0;t<this._labels.length;++t)if(1==this._labels[t].id){this._labels.splice(t,1);break}this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh(),this._frechargeNode&&(PDKPanelFirstRecharge.nullInstance(),this._frechargeNode=null),this._changeSelectByIdx(-1)}},e.prototype._onLoginAppUpdate=function(){if(!PDKalien.Native.instance.isNative&&this._selfData.hasNotLoginApp()){var t=this._selfData.shouldShowActDownAppRed();this._labels.push({tit:"APP福利",id:2,sel:!1,"new":t,cb:this._onClickAPPAct.bind(this)}),this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh()}},e.prototype._initEvent=function(){this._enableEvent(!0),this.leftLabelList.addEventListener(egret.Event.CHANGE,this._onSelectItem,this);var t=PDKEventManager.instance;t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.FRECHARGE_HASUPDATE,this._onFRechargeUpdate,this),t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.LOGINAPP_HASUPDATE,this._onLoginAppUpdate,this),PDKEventManager.instance.enableOnObject(this)},e.prototype._setNotRedById=function(t){for(var e=0;e<this._labels.length;++e)if(this._labels[e].id==t){this._labels[e]["new"]=!1,this._leftLabelsDataProvider.itemUpdated(this._labels[e]);break}},e.prototype._getIdxById=function(t){for(var e=0;e<this._labels.length;++e)if(this._labels[e].id==t)return e;return-1},e.prototype._setNotShowFirstRechargeRed=function(){this._selfData.shouldShowActFirstRechareRedRed()&&(this._selfData.setNotShowActFirstRechargeRed(),pdkServer.reqClickFirstRecharge(),this._setNotRedById(1))},e.prototype._setNotShowThanksRed=function(){this._selfData.shouldShowActThanksRed()&&(this._selfData.setNotShowActThanksRed(),pdkServer.reqClickThanksgiving(),this._setNotRedById(3))},e.prototype._setNotShowDownAppRed=function(){this._selfData.shouldShowActDownAppRed()&&(this._selfData.setNotShowActDownAppRed(),pdkServer.reqClickDownApp(),this._setNotRedById(2))},e.prototype._onGetWatchWXHttpRep=function(t){if(t&&0==t.code&&t.data&&1!=t.data.has_subscribe){var e={tit:"关注福利",sel:!1,id:4,"new":!1,cb:this._onClickWatch.bind(this)};this._labels.push(e),this._leftLabelsDataProvider.source=this._labels,this._leftLabelsDataProvider.refresh()}},e.prototype._initLeftBtns=function(){var t={tit:"感恩节活动",sel:!1,id:3,"new":!1,cb:this._onClickThanksgiving.bind(this)};if(PDKUtils.isInTimeSection("2017-11-23 00:00:00","2017-11-26 00:00:00",(new Date).getTime())){var e=this._selfData.shouldShowActThanksRed();t["new"]=e,this._labels.push(t)}var n={tit:"首充活动",id:1,sel:!1,"new":!1,cb:this._onClickFirstRecharge.bind(this)};if(this._selfData.isNotBuyFRecharge()){var i=this._selfData.shouldShowActFirstRechareRedRed();n["new"]=i,this._labels.push(n)}if(!PDKalien.Native.instance.isNative&&this._selfData.hasNotLoginApp()){var o=this._selfData.shouldShowActDownAppRed();this._labels.push({tit:"APP福利",id:2,sel:!1,"new":o,cb:this._onClickAPPAct.bind(this)})}this._labels.push({tit:"推广福利",sel:!1,"new":!1,id:0,cb:this._onClickDelegate.bind(this)})},e.prototype._initUI=function(){this._labels=[],this._initLeftBtns(),this.leftLabelList.itemRenderer=PDKActListItem,this.leftLabelList.dataProvider=this._leftLabelsDataProvider=new eui.ArrayCollection(this._labels),this.leftLabelList.selectedIndex=0},e.prototype._onSelIdxInvide=function(t){var e=this;(t>=this._labels.length||0>t)&&(t=0),this._selectItem=this._labels[t],this._selectItem.cb();for(var n=0;n<this._leftLabelsDataProvider.length;++n)n==t?this._leftLabelsDataProvider.source[n].sel=!0:this._leftLabelsDataProvider.source[n].sel=!1,this._leftLabelsDataProvider.itemUpdated(this._labels[n]);this._lastSelectIdx=t,egret.setTimeout(function(){var n=e.leftLabelList.getChildAt(t),i=n.localToGlobal(.5*n.width,.5*n.height),o=e.infoGroup.globalToLocal(i.x,i.y);e.arrImg.y=o.y},this,350)},e.prototype._changeSelectByIdx=function(t){var e=this;if(t>=this.leftLabelList.$children.length||0>t)return void this._onSelIdxInvide(t);var n=t;this._leftLabelsDataProvider.source[this._lastSelectIdx].sel=0,this._leftLabelsDataProvider.itemUpdated(this._labels[this._lastSelectIdx]),this._lastSelectIdx=n;var i=this.leftLabelList.getChildAt(n),o=i.localToGlobal(.5*i.width,.5*i.height),a=this.infoGroup.globalToLocal(o.x,o.y);this.arrImg.y=a.y;for(var r=0;r<this._leftLabelsDataProvider.length;++r)if(r==n){this._leftLabelsDataProvider.source[r].sel=!0,this._leftLabelsDataProvider.itemUpdated(this._labels[n]);break}this._selectItem=this._labels[n],this._labels[n].cb(),egret.callLater(function(){e.leftLabelList.selectedIndex=-1},this)},e.prototype._onSelectItem=function(){this._changeSelectByIdx(this.leftLabelList.selectedIndex)},e.prototype._onClickThanksgiving=function(){this._showThanksgiving()},e.prototype._onClickFirstRecharge=function(){this._showFirstRecharge()},e.prototype._onClickAPPAct=function(){this._showAPPAct()},e.prototype._onClickDelegate=function(){this._showDelegate()},e.prototype._onClickWatch=function(){this._showWatchWX()},e.prototype._onClickDayBuy=function(){this._showDayBuy()},e.prototype._checkDayBuy=function(){this._dayBuygNode||(this._dayBuygNode=PDKPanelDayBuy.getInstance(),this.addChild(this._dayBuygNode))},e.prototype._checkWatchWX=function(){this._watchWXNode||(this._watchWXNode=PDKPanelWatchWX.getInstance(),this.addChild(this._watchWXNode))},e.prototype._checkThanksgiving=function(){this._thanksgivingNode||(this._thanksgivingNode=PDKPanelThanksgiving.getInstance(),this.addChild(this._thanksgivingNode))},e.prototype._onFRLightLoadOver=function(t){"firstRechargelight"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onFRLightLoadOver,this),this._selectItem&&1==this._selectItem.id&&this._showFirstRecharge())},e.prototype._checkFrecharge=function(){this._frechargeNode||(RES.isGroupLoaded("firstRechargelight")?(this._frechargeNode=PDKPanelFirstRecharge.getInstance(),this.addChild(this._frechargeNode)):(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onFRLightLoadOver,this),RES.loadGroup("firstRechargelight")))},e.prototype._checkAppAct=function(){this._appNode||(this._appNode=PDKPanelDownApp.getInstance(),this.addChild(this._appNode))},e.prototype._checkDelegate=function(){this._delegateNode||(this._delegateNode=PDKPanelDelegate.getInstance(),this.addChild(this._delegateNode))},e.prototype._enableThanksShow=function(t){this._thanksgivingNode&&(this._thanksgivingNode.visible=t,t&&pdkServer.reqThanksBuyCounts())},e.prototype._enableFrechargeShow=function(t){this._frechargeNode&&(this._frechargeNode.visible=t)},e.prototype._enableAppActShow=function(t){this._appNode&&(this._appNode.visible=t)},e.prototype._enableDelegateActShow=function(t){this._delegateNode&&(this._delegateNode.visible=t)},e.prototype._enableDayBuyShow=function(t){this._dayBuygNode&&(this._dayBuygNode.visible=t)},e.prototype._enableWatchWXShow=function(t){this._watchWXNode&&(this._watchWXNode.visible=t)},e.prototype._showThanksgiving=function(){this._checkThanksgiving(),this._enableAppActShow(!1),this._enableFrechargeShow(!1),this._enableDelegateActShow(!1),this._enableThanksShow(!0),this._enableDayBuyShow(!1),this._enableWatchWXShow(!1),this._setNotShowThanksRed()},e.prototype._showFirstRecharge=function(){this._checkFrecharge(),this._enableAppActShow(!1),this._enableFrechargeShow(!0),this._enableDelegateActShow(!1),this._enableThanksShow(!1),this._enableDayBuyShow(!1),this._enableWatchWXShow(!1),this._setNotShowFirstRechargeRed()},e.prototype._showAPPAct=function(){this._checkAppAct(),this._enableAppActShow(!0),this._enableFrechargeShow(!1),this._enableDelegateActShow(!1),this._enableThanksShow(!1),this._enableDayBuyShow(!1),this._enableWatchWXShow(!1),this._setNotShowDownAppRed()},e.prototype._showDelegate=function(){this._checkDelegate(),this._enableAppActShow(!1),this._enableFrechargeShow(!1),this._enableDelegateActShow(!0),this._enableDayBuyShow(!1),this._enableWatchWXShow(!1),this._enableThanksShow(!1)},e.prototype._showDayBuy=function(){this._checkDayBuy(),this._enableAppActShow(!1),this._enableFrechargeShow(!1),this._enableDelegateActShow(!1),this._enableDayBuyShow(!0),this._enableWatchWXShow(!1),this._enableThanksShow(!1)},e.prototype._showWatchWX=function(){this._checkWatchWX(),this._enableAppActShow(!1),this._enableFrechargeShow(!1),this._enableDelegateActShow(!1),this._enableThanksShow(!1),this._enableDayBuyShow(!1),this._enableWatchWXShow(!0)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),this.leftLabelList.removeEventListener(egret.Event.CHANGE,this._onSelectItem,this),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype.setShowAppAct=function(){var t=this._getIdxById(2);0>t&&(t=0),this._changeSelectByIdx(t)},e.prototype.setShowFirstRecharge=function(){var t=this._getIdxById(1);0>t&&(t=0),this._changeSelectByIdx(t)},e.prototype.setShowThanksgiving=function(){var t=this._getIdxById(3);0>t&&(t=0),this._changeSelectByIdx(t)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelAct.prototype,"PDKPanelAct");var PDKPanelActAndNotice=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelActAndNotice},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.actNormalGroup.addClickListener(this._onClickTitAct,this,!1),this.noticeNormalGroup.addClickListener(this._onClickTitNotice,this,!1)},e.prototype._initUI=function(){},e.prototype._checkAct=function(){this._act||(this._act=PDKPanelAct.getInstance(),this.addChild(this._act))},e.prototype._checkNotice=function(){this._notice||(this._notice=PDKPanelNotice.getInstance(),this.addChild(this._notice))},e.prototype._checkAdded=function(){this.parent||this.popup()},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._onClickTitAct=function(){this.showAct()},e.prototype._onClickTitNotice=function(){this.showNotice()},e.prototype.showFRecharge=function(){this.showAct(),this._act.setShowFirstRecharge()},e.prototype.showThanksgiving=function(){this.showAct(),this._act.setShowThanksgiving()},e.prototype.showAPPAct=function(){this.showAct(),this._act.setShowAppAct()},e.prototype._enableShowAct=function(t){this._act&&(this._act.visible=t)},e.prototype._enableShowNotice=function(t){this._notice&&(this._notice.visible=t)},e.prototype.showAct=function(){this.currentState="act",this._enableShowAct(!0),this._enableShowNotice(!1),this._checkAct(),this._checkAdded()},e.prototype.showNotice=function(){this.currentState="notice",this._enableShowAct(!1),this._enableShowNotice(!0),this._checkNotice(),this._checkAdded()},e.prototype.showRedExchange=function(){this.showNotice()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelActAndNotice.prototype,"PDKPanelActAndNotice");var PDKPanelAlert=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelAlertSkin,this._defaultConfirmString=this.btnConfirm.labelIcon,this._defaultCancelString=this.btnCancel.labelIcon},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.grpButtonShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this)},e.prototype.onGrpButtonTap=function(t){this.dealAction(t.target.name)},e.prototype.show=function(t,e,n,i,o){switch(void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i="center"),void 0===o&&(o=null),this.popup(),this.btnConfirm.labelIcon=this._defaultConfirmString,this.btnCancel.labelIcon=this._defaultCancelString,this.btnConfirm.scaleX=1,this.btnConfirm.scaleY=1,this.btnConfirm.bgImg.visible=!0,this.labContent.text=t,null==o&&(o=[{text:t}]),this.labContent.textFlow=o,this._callback=n,this.labContent.textAlign=i,this.grpButtonShare.visible=!1,this.grpButton.visible=!0,e){case 0:this.grpButton.contains(this.btnCancel)&&this.grpButton.removeChild(this.btnCancel);break;case 1:this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel);break;case 2:this.grpButtonShare.visible=!0,this.grpButton.visible=!1,this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel)}},e.getInstance=function(){return this._instance},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelAlert.prototype,"PDKPanelAlert");var PDKAlert=function(){function t(){}return t.show=function(t,e,n,i,o){void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i="center"),void 0===o&&(o=null),PDKPanelAlert.instance.show(t,e,n,i,o)},t}();__reflect(PDKAlert.prototype,"PDKAlert");var PDKPanelAlert2=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelAlert2Skin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnConfirmTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},e.prototype.onBtnConfirmTap=function(t){this.dealAction(t.target.name)},e.prototype.onBtnCloseTap=function(t){this.dealAction()},e.prototype.show=function(t,e,n){void 0===n&&(n=null),this.popup(),this.labContent.text=t,this._callback=n,this.btnConfirm.bgRes=e},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelAlert2.prototype,"PDKPanelAlert2");var Alert2=function(){function t(){}return t.show=function(t,e,n){void 0===n&&(n=null),PDKPanelAlert2.instance.show(t,e,n)},t}();__reflect(Alert2.prototype,"Alert2");var PDKPanelAlert3=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelAlertSkin,this._defaultConfirmString=this.btnConfirm.labelIcon,this._defaultCancelString=this.btnCancel.labelIcon},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.onGrpButtonTap=function(t){this.dealAction(t.target.name)},e.prototype.show=function(t,e,n,i){switch(void 0===e&&(e=0),void 0===n&&(n=null),void 0===i&&(i=!1),this.popup(),this.btnConfirm.labelIcon=this._defaultConfirmString,this.btnCancel.labelIcon=this._defaultCancelString,this.btnClose.visible=i,this.labContent.textFlow=(new egret.HtmlTextParser).parser(t),this._callback=n,e){case 0:this.grpButton.contains(this.btnCancel)&&this.grpButton.removeChild(this.btnCancel);break;case 1:this.grpButton.contains(this.btnCancel)||this.grpButton.addChild(this.btnCancel)}},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelAlert3.prototype,"PDKPanelAlert3");var PDKAlert3=function(){function t(){}return t.show=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=""),void 0===i&&(i=!1),PDKPanelAlert3.instance.show(t,0,e,i),PDKPanelAlert3.instance.btnConfirm.labelIcon=n},t}();__reflect(PDKAlert3.prototype,"PDKAlert3");var PDKPanelBeforeMatch=function(t){function e(){return t.call(this,PDKalien.popupEffect.Flew,{withFade:!0,ease:egret.Ease.backOut,direction:"up"},PDKalien.popupEffect.Flew,{withFade:!0,ease:egret.Ease.backIn,direction:"up"})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelBeforeMatchSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.show=function(t,e,n){void 0===n&&(n=0),this.popup();var i;i=1==t?PDKResNames.match_word_4:e>1?PDKResNames.match_word_6:PDKResNames.match_word_5,n>1&&(this.labCount.text=n.toString()),this.grpCount.visible=n>1,this.img.source=i,egret.setTimeout(this.dealAction,this,2e3)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelBeforeMatch.prototype,"PDKPanelBeforeMatch");var PDKPanelBindPhone=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelBindPhoneSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._nIntervalId=-1,this.sk="",this.unid="",this._showCountLabel(!1),this._resetCountNum(),this.phone.inputType=egret.TextFieldInputType.TEL,this.code.inputType=egret.TextFieldInputType.TEL,this._enableEvent(!0),this.getCodeImg.addClickListener(this._onClickGetCode,this),this.bindNowImg.addClickListener(this._onClickBindNow,this),this.close_img.addClickListener(this._onClickClose,this)},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},e.prototype._checkPhone=function(){var t=this.phone.text;return t&&11==t.length?!0:!1},e.prototype._checkCode=function(){var t=this.code.text;return t?!0:!1},e.prototype._showCountLabel=function(t){this.countLabel.visible=t},e.prototype._resetCountNum=function(){this._nCountTime=60},e.prototype._clearCountInterval=function(){-1!=this._nIntervalId&&egret.clearInterval(this._nIntervalId),this._nIntervalId=-1},e.prototype._startCountDown=function(){var t=this;this._clearCountInterval(),this._resetCountNum(),this.countLabel.text=""+this._nCountTime,this._showCountLabel(!0),this._nIntervalId=egret.setInterval(function(){return t._nCountTime<1?(t._clearCountInterval(),t._showCountLabel(!1),void t._showGetCode(!0)):(t._nCountTime-=1,void(t.countLabel.text=""+t._nCountTime))},this,1e3)},e.prototype._showGetCode=function(t){this.getCodeImg.visible=t},e.prototype._onClickGetCode=function(){if(!this._checkPhone())return void PDKToast.show("手机号格式错误");var t=(e={},e[0]="验证码发送成功",e[1e3]="参数错误",e[2015]="手机号码错误",e[2018]="发送失败",e[2019]="请稍后重试",e);PDKwebService.getCode(this.phone.text,function(e){var n=t[e];PDKToast.show(n)}),this._showGetCode(!1),this._startCountDown();var e},e.prototype._enableTouch=function(t,e){t.touchEnabled=e},e.prototype._onClickBindNow=function(){if(!this._checkPhone()||!this._checkCode())return void PDKToast.show("手机号或验证码错误");var t=(s={},s[0]="绑定手机号成功",s[1e3]="参数错误",s[2016]="该手机号已被绑定",s[2017]="绑定失败",s),e=this.phone.text,n=this.code.text;this._enableTouch(this.bindNowImg,!1);var i=PDKUserData.instance,o=i.getItem("uid",""),a=i.getItem("token",""),r=this;PDKwebService.bindPhoneNew(e,n,o,a,function(n){var o=t[n];0!=n||(i.setItem("bindinfo",!0,!0),i.setItem("phone",e,!0),r.close()),PDKAlert.show(o,0)}.bind(this));var s},e.prototype._onRemoveFromStage=function(){this._clearCountInterval(),this._enableEvent(!1),e._instance=null},e.prototype.show=function(t){this.popup(null,!0,{alpha:0});var e=PDKalien.Native.instance,n=e.getUrlArg();n.sk&&(this.sk=n.sk),this.unid=t},e.prototype.showNew=function(){this.popup(null,!0,{alpha:0})},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelBindPhone.prototype,"PDKPanelBindPhone");var PDKPanelBuyRecorder=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelBuyRecorderSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this),this.btn3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyClick,this)},e.prototype.addListeners=function(){var t=PDKEventManager.instance;t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),PDKalien.PDKEventManager.instance.enableOnObject(this)},e.prototype.removeListeners=function(){PDKalien.PDKEventManager.instance.disableOnObject(this)},e.prototype.onMyUserInfoUpdate=function(t){void 0===t&&(t=null);var e=t?t.data.userInfoData:PDKMainLogic.instance.selfData,n=0,i="";e.cardsRecorder&&e.cardsRecorder[6]>0&&(n=Math.ceil(e.cardsRecorder[6]/3600/24),i="(至"+e.cardsRecorder[0]+"年"+e.cardsRecorder[1]+"月"+e.cardsRecorder[2]+"日"+e.cardsRecorder[3]+":"+e.cardsRecorder[4]+")"),this.lbRemain.text=String(n),n>0?(this.lbRemain.textColor=2131744,egret.localStorage.setItem("opencardsrecorder","1"),egret.localStorage.removeItem("cardsrecorderexpirenotice")):this.lbRemain.textColor=16711680,this.lbExpire.text=i},e.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),PDKMainLogic.instance.refreshSelfInfo(),this.addListeners(),this._callback=t,this.onMyUserInfoUpdate(),this.popup()},e.prototype.onBuyClick=function(t){var e=Number(t.currentTarget.name)-1,n=PDKGameConfig.cardsRecorderConfig[e];n&&n.id&&PDKRechargeService.instance.doRecharge(n.id)},e.prototype.onBtnCloseClick=function(t){this.removeListeners(),this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelBuyRecorder.prototype,"PDKPanelBuyRecorder");var PDKPanelDayBuy=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelDayBuy},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.buyImg.addClickListener(this._onClickBuy,this)},e.prototype._onClickBuy=function(){PDKRechargeService.instance.doRecharge("10021")},e.prototype._initUI=function(){this.buyImg.setTit("pdk_common_buy"),this.buyImg.setDisable()},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelDayBuy.prototype,"PDKPanelDayBuy");var PDKPanelDayTask=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelDayTaskSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},e.prototype._formatEveryTaskData=function(){var t=PDKGameConfig.getDayTaskList();if(!t)return[];for(var e=PDKMainLogic.instance.selfData,n=e.getDayTaskPre(),i=e.getDayTaskAllTStatus(),o=[],a=[],r=[],s=null,h=0,c=0,l=[],p=[],d=0;d<t.length;++d){r=[],a=t[d].reward.split("|");for(var u=0;u<a.length;++u)o=a[u].split(":"),h=Number(o[0]),c=Number(o[1]),1==h&&(c/=100),r.push({id:h,num:c});if(s={},s.id=d+1,s.status=i[d]||0,s.condition=t[d].condition,s.total=t[d].progress,1==t[d].condition)s.num=n[0]||0,s.taskDesc1="胜利"+s.total+"局",s.taskDesc2="";else if(2==t[d].condition&&(s.num=n[1]||0,s.taskDesc1="邀请"+s.total+"位新好友",s.taskDesc2="(好友需赢5局)",1==t[d].week)){var _=s.total-s.num;0>_&&(_=0),r.unshift({id:41003,num:_})
}1==t[d].day&&2==t[d].tp&&(s.num=n[2]||0),s.rew=r,1==t[d].day?1==t[d].condition&&l.push(s):1==t[d].week}return{day:l,week:p}},e.prototype._initDefaut=function(){this._allTaskInfo=this._formatEveryTaskData(),this._dataArr=this._allTaskInfo.day,!this._dataArr||this._dataArr.length<1||(this._dataProvider=new eui.ArrayCollection(this._dataArr),this.mTask_list.itemRenderer=PDKDayTaskItemInfo,this.mTask_list.dataProvider=this._dataProvider)},e.prototype._initEvent=function(){this._enableEvent(!0);var t="addClickListener";this.mClose_btn[t](this._onTouchClose,this),this.dayTaskImg[t](this._onClickDayTask,this,!1),this.weekTaskImg[t](this._onClickWeekTask,this,!1);var e=PDKalien.PDKEventManager.instance;e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this._userinfoUpdate,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this)},e.prototype._onDayTaskRewGetSucc=function(){this._allTaskInfo=this._formatEveryTaskData(),"day"==this.currentState?this._showDayTask():"week"==this.currentState&&this._showWeekTask()},e.prototype._showDayTask=function(){var t=[];this._allTaskInfo.day&&this._allTaskInfo.day.length>=1&&(t=this._allTaskInfo.day),this._dataProvider.source=t,this._dataProvider.refresh()},e.prototype._showWeekTask=function(){var t=[];this._allTaskInfo.week&&this._allTaskInfo.week.length>=1&&(t=this._allTaskInfo.week),this._dataProvider.source=t,this._dataProvider.refresh()},e.prototype._onClickDayTask=function(){this.currentState="day",this._showDayTask()},e.prototype._onClickWeekTask=function(){this.currentState="week",this._showWeekTask()},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype._userinfoUpdate=function(){this._allTaskInfo=this._formatEveryTaskData(),"day"==this.currentState?this._showDayTask():"week"==this.currentState&&this._showWeekTask()},e.prototype.show=function(){this.popup(null,!0,{alpha:0})},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelDayTask.prototype,"PDKPanelDayTask");var PDKPanelDelegate=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelDelegateSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent(),this._showDelegate()},e.prototype._initEvent=function(){this._enableEvent(!0),this.wxCp_img.addClickListener(this._onClickCopyKeFuWX,this),this.publicCp_img.addClickListener(this._onClickCopyPublicWX,this)},e.prototype._initUI=function(){},e.prototype._onClickCopyKeFuWX=function(){var t=PDKGameConfig.extendWX;PDKGameConfig.copyText(this,t,"微信号("+t+")")},e.prototype._onClickCopyPublicWX=function(){PDKGameConfig.copyText(this,"三桂跑得快","公众号(三桂跑得快)")},e.prototype._onScrollTop=function(){this.content_scroller.stopAnimation(),this.content_scroller.viewport.scrollV=0,this.content_scroller.viewport.validateNow()},e.prototype._showDelegate=function(){this._onScrollTop(),this.info_label.text="一大波福利正在袭来！！！",PDKalien.Native.instance.isNative&&(this.info_label.text="奖励规则：\n    每邀请1个好友赢5局，得1个高级奖杯(游戏内抽取)。\r\n \r微信号:"+PDKGameConfig.extendWX),this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="notice_delegate_tit"},e.prototype._showCopyWX=function(t){this.wxCp_img.visible=t,this.publicCp_img.visible=t},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelDelegate.prototype,"PDKPanelDelegate");var PDKPanelDownApp=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelDownAppSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.down_img.addClickListener(this._onClickDownApp,this)},e.prototype._onClickDownApp=function(){PDKGameConfig.downApp()},e.prototype._initUI=function(){},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelDownApp.prototype,"PDKPanelDownApp");var PDKPanelExchange2=function(t){function e(){return t.call(this,PDKalien.popupEffect.Fade,{},PDKalien.popupEffect.Fade,{})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelExchange2Skin,this._self=PDKMainLogic.instance.selfData},e.prototype._filterTimeStampByGoodsId=function(t){var e=PDKMainLogic.instance.selfData.rcminexcexpiretime;if(e){var n=(new Date).getTime(),i=1e3*e;i>n?this._showBefore(i,t):this._showAfter(t)}else this._showAfter(t)},e.prototype.updateExchangeList=function(){"card"==this.currentState&&(this._filterTimeStampByGoodsId([4,6]),this._dataProvide.source=this.itemList,this._dataProvide.refresh())},e.prototype.updateRedList=function(){"red"==this.currentState&&(this._filterTimeStampByGoodsId([1]),this._dataProvide.source=this.itemList,this._dataProvide.refresh())},e.prototype.updateJDList=function(){"jd"==this.currentState&&(this.itemList=PDKGameConfig.exchangeConfig.filter(function(t){return 5==t.goodsid}),this._dataProvide.source=this.itemList,this._dataProvide.refresh())},e.prototype._initJD=function(){for(var t=PDKGameConfig.exchangeConfig,e=!1,n=0;n<t.length;++n)if(5==t[n].goodsid){e=!0;break}e||(this.jdLabel.visible=!1,this.flagJdImg.visible=!1)},e.prototype._initH5=function(){this._clickRedFunc=this._showRed.bind(this)},e.prototype._showAfter=function(t){this.itemList=PDKGameConfig.exchangeConfig.filter(function(e){e.timeStamp=0;for(var n=!1,i=t.length,o=0;i>o;++o)e.goodsid==t[o]&&(n=!0);return null==e.first&&n})},e.prototype._showBefore=function(t,e){this.itemList=PDKGameConfig.exchangeConfig.filter(function(n){n.timeStamp=t;for(var i=!1,o=0;o<e.length;++o)n.goodsid==e[o]&&(i=!0);return null==n.after&&i})},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.percentWidth=100,this.percentHeight=100,this.lv_goods.dataProvider=this._dataProvide=new eui.ArrayCollection,this.lv_history.dataProvider=this._historyProvide=new eui.ArrayCollection,this.lv_history.itemRenderer=PDKFeiHistoryItem,this._isReqHistory=!1,this.hisoryInfoScroller.addEventListener(egret.Event.CHANGE,this._onHistoryScroll,this),this.onResize(null),this.lv_goods.itemRenderer=PDKShopItem;var e=PDKEventManager.instance;e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),e.registerOnObject(this,this.btn_history,egret.TouchEvent.TOUCH_TAP,this.onHistory,this),e.registerOnObject(this,this.close_group,egret.TouchEvent.TOUCH_TAP,this.onClose,this),e.registerOnObject(this,this.flagGoldImg,egret.TouchEvent.TOUCH_TAP,this._onClickGoldGroup,this),e.registerOnObject(this,this.flagDiamondImg,egret.TouchEvent.TOUCH_TAP,this._onClickDiamondGroup,this),e.registerOnObject(this,this.flagExchangeImg,egret.TouchEvent.TOUCH_TAP,this._onClickExchangeGroup,this),e.registerOnObject(this,this.btn_recorder,egret.TouchEvent.TOUCH_TAP,this.onRecorderClick,this),e.registerOnObject(this,this.redExchangeImg,egret.TouchEvent.TOUCH_TAP,this._onClickExchange,this),e.registerOnObject(this,this.flagJdImg,egret.TouchEvent.TOUCH_TAP,this._onClickJD,this),e.registerOnObject(this,this.flagRedImg,egret.TouchEvent.TOUCH_TAP,this._onClickRed,this),e.registerOnObject(this,this.flagExImg,egret.TouchEvent.TOUCH_TAP,this._onClickExHistory,this),e.registerOnObject(this,PDKalien.StageProxy.stage,egret.Event.RESIZE,this.onResize,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),this._initJD(),this._initH5()},e.prototype.onResize=function(t){},e.prototype._showGold=function(){this.currentState="gold";for(var t=[],e=PDKGameConfig.rechargeConfig,n=0;n<e.length;++n)e[n].firstrecharge||1!=e[n].item_type||t.push(e[n]);this._dataProvide.source=t,this._dataProvide.refresh()},e.prototype._showDiamond=function(){for(var t=[],e=PDKGameConfig.rechargeConfig,n=0;n<e.length;++n)10009!=e[n].product_id&&3==e[n].item_type&&t.push(e[n]);this._dataProvide.source=t,this._dataProvide.refresh(),this.currentState="diamond"},e.prototype._showExchange=function(){this.currentState="card",this.updateExchangeList()},e.prototype._showJD=function(){this.currentState="jd",this.updateJDList()},e.prototype._onClickGoldGroup=function(){this._showGold()},e.prototype._onClickDiamondGroup=function(){this._showDiamond()},e.prototype._onClickExchangeGroup=function(){this._showExchange()},e.prototype.onHistory=function(){PDKPanelExchange3.instance.show()},e.prototype.onClose=function(){this.close()},e.prototype.onMyUserInfoUpdate=function(t){void 0===t&&(t=null);var e=t?t.data.userInfoData:this._self,n=PDKBagService.instance.getItemCountById(3);if(this.gold.updateGold(e.gold),this.diamond.updateGold(n),this.avatar.imageId=e.imageid,this.avatar.setVipLevel(e.getCurVipLevel()),e.nickname){var i=e.nickname.substr(0,10);this.labNickName.text=i+"("+e.fakeuid+")"}this._self.redcoin=PDKMainLogic.instance.selfData.redcoin,this.updateExchangeList(),this.flashData(!1)},e.prototype._onClickExchange=function(){this._showExchange()},e.prototype._onClickJD=function(){this._showJD()},e.prototype._onClickRed=function(){this._clickRedFunc()},e.prototype._onClickExHistory=function(){this._showExHistory()},e.prototype.flashData=function(t){if(void 0===t&&(t=!1),this.lbRedCoin.text=""+(null==this._self.redcoin?"0.00":PDKUtils.exchangeRatio(this._self.redcoin/100,!0)),t){for(var e=0;e<PDKGameConfig.exchangeConfig.length;++e)if(PDKGameConfig.exchangeConfig[e].after){for(var n=0;n<this.itemList.length;++n)if(this.itemList[n].first){this.itemList.splice(n,1,PDKGameConfig.exchangeConfig[e]);break}break}this._dataProvide.source=this.itemList,this._dataProvide.refresh()}},e.prototype.show=function(t){var e=this;void 0===t&&(t=0),this.popup(),PDKEventManager.instance.enableOnObject(this),egret.setTimeout(function(){e.onMyUserInfoUpdate(),1==t?e._showDiamond():2==t?e._showExchange():3==t?e._showJD():4==t?e._showRed():5==t?e._showExHistory():e._showGold()},this,50)},e.prototype._showRed=function(){this.currentState="red",this.updateRedList()},e.prototype._showExHistory=function(){var t=this,e=this;PDKwebService.getExHistory(1,function(n){if(e.currentState="history",0==n.code){var i=n.data.items;t._historyInfo=n.data,e._initExRecordInfo(i),t.hisoryInfoScroller.viewport.scrollV=0}})},e.prototype._onHistoryScroll=function(t){var e=this;if(this.hisoryInfoScroller.viewport.scrollV>=this.hisoryInfoScroller.height){var n=this._historyInfo.current_page,i=this;n<this._historyInfo.total_page&&!i._isReqHistory&&(i._isReqHistory=!0,PDKwebService.getExHistory(n+1,function(t){if(i._isReqHistory=!1,0==t.code){t.data.items;i._historyInfo.items=e._historyInfo.items.concat(t.data.items),i._historyInfo.current_page=t.data.current_page,i._initExRecordInfo(i._historyInfo.items)}}))}},e.prototype._initExRecordInfo=function(t){this._historyProvide.source=t,this._historyProvide.refresh()},e.prototype.close=function(e){void 0===e&&(e=!1),e?PDKalien.PopUpManager.removePopUp(this):t.prototype.close.call(this),PDKEventManager.instance.disableOnObject(this)},e.prototype.onTimeExpired=function(t){this._showAfter(t),this._dataProvide.source=this.itemList,this._dataProvide.refresh()},e.prototype._onBagRefresh=function(){var t=PDKBagService.instance.getItemCountById(3);this.diamond.updateGold(t)},e.prototype.onRecorderClick=function(t){PDKPanelBuyRecorder.instance.show()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelExchange2.prototype,"PDKPanelExchange2");var PDKPanelExchange3=function(t){function e(){return t.call(this,PDKalien.popupEffect.Fade,{},PDKalien.popupEffect.Fade,{})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelExchange3Skin,this._self=PDKMainLogic.instance.selfData},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.lv_list1.itemRenderer=PDKIRExchangeHistory,this.lv_list2.itemRenderer=PDKIRExchangeDetail,this.list1=new eui.ArrayCollection,this.list2=new eui.ArrayCollection,this.lv_list1.dataProvider=this.list1,this.lv_list2.dataProvider=this.list2;var e=PDKEventManager.instance;e.registerOnObject(this,this.btn_close,egret.TouchEvent.TOUCH_TAP,this.onClose,this),e.registerOnObject(this,this.btn_changetype,egret.TouchEvent.TOUCH_TAP,this.onChangeType,this)},e.prototype.onChangeType=function(){"detail"==this.skin.currentState?this.skin.currentState="hirstory":this.skin.currentState="detail"},e.prototype.loadConfigs=function(t){var e=this;PDKwebService.getRedcoinHistory(this._self.uid,function(t){if(t&&t.data){var n=t.data.concat(),i=[];if(null!=t.data)for(var o=0;o<t.data.length;o++)"2"==t.data[o].type&&i.push(t.data[o]);e.list1.source=n,e.list1.refresh(),e.list2.source=i,e.list2.refresh()}})},e.prototype.onClose=function(){this.close()},e.prototype.show=function(){this.popup(),PDKEventManager.instance.enableOnObject(this),this.loadConfigs(null)},e.prototype.close=function(){t.prototype.close.call(this),PDKEventManager.instance.disableOnObject(this)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelExchange3.prototype,"PDKPanelExchange3");var PDKIRExchangeHistory=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),null!=this.data){if(this.data.recordtime){var e=new Date(1e3*this.data.recordtime),n=PDKalien.TimeUtils.timeFormatForEx(e);this.lbl_time.text=n}"1"==this.data.type?(this.lbl_dis.text=PDKlang.exchange_roomid[this.data.roomid],this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"2"==this.data.type?(this.lbl_dis.text="领取"+this.data.goodsamount+PDKGameConfig.exchangeGoodsConfig[this.data.goodsid].describe,this.lbl_change.text="-"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=5142788):"3"==this.data.type?(this.lbl_dis.text=PDKlang.match_reward,this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"4"==this.data.type?(this.lbl_dis.text="每日任务奖励",this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"78"==this.data.type?(this.lbl_dis.text="极速场奖杯",this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):"82"==this.data.type?(this.lbl_dis.text="邮件奖励",this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400):(this.lbl_dis.text="奖励类型:"+this.data.type,this.lbl_change.text="+"+PDKUtils.exchangeRatio(this.data.coin/100,!0),this.lbl_change.textColor=16646400)}},e}(eui.ItemRenderer);__reflect(PDKIRExchangeHistory.prototype,"PDKIRExchangeHistory");var PDKIRExchangeDetail=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){if(t.prototype.dataChanged.call(this),this.data.goodsid&&(this.lbl_dis.text="领取"+this.data.goodsamount+PDKGameConfig.exchangeGoodsConfig[this.data.goodsid].describe),this.data.recordtime){var e=new Date(1e3*this.data.recordtime),n=PDKalien.TimeUtils.timeFormatForEx(e);this.lbl_time.text=n}switch(this.data.status){case 1:this.lbl_status.text="审核中...";break;case 2:this.lbl_status.text="审核失败";break;case 3:this.lbl_status.text="待领取...";break;case 4:this.lbl_status.text="已领取"}},e}(eui.ItemRenderer);__reflect(PDKIRExchangeDetail.prototype,"PDKIRExchangeDetail");var PDKPanelFeiEx=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelFeiExSkin,this._okFunc=null},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._enableEvent(!0),this._initSpInfo(),this.closeBtn.addClickListener(this._onClickClose,this),this.okImg.addClickListener(this._onClickOK,this)},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},e.prototype._enableTouch=function(t,e){t.touchEnabled=e},e.prototype._onAlertFei=function(){var t=this.info.id,e=this.input2.text,n=this,i="确认充值 <font color='#FF0000'>"+this.info.goodsamount+"</font> 元话费 到  <font color='#FF0000'>"+e+"</font>",o=(new egret.HtmlTextParser).parser(i);PDKAlert.show("",0,function(i){"confirm"==i&&PDKwebService.goRechageFei({uid:pdkServer.uid,coinid:t,phone:e},function(t){0==t.code?(n.info.status=5,PDKUserData.saveLocalPhone(e),PDKAlert3.show("正在为您充值，预计半小时内到账，如果2小时内未到账，请联系客服微信！",null,"pdk_common_btn_lab_confirm_h"),n.info.item&&n.info.item.updateInfo(n.info)):PDKAlert3.show("充值失败,错误码:"+t.data+"|"+t.code,null,"pdk_common_btn_lab_confirm_h")})},"center",o)},e.prototype._onAlertAli=function(){var t=this.info.id,e=this.input1.text,n=this,i=this.input2.text,o="确认领取 <font color='#FF0000'>"+this.info.goodsamount+"</font> 元支付宝红包\n支付宝账号:<font color='#FF0000'>"+i+"</font>",a=(new egret.HtmlTextParser).parser(o);PDKAlert.show("",0,function(o){"confirm"==o&&PDKwebService.goRechageFei({uid:pdkServer.uid,coinid:t,account:i,account_name:e},function(t){0==t.code?(n.info.status=4,PDKUserData.saveLocalAli(i,e),PDKAlert3.show("领取成功",null,"pdk_common_btn_lab_confirm_h"),n.info.item&&n.info.item.updateInfo(n.info)):PDKAlert3.show("领取失败,错误码:"+t.data+"|"+t.code,null,"pdk_common_btn_lab_confirm_h")})},"center",a)},e.prototype._onClickOK=function(){this._okFunc&&this._okFunc()},e.prototype._onRemoveFromStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._initFei=function(){var t=this,e=PDKUserData.getLocalPhone();e&&11==e.length&&(this.input2.text=e),this.currentState="fei",this._okFunc=function(){var e=t.input2.text;e&&11==e.length?t._onAlertFei():PDKToast.show("请输入11位的手机号码")}.bind(this)},e.prototype._initSpInfo=function(){this.liantong.labelDisplay.text="中国联通",this.dianxin.labelDisplay.text="中国电信",this.yidong.value="10086",this.yidong.value="10010",this.yidong.value="10000",this._onSelectYD(),this.yidong.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectYD,this),this.liantong.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectLT,this),this.dianxin.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onSelectDX,this)},e.prototype._showFeiKaSp=function(){this.currentState="sp";var t=this;this._okFunc=function(){t._curSpNum&&5==t._curSpNum.length&&PDKwebService.goRechageFei({uid:pdkServer.uid,coinid:t.info.id,sp:t._curSpNum},function(e){t._onGetCardRet(e)})}},e.prototype._onSelectYD=function(){this._curSpNum="10086",this.yidong.currentState="downAndSelected",this.liantong.currentState="up",this.dianxin.currentState="up"},e.prototype._onSelectLT=function(){this._curSpNum="10010",this.yidong.currentState="up",this.liantong.currentState="downAndSelected",this.dianxin.currentState="up"},e.prototype._onSelectDX=function(){this._curSpNum="10000",this.yidong.currentState="up",this.liantong.currentState="up",this.dianxin.currentState="downAndSelected"},e.prototype._copyCardInfo=function(){var t=this.input1.text,e=this.input2.text,n="卡号:"+t+"卡密:"+e;PDKGameConfig.copyText(this,n,n,!0)},e.prototype._initFeiKa=function(){var t=this;if(3==this.info.status)return void this._showFeiKaSp();4==this.info.status&&(this.currentState="card");var e=this.info.send_listid,n=e.cards.card,i=n.cardno,o=n.cardpws,a=n.expiretime;this.input1.text=i,this.input2.text=o,this.input3.text=a;var r=this.info.sp||e.cardname;this.input1.touchEnabled=!1,this.input2.touchEnabled=!1,this.input3.touchEnabled=!1,egret.setTimeout(function(){t.descLabel.text="您已成功领取"+r,t.descLabel.textAlign="center"},this,50),this._okFunc=this._copyCardInfo.bind(this)},e.prototype._initAli=function(){this.currentState="ali";var t=this,e=PDKUserData.getLocalAli();e&&e.name&&e.account&&(this.input1.text=e.name,this.input2.text=e.account),this._okFunc=function(){var e=this.input2.text,n=t.input1.text;n&&n.length>1&&e&&e.length>1?t._onAlertAli():PDKToast.show("请输入姓名和支付宝账号")}},e.prototype._onGetCardRet=function(t){var e=this,n=t.data;0==t.code?(e.info.status=4,5==e.info.goodsid?(e.info.send_listid=this.info.send_listid||{},e.info.send_listid.cardno=n.cardnum,e.info.send_listid.cardpwd=n.cardpwd,e.info.send_listid.expiretime=n.expiretime,e.info.money=n.money,this._initJD()):6==e.info.goodsid&&(e.info.send_listid=this.info.send_listid||{cards:{card:{}}},e.info.send_listid.cards.card.cardno=n.cardno,e.info.send_listid.cards.card.cardpws=n.cardpws,e.info.send_listid.cards.card.expiretime=n.expiretime,e.info.sp=n.sp,e.info.money=n.money,e._initFeiKa()),e.info.item&&e.info.item.updateInfo(e.info)):PDKAlert3.show("领取失败,错误码:"+t.data+"|"+t.code,null,"pdk_common_btn_lab_confirm_h")},e.prototype._initJD=function(){var t=this;this.currentState="card";var e=this;if(3==e.info.status)return void PDKwebService.goRechageFei({uid:pdkServer.uid,coinid:e.info.id},function(t){e._onGetCardRet(t)});if(4==e.info.status){var n=this.info.send_listid,i=n.cardno||n.cardnum,o=n.cardpwd,a=n.expiretime,r=this.info.goodsamount||this.info.money;egret.setTimeout(function(){t.descLabel.text="您已成功领取"+r+"元京东E卡",t.descLabel.textAlign="center"},this,50),this.input1.text=i,this.input2.text=o,this.input3.text=a,this.input1.touchEnabled=!1,this.input2.touchEnabled=!1,this.input3.touchEnabled=!1,this._okFunc=this._copyCardInfo.bind(this)}},e.prototype.show=function(t){this._bShow||(this._bShow=!0,this.info=t,"4"==t.goodsid?this._initFei():"7"==t.goodsid||"8"==t.goodsid?this._initAli():"6"==t.goodsid?this._initFeiKa():"5"==t.goodsid&&this._initJD(),this.popup(null,!0,{alpha:0}))},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFeiEx.prototype,"PDKPanelFeiEx");var PDKPanelFirstRechargeNew=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelFirstRechargeNew},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent()},e.prototype._initEvent=function(){this.close_img.addClickListener(this._onClickClose,this),this.pay_img.addClickListener(this._onClickPay,this),this._enableEvent(!0);PDKalien.PDKEventManager.instance},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._onClickPay=function(){var t=PDKGameConfig.getFRechargeInfo();t&&(PDKRechargeService.instance.doRecharge(t.product_id),this.dealAction())},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype.show=function(){this.popup()},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFirstRechargeNew.prototype,"PDKPanelFirstRechargeNew");var PDKPanelFollowCourse=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelFollowCourseSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._enableEvent(!0)},e.prototype.playAnimate=function(){for(var t=1;7>t;++t)egret.Tween.get(this["step"+t]).set({visible:!0,alpha:0}).wait(1200*(t-1)).to({alpha:1},1200)},e.prototype.setStepVisible=function(t){for(var e=1;7>e;++e)this["step"+e].visible=t},e.prototype.stopAnimate=function(){for(var t=1;7>t;++t)egret.Tween.removeTweens(this["step"+t]);this.setStepVisible(!0)},e.prototype.show=function(){this.setStepVisible(!1),this.playAnimate(),this.popup()},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.copyWX_img[e](egret.TouchEvent.TOUCH_TAP,this._onClickCopyWX,this),this.btnClose[e](egret.TouchEvent.TOUCH_TAP,this._onTouchClose,this)},e.prototype._onTouchClose=function(){this.stopAnimate(),this.dealAction()},e.prototype._onAddToStage=function(){},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._onClickCopyWX=function(){PDKGameConfig.copyText(this.parent,"三桂跑得快","公众号(三桂跑得快)")},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFollowCourse.prototype,"PDKPanelFollowCourse");var PDKPanelFreshManReward=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelFreshManRewardSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),pdkServer.addEventListener(PDKEventNames.GET_FRESHMAN_REWARD_REP,this.onGetRewardRep,this),this.btnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this)},e.prototype.onGetRewardRep=function(t){var e=t.data;0==e.result?(PDKalien.Dispatcher.dispatch(PDKEventNames.GOLD_RAIN_EFFECT),PDKPanelAlert3.instance.show("成功领取新手奖励: "+e.gold+"金豆,记牌器在游戏中开启"),pdkServer.removeEventListener(PDKEventNames.GET_FRESHMAN_REWARD_REP,this.onGetRewardRep,this),PDKMainLogic.instance.selfData.freshrewardgot=2,this.close()):PDKAlert.show("领取失败，错误编号:"+e.result)},e.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callback=e,this.popup()},e.prototype.onGetClick=function(t){pdkServer.GetFreshManReward()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFreshManReward.prototype,"PDKPanelFreshManReward");var PDKPanelFRGetRew=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelFRGetRewardSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._enableEvent(!0)},e.prototype._enableEvent=function(t){var e="addEventListener";0==t&&(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.mGet_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchGetRewBtn,this)},e.prototype._onTouchGetRewBtn=function(){PDKMainLogic.instance.onGoGetRewardReq(),this.dealAction()},e.prototype.show=function(){this._day=PDKMainLogic.instance.selfData.getFRechargeRewGetDay(),this.popup(null,!0,{alpha:0})},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFRGetRew.prototype,"PDKPanelFRGetRew");var PDKPanelFirstRecharge=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e._onAddToStage,e),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._enableEvent(!0)},e.prototype.init=function(){this.skinName=panels.PDKPanelFirstRecharge},e.prototype._onMyUserInfoUpdate=function(){this._initGoRechargeBtn()},e.prototype._onGoRecharge=function(){var t=PDKGameConfig.getFRechargeInfo();t&&PDKRechargeService.instance.doRecharge(t.product_id)},e.prototype._onGetRew=function(){PDKMainLogic.instance.onGoGetRewardReq(),this.dealAction()},e.prototype._initUI=function(){this._initGoRechargeBtn(),this._playMaskAni(),this._playFontLightAni(),this._playItemLightAni()},e.prototype._initGoRechargeBtn=function(){var t=PDKMainLogic.instance.selfData,e=!t.isNotBuyFRecharge();this._hasBuy||(this._hasBuy=e,e?(this.mGoRecharge_btn.setPngs("frecharge_get_n","frecharge_get_p"),this.mGoRecharge_btn.setClickFunc(this._onGetRew.bind(this))):(this.mGoRecharge_btn.setPngs("frecharge_gopay_n","frecharge_gopay_p"),this.mGoRecharge_btn.setClickFunc(this._onGoRecharge.bind(this))))},e.prototype._playMaskAni=function(){this.mMoneyLight_img.mask=this.mMoneyLight_mask;var t=this.mMoneyLight_mask.x,e=this.mMoneyLight_mask.y,n=this.mMoneyLight_img.x+this.mMoneyLight_img.width+10,i=null;(i=function(o){egret.Tween.get(o.mMoneyLight_mask).to({x:n,y:e},1e3).wait(500).to({x:t,y:e},500).call(function(){i(o)})})(this)},e.prototype._playFontLightAni=function(){var t=this,e=null;this.mLight2_img.visible=!1,this.mLight3_img.visible=!1,e=function(t,n,i,o,a,r){n.scaleX=i,n.scaleY=i,egret.Tween.get(n).to({scaleX:a,scaleY:a},800).wait(500).to({scaleX:i,scaleY:o},500).call(function(){e(t,n,i,o,a,r)})},e(this,this.mLight1_img,0,0,this.mLight1_img.scaleX,this.mLight1_img.scaleY),egret.setTimeout(function(){t.mLight2_img.visible=!0,e(t,t.mLight2_img,0,0,t.mLight2_img.scaleX,t.mLight2_img.scaleY)},this,600),egret.setTimeout(function(){t.mLight3_img.visible=!0,e(t,t.mLight3_img,0,0,t.mLight3_img.scaleX,t.mLight3_img.scaleY)},this,1e3)},e.prototype._playLightOnTarget=function(t){var e=RES.getRes("pdk_frLightAni_json"),n=RES.getRes("pdk_frLightAni_png"),i=new egret.MovieClipDataFactory(e,n),o=new egret.MovieClip(i.generateMovieClipData("frlight"));return o.anchorOffsetX=57,o.anchorOffsetY=60,o.gotoAndPlay(1,-1),o.x=t.x,o.y=t.y,t.parent.addChild(o),o},e.prototype._playItemLightAni=function(){this._playLightOnTarget(this.item1Img),this._playLightOnTarget(this.item2Img),this._playLightOnTarget(this.item3Img),this._playLightOnTarget(this.item4Img)
},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemoveFromStage,this)},e.prototype._onAddToStage=function(){var t=PDKEventManager.instance;t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this._onMyUserInfoUpdate,this),PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemoveFromStage=function(){this._enableEvent(!1),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),e._instance=null,PDKEventManager.instance.disableOnObject(this)},e.prototype.show=function(){this.popup(null,!0,{alpha:0})},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.nullInstance=function(){if(e._instance){var t=this._instance;t.parent.removeChild(t)}},e.setDisableGet=function(){e._instance&&(e._instance.mGoRecharge_btn.visible=!1)},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelFirstRecharge.prototype,"PDKPanelFirstRecharge");var PDKPanelGetItems=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelGetItemsSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.dragon||(this.dragon=new PDKDragonSign,this.dragon.x=this.group.width>>1,this.dragon.y=this.group.height>>1,this.dragon.stop()),this.list.itemRenderer=PDKIRGoodsGet,this.list.dataProvider=this._dataProvider=new eui.ArrayCollection,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.onTap=function(t){this.dealAction()},e.prototype.show=function(t){this.popup(this.dealAction.bind(this)),this.group.addChildAt(this.dragon,1);var e=t.count;PDKMainLogic.instance.selfData.isSignGoldAddByFRecharge()&&(e+=.2*t.count),PDKalien.Native.instance.isNative&&(e+=.5*t.count),this.msg.text="×"+e,this.playMsg()},e.prototype.playMsg=function(){egret.Tween.removeTweens(this.msg),this.msg.alpha=0,egret.Tween.get(this.msg).wait(300).to({alpha:1},300)},e.prototype.close=function(){t.prototype.close.call(this)},e.lightWave=function(t){return{r:360*t/Math.PI/2}},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelGetItems.prototype,"PDKPanelGetItems");var PDKIRGoodsGet=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=PDKGoodsManager.instance.getGoodsById(this.data.id);this.labGoodsName.text=e.name+"x"+this.data.count,this.imgGoodsIcon.source=PDKGoodsItem.parseUrl(this.data.id)},e}(eui.ItemRenderer);__reflect(PDKIRGoodsGet.prototype,"PDKIRGoodsGet");var PDKPanelGetRed=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelGetRedSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefault(),this._initEvent()},e.prototype._initDefault=function(){this._allBigStars=[];for(var t=0;5>t;++t)this._allBigStars[t]=this["lightStar"+(t+1)+"_img"];this._allBigStarHide(),this._showGetRed(!1),this._showStarBg(!0)},e.prototype._showGetRed=function(t){this.getRed_img.visible=t},e.prototype._showStarGroup=function(t){this.lightStar_group.visible=t},e.prototype._showStarBg=function(t){this.mBgStar_img.visible=t},e.prototype._allBigStarHide=function(){for(var t=0;5>t;++t)this._allBigStars[t].visible=!1},e.prototype._initEvent=function(){this._enableEvent(!0)},e.prototype._onAddToStage=function(){this.getRed_img.addClickListener(this._onClickGetRed,this),this.close_img.addClickListener(this._onTouchClose,this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._onClickGetRed=function(){PDKExchangeService.instance.doChou(this._roomId)},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype._onAniStarOver=function(){var t=this;egret.Tween.get(this.lightStar_group).wait(300).to({alpha:0},100).call(function(){t.lightStar_group.visible=!1,t.lightStar_group.alpha=1,egret.Tween.get(t.getRed_img).set({scaleX:.1,scaleY:.1,visible:!0}).to({scaleX:1,scaleY:1},100)})},e.prototype._onAllStarMoveOver=function(){var t=this,e=egret.Tween;egret.setTimeout(function(){t._showStarBg(!1);var n=0,i=null,o=t;(i=function(){e.get(o._allBigStars[n]).to({scaleX:1.5,scaleY:1.5},100).to({scaleX:1,scaleY:1},50).call(function(){return n>=4?void o._onAniStarOver():(n++,void i())})})()},this,50)},e.prototype._bottomToBig=function(t,e){var n=this,i=this._allBigStars[e],o=i.x,a=i.y;t.visible=!1;var r=t.localToGlobal(t.x,t.y);r=this.lightStar_group.globalToLocal(r.x,r.y);var s=new eui.Image("play_star_big");this.lightStar_group.addChild(s);var h=t.width/s.width,c=t.height/s.height;s.x=r.x+.5*t.width,s.y=r.y+.5*t.height,s.anchorOffsetX=.5*s.width,s.anchorOffsetY=.5*s.height,s.scaleX=h,s.scaleY=c,egret.Tween.get(s).to({x:o,y:a,scaleX:1,scaleY:1},500).call(function(){n.lightStar_group.removeChild(s),n._allBigStars[e].visible=!0,4==e&&n._onAllStarMoveOver()})},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype.show=function(t,e){var n=this;this._roomId=t;var i=e;this.popup(null,!0),egret.setTimeout(function(){var t=n,e=0,o=0,a=null;a=function(){e>=i.length?o&&(egret.clearInterval(o),o=0):(t._bottomToBig(i[e],e),e++)},a(),o=egret.setInterval(function(){a()},n,100)},this,500)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelGetRed.prototype,"PDKPanelGetRed");var PDKPanelHornTalk=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelHornTalk},e.prototype._setChatCost=function(){var t=PDKGameConfig.getChatCostInfoByType(2),e=0;t&&3==t.id&&(e=t.cost),this._costNum=e,this.costGold_label.text=""+e},e.prototype._onClickSendMsg=function(){var t=PDKMainLogic.instance.selfData,e=PDKBagService.instance.getItemCountById(3);if(this._hasSendMsg)PDKToast.show("消息发送中");else if(this._nCurCoolTime>-1)PDKToast.show("发送消息过于频繁");else if(e<this._costNum)PDKToast.show("钻石不足");else if(this.talk_editText.text&&this.talk_editText.text.length>=1){var n=this._onReplaceSensitive(this.talk_editText.text);pdkServer.sendHornMsg(2,n),this.talk_editText.text="";var i={time:(new Date).getTime(),nickname:PDKBase64.encode(t.nickname),msg:n};t.addHornTalkRec(i),this._setHasSendMsg(!0)}else PDKToast.show("消息不能为空")},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaut(),this._initEvent(),PDKEventManager.instance.enableOnObject(this)},e.prototype._formatTalk=function(){var t=PDKMainLogic.instance.selfData,e=t.getHornTalkRecList(),n=t.getSysTalkRecList(),i=[];return i=i.concat(e),i=i.concat(n)},e.prototype._initDefaut=function(){this._hasSendMsg=!1,this._nDefaultCoolTime=5,this._nIntervalRepeatId=-1,this._dataArr=this._formatTalk(),this._dataProvider=new eui.ArrayCollection(this._dataArr),this.talkRec_list.itemRenderer=PDKHornTalkItem,this.talkRec_list.dataProvider=this._dataProvider,this._onScrollToBottom(),this._setChatCost()},e.prototype._setHasSendMsg=function(t){this._hasSendMsg=t},e.prototype._onHornRecChange=function(t){var e=t.data;e&&(this._dataArr.push(e),this._dataProvider.source=this._dataArr,this._dataProvider.refresh(),this._onScrollToBottom())},e.prototype._onScrollToBottom=function(){var t=this;egret.setTimeout(function(){t.horn_scroller.viewport.contentHeight<t.horn_scroller.height||(t.horn_scroller.viewport.scrollV=t.horn_scroller.viewport.contentHeight-t.horn_scroller.height,t.horn_scroller.viewport.validateNow())},this,100)},e.prototype._initEvent=function(){this._enableEvent(!0),this.close_img.addClickListener(this._onTouchClose,this),this.sendMsg_img.addClickListener(this._onClickSendMsg,this);var t=PDKalien.PDKEventManager.instance;t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this)},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),pdkServer[e](PDKEventNames.USER_PAY_TO_CHAT_REP,this._onRecvHornRep,this),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype._onRecvHornRep=function(t){var e=t.data,n=PDKMainLogic.instance.selfData.nickname;if(e)if(null==e.result)for(var i=e.chatinfo,o=0;o<i.length;++o)PDKBase64.decode(i[o].nickname)==n&&(this._hasSendMsg&&this._startCool(),this._setHasSendMsg(!1));else this._setHasSendMsg(!1)},e.prototype.show=function(){this.popup(null,!0,{alpha:0})},e.prototype._onReplaceSensitive=function(t){for(var e=PDKUtils.getSensitiveWord(),n=t,i=0;i<e.length;++i)n=n.replace(new RegExp(e[i],"g"),"*");return n},e.prototype._clearRepeatInterval=function(){this._nIntervalRepeatId>0&&(egret.clearInterval(this._nIntervalRepeatId),this._nIntervalRepeatId=-1)},e.prototype._startCool=function(){this._clearRepeatInterval(),this._nCurCoolTime=this._nDefaultCoolTime,this._nIntervalRepeatId=egret.setInterval(this._coolUpdate,this,1e3)},e.prototype._stopCool=function(){this._clearRepeatInterval()},e.prototype._coolUpdate=function(){this._nCurCoolTime-=1,this._nCurCoolTime>=0||this._stopCool()},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelHornTalk.prototype,"PDKPanelHornTalk");var PDKPanelInviteList=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelInvateListSkin,this.list.itemRenderer=PDKInviteListItem,this._dataProvide||(this._dataProvide=new eui.ArrayCollection([]),this.list.dataProvider=this._dataProvide)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);PDKEventManager.instance;this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.scroll2end,this),PDKInviteService.instance.addEventListener(PDKEventNames.INVITE_DATA_REFRESH,this.onInviteDataUpdate,this),this._showNoInviteTipGroup(!0)},e.prototype.onInviteDataUpdate=function(t){var e=t.data;this._dataProvide.source=e,this._dataProvide.refresh(),this._showNoInviteByInviteList(),this.lbCount.text="您已累计获得"+PDKInviteService.instance.complete_amount+"次抽奖杯机会，被邀请好友赢得5局游戏即可获得1次机会"},e.prototype.scroll2end=function(t){PDKInviteService.instance.getInvitePlayersList()},e.prototype._showNoInviteTipGroup=function(t){this.noInviteGroup.visible=t},e.prototype._showNoInviteByInviteList=function(){this._dataProvide.source.length>0?this._showNoInviteTipGroup(!1):this._showNoInviteTipGroup(!0)},e.prototype.show=function(t,e){void 0===e&&(e=null),this._dataProvide.source=t,this._dataProvide.refresh(),this.scroller.viewport.scrollV=0,this._callback=e,this.popup(),this.lbCount.text="您已累计获得"+PDKInviteService.instance.complete_amount+"次抽奖杯机会，被邀请好友赢得5局游戏即可获得1次机会"},e.prototype.onBtnCloseClick=function(t){this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelInviteList.prototype,"PDKPanelInviteList");var PDKPanelLogin=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Flew,{direction:"up",ease:egret.Ease.backOut},PDKalien.popupEffect.Flew,{direction:"up",ease:egret.Ease.backIn})||this;return e.addExcludeForClose(["confirm"]),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelLoginSkin},e.prototype.addListeners=function(){this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},e.prototype.removeListeners=function(){this.grpButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},e.prototype.onGrpButtonTap=function(t){switch(t.target.name){case"forgot":break;case"register":break;case"confirm":var e=this.tiID.text,n=this.tiPassword.text,i=!0;PDKGameData.instance.setItem("id",e,!0),this.dealAction("confirm",{id:e,password:n,autoLogin:i})}},e.prototype.onBtnCloseTap=function(t){this.dealAction()},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.show=function(t){this._callback=t,this.popup(),this.tiID.text=PDKGameData.instance.getItem("id"),this.tiPassword.text="",this.addListeners()},e.prototype.close=function(){t.prototype.close.call(this),this.removeListeners()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelLogin.prototype,"PDKPanelLogin");var PDKPanelMail=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return e.skinName=panels.PDKPanelMailSkin,e}return __extends(e,t),e.getInstance=function(){return void 0==this._instance&&(this._instance=new e),this._instance},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKIRContainer,this.list.dataProvider=this._dataProvider=new eui.ArrayCollection(PDKMailService.instance.source),this._initEvent()},e.prototype.addListener=function(){this.list.addEventListener(egret.Event.CHANGE,this.onSelectItem,this),PDKMailService.instance.addEventListener(PDKEventNames.MAIL_LIST_REFRESH,this.onMailListRefresh,this)},e.prototype.removeListener=function(){this.list.removeEventListener(egret.Event.CHANGE,this.onSelectItem,this),PDKMailService.instance.removeEventListener(PDKEventNames.MAIL_LIST_REFRESH,this.onMailListRefresh,this)},e.prototype.onSelectItem=function(t){var e=this,n=this.list.selectedItem;this.tipOpenMailItem(n),egret.callLater(function(){e.list.selectedIndex=-1},this)},e.prototype.tipOpenMailItem=function(t){PDKPanelMailDetails.getInstance().show(t),0==t.status&&PDKMailService.instance.openMail(t.id)},e.prototype.onMailListRefresh=function(t){t.data&&t.data.mailData?this._dataProvider.itemUpdated(t.data.mailData):this._dataProvider.refresh(),PDKMailService.instance.source.length<=0?this._showNoMail(!0):this._showNoMail(!1)},e.prototype._showNoMail=function(t){this.noMailGroup.visible=t},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype.show=function(){this.popup(),this.addListener(),this._dataProvider.refresh(),PDKMailService.instance.source.length<=0?this._showNoMail(!0):this._showNoMail(!1)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMail.prototype,"PDKPanelMail");var PDKMailItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setData=function(t){this._data=t,0==t.status?this.currentState="new":this.currentState="read",this.title_label.text=t.title,this.time_label.text=PDKalien.TimeUtils.tsToDateString(t.sendtime)},e.states=["new","read"],e}(eui.Component);__reflect(PDKMailItem.prototype,"PDKMailItem");var PDKPanelMailDetails=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.getInstance=function(){return void 0==this._instance&&(this._instance=new e),this._instance},e.prototype.init=function(){this.skinName=panels.PDKPanelMailDetailsSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._initEvent(),this.goodsList.itemRenderer=PDKMailGoodsItem,this.goodsList.dataProvider=this._goodsData=new eui.ArrayCollection},e.prototype._onClickGetRew=function(){this._canGetReward&&PDKMailService.instance.getReward(this._mailData.id)},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.getImg.addClickListener(this._onClickGetRew,this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype.show=function(t){this._mailData=t,this.popup(),this.content_label.text=t.content,this._goodsData.source=t.attachment,this._canGetReward=!1,t.attachment&&t.attachment.length>0?2!=t.status?(this.getImg.source="pdk_room_get",this.getImg.touchEnabled=!0,this._canGetReward=!0):(this.getImg.source="pdk_room_getGray",this.getImg.touchEnabled=!1):this.getImg.visible=!1},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMailDetails.prototype,"PDKPanelMailDetails");var PDKMailGoodsItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this.data;this.goodsItem.setData(e)},e}(eui.ItemRenderer);__reflect(PDKMailGoodsItem.prototype,"PDKMailGoodsItem");var PDKPanelMatch9GetRew=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return e._isShow=!1,e}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelMatch9GRew},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},e.prototype._initDefaut=function(){var t=0;this.rank_bitmap.text="",this.get_label.text="";for(var e=0;3>e;++e)t=e+1,this["name"+t+"_label"].text="",this["turn1_"+t+"label"].text="",this["turn2_"+t+"label"].text="",this["turn3_"+t+"label"].text="",this["turn4_"+t+"label"].text=""},e.prototype._initEvent=function(){this.getRew_img.addClickListener(this._onClickGetRew,this),this._enableEvent(!0);PDKalien.PDKEventManager.instance},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype._onClickGetRew=function(){PDKAlert.show("领取奖励："+this.get_label.text+" 成功",0,function(){pdkServer.playing||PDKalien.PDKSceneManager.instance.currentSceneName!=PDKSceneNames.ROOM&&PDKalien.PDKSceneManager.show(PDKSceneNames.ROOM,null,PDKalien.sceneEffect.Fade,null,null,!1,PDKSceneNames.LOADING)}),this.dealAction(),PDKBagService.instance.refreshBagInfo()},e.prototype._initByData=function(t,e){if(e){var n=0,i="",o=0,a=e.resultInfo,r=e.params[0];this.rank_bitmap=r;var s=PDKMatchService.getRewardStringByRank(t,r,"");this.get_label.text=s;for(var h=0;h<a.length;++h)n=h+1,o=a[h].params[0]+a[h].params[1]+a[h].params[2],i=PDKBase64.decode(a[h].nickname),this["name"+n+"_label"].text=i.substr(0,4),this["turn1_"+n+"label"].text=a[h].params[0],this["turn2_"+n+"label"].text=a[h].params[1],this["turn3_"+n+"label"].text=a[h].params[2],this["turn4_"+n+"label"].text=o}},e.prototype.show=function(t,e){this.popup(null,!0,{alpha:0}),this._isShow=!0,this._initByData(t,e)},e.prototype.isShow=function(){return this._isShow},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatch9GetRew.prototype,"PDKPanelMatch9GetRew");var PDKPanelMatch9Info=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelMatch9Info},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},e.prototype._initDefaut=function(){for(var t=1;4>t;t++)this["turn"+t+"_label"].visible=!1,this["turn"+t+"_1label"].text="",this["turn"+t+"_2label"].text="",this["turn"+t+"_3label"].text=""},e.prototype._initEvent=function(){this._enableEvent(!0);PDKalien.PDKEventManager.instance},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype.show=function(t){this.popup(this.dealAction.bind(this),!0,{alpha:0}),this._initByData(t)},e.prototype._initByData=function(t){if(t)for(var e=1,n=0;n<t.length;++n)e=t[n].round,-1==t[n].aver?(this["turn"+e+"_2label"].text="正在统计..",this["turn"+e+"_3label"].text=""):(this["turn"+e+"_2label"].text=t[n].aver||0,this["turn"+e+"_3label"].text=t[n].score||0),this["turn"+e+"_label"].visible=!0,this["turn"+e+"_1label"].text=t[n].change||0},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatch9Info.prototype,"PDKPanelMatch9Info");var PDKPanelMatchCountDown=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchCountDownSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButtons.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},e.prototype.onGrpButtonsTap=function(t){var e;switch(t.target.name){case"reward_intro":e=PDKGameConfig.getMatchConfigById(this.roomInfo.matchId),PDKPanelMatchIntro.instance.show(PDKlang.match_title_reward_intro,e.reward);break;case"match_intro":e=PDKGameConfig.getMatchConfigById(this.roomInfo.matchId),PDKPanelMatchIntro.instance.show(PDKlang.match_title_match_intro,e.des);break;case"close":this.dealAction();break;case"cancel":PDKMatchService.instance.cancelMatch(this.roomInfo)}},e.prototype.show=function(t){this.popup(),this.roomInfo=t,this.labTitle.text=t.name,this.labReward.text=t.masterReward;var e=pdkServer.tsNow,n=PDKMatchService.getNextTurn(t),i=n.nextTs;this._updateSignNum(0),pdkServer.addEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),pdkServer.getMatchSignUpInfo(t.matchId),this._timer=PDKCountDownService.register(i-e,this.onTimer.bind(this))},e.prototype.close=function(){t.prototype.close.call(this),PDKCountDownService.unregister(this._timer),egret.clearTimeout(this.matchinforeqTick),pdkServer.removeEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this)},e.prototype.onTimer=function(t){this.labCD.text=PDKalien.TimeUtils.timeFormat(t,"{2}:{1}:{0}")},e.prototype._updateSignNum=function(t){this.sign_label.text="已报名人数："+t+"人"},e.prototype.onMatchSignUpInfoRep=function(t){var e=t.data;e&&e.matchid==this.roomInfo.matchId&&e.signup_cnt&&e.signup_cnt>0&&1==e.is_signup&&(this._updateSignNum(e.signup_cnt),this.matchinforeqTick=egret.setTimeout(function(){this.roomInfo&&this.roomInfo.matchId&&pdkServer.getMatchSignUpInfo(this.roomInfo.matchId)},this,1e5))},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchCountDown.prototype,"PDKPanelMatchCountDown");var PDKPanelMatchIntro=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchIntroSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},e.prototype.onBtnCloseTap=function(t){this.dealAction()},e.prototype.show=function(t,e){this.popup(this.dealAction.bind(this)),this.info_scroller.viewport.scrollV=0,this.info_scroller.viewport.validateNow(),this.labTitle.text=t,"string"==typeof e?this.labContent.text=e:this.labContent.text=e.join("\n")},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchIntro.prototype,"PDKPanelMatchIntro");var PDKPanelMatchNotice=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return e._matchTopNotify=PDKalien.PDKUtils.parseColorTextFlow(PDKlang.match_notice_alert),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchNoticeSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnCancelMatch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelMatchTap,this)},e.prototype.onGrpButtonTap=function(t){this.dealAction(t.target.name)},e.prototype.onBtnCancelMatchTap=function(t){PDKMatchService.instance.cancelMatch(this.roomInfo),this.dealAction(t.target.name)},e.prototype.show=function(t,e){void 0===e&&(e=30),this.popup(),this.roomInfo=t,this._matchTopNotify[1].text=this.roomInfo.name,this._timer=PDKCountDownService.register(e,this.onTimer.bind(this))},e.prototype.close=function(){t.prototype.close.call(this),PDKCountDownService.unregister(this._timer)},e.prototype.onTimer=function(t){this._matchTopNotify[3].text=t.toString(),this.labContent.textFlow=this._matchTopNotify},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchNotice.prototype,"PDKPanelMatchNotice");var PDKPanelMatchResult=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchResultSkin,this.list.itemRenderer=PDKRankItem,this.list.dataProvider=this._dataProvide=new eui.ArrayCollection,this._switchTimer||(this._switchTimer=new egret.Timer(2e3),this._switchTimer.addEventListener(egret.TimerEvent.TIMER,this.switchGroup,this),this._switchTimer.start())},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelTap,this),this.btnGetReward.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelTap,this),this.grpRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSwitch,this),this.grpResult.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSwitch,this)},e.prototype.clickSwitch=function(){this.switchGroup(null),this._switchTimer.reset(),this._switchTimer.start()},e.prototype.switchGroup=function(t){this.grpRank.visible=!this.grpRank.visible,this.grpResult.visible=!this.grpResult.visible},e.prototype.onBtnCancelTap=function(t){this.rewardContent&&this.rewardContent.length>0&&(PDKalien.Native.instance.isNative?PDKAlert.show("领取奖励："+this.rewardContent+" 成功"):PDKAlert.show("领取奖励："+this.rewardContent+" 成功")),this.dealAction()},e.prototype.onAlertBtn=function(t,e){if("cancel"==t){var n=this.rank;204==this.matchId?n+=200:201==this.matchId&&(n+=500);var i=PDKShareImageManager.instance.getShareScene(PDKShareImageManager.GAME_TYPE_MATCH,n);PDKShareImageManager.instance.start(pdkServer.uid,i)}},e.prototype._formatRewInfo=function(t){var e=(r={},r[0]="金豆:{0}",r[1]="奖杯:{0}",r[2]="记牌器:{0}小时",r[101]="表情免费次数:{0}次",r),n=function(t,n){var i=n;return e[t]?(1==t&&(i=n/100),e[t].replace("{0}",i)):void 0},i=t.split("|"),o="";if(i[0]){var a=i[0].split(":");a&&(o=n(Number(a[0]),Number(a[1])))}return o;var r},e.prototype.show=function(t,e){this._callback=e,this.popup(),this.grpRank.visible=!1,this.grpResult.visible=!0,this.matchId=t.matchid,this.rank=t.params[0];var n=PDKMainLogic.instance.selfData;this.labPlayerName.text=n.nickname+":",this.labMatchName.text=PDKlang.format(PDKlang.id.match_result_match_name,pdkServer.roomInfo.name);var i=t.params[0];this.labNumber.text=i.toString(),this.labPraise.text=PDKlang.match_result_praise[i>3?2:i>1?1:0];var o="";o=t.strreward?this._formatRewInfo(t.strreward):PDKMatchService.getRewardStringByRank(pdkServer.roomInfo,i,"\n"),this.rewardContent=o,o?(this.labReward.text=o,this.btnConfirm.visible=!1,this.btnGetReward.visible=!0):(this.btnConfirm.visible=!0,this.btnGetReward.visible=!1),this.grpReward.visible=!!o,this._dataProvide.source=t.rankInfo},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchResult.prototype,"PDKPanelMatchResult");var PDKRankItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.rank.text=this.data.rank,this.score.text=null==this.data.score?0:this.data.score,this.data.inmatch&&1==this.data.inmatch?(this.inmatch.visible=!0,this.score.visible=!1):(this.inmatch.visible=!1,this.score.visible=!0),this.nickName.text=PDKBase64.decode(this.data.nickname),PDKMainLogic.instance.selfData.uid==this.data.uid?(this.rank.textColor=16770048,this.nickName.textColor=16770048,this.score.textColor=16770048):(this.rank.textColor=16777215,this.nickName.textColor=16777215,this.score.textColor=16777215)},e}(eui.ItemRenderer);__reflect(PDKRankItem.prototype,"PDKRankItem");var PDKPanelMatchRevive=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this
}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchRevive},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onTouchClose,this),this.reviveImg.addClickListener(this._onClickReviveImg,this),this.giveUpImg.addClickListener(this._onClickGiveUpImg,this)},e.prototype._onClickReviveImg=function(){this._reviveFunc&&this._reviveFunc()},e.prototype._onClickGiveUpImg=function(){this._giveUpFunc&&this._giveUpFunc()},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype.updateCountDown=function(t){this.reviveLabel.text="("+t+")"},e.prototype.setRankSub=function(t){this.rankLabel.text=""+t},e.prototype.setReviveCost=function(t){this.costLabel.text=""+t},e.prototype.show=function(t,e){this._giveUpFunc=e,this._reviveFunc=t,this.popup(null,!0,{alpha:0})},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchRevive.prototype,"PDKPanelMatchRevive");var PDKPanelMatchSignUp=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return e._count=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchSignUpSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButtons.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},e.prototype.onGrpButtonsTap=function(t){var e;switch(t.target.name){case"reward_intro":e=PDKGameConfig.getMatchConfigById(this.roomInfo.matchId),PDKPanelMatchIntro.instance.show(PDKlang.match_title_reward_intro,e.reward);break;case"match_intro":e=PDKGameConfig.getMatchConfigById(this.roomInfo.matchId),PDKPanelMatchIntro.instance.show(PDKlang.match_title_match_intro,e.des);break;case"close":this.dealAction();break;case"sign_up":var n=0,i=this.paySelect[this.ddPay.index];"number"!=typeof i.data&&(n=i.data.id),PDKMatchService.instance.signUp(this.roomInfo,n)}},e.prototype.show=function(t){this.popup(),this.roomInfo=t,this.labTitle.text=t.name,this.labLimit.text=t.limitText,this.labAmount.text=t.signUpCountTest,this.labSignUpCount.text=t.todayCountText;var e=this.paySelect=[{text:t.entryMoneyText,data:t.entryMoney}],n=PDKGoodsManager.instance.getGoodsById(t.ticketId),i=PDKBagService.instance.getItemCountById(t.ticketId)>0&&!!n;if(n&&e.push({text:n.name+"x"+t.entryTicket,data:n,disable:!i}),this.ddPay.items=e,i&&(this.ddPay.index=1),t.hasOwnProperty("startDate")){var o=PDKMatchService.getNextTurn(t);this.labLimit.text=t.limitText=o.nextTime,pdkServer.getMatchSignUpInfo(t.matchId)}else this.labLimit.text=t.limitText,this._timer=egret.setInterval(this.fakeAmount,this,1e3)},e.prototype.close=function(){t.prototype.close.call(this),this._timer>0&&egret.clearInterval(this._timer)},e.prototype.fakeAmount=function(){var t=Math.ceil((this.roomInfo.maxPlayer-this._count)/2);this._count+=PDKalien.MathUtils.makeRandomInt(t+1),this.labAmount.text=this._count+PDKlang.people,this._count>=this.roomInfo.maxPlayer&&(this._count=0)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchSignUp.prototype,"PDKPanelMatchSignUp");var PDKPanelMatchWaiting=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchWaitingSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._isShow=!1,this.btnCancelMath.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCancelMatchTap,this)},e.prototype.onMatchSignUpInfoRep=function(t){var n=t.data;n&&n.matchid==this.roomInfo.matchId&&n.signup_cnt&&n.signup_cnt>0&&(this.progressBar.value=n.signup_cnt,1==n.is_signup&&(this.matchinforeqTick=egret.setTimeout(function(){e.instance.roomInfo&&e.instance.roomInfo.matchId&&pdkServer.getMatchSignUpInfo(e.instance.roomInfo.matchId)},this,5e3)))},e.prototype.onBtnCancelMatchTap=function(t){this.dealAction(),PDKMatchService.instance.cancelMatch(this.roomInfo)},e.prototype.show=function(t){var e=this;this.popup(),this.roomInfo=t,this._isShow=!0,this.labReward.text=t.masterReward,this.progressBar.maximum=t.maxPlayer,this.labTitle.text=this.roomInfo.name,this.roomInfo.forbidRobot&&1==this.roomInfo.forbidRobot?(this.progressBar.value=1,pdkServer.addEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),pdkServer.getMatchSignUpInfo(t.matchId)):(this.progressBar.value=0,this.fakeCount=PDKalien.MathUtils.split(t.maxPlayer,PDKalien.MathUtils.makeRandomInt(t.startTimeout[1],t.startTimeout[0])),this._timer=egret.setInterval(function(){e.progressBar.value+=e.fakeCount.pop()||0},this,1e3))},e.prototype.close=function(){t.prototype.close.call(this),this._isShow=!1,egret.clearTimeout(this.matchinforeqTick),pdkServer.removeEventListener(PDKEventNames.USER_MATCH_SING_UP_INFO_REP,this.onMatchSignUpInfoRep,this),this._timer>0&&(egret.clearInterval(this._timer),this._timer=0)},e.prototype.isWaitingShow=function(){return this._isShow},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchWaiting.prototype,"PDKPanelMatchWaiting");var PDKPanelMatchWaitingInner=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelMatchWaitingInnerSkin,this._tf=PDKalien.PDKUtils.parseColorTextFlow(PDKlang.match_get_in)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this._wave=new PDKalien.Wave(this.lab,2e3,function(t){return{alpha:.3+.5*(Math.sin(t)+1)*.7}},0,!1)},e.prototype.show=function(t){void 0===t&&(t=-1),console.log("PDKPanelMatchWaitingInner.show:"+t),this.popup(null,!1,{alpha:0}),0>t?this.lab.text=PDKlang.match_waiting_other_desk_2:0==t?this.lab.text=PDKlang.match_waiting_other_desk_1:(this._tf[1].text=t+"",this.lab.textFlow=this._tf),this._wave.play()},e.prototype.close=function(){t.prototype.close.call(this),this._wave&&this._wave.stop()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelMatchWaitingInner.prototype,"PDKPanelMatchWaitingInner");var PDKPanelModifyNickname=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=PDKalien.PDKEventManager.instance;e.registerOnObject(this,pdkServer,PDKEventNames.USER_MODIFY_USER_INFO_REP,this.onModifyUserInfoRep,this),e.registerOnObject(this,this.grpButtons,egret.TouchEvent.TOUCH_TAP,this.onGrpButtonsTap,this)},e.prototype.onGrpButtonsTap=function(t){switch(t.target.name){case"close":this.dealAction();break;case"confirm":var e=0,n=this.tiNickname.text,i=PDKalien.PDKUtils.getByteLen(n);if(4>i||i>16?e=5:PDKUtils.regNickname(n)&&(e=1001),e>0)this.labErr.text=PDKlang.modify_profile_err[e];else{this.labErr.text="";var o={nickname:PDKBase64.encode(n)};pdkServer.modifyUserInfo(o),this._submitData=o}}},e.prototype.onModifyUserInfoRep=function(t){var e=t.data,n=e.rname||0;0==n?(PDKMainLogic.instance.selfData.initData(this._submitData),PDKToast.show(PDKlang.modify_profile_err[0]),PDKalien.Dispatcher.dispatch(PDKEventNames.MY_USER_INFO_UPDATE),this.dealAction()):this.labErr.text=PDKlang.modify_profile_err[e.rname]},e.prototype.show=function(){this.skinName||(this.skinName=panels.PDKPanelModifyNicknameSkin),this.popup(),this.labErr.text="",PDKalien.PDKEventManager.instance.enableOnObject(this)},e.prototype.close=function(){t.prototype.close.call(this),PDKalien.PDKEventManager.instance.disableOnObject(this)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelModifyNickname.prototype,"PDKPanelModifyNickname");var PDKPanelNormalResult=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PanelNormalResultSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.scaleX=.8,this.scaleY=.8,this.verticalCenter=40,this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),this.btnContinue.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnContinueTap,this)},e.prototype.clickSwitch=function(){},e.prototype.onBtnCloseTap=function(t){this.dealAction("close")},e.prototype.onBtnContinueTap=function(t){this.dealAction("continue")},e.prototype.show=function(t,e,n,i){this._callback=i;for(var o=0;3>o;o++)this["grpRank"+o].visible=!1;for(var o=0,a=t.users.length;a>o;o++){this["grpRank"+o].visible=!0;for(var r=t.users[o],s=r.seatid,h=null,c=0;c<e.length;c++)e[c].seatid==s&&(h=e[c]);if(this["avatar"+(o+1)].imageId=null,this["avatar"+(o+1)].imageId=h.userInfoData.imageid,this["nick"+(o+1)].text=h.userInfoData.nickname,this["lastcard"+(o+1)].text=r.left_card+"",this["score"+(o+1)].text=r.score+"",this.labelFee.text="本局每人服务费"+r.table_fee,this["pochan"+(o+1)].visible="0"==r.gold,this["nick"+(o+1)].textColor=n!=s?10053120:16769536,this["lastcard"+(o+1)].textColor=n!=s?10053120:16769536,this["score"+(o+1)].textColor=n!=s?16777215:16769536,this["nick"+(o+1)].stroke=n!=s?0:2,this["lastcard"+(o+1)].stroke=n!=s?0:2,this["score"+(o+1)].stroke=n!=s?0:2,n==s)if(this.imgWinBg.source=r.score>0?"pdk_play_result_ying_bg":"pdk_play_result_shu_bg",r.is_outcard<=0)this.imgWinFlag.source="pdk_play_result_beiguan";else if(r.score>0){for(var l=!0,p=!1,d=!1,u=0;u<t.users.length;u++)t.users[u].seatid!=n&&(t.users[u].is_outcard<=0?t.users[u].seatid==t.first_out?d=!0:p=!0:l=!1);l?this.imgWinFlag.source="pdk_play_result_shuangguan":d?this.imgWinFlag.source="pdk_play_result_fanguan":p?this.imgWinFlag.source="pdk_play_result_guanpai":r.left_card>0?(this.imgWinBg.source="pdk_play_result_shu_bg",this.imgWinFlag.source="pdk_play_result_shibai"):(this.imgWinBg.source="pdk_play_result_ying_bg",this.imgWinFlag.source="pdk_play_result_shengli")}else r.left_card>0?(this.imgWinBg.source="pdk_play_result_shu_bg",this.imgWinFlag.source="pdk_play_result_shibai"):(this.imgWinBg.source="pdk_play_result_ying_bg",this.imgWinFlag.source="pdk_play_result_shengli")}this.popup()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelNormalResult.prototype,"PDKPanelNormalResult");var PDKPanelNotice=function(t){function e(){var e=t.call(this)||this;return e._lastSelectIdx=0,e._labels=[],e}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelNoticeSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent(),egret.setTimeout(this.setShowRedExchange,this,100)},e.prototype._initEvent=function(){this._enableEvent(!0),this.wxCp_img.addClickListener(this._onClickCopyKeFuWX,this),this.publicCp_img.addClickListener(this._onClickCopyPublicWX,this),this.leftLabelList.addEventListener(egret.Event.CHANGE,this._onSelectItem,this)},e.prototype._initUI=function(){this._labels=[{tit:"健康声明",sel:!1,"new":!1,cb:this._onClickGameNotice.bind(this)}],this.leftLabelList.itemRenderer=PDKActListItem,this.leftLabelList.dataProvider=this._leftLabelsDataProvider=new eui.ArrayCollection(this._labels)},e.prototype._changeSelectByIdx=function(t){var e=this,n=t;this._leftLabelsDataProvider.source[this._lastSelectIdx].sel=0,this._leftLabelsDataProvider.itemUpdated(this._labels[this._lastSelectIdx]),this._lastSelectIdx=n;var i=this.leftLabelList.getChildAt(n),o=i.localToGlobal(.5*i.width,.5*i.height),a=this.infoGroup.globalToLocal(o.x,o.y);this.arrImg.y=a.y;for(var r=0;r<this._leftLabelsDataProvider.length;++r)if(r==n){this._leftLabelsDataProvider.source[r].sel=!0,this._leftLabelsDataProvider.itemUpdated(this._labels[n]);break}this._labels[n].cb(),egret.callLater(function(){e.leftLabelList.selectedIndex=-1},this)},e.prototype._onSelectItem=function(){this._changeSelectByIdx(this.leftLabelList.selectedIndex)},e.prototype._onClickCopyKeFuWX=function(){var t=PDKGameConfig.wxService;"delegate"==this.currentState&&(t=PDKGameConfig.extendWX),PDKGameConfig.copyText(this,t,"微信号("+t+")")},e.prototype._onClickCopyPublicWX=function(){PDKGameConfig.copyText(this,"三桂跑得快","公众号(三桂跑得快)")},e.prototype._onScrollTop=function(){this.content_scroller.stopAnimation(),this.content_scroller.viewport.scrollV=0,this.content_scroller.viewport.validateNow()},e.prototype._showRedExchange=function(){this._onScrollTop(),this.info_label.text='领取流程：\n    1、在游戏商城中领取奖励\n    2、关注"三桂跑得快"公众号\n    3、2)	点击、"确定"，直接领取 \r\r\n如有疑问请添加客服微信！',this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="notice_red_tit"},e.prototype.setShowRedExchange=function(){this._changeSelectByIdx(0)},e.prototype._onClickRedExchange=function(){this._showRedExchange()},e.prototype._showDelegate=function(){this._onScrollTop(),this.info_label.text="一大波福利正在袭来！！！",this.content_scroller.scrollPolicyV="off",this._showCopyWX(!0),this.noticeFlag_img.source="notice_delegate_tit"},e.prototype._onClickDelegate=function(){this._showDelegate()},e.prototype._showCopyWX=function(t){this.wxCp_img.visible=t,this.publicCp_img.visible=t},e.prototype.showGameNotice=function(){this._onScrollTop(),this.info_label.text="亲爱的玩家：\n    三桂跑得快一直致力于打造一个公平公正、绿色健康的游戏环境，为保证玩家的利益，三桂跑得快运营团队听取各方面意见并经过多次讨论后，郑重决定通过封号等措施，全面打击非正常游戏的行为。具体措施如下：\n一、非正常游戏的行为包括但不限于:\n    1、安装使用会影响三桂跑得快游戏平衡的第三方软件；\n    2、利用游戏漏洞采用盗刷金豆等方式，谋取游戏利益、破坏游戏的公平秩序\n    3、对局中打伙牌、故意输赢等；\n    4、在游戏内传播宣扬淫秽、色情、赌博、暴力，或者教唆犯罪等信息。\n（三桂运营团队根据监测到的游戏数据对以上行为进行独立自主的判断，从而判定是否构成非正常游戏行为。）\r\r\n二、处罚力度包括但不限于：\n    凡是监测出非正常游戏的行为，将视情节严重程度取消该游戏账号由此获得的相关奖励，并作出暂时或永久性的禁止登陆、删除游戏账号及游戏数据等处理措施；情节严重的将移交有关行政管理机关给予行政处罚，或者追究刑事责任。\n希望玩家朋友们注意保护自己的账号安全。同时也号召大家对非正常游戏账号开展举报（游戏过程中，如发现非正常账号，则可点击对方头像，点击“举报”按钮进行举报），我们一起为净化游戏环境共同努力。\r\r\r\n                  本通知自发布之日（即2017年10月27日）起生效。\n",this.content_scroller.scrollPolicyV="on",this._showCopyWX(!1),this.noticeFlag_img.source="notice_game_tit"},e.prototype._onClickGameNotice=function(){this.showGameNotice()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelNotice.prototype,"PDKPanelNotice");var PDKPanelPhoneLogin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelPhoneLoginSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent(),this.unid="",this.sk="",this._nIntervalId=-1,this._showCountLabel(!1),this._resetCountNum(),this.phoneLabel.inputType=egret.TextFieldInputType.TEL,this.codeLabel.inputType=egret.TextFieldInputType.TEL},e.prototype._checkPhone=function(t){var e=t;return e&&11==e.length?!0:!1},e.prototype._checkCode=function(t){var e=t;return e?!0:!1},e.prototype._showCountLabel=function(t){this.countLabel.visible=t},e.prototype._resetCountNum=function(){this._nCountTime=60},e.prototype._clearCountInterval=function(){-1!=this._nIntervalId&&egret.clearInterval(this._nIntervalId),this._nIntervalId=-1},e.prototype._startCountDown=function(){var t=this;this._clearCountInterval(),this._resetCountNum(),this.countLabel.text=""+this._nCountTime,this._showCountLabel(!0),this._nIntervalId=egret.setInterval(function(){return t._nCountTime<1?(t._clearCountInterval(),t._showCountLabel(!1),void t._showGetCode(!0)):(t._nCountTime-=1,void(t.countLabel.text=""+t._nCountTime))},this,1e3)},e.prototype._showGetCode=function(t){this.getCodeImg.visible=t},e.prototype._onClickGetCode=function(){var t=this.phoneLabel.text;if(!this._checkPhone(t))return void PDKToast.show("手机号格式错误");var e=(n={},n[0]="验证码发送成功",n[1e3]="参数错误",n[2015]="手机号码错误",n[2018]="发送失败",n[2019]="请稍后重试",n);PDKwebService.getCode(this.phoneLabel.text,function(t){var n=e[t];PDKToast.show(n)}),this._showGetCode(!1),this._startCountDown();var n},e.prototype._enableTouch=function(t,e){t.touchEnabled=e},e.prototype._initEvent=function(){this._enableEvent(!0),this.closeImg.addClickListener(this._onClickClose,this),this.getCodeImg.addClickListener(this._onClickGetCode,this),this.loginImg.addClickListener(this._onClickLogin,this)},e.prototype._onClickLogin=function(){var t=this.phoneLabel.text,e=this.codeLabel.text,n=this;if(!n._checkPhone(t)||!n._checkCode(e))return void PDKToast.show("手机号或验证码错误");n._enableTouch(n.loginImg,!1);var i=PDKalien.Native.instance,o=i.getUrlArg();o.sk&&(n.sk=o.sk),PDKwebService.loginByPhone(t,e,n.unid,n.sk,function(t){n.dealAction(),PDKLoginService.instance.onVerifyResponse(t)}.bind(n))},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._clearCountInterval(),this._enableEvent(!1),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.prototype.show=function(){this.popup(null,!0,{alpha:0})},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelPhoneLogin.prototype,"PDKPanelPhoneLogin");var PDKPanelPlayerInfo=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return e._cleanData(),e._browData=new PDKBrowData,e}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelPlayerInfo},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initTouchEvent(),this._initDefault()},e.prototype._cleanData=function(){this._browData=null,e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";0==t&&(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this.brow1_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow1Btn,this),this.brow2_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow2Btn,this),this.brow3_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow3Btn,this),this.brow4_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow4Btn,this),this.brow5_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchBrow5Btn,this),this.report_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchReportBtn,this),this.close_btn[e](egret.TouchEvent.TOUCH_TAP,this._onTouchCloseBtn,this)},e.prototype._initTouchEvent=function(){this._enableEvent(!0)},e.prototype._initFreeBrow=function(){var t=PDKMainLogic.instance.selfData.getFreeBrowCount(),e=!1;t>0&&(e=!0);for(var n=0,i=0;5>i;++i)n=i+1,this["brow"+n+"Gold_img"].visible=!e,this["brow"+n+"Price_img"].visible=!e,this["brow"+n+"Free_img"].visible=e;this.mFLeft_label.visible=e,this.mFLeft_label.text="剩余免费次数:"+t},e.prototype._initDefault=function(){this.head_img.mask=this.headMask_img,this._initFreeBrow()},e.prototype._setNick=function(t){this.nick_label.text=t},e.prototype._setGames=function(t){this.games_label.text=""+t},e.prototype._setGold=function(t){var e=""+t;(!t||0>t)&&(t=0),t>=1e5&&(e=t>=1e6?e.substring(0,e.length-4)+"万":e.substr(0,2)+"."+e.substr(2,1)+"万"),this.gold_label.text=e},e.prototype._setWinRate=function(t){this.winRate_label.text=t},e.prototype._setHeadImg=function(t){var e=t;t&&-1!=t.indexOf("http://")&&(e=t.replace("http://","https://")),this.head_img.source=e},e.prototype._setRedBeg=function(t){this.redbeg_label.text=t.toFixed(1).toString()},e.prototype._onBuyBrow=function(t){if(this._uid!=pdkServer.uid){this.dealAction();var e=this._browData.getBrowCostGold(t);if(e){var n=PDKMainLogic.instance.selfData.getFreeBrowCount(),i=PDKMainLogic.instance.selfData.getGold()||0;return 0>n&&e>i?PDKImgToast.instance.show(this,PDKlang.browNoGold):void(this._browData.checkCanBuyByBrowId(t)&&(this._browData.startCDByBrowId(t),pdkServer.send(PDKEventNames.GAME_OPERATE_REQ,{optype:5,params:[this._seatId,t]})))}}},e.prototype._onTouchBrow1Btn=function(){var t=PDKBrowData.BrowID.BROW_666;this._onBuyBrow(t)},e.prototype._onTouchBrow2Btn=function(){var t=PDKBrowData.BrowID.BROW_TORTISE;this._onBuyBrow(t)},e.prototype._onTouchBrow3Btn=function(){var t=PDKBrowData.BrowID.BROW_TOMATO;this._onBuyBrow(t)},e.prototype._onTouchBrow4Btn=function(){var t=PDKBrowData.BrowID.BROW_LOVE;this._onBuyBrow(t)},e.prototype._onTouchBrow5Btn=function(){var t=PDKBrowData.BrowID.BROW_GOOD;this._onBuyBrow(t)},e.prototype._onReportRet=function(t){t&&(0==t.code?PDKImgToast.instance.show(this,PDKlang.reportSucc):30001==t.code&&PDKImgToast.instance.show(this,PDKlang.repeatReport))},e.prototype._onTouchReportBtn=function(){if(this._uid!=pdkServer.uid){var t=PDKUserData.instance.getItem("token"),e=pdkServer.uid,n=1,i=pdkServer.getRoomId(),o=pdkServer.getTableId(),a=this._uid;PDKwebService.reportUser(t,e,n,i,o,a,this._onReportRet.bind(this))}},e.prototype._showBrowAndReport=function(t){this.browAndReport_group.visible=t},e.prototype._onTouchCloseBtn=function(){this.dealAction()},e.prototype.show=function(t){this._uid=t.uid,this._seatId=t.seatId,this._setNick(t.nick),this._setGold(t.gold),this._setGames(t.game),this._setWinRate(t.winRate),this._setRedBeg(t.redBeg),this._setHeadImg(t.head),pdkServer.isMatch&&this._uid!=pdkServer.uid&&this._hidePlayerInfo(),this.popup(this.dealAction.bind(this),!0,{alpha:0})},e.prototype._hidePlayerInfo=function(){this.nick_label.text="***",this.gold_label.text="***",this.games_label.text="***",this.winRate_label.text="***",this.redbeg_label.text="***",this.head_img.source="pdk_icon_head_default"},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),this._cleanData()},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.onPlayerLeave=function(t){var n=e._instance;n&&n._seatId==t&&n.close()},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelPlayerInfo.prototype,"PDKPanelPlayerInfo");var PDKPanelProfile=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelProfileSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=PDKalien.PDKEventManager.instance;e.registerOnObject(this,pdkServer,PDKEventNames.USER_MODIFY_USER_INFO_REP,this.onModifyUserInfoRep,this),e.registerOnObject(this,this.rbBoy,egret.TouchEvent.TOUCH_TAP,this.onRbBoyTap,this),e.registerOnObject(this,this.rbGirl,egret.TouchEvent.TOUCH_TAP,this.onRbGirlTap,this),e.registerOnObject(this,this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),e.registerOnObject(this,this.avatar,egret.TouchEvent.TOUCH_TAP,this.onBtnPickAvatarTap,this)},e.prototype.onModifyUserInfoRep=function(t){var e=t.data;switch(e.result){case 0:PDKMainLogic.instance.selfData.initData(this._submitData),this.updateProfile();break;case 1:break;case 2:}},e.prototype.onRbBoyTap=function(t){var e={sex:1};pdkServer.modifyUserInfo(e),this._submitData=e},e.prototype.onRbGirlTap=function(t){var e={sex:2};pdkServer.modifyUserInfo(e),this._submitData=e},e.prototype.updateProfile=function(){var t=PDKMainLogic.instance.selfData;this.avatar.imageId=t.imageid,this.labNickname.text=t.nickname,this.labGold.text=PDKUtils.currencyRatio(t.gold),this.labID.text=t.fakeuid+"",this.avatar.setVipLevel(t.getCurVipLevel()),this.rbBoy.selected=0==t.sex||1==t.sex,this.rbGirl.selected=2==t.sex},e.prototype.onBtnCloseTap=function(t){this.dealAction()},e.prototype.onBtnPickAvatarTap=function(t){},e.prototype.onPanelSelectAvatarResult=function(t,e){"select"==t&&pdkServer.modifyUserInfo(this._submitData={imageid:e.url})},e.prototype.show=function(t){this.popup(this.dealAction.bind(this)),this._callback=t,this.updateProfile(),PDKalien.PDKEventManager.instance.enableOnObject(this)},e.prototype.close=function(){t.prototype.close.call(this),PDKalien.PDKEventManager.instance.disableOnObject(this)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelProfile.prototype,"PDKPanelProfile");var PDKPanelRechargeTips=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelRechargeTipsSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseClick,this),this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExchangeClick,this),this.btnBuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRechargeClick,this),this.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareClick,this)},e.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callback=t,this.popup()},e.prototype.onExchangeClick=function(){pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show(0),this.close()},e.prototype.openDDZShop=function(t){void 0===t&&(t=0),pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:t})},e.prototype.onRechargeClick=function(){pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show(),this.close()},e.prototype.onShareClick=function(){PDKalien.Native.instance.isNative?PDKWxHelper.doNativeShare():PDKPanelShare.instance.showInviteFriend(),this.close()},e.prototype.onBtnCloseClick=function(t){this._callback&&this._callback("confirm"),this.dealAction()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelRechargeTips.prototype,"PDKPanelRechargeTips");var PDKPanelReviveBag=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this;return e._rechargeTit=(n={},n[10047]="初级场复活礼包",n[10048]="中级场复活礼包",n[10049]="高级场复活礼包",n[10052]="中级场复活礼包",n[10053]="高级场复活礼包",n),e;var n}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelReviveSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.close_img.addClickListener(this._onTouchClose,this),this.btnBuy.addClickListener(this._onClickBuyRevive,this)},e.prototype._initUI=function(t){var e=10047;9004==t?e=10052:9005==t&&(e=10053),this._buyId=e;var n=PDKGameConfig.getReviveBagInfo(e);if(n){var i=n.goods.split(":");this.item1Num_label.text="x"+i[1];var o=n.addition_goods.split(":");this.item2Num_label.text="x"+o[1],console.log("PDKPanelReviveBag----_initUI------>",n,i[1],o[1]);var a=n.goods.split("|");if(2==a.length){var r=a[0].split(":"),s=a[1].split(":");this.item2Num_label.text="x"+r[1];var h=s[1]+"小时";s[1]%24==0&&(h=s[1]/24+"天"),this.item3Num_label.text=h}this.revive_cost.text=n.money+"元"}},e.prototype._onTouchClose=function(){this.dealAction(),PDKalien.Dispatcher.dispatch(PDKEventNames.CLOSE_REVIVE_PANEL)},e.prototype._onClickBuyRevive=function(){var t=""+this._buyId;pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:5,productID:t}):PDKRechargeService.instance.doRecharge(t)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),pdkServer[e](PDKEventNames.USER_RECHARGE_RESULT_NOTIFY,this.onRechargeResultNotify,this)},e.prototype.onRechargeResultNotify=function(t){var e=t.data;if(0==e.result){var n=e.productid;this._rechargeTit[n]&&PDKAlert.show("购买"+this._rechargeTit[n]+"成功!")}},e.prototype._checkShouldState=function(){var t=PDKMainLogic.instance.selfData.todayHasBuyRevive();t?this.currentState="noRecorder":this.currentState="hasRecorder"},e.prototype._onBagRefresh=function(){var t=PDKBagService.instance.getItemCountById(3);t>=this._diamondLimitNum&&(this.dealAction(),PDKalien.Dispatcher.dispatch(PDKEventNames.BUY_REVIVE_SUCC))},e.prototype.show=function(t,e){this._diamondLimitNum=t;var n=this.diamoneTip_label.text;this.diamoneTip_label.text=n.replace("{0}",t),this.popup(null,!0,{alpha:0}),this._checkShouldState(),this._initUI(e);var i=PDKalien.PDKEventManager.instance;i.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),PDKalien.PDKEventManager.instance.enableOnObject(this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelReviveBag.prototype,"PDKPanelReviveBag");var PDKPanelRuleTip=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelRuleTip},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent()},e.prototype._initEvent=function(){this.close_img.addClickListener(this._onClickClose,this),this._enableEvent(!0);PDKalien.PDKEventManager.instance},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype.show=function(t){void 0===t&&(t=!1),this.imgRule.source=9002==pdkServer.roomInfo.roomID||9004==pdkServer.roomInfo.roomID||9005==pdkServer.roomInfo.roomID?"pdk_rule_new2":"pdk_rule_new",this.popup()},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelRuleTip.prototype,"PDKPanelRuleTip");var PDKPanelSelectAvatar=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this
}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelSelectAvatarSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.list.itemRenderer=PDKIRAvatar;for(var e=[],n=1;8>=n;n++)e.push(n);this.list.dataProvider=new eui.ArrayCollection(e),this.list.addEventListener(egret.Event.CHANGE,this.onSelectAvatar,this),this.btnUpload.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnUploadTap,this)},e.prototype.onBtnUploadTap=function(t){},e.prototype.onSelectAvatar=function(t){var e=this;this.dealAction("select",{url:"head"+this.list.selectedItem+".png"}),egret.callLater(function(){e.list.selectedIndex=-1},this)},e.prototype.show=function(t){this._callback=t,this.popup(this.dealAction.bind(this)),this.currentState=PDKalien.Native.instance.isNative?"upload":"select"},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelSelectAvatar.prototype,"PDKPanelSelectAvatar");var PDKIRAvatar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.imgAvatar.source="icon_head"+this.data},e}(eui.ItemRenderer);__reflect(PDKIRAvatar.prototype,"PDKIRAvatar");var PDKPanelSetting=function(t){function e(){var e=t.call(this,PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!0,ease:egret.Ease.backIn})||this;return e.showType=0,e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.skinName=panels.PDKPanelSettingSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.grpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this)},e.prototype.onGrpButtonTap=function(t){switch(t.target.name){case"logout":PDKMainLogic.instance.stop(),PDKUserData.instance.clearData(["id"]),PDKMainLogic.instance.showLogin(),this.dealAction();break;case"bind_weixin":break;case"music":PDKalien.PDKSoundManager.instance.switchMusic();break;case"effect":PDKalien.PDKSoundManager.instance.switchEffect();break;case"vibrate":PDKalien.PDKSoundManager.instance.switchVibrate();break;case"report":PDKReportor.instance.toReportPage();break;case"help":""==this.labGz.text&&(this.labGz.textFlow=(new egret.HtmlTextParser).parser(PDKlang.ddz_gz)),this.grpGz.visible=!0,this.grpButton.visible=!1}},e.prototype.onBtnCloseTap=function(t){return 1==this.showType?void this.dealAction():void(this.labWxService.visible?(this.labWxService.visible=!1,this.grpButton.visible=!0):this.grpGz.visible?(this.grpGz.visible=!1,this.grpButton.visible=!0):this.dealAction())},e.prototype.show=function(t){void 0===t&&(t=0),this.popup(this.dealAction.bind(this)),this.switchMusic.selected=!PDKalien.PDKSoundManager.instance.musicMute,this.switchEffect.selected=!PDKalien.PDKSoundManager.instance.effectMute,this.switchVibrate.selected=!PDKalien.PDKSoundManager.instance.vibrateMute,this.btnLogout.enabled=!pdkServer.playing,this.labWxService.visible=!1,this.grpGz.visible=!1,this.grpButton.visible=!0,this.showType=t,1==t&&(""==this.labGz.text&&(this.labGz.textFlow=(new egret.HtmlTextParser).parser(PDKlang.ddz_gz)),this.grpGz.visible=!0,this.grpButton.visible=!1)},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelSetting.prototype,"PDKPanelSetting");var PDKPanelShare=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelShareSkin},Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.onTap=function(t){this.parent&&this.close()},e.prototype.show=function(){this.popup()},e.prototype.showInviteFriend=function(){this.desc_img.source="room_share2",this.show()},e.prototype.sendGameToFriend=function(){this.desc_img.source="room_share1",this.show()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelShare.prototype,"PDKPanelShare");var PDKPanelSign=function(t){function e(){return t.call(this,PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backOut},PDKalien.popupEffect.Scale,{withFade:!1,ease:egret.Ease.backIn})||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelSign,this._signCount=0},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initDefaut(),this._initEvent()},e.prototype._initDefaut=function(){for(var t=PDKMainLogic.instance.selfData.getNationalGetLoginRewDay(),e=null,n=1;8>n;++n)e=this["state"+n+"_img"],t>=n?e.visible=!0:e.visible=!1},e.prototype._initEvent=function(){this.getRew_img.addClickListener(this._onClickGetRew,this),this.close_img.addClickListener(this._onClickClose,this),this._enableEvent(!0);var t=PDKalien.PDKEventManager.instance;t.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.NATIONAL_INFO_CHANGE,this._updateByGetRewRep,this)},e.prototype._onClickClose=function(){this.dealAction()},e.prototype._onAddToStage=function(){PDKEventManager.instance.enableOnObject(this)},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),PDKalien.PDKEventManager.instance.disableOnObject(this),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),pdkServer[e](PDKEventNames.USER_DAY_SIGN_IN_REP,this._onSignInRep,this),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this)},e.prototype._onSignInRep=function(t){var e=t.data,n=PDKMainLogic.instance.selfData;switch(1==e.today&&n.setTodaySigned(!0),e.optype){case 1:this._signCount=e.total_day||0,this._updateSignInfo();break;case 2:if(0==e.result){var i=this._signCount;n.setTodaySigned(!0),this._signCount++,n.signSuccSubSignAddRemin(),PDKBagService.instance.refreshBagInfo(),this._updateSignInfo(),this._showGetSuccByIdx(i),PDKalien.Dispatcher.dispatch(PDKEventNames.GOLD_RAIN_EFFECT)}}},e.prototype._onClickGetRew=function(t){pdkServer.getSignReward()},e.prototype._updateByGetRewRep=function(){for(var t=this._signCount,e=1;t>=e;++e)this["state"+e+"_img"].visible=!0},e.prototype._updateSignInfo=function(){var t=PDKGameConfig.signInRewardConfig;if(this._signCount<=t.length)for(var e=0;e<this._signCount;++e)this["state"+(e+1)+"_img"].visible=!0;this._initTodayGet()},e.prototype._initTodayGet=function(){var t=PDKMainLogic.instance.selfData.isTodayHasSign();t||this._signCount>=7?(this.getRew_img.source="pdk_btn_gray2",this.getRew_img.touchEnabled=!1):(this.getRew_img.source="pdk_btn_yellow",this.getRew_img.touchEnabled=!0)},e.prototype._showGetSuccByIdx=function(t){var e=PDKGameConfig.signInRewardConfig;if(t>=0&&e&&t<e.length){var n=e[t][0];PDKPanelGetItems.instance.show(n)}},e.prototype._initItemInfo=function(){for(var t=PDKGameConfig.signInRewardConfig,e=0;e<t.length;++e){for(var n=t[e],i="",o=0;o<n.length;++o)i=n[o].count,2==n[o].id?i=n[o].count>=24?n[o].count/24+"天":n[o].count+"小时":0==n[o].id&&PDKalien.Native.instance.isNative&&(i=""+1.5*n[o].count),this["itemNum"+e+"_"+o+"label"].text=i;this["state"+(e+1)+"_img"].visible=!1}},e.prototype.show=function(){this.popup(),this._initItemInfo(),pdkServer.getSignInInfo()},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelSign.prototype,"PDKPanelSign");var PDKPanelThanksgiving=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelThanksgivingSkin,this._signInfo=[0,0,0],this._buyCount=0},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initEvent(),this._initUI()},e.prototype._initEvent=function(){this._enableEvent(!0),this.buyImg.addClickListener(this._onClickBuyImg,this),this.getImg.addClickListener(this._onClickGetImg,this),pdkServer.addEventListener(PDKEventNames.USER_OPERATE_REP,this._onRecvUserOperateRep,this),pdkServer.addEventListener(PDKEventNames.USER_RECHARGE_RESULT_NOTIFY,this._onRechargeResultNotify,this)},e.prototype._onRechargeResultNotify=function(t){var e=t.data;if(0==e.result){var n=e.productid;(10018==n||10019==n||10020==n)&&(this._buyCount+=1,this._initBuy())}},e.prototype._onRecvUserOperateRep=function(t){var e=t.data;if(4==e.optype)null==e.result&&e.params&&e.params.length>=6&&(this._buyCount=e.params[0],this._todaySign=e.params[1],this._signInfo=e.params.slice(3),this._initSignInfo(),this._initBuy());else if(6==e.optype&&null==e.result){this._signInfo[e.params[0]-1]=1;for(var n=0;n<this._signInfo.length;++n)1!=this._signInfo[n]&&n<e.params[0]-1&&(this._signInfo[n]=2);this._tipGetSignRewSucc(),this._todaySign=1,this._initSignInfo()}},e.prototype._tipGetSignRewSucc=function(){PDKAlert.show("领取成功")},e.prototype._initUI=function(){this.buyImg.setTit("thanks_buy"),this.buyImg.setDisable(),this.getImg.setDisable()},e.prototype._onClickBuyImg=function(){var t="10018";this._buyCount<1?t="10018":this._buyCount<3?t="10019":this._buyCount<6&&(t="10020"),PDKRechargeService.instance.doRecharge(t)},e.prototype._onClickGetImg=function(){pdkServer.reqThanksSign()},e.prototype._setBuyPro=function(t){this.buyProLabel.text=t},e.prototype._initBuy=function(){this._setBuyPro(this._buyCount+"/6"),this._buyCount>=6?this.buyImg.setDisable():this.buyImg.setEnable()},e.prototype._initSignInfo=function(){1==this._todaySign?this.getImg.setDisable():this.getImg.setEnable();for(var t=0;t<this._signInfo.length;++t)1==this._signInfo[t]?(this["get"+t+"Img"].visible=!0,this["get"+t+"Img"].source="thanks_r"):0==this._signInfo[t]?this["get"+t+"Img"].visible=!1:(this["get"+t+"Img"].visible=!0,this["get"+t+"Img"].source="thanks_w")},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelThanksgiving.prototype,"PDKPanelThanksgiving");var PDKPanelWatchWX=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){this.skinName=panels.PDKPanelWatchWX},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._initUI(),this._initEvent()},e.prototype._initEvent=function(){this._enableEvent(!0),this.watchImg.addClickListener(this._onClickWatch,this)},e.prototype._onClickWatch=function(){PDKPanelFollowCourse.instance.show()},e.prototype._initUI=function(){},e.prototype._onTouchClose=function(){this.dealAction()},e.prototype._onRemovedToStage=function(){this._enableEvent(!1),e._instance=null},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.remove=function(){e._instance&&e._instance.close()},e}(PDKalien.PDKPanelBase);__reflect(PDKPanelWatchWX.prototype,"PDKPanelWatchWX");var PDKSceneCommon=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.PDKSceneCommonSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),PDKGameConfig.DEBUG&&PDKalien.Dispatcher.addEventListener(PDKEventNames.LOG,this.onLog,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SHOW_TOP_NOTIFY,this.onShowTopNotify,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.HIDE_TOP_NOTIFY,this.onHideTopNotify,this),this.labVersion.text="v:"+this.makeVersionString(PDKversion),this.grpTopNotify.y=-50},e.prototype.makeVersionString=function(t){var e=t;return PDKalien.Native.instance.isNative&&(e+="iOS"==egret.Capabilities.os?"i":"Android"==egret.Capabilities.os?"a":"n"),e},e.prototype.onShowTopNotify=function(t){var e=t.data;this.grpTopNotify.visible=!0,"string"==typeof e.content?this.labTopNotify.text=e.content:e.content(this.labTopNotify),this.btnTopNotify.visible=e.showButton,e.showButton&&this.btnTopNotify.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTopNotifyTap.bind(this,e.onTap),this);var n=egret.Tween.get(this.grpTopNotify,null,null,!0).to({y:0},200);e.delay&&e.delay>0&&n.wait(e.delay).call(this.hideTopNotify,this)},e.prototype.onHideTopNotify=function(t){this.hideTopNotify()},e.prototype.hideTopNotify=function(){egret.Tween.get(this.grpTopNotify,null,null,!0).to({y:-this.grpTopNotify.height},200),this.btnTopNotify.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTopNotifyTap,this)},e.prototype.onBtnTopNotifyTap=function(t,e){this.hideTopNotify(),t&&t()},e.prototype.onLog=function(t){this.labLog.appendText(t.data+"\n");var e=this.scroller.viewport;e.scrollV=this.labLog.height-e.height},e.prototype.beforeShow=function(t){},e}(PDKalien.SceneBase);__reflect(PDKSceneCommon.prototype,"PDKSceneCommon");var PDKSceneEffect=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.PDKSceneEffectSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),PDKalien.Dispatcher.addEventListener(PDKEventNames.GOLD_RAIN_EFFECT,this.onGoldRainEffect,this)},e.prototype.onGoldRainEffect=function(t){this.goldRainEffectLayer.play()},e.prototype.beforeShow=function(t){},e}(PDKalien.SceneBase);__reflect(PDKSceneEffect.prototype,"PDKSceneEffect");var PDKSceneGameSel=function(t){function e(){var n=t.call(this)||this;return e._instance=n,n.init(),n}return __extends(e,t),e.prototype.init=function(){this.skinName=pages.PDKSceneGameSelSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.gameList.dataProvider=this._gameProvider=new eui.ArrayCollection,this.gameList.itemRenderer=PDKIRNormalRoom},e.prototype.setWillToGame=function(t){this._toGameInfo=t},e.prototype.getWillToGame=function(){return this._toGameInfo},e.prototype._enableListeners=function(t){var e="addEventListener";t||(e="removeEventListener"),pdkServer[e](PDKEventNames.USER_PLAYERS_AMOUNT_REP,this.onPlayersAmount,this)},e.prototype.onPlayersAmount=function(t){var e=this,n=t.data;console.log("onPlayersAmount--------->",n),n.info.forEach(function(t,n){var i=e.getRoomById(t.room_id);i&&(i.amount=t.amount)}),this._gameProvider.refresh()},e.prototype.getRoomById=function(t){var e=null;return this._roomList.some(function(n){return n.roomID==t?(e=n,!0):void 0}),e},e.prototype.setRoomType=function(t){console.log("setRoomType------>",PDKGameConfig.roomList);var e=PDKGameConfig.roomList.filter(function(e){return e.roomType==t});e.sort(function(t,e){return t.roomID-e.roomID}),this._roomList=e,this.dealRoomList(),this._gameProvider.source=this._roomList},e.prototype.dealRoomList=function(){},e.onSelGame=function(t,n){if(void 0===n&&(n=!1),this._instance.setWillToGame(t),!n){var i=PDKGameConfig.getRoomConfigById(t.gameId);console.log("_onSelectRoom",i),e.onSelGame(i,!0),pdkServer.checkReconnect(),console.log("_onSelGame------------------->",t)}},e.prototype.beforeShow=function(e){t.prototype.beforeShow.call(this,e),this._enableListeners(!0)},e.prototype.beforeHide=function(){t.prototype.beforeHide.call(this),this._enableListeners(!1)},e.prototype.onShow=function(){t.prototype.onShow.call(this),pdkServer.getPlayersAmount(),this.setRoomType(1)},e.defName="PDKSceneGameSel",e}(PDKalien.SceneBase);__reflect(PDKSceneGameSel.prototype,"PDKSceneGameSel");var PDKSceneLoading=function(t){function e(){var e=t.call(this)||this;return e.skinName=scenes.PDKSceneLoadingSkin,e}return __extends(e,t),e.setLoadingText=function(t){e._instance&&e._instance.setDescText(t)},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),e._instance=this,this.showCopyRight(!1)},e.prototype.showCopyRight=function(t){this.copyRightImg.visible=t,this.noticeImg.visible=t},e.prototype.setDescText=function(t){this.descLabel.text=t},e.prototype.resetDesc=function(){this.setDescText("加载中...")},e.prototype.beforeShow=function(t){t&&t.showCopyRight||(t={showCopyRight:!1}),this.showCopyRight(t.showCopyRight||!1)},e.prototype.onHide=function(){},e}(PDKalien.SceneBase);__reflect(PDKSceneLoading.prototype,"PDKSceneLoading");var PDKSceneManager=PDKalien.PDKSceneManager,PDKSceneLogin=function(t){function e(){var e=t.call(this)||this;return e._loginData={uid:0,token:""},e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.PDKSceneLoginSkin},e.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=PDKalien.PDKEventManager.instance;PDKalien.Dispatcher.addEventListener(PDKEventNames.LOGIN_SUCCESS,this._onLoginSuccess,this),e.registerOnObject(this,this.grpSelectButton,egret.TouchEvent.TOUCH_TAP,this.onGrpSelectButtonTap,this),this.initBtnsByChannel()},e.prototype.initBtnsByChannel=function(){var t=PDKalien.Native.instance;if(t.isNative)this.currentState="justWx";else if("true"==PDKlang.debug)this.currentState="all";else if(t.isWXMP||t.isAli())this.grpSelectButton.visible=!1;else{var e=egret.Capabilities.os;"Android"!=e&&"iOS"!=e?this.currentState="wxPhone":this.currentState="justPhone"}},e.prototype._openNewWindow=function(t,e,n,i){var o=null,a=(window.screen.availHeight-30-i)/2,r=(window.screen.availWidth-10-n)/2;o=window.open(t,e,"height="+i+",innerHeight="+i+",width="+n+",innerWidth="+n+",top="+a+",left="+r+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no")},e.prototype.onGrpSelectButtonTap=function(t){PDKalien.Native.instance.isNative&&(this.waitTimeOut=setTimeout(function(){PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING)},15e3));var e=PDKLoginService.instance;switch(t.target.name){case"quick":PDKwebService.fastLogin(e.onVerifyResponse.bind(e));break;case"input":PDKPanelLogin.instance.show(this.onPanelLoginResult.bind(this));break;case"weixin":_pdk_nativeBridge.isNative?PDKLoginService.instance.doAppWxLogin():"true"==PDKlang.debug?PDKPanelLogin.instance.show(this.onPanelLoginResult.bind(this)):_pdk_nativeBridge.isWXMP||window.top.openWXQRCode();break;case"phone":PDKPanelPhoneLogin.getInstance().show()}},e.prototype.onPanelLoginResult=function(t,e){var n=PDKLoginService.instance;switch(t){case"close":break;case"confirm":PDKwebService.login(e.id,e.password,n.onVerifyResponse.bind(n))}},e.prototype._onLoginSuccess=function(){PDKPanelLogin.instance.close()},e.prototype.beforeShow=function(t){PDKwebService.loadLog(1,0),PDKalien.PDKEventManager.instance.enableOnObject(this),PDKalien.Native.instance.isWXMP||PDKLoginService.instance.checkLocalToken()},e.prototype.onShow=function(t){},e.prototype.beforeHide=function(){this.waitTimeOut&&clearTimeout(this.waitTimeOut),PDKalien.PDKEventManager.instance.disableOnObject(this)},e}(PDKalien.SceneBase);__reflect(PDKSceneLogin.prototype,"PDKSceneLogin");var PDKSceneMostTop=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.PDKSceneMostTopSkin,this._setHasAccountError(!1),this.grpWaiting.visible=!1},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._reconnectInterval=0,this.grpToast.visible=!1,this.grpDisconnect.visible=!1,PDKalien.Dispatcher.addEventListener(PDKEventNames.SHOW_WAITING,this.onShowWaiting,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.HIDE_WAITING,this.onHideWaiting,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SHOW_DISCONNECT,this.onShowDisconnect,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.HIDE_DISCONNECT,this.onHideDisconnect,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.LOGIN_SUCCESS,this._onLoginSuccess,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SHOW_TOAST,this.onShowToast,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.ACCOUNT_ERROR,this._onAccountError,this),this.btnReconnect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReconnectTap,this),pdkServer.addEventListener(PDKEventNames.USER_LOGIN_RESPONSE,this._onLoginResponse,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.HIDE_MOSTTOP_TIP,this._onClearAllTip,this)},e.prototype.onShowWaiting=function(t){this.grpWaiting.visible=!0,this.loading.play(),this.labLoadingTip.text=t.data?t.data.content:""},e.prototype.onHideWaiting=function(t){this.grpWaiting.visible=!1,this.loading.stop()},e.prototype.onShowToast=function(t){this.grpToast.visible=!0,this.labToast.text=t.data.content,this.labToast.textColor=t.data.color>=0?t.data.color:15527148,egret.Tween.get(this.grpToast,null,null,!0).to({alpha:1},200).wait(t.data.delay||1e3).to({alpha:0},200)},e.prototype._clearReconnectInterval=function(){0!=this._reconnectInterval&&egret.clearInterval(this._reconnectInterval),this._reconnectInterval=0},e.prototype._setHasAccountError=function(t){this._bHasAccountErr=t},e.prototype._onLoginSuccess=function(){this._clearReconnectInterval(),this._hideAllGrp(),this._setHasAccountError(!1)},e.prototype._onLoginResponse=function(){this._clearReconnectInterval()},e.prototype._tryReconnect=function(){var t=0;this.btnReconnect.visible=!1,this.labDisconnect.text="尝试重连中。。。",this._clearReconnectInterval();var e=function(){return t>=3?(this.grpDisconnect.visible=!0,this.btnReconnect.visible=!0,this.labDisconnect.text="请检查您的网络后点击重新连接",void this._clearReconnectInterval()):(t+=1,void PDKLoginService.instance.doReconnect())}.bind(this);this._reconnectInterval=egret.setInterval(function(){e()},this,5e3),e()},e.prototype._onClearAllTip=function(){this._clearReconnectInterval(),this._hideAllGrp()},e.prototype._hideAllGrp=function(){this.grpToast.visible=!1,this.grpDisconnect.visible=!1,this.grpWaiting.visible=!1},e.prototype.onBtnReconnectTap=function(t){this.btnReconnect.visible=!1,this.btnReconnect.clickFunc&&this.btnReconnect.clickFunc()},e.prototype.onShowDisconnect=function(t){this._bHasAccountErr||pdkServer._isInDDZ||(this.grpDisconnect.visible=!0,this.btnReconnect.visible=!0,this.grpToast.visible=!1,this.grpWaiting.visible=!1,this.labDisconnect.text=t.data.content,this.btnReconnect.label=t.data.button||PDKlang.reconnect,PDKalien.Native.instance.isNative&&(this.btnReconnect.visible=!1,egret.setTimeout(this._tryReconnect,this,1e3)),this.btnReconnect.clickFunc=this._tryReconnect.bind(this))},e.prototype._onAccountError=function(t){this._setHasAccountError(!0),this.grpDisconnect.visible=!0,this.btnReconnect.visible=!0,this.grpToast.visible=!1,this.grpWaiting.visible=!1,this.labDisconnect.text=t.data.content,this.btnReconnect.label=PDKlang.confirm,this.btnReconnect.clickFunc=function(){this._hideAllGrp(),PDKLoginService.instance.doRelogin()}.bind(this)},e.prototype.onHideDisconnect=function(t){this.grpDisconnect.visible=!1},e.prototype.beforeShow=function(t){},e}(PDKalien.SceneBase);__reflect(PDKSceneMostTop.prototype,"PDKSceneMostTop");var PDKEventManager=PDKalien.PDKEventManager,PDKSceneRoom=function(t){function e(){var e=t.call(this)||this;return e._sceneAnimationDuration=500,e._rechargeTit=(n={},n[10047]="初级场复活礼包",n[10048]="中级场复活礼包",n[10049]="高级场复活礼包",n[10052]="中级场复活礼包",n[10053]="高级场复活礼包",n),e.init(),e;var n}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.PDKSceneRoomSkin,this._self=PDKMainLogic.instance.selfData},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._rollMsgHorizontal=this.rollMsg.horizontalCenter,this.navigator.push(PDKPageChannels),this.onNavigate(null);var e=PDKEventManager.instance;e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this.onMyUserInfoUpdate,this),e.registerOnObject(this,this.grpBottom,egret.TouchEvent.TOUCH_TAP,this.onGrpBottomTap,this),e.registerOnObject(this,this.gold,egret.TouchEvent.TOUCH_TAP,this._onClickGold,this),e.registerOnObject(this,this.diamond,egret.TouchEvent.TOUCH_TAP,this._onClickDiamond,this),e.registerOnObject(this,this.grpRedcoin,egret.TouchEvent.TOUCH_TAP,this._onClickExchange,this),e.registerOnObject(this,this.navigator,PDKalien.Navigator.NAVIGATE,this.onNavigate,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.SHOW_ANNOUNCE,this.showAnnounce,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.SHOW_LOTTERY,this.showLotteryLuck,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.USER_FRREWARD_GET_SUCC,this._onFRechargeRewGetSucc,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.USER_DTREWARD_GET_SUCC,this._onDayTaskRewGetSucc,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BUY_REVIVE_SUCC,this._onBuyReviveSucc,this),e.registerOnObject(this,PDKMailService.instance,PDKEventNames.MAIL_UNREAD_UPDATE,this._onMailUnreadUpdate,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.USER_RED_COUNT_CHANGE,this._onUserRedCountChange,this),e.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.FRECHARGE_HASUPDATE,this._onFRechargeUpdate,this),pdkServer.addEventListener(PDKEventNames.USER_GET_ACTInfo_REP,this._onRecvGetActInfoRep,this),pdkServer.addEventListener(PDKEventNames.USER_GET_REWARD_REP,this._onRecvGetActRewRep,this),pdkServer.addEventListener(PDKEventNames.JOIN_PGAME_REP,this.onJoinRep,this),pdkServer.addEventListener(PDKEventNames.USER_DiamondGame_REP,this._onNewPlayerDiamonRewInfoRep,this),pdkServer.addEventListener(PDKEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this),pdkServer.addEventListener(PDKEventNames.USER_RECHARGE_RESULT_NOTIFY,this.onRechargeResultNotify,this),PDKalien.Dispatcher.addEventListener(PDKEventNames.ACT_RED_CHANGE,this._initActRed,this),PDKMsgInfoService.instance.announce&&this.showAnnounce(null)},e.prototype._setIsHome=function(t){this._isHome=t},e.prototype._onFRechargeUpdate=function(){var t=PDKMainLogic.instance.selfData;t.isNotBuyFRecharge()||(this.mFRechageBg_img.visible=!1,!t.isGetTodayFRechargeRew()&&!t.isFRechargeRewGetOver())},e.prototype._onClickKefu=function(){var t=PDKGameConfig.wxService,e=PDKPanelAlert3.instance;e.show("微信客服:"+t,0,function(t){"confirm"==t||"cancel"==t&&PDKPanelActAndNotice.getInstance().showRedExchange()},!0)},e.prototype._onClickRecharge=function(){1==pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show()},e.prototype._enableEvent=function(t){var e="addEventListener";t||(e="removeEventListener"),this[e](egret.Event.REMOVED_FROM_STAGE,this._onRemovedToStage,this),this[e](egret.Event.ADDED_TO_STAGE,this._onAddToStage,this),this.mFRechageBg_img.addClickListener(this._onClickFRecharge,this),this.signBtn.addClickListener(this._onClickSign,this),this.keFuBtn.addClickListener(this._onClickKefu,this),this.settingBtn.addClickListener(this._onClickSetting,this),this.taskGroup.addClickListener(this._onClickTask,this),this.rechargeGroup.addClickListener(this._onClickRecharge,this),this.inviteGroup.addClickListener(this._onClickInvite,this),this.redBtn.addClickListener(this._onClickGetRed,this),this.backGroup.addClickListener(this._onClickBack,this),this.actGroup.addClickListener(this._onClickAct,this),this.emailGroup.addClickListener(this._onClickEmail,this),this.redExchangeImg.addClickListener(this._onClickExchange,this),this.publicWXGroup.addClickListener(this._onClickWatchWX,this),this.grpShare.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onGrpShareTap,this),PDKalien.Dispatcher[e](PDKEventNames.SHOW_PAYCHAT,this.showLaba,this)},e.prototype.showLaba=function(t){this.rollMsg.show()},e.prototype._onGrpShareTap=function(t){var e=PDKUserData.instance,n=e.getItem("uid");PDKwebService.getShareAddr(n,function(t){0==t.code&&(window.top.location.href=t.data.url)})},e.prototype._showEmailDefaultUnreadNum=function(t){var e=!1;t>0&&(e=!0),this.newEmailNumLabel.text=""+t,this.newEmailNumLabel.visible=e,this.newEmailBgImg.visible=e},e.prototype._onMailUnreadUpdate=function(t){var e=t.data;e&&e.count>=0&&this._showEmailDefaultUnreadNum(e.count)},e.prototype._onClickAct=function(){PDKPanelActAndNotice.getInstance().showThanksgiving()},e.prototype._onClickEmail=function(){PDKPanelMail.getInstance().show()},e.prototype._onClickExchange=function(){1==pdkServer._isInDDZ?this.openDDZShop(2):PDKPanelExchange2.instance.show(2)},e.prototype._onClickGold=function(){1==pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show()},e.prototype.openDDZShop=function(t){void 0===t&&(t=0),pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:t})},e.prototype._onClickDiamond=function(){1==pdkServer._isInDDZ?this.openDDZShop(1):PDKPanelExchange2.instance.show(1)},e.prototype._playLight=function(t,e){t.mask=e;var n=e.x,i=e.y,o=t.x+t.width+10,a=null;(a=function(){egret.Tween.get(e).to({x:o,y:i},1e3).wait(500).to({x:n,y:i},500).call(function(){a()})})()},e.prototype._onClickWatchWX=function(){this._saveHasClickWatchWX(),this._clearTipWX(),PDKPanelFollowCourse.instance.show()},e.prototype._onAddToStage=function(){},e.prototype._onRemovedToStage=function(){this._enableEvent(!1)},e.prototype.showAnnounce=function(t){this.rollMsg.show(!1)},e.prototype.showLotteryLuck=function(t){this.rollMsg.show(!1)},e.prototype._onClickInvite=function(){PDKInviteService.instance.clearInvitePlayersList(),PDKInviteService.instance.getInvitePlayersList(),PDKPanelInviteList.instance.show(PDKInviteService.instance.source,this.onCloseInvite.bind(this))},e.prototype.onCloseInvite=function(){},e.prototype._showBackGroup=function(t){this.backGroup.visible=t},e.prototype._showGrpShare=function(t){this.grpShare.visible=!1},e.prototype.onNavigate=function(t){PDKWxHelper.doWebH5ShareCfg(),!t||t.data.page instanceof PDKPageChannels?(this.imgRoomTitle.source="pdk_title_new",this._showBackGroup(!1),this._setIsHome(!0),PDKalien.Native.instance.isNative&&"Android"==egret.Capabilities.os&&this._showBackGroup(!0),this._showWatchWX(!0),this._showGrpShare(!0),this._resetRollMsgHorizontal()):(this._setIsHome(!1),this._showWatchWX(!1),this._showBackGroup(!0),this._onChangeCenterHornPos())},e.prototype.onGrpBottomTap=function(t){switch(t.target.name){case"home_page":break;case"add_favorite":break;case"avatar":if(pdkServer._isInDDZ){var e=PDKMainLogic.instance.selfData,n=e.totalwincnt,i=e.totallosecnt,o=e.totaldrawcnt,a=n+i+o||1,r=Math.floor(100*n/a),s=e;s.winRate=r,s.base64=!1,s.game=a,s.isPlaying=pdkServer.playing?!0:!1,console.log("_onTouchHead-----inpdk---111----->",s),pdkServer.ddzDispatchEvent(1,"",{type:8,data:s})}else PDKPanelProfile.instance.show(function(){PDKMainLogic.instance.refreshSelfInfo()})}},e.prototype.showBank=function(){},e.prototype._onClickBack=function(){return 1==pdkServer._isInDDZ?void this.quitGame():void(this._isHome?PDKPanelAlert.instance.show("再赢几局就能拿奖杯了，真的要离开吗？",0,function(t){"confirm"==t&&PDKalien.Native.instance.closeApp()}):this.navigator.pop())},e.prototype.quitGame=function(){PDKalien.StageProxy.removeEvent(),pdkServer.ddzDispatchEvent(1,"",{type:1})},e.prototype.doBack=function(){this._onClickBack()},e.prototype.onPanelBindPhoneResult=function(t){},e.prototype.checkRedNormalDiamondNum=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=9002);var n=PDKGameConfig.getRoomConfigById(e),i=PDKBagService.instance.getItemCountById(3);return n.minScore>i?void PDKMainLogic.instance.noDiamondGetNewDiamondRewOrBuyRevive(n.minScore,e):void PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{action:"quick_join",roomID:e},PDKalien.sceneEffect.Fade)
},e.prototype.onCheckReconnectRep=function(t){var e=t.data,n=Math.floor(e.roomid/1e3),i=e.roomid>0&&(e.roomid<1e3||5001==e.roomid||5101==e.roomid||n==PDKGameConfig.gameId);if(e.roomid>999&&e.roomid<1e4&&2==e.gametype)PDKSceneManager.show(PDKSceneNames.PLAY,{personalgame:!0,action:"reconnect",roomID:e.roomid},PDKalien.sceneEffect.Fade);else if(i)PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{action:"reconnect",roomID:e.roomid},PDKalien.sceneEffect.Fade);else{var o=this.navigator.currentPage,a=o.isClickTwoGame&&o.isClickTwoGame();if(o.isClickRedRoom&&o.isClickRedRoom())this.checkRedNormalDiamondNum(a,o.getClickRoomID());else{var r=this.navigator.currentPage,s=r.selectedRoom;if(!s)return;if(r.selectedRoom=null,2==s.roomType)pdkServer.getMatchSignUpInfo(s.matchId);else if(1==s.roomType)if(this._self.gold>s.maxScore){var h=PDKGameConfig.getSuitableRoomConfig(this._self.gold,s.roomFlag);PDKAlert3.show("您拥有的金豆大于"+s.maxScore+"\n推荐进入"+h.name+"游戏",this.joinSpecialRoom.bind(this,h.roomID),"pdk_common_btn_enter_h",!0)}else this._self.gold>=s.minScore?PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{action:"quick_join",roomID:s.roomID},PDKalien.sceneEffect.Fade):PDKPanelRechargeTips.instance.show()}}},e.prototype.joinSpecialRoom=function(t){t&&PDKGameConfig.getRoomConfigById(t)&&PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{action:"quick_join",roomID:t},PDKalien.sceneEffect.Fade)},e.prototype._onShowNewReward=function(){PDKPanelFreshManReward.instance.show()},e.prototype.onMyUserInfoUpdate=function(t){void 0===t&&(t=null);var e=t&&t.data?t.data.userInfoData:this._self;if(e.uid){var n=PDKBagService.instance.getItemCountById(3);if(this.diamond.updateGold(n),this.gold.updateGold(e.gold),this.lbRedCoin.text=""+(null==this._self.redcoin?"0.00":PDKUtils.exchangeRatio(this._self.redcoin/100,!0)),this._showEmailDefaultUnreadNum(0),this._showDayTaskDefaultByOverNum(e.getDayTaskOverCount()),this._initTaskRedImg(),this._initActRed(),this._initRedNum(),this.avatar.setVipLevel(e.getCurVipLevel()),e.imageid&&(this.avatar.imageId=e.imageid),e.nickname){var i=e.nickname.substr(0,10);this.labNickName.text=i+"("+e.fakeuid+")",this.checkShareRoom()}}},e.prototype._showActRed=function(t){},e.prototype._initActRed=function(){this._self.shouldShowActRed()?this._showActRed(!0):this._showActRed(!1)},e.prototype._initTaskRedImg=function(){this._self.shouldShowTaskRed()&&this._showTaskRedImg(!0)},e.prototype.checkShareRoom=function(){var t=PDKalien.Native.instance,e=t.getUrlArg(),n=e.share_room,i=Number(n);i&&pdkServer.JoinPGameReq(i)},e.prototype.checkNickname=function(){0==PDKMainLogic.instance.checkNicknameCount&&(this._self.nickname.match(/^用户\w{15}/)&&PDKPanelModifyNickname.instance.show(),PDKMainLogic.instance.checkNicknameCount++)},e.prototype._onClickGetRed=function(){var t=Number(this.redNumLabel.text);if(!t||0>=t)return void PDKAlert.show("游戏赢5局即可抽取，是否前往",1,function(t){"confirm"==t&&PDKalien.Dispatcher.dispatch(PDKEventNames.TO_NORMAL_MATCH)});var e=this._self.getOneNorRoomRedFromSmall();e&&e.roomid&&PDKExchangeService.instance.doChou(e.roomid)},e.prototype._showFRecharge=function(){this._bInLobby&&PDKPanelFirstRechargeNew.getInstance().show()},e.prototype._onSignEffectLoadOver=function(t){if(this._bInLobby&&"pdksignAndEmail"==t.groupName){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onSignEffectLoadOver,this),PDKPanelSign.getInstance().show();var e=this._self;e.freshrewardgot&&1==e.freshrewardgot&&this._onShowNewReward()}},e.prototype._showSignRew=function(){return RES.isGroupLoaded("pdksignAndEmail")?void PDKPanelSign.getInstance().show():(RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onSignEffectLoadOver,this),void RES.loadGroup("pdksignAndEmail"))},e.prototype._onMailEffectLoadOver=function(t){this._bInLobby&&"pdksignAndEmail"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onMailEffectLoadOver,this),PDKPanelMail.getInstance().show())},e.prototype._showEmail=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._onMailEffectLoadOver,this),RES.loadGroup("pdksignAndEmail")},e.prototype._getThanksPopTimeStamp=function(){var t=PDKalien.localStorage.getItem("PopThanksTime");return Number(t)},e.prototype._recordThanksPopTimeStamp=function(){var t=(new Date).getTime();PDKalien.localStorage.setItem("PopThanksTime",""+t)},e.prototype._isShouldPopThanks=function(){var t=this._getThanksPopTimeStamp();if(t){var e=(new Date).getDate(),n=new Date(t).getDate();if(n+1>e)return!1}return!0},e.prototype._initThanks=function(){PDKUtils.isInTimeSection("2017-11-23 00:00:00","2017-11-26 00:00:00",(new Date).getTime())&&this._isShouldPopThanks()&&(this._recordThanksPopTimeStamp(),PDKPanelActAndNotice.getInstance().showThanksgiving())},e.prototype.onSignInRep=function(t){return void pdkServer.removeEventListener(PDKEventNames.USER_DAY_SIGN_IN_REP,this.onSignInRep,this)},e.prototype.onHappyBeanConsumeRep=function(t){PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING),0==t.data.result&&PDKAlert.show(PDKlang.exchange_succ1)},e.prototype.onHappyBeanExchangeRep=function(t){PDKalien.Dispatcher.dispatch(PDKEventNames.HIDE_WAITING),0==t.data.result&&PDKAlert.show(PDKlang.exchange_succ2)},e.prototype.beforeShow=function(t,e){PDKalien.PopUpManager.removeAllPupUp(),PDKalien.Native.instance.isNative||(this.grpShare.visible=!1),this.newActBgImg.visible=!1,this._setIsHome(!0),this._bInLobby=!0,this._bShowSign=!1,this.rollMsg.visible=!0,this.redNumLabel.visible=!1,this.redCountBgImg.visible=!1,this.rollMsg.enableSendHorn(!1),this.rollMsg.setInLobby(!0),this._enableEvent(!0),this._resetRollMsgHorizontal(),this._initRedNum(),this._initTipWX(),PDKwebService.getHornRec(this._onHttpRecvHornRec.bind(this)),PDKwebService.loadLog(2,0),PDKalien.PDKEventManager.instance.enableOnObject(this),this.onMyUserInfoUpdate(),this.navigator.active(),pdkServer.addEventListener(PDKEventNames.USER_DAY_SIGN_IN_REP,this.onSignInRep,this),pdkServer.reqDownAppRewInfo(),PDKBagService.instance.refreshBagInfo();var n=this._sceneAnimationDuration;egret.Tween.get(this.grpTop).to({top:-this.grpTop.height}).wait(n).to({top:0},n,egret.Ease.cubicOut),egret.Tween.get(this.grpBottom).to({bottom:-this.grpBottom.height}).wait(n).to({bottom:0},n,egret.Ease.cubicOut),this.rollMsg.visible=!0,this.rollMsg.showLast(2),PDKalien.PDKSoundManager.instance.playMusic(PDKResNames.pdk_bgm),t&&(t.hasOwnProperty("jump2match")?"PDKPageMatchChannelSkin"!=this.navigator.currentPage.skinName.name&&this.navigator.push(PDKPageMatchChannel):t.hasOwnProperty("jump2pdk")&&(console.log("jump2pdk--------------->",this.navigator.currentPage.skinName.name),"PDKPageNormalChannelSkin"!=this.navigator.currentPage.skinName.name&&this.navigator.push(PDKPageNormalChannel)))},e.prototype.beforeHide=function(){this._bInLobby=!1,PDKEventManager.instance.disableOnObject(this),this.navigator.deactive();var t=this._sceneAnimationDuration;egret.Tween.get(this.grpTop).to({top:-this.grpTop.height},t,egret.Ease.cubicIn),egret.Tween.get(this.grpBottom).to({bottom:0},t,egret.Ease.cubicIn)},e.prototype._onClickTask=function(){var t=this._self;t.shouldShowTaskRed()&&(pdkServer.reqNewPlayerClickTask(),t.setNotShowTaskRed(),this._showTaskRedImg(!1)),PDKPanelDayTask.getInstance().show()},e.prototype._onClickNotice=function(){PDKPanelActAndNotice.getInstance().showNotice()},e.prototype._showDayTaskDefaultByOverNum=function(t){var e=!1;this.mOverTask_label.text=""+t,this.mOverTask_label.visible=e,this._showTaskRedImg(e)},e.prototype._onClickFRecharge=function(){this._showFRecharge()},e.prototype._showTaskRedImg=function(t){this.mOverTaskBg_img.visible=t},e.prototype._onClickSetting=function(){pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:3}):PDKPanelSetting.instance.show()},e.prototype._onClickSign=function(){this._showSignRew()},e.prototype._playFRechargeAni=function(){},e.prototype._initFRecharge=function(){var t=this.navigator.currentPage;if(t instanceof PDKPageChannels){var e=this._self,n=e.isNotBuyFRecharge(),i=e.isHadGetFRechargeRew();if(n){this.mFRechageBg_img.visible=!0;var o=this._isShouldPopBuyFRecharge();o&&this._recordBuyFRechargePopTimeStamp()}else this.mFRechageBg_img.visible=!1,!i&&null!=e.frechargerewardday&&!e.isFRechargeRewGetOver()}},e.prototype._getBuyFRechargePopTimeStamp=function(){var t=PDKalien.localStorage.getItem("PopFRTime");return Number(t)},e.prototype._recordBuyFRechargePopTimeStamp=function(){var t=(new Date).getTime();PDKalien.localStorage.setItem("PopFRTime",""+t)},e.prototype._isShouldPopBuyFRecharge=function(){var t=this._getBuyFRechargePopTimeStamp();if(t){var e=(new Date).getDate(),n=new Date(t).getDate();if(n+1>e)return!1}return!0},e.prototype._onFRechargeRewGetSucc=function(){this.mFRechageBg_img.visible=!1},e.prototype._onDayTaskRewGetSucc=function(){var t=this._self.getDayTaskOverCount();this._showDayTaskDefaultByOverNum(t)},e.prototype._onHornRecChange=function(t){this.rollMsg.show()},e.prototype._onHttpRecvHornRec=function(t){if(t&&t.total_items>0&&t.items){t.items.reverse();var e=this._self;e.cleanLocalHornRecByHttp();for(var n=0;n<t.total_items;++n)e.addHornTalkRecByHttp(t.items[n])}},e.prototype._onRecvGetActInfoRep=function(t){var e=t.data;e&&(1==e.optype?e.params?1==e.params[0]?PDKalien.Native.instance.isNative?this._showGetRewDownAppBtn():this._showDownAppBtn():2==e.params[0]?this._hideDownAppGroup():e.params[1]&&1==e.params[1]?PDKalien.Native.instance.isNative||this._showDownAppBtn():PDKalien.Native.instance.isNative?this._hideDownAppGroup():this._showDownAppBtn():PDKalien.Native.instance.isNative?this._hideDownAppGroup():this._showDownAppBtn():2==e.optype)},e.prototype._showGetRewDownAppBtn=function(){this.downAppGroup.visible=!1,this._onClickGetDownAppRew()},e.prototype._showDownAppBtn=function(){this.downAppGroup.visible=!0,this.downAppGroup.addClickListener(this._onClickDownApp,this),this._playLightOnTarget(),this._self.setNotLoginApp(!0),PDKalien.Dispatcher.dispatch(PDKEventNames.LOGINAPP_HASUPDATE)},e.prototype._hideDownAppGroup=function(){this.downAppGroup.visible=!1,this._self.setNotLoginApp(!1)},e.prototype._onClickDownApp=function(){PDKPanelActAndNotice.getInstance().showAPPAct()},e.prototype._onClickGetDownAppRew=function(){pdkServer.reqGetDownAppRew()},e.prototype._onRecvGetActRewRep=function(t){var e=t.data,n=null,i="center";0==e.result||null==e.result?(1==e.optype?(i="left",n="恭喜您获得以下奖励:\n1.钻石x32\n2.金豆x10000\n3.记牌器x7天\n4.表情免费次数x50\n5.每日在APP签到多得50%金豆",this._hideDownAppGroup()):2==e.optype||3==e.optype,PDKBagService.instance.refreshBagInfo()):1==e.result?n="活动不存在":2==e.result?n="任务未完成":3==e.result&&(n="奖励已领取"),n&&PDKPanelAlert.instance.show(n,0,null,i)},e.prototype._showWatchWX=function(t){this.publicWXGroup.visible=!1},e.prototype._onChangeCenterHornPos=function(){this.rollMsg.horizontalCenter=0},e.prototype._resetRollMsgHorizontal=function(){this.rollMsg.horizontalCenter=this._rollMsgHorizontal},e.prototype._playLightOnTarget=function(){var t=null;egret.Tween.removeTweens(this.downLight_img),(t=function(e,n,i,o,a,r){n.scaleX=i,n.scaleY=i,egret.Tween.get(n).to({scaleX:a,scaleY:a},800).wait(500).to({scaleX:i,scaleY:o},500).call(function(){t(e,n,i,o,a,r)})})(this,this.downLight_img,0,0,1.7,1.7)},e.prototype._onBagRefresh=function(){var t=PDKBagService.instance.getItemCountById(3);this.diamond.updateGold(t)},e.prototype.onJoinRep=function(t){var e=t.data;0==e.result&&(PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{roomID:e.roomid,personalgame:!0},PDKalien.sceneEffect.Fade),PDKJoinTable.instance.close())},e.prototype._onBuyReviveSucc=function(){console.log("_onBuyReviveSucc------------->购买复活礼包成功")},e.prototype._onNewPlayerDiamonRewInfoRep=function(t){var e=t.data;if(3==e.optype&&null==e.result){this._self.setHasGetNewDiamond();var n="恭喜您，成功领取新手钻石奖励:"+e.params+"钻";PDKAlert.show(n,0,function(){pdkServer.checkReconnect()})}},e.prototype.onBagInfoRep=function(t){var e=t.data;PDKBagService.instance.bagItemArray.forEach(function(t){t.count=0}),e.items.forEach(function(t){PDKBagService.instance.updateItemByData(t)}),PDKalien.Dispatcher.dispatch(PDKEventNames.BAG_INFO_REFRESH,!1)},e.prototype.onRechargeResultNotify=function(t){var e=t.data;if(0==e.result){var n=e.productid;this._rechargeTit[n]&&PDKAlert.show("购买"+this._rechargeTit[n]+"成功!")}},e.prototype.doReconnectToLobby=function(t){PDKalien.PopUpManager.removeAllPupUp(),PDKMainLogic.instance.refreshSelfInfo(),console.log("doReconnectToLobby---------->");var e=this.navigator.currentPage;if(e instanceof PDKPageChannels){e.setWillToGame(T_G_PDK);var n=e.getWillToGame();e.setWillToGame(0),n&&n>=1&&7>=n&&n==T_G_PDK&&((9e3==t.roomid||9001==t.roomid||9002==t.roomid||9003==t.roomid||9004==t.roomid||9005==t.roomid)&&(t.isReconnect=!0),PDKMainLogic.instance.checkPDKGoldNum(t))}else{var i=e.selectedRoom;if(!i)return;if(e.selectedRoom=null,2==i.roomType)pdkServer.getMatchSignUpInfo(i.matchId);else if(1==i.roomType){var o=0,a=void 0;if(1==i.roomFlag?(o=this._self.gold,a="金豆"):2==i.roomFlag&&(o=PDKBagService.instance.getItemCountById(3),a="钻石"),o>i.maxScore){var r=PDKGameConfig.getSuitableRoomConfig(this._self.gold,i.roomFlag);PDKAlert3.show("您拥有的"+a+"大于"+i.maxScore+"\n推荐进入"+r.name+"游戏",this.joinSpecialRoom.bind(this,r.roomID),"pdk_common_btn_enter_h",!0)}else o>=i.minScore?PDKalien.PDKSceneManager.show(PDKSceneNames.PLAY,{action:"quick_join",roomID:i.roomID},PDKalien.sceneEffect.Fade):1==i.roomFlag?PDKAlert.show(a+"不足"+i.minScore+" 是否前往商城购买 ？",1,function(t){"confirm"==t&&(pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:0}):PDKPanelExchange2.instance.show())}):2==i.roomFlag&&PDKMainLogic.instance.noDiamondGetNewDiamondRewOrBuyRevive(i.minScore,i.roomID)}}},e.prototype._initRedNum=function(){return},e.prototype._onUserRedCountChange=function(t){this._initRedNum()},e.prototype._hasClickWatchWX=function(){var t=PDKalien.localStorage.getItem("hasWatchWx");return t?!0:!1},e.prototype._saveHasClickWatchWX=function(){PDKalien.localStorage.setItem("hasWatchWx","1")},e.prototype._clearTipWX=function(){this.tipWxImg.visible=!1,egret.Tween.removeTweens(this.tipWxImg)},e.prototype._initTipWX=function(){this._clearTipWX(),this._hasClickWatchWX()||this._runTipWXAni()},e.prototype._runTipWXAni=function(){var t=this.tipWxImg.y;egret.Tween.get(this.tipWxImg).set({visible:!0,loop:!0}).to({y:t+10},400).to({y:t},400).call(this._runTipWXAni,this)},e}(PDKalien.SceneBase);__reflect(PDKSceneRoom.prototype,"PDKSceneRoom");var ScenePDKPlay=function(t){function e(){var e=t.call(this)||this;return e._askPlayCardCount=0,e._cache=[],e._seats=[],e.isPersonalGame=!1,e.remainCards=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e._curMatch9Play=1,e.showBoomEffect=!1,e._lastTap={},e.init(),e}return __extends(e,t),e.prototype.init=function(){this.skinName=scenes.ScenePDKPlaySkin,this._tfMatchPlayInfo=PDKalien.PDKUtils.parseColorTextFlow(PDKlang.match_play_info)},e.prototype.initGuessCardsView=function(){this.grpGuessOp.y=-250,this.grpGuessOp.visible=!1,this.grpGuessResult.visible=!1,this.guessWrong.visible=!1,this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1;for(var t=0;6>t;++t)this["GCGold"+t].visible=!1,this["GCGold"+t].goldNum=0,this.guesscount[t]=0;this.setGuessCardsMultiple([1.2,3,6,15,20,300]),this.lbGuessConsume.text="每次点击消耗"+this._roomInfo.guessbet+"金豆，可重复点击"},e.prototype.createChildren=function(){this.guesscount=[0,0,0,0,0,0],this.percentWidth=100,this.percentHeight=100,t.prototype.createChildren.call(this),this._redNormalNum=-1,this._askDoubleTimeOutId=0,this._isOverFive=!1,this._isShowWZAni=!1,this.recorderBubble.visible=!1,this.cdProgressBar.stop(),this.gamestarted=!1,this.isowner=!1,this._mySeat=this.seat0,this._mySeat.width=PDKalien.StageProxy.stage.stageWidth-20;for(var e=0;3>e;e++)this._seats[e]=this["seat"+e],this["labChange"+e].visible=!1;this.grpRedNotice.visible=!1,this.labWaiting.visible=!1,this.btnShare.visible=!1,this.grpBaseScore.visible=!1,this.redListDataArr=[0,0,0,0,0],this.redListDataProvider=new eui.ArrayCollection(this.redListDataArr),this.redList.itemRenderer=PDKRedPacketProcess,this.redList.dataProvider=this.redListDataProvider,pdkServer.isMatch||this.isPersonalGame||this.dragonHongBao||(this.dragonHongBao=new PDKDragonHongBao),this.dragonZhaDan=new PDKDragonGameZhaDan,this.dragonFeiJi=new PDKDragonGameFeiJi,this.dragonMyLianDui=new PDKDragonGameLianDui(!1),this.dragonRightLianDui=new PDKDragonGameLianDui(!1),this.dragonLeftLianDui=new PDKDragonGameLianDui(!0),this.dragonMyShunZi=new PDKDragonGameShunZi(!1),this.dragonRightShunZi=new PDKDragonGameShunZi(!1),this.dragonLeftShunZi=new PDKDragonGameShunZi(!0),this.dragonMySanDaiYi=new PDKDragonGameSanDaiYi(!1),this.dragonRightSanDaiYi=new PDKDragonGameSanDaiYi(!1),this.dragonLeftSanDaiYi=new PDKDragonGameSanDaiYi(!0),this.dragonMySanDaiEr=new PDKDragonGameSanDaiEr(!1),this.dragonRightSanDaiEr=new PDKDragonGameSanDaiEr(!1),this.dragonLeftSanDaiEr=new PDKDragonGameSanDaiEr(!0),this.dragonMySiDaiEr=new PDKDragonGameSiDaiEr(!1),this.dragonRightSiDaiEr=new PDKDragonGameSiDaiEr(!1),this.dragonLeftSiDaiEr=new PDKDragonGameSiDaiEr(!0),this._mySeat.userInfoView.currentState="my";var n=PDKalien.PDKEventManager.instance;n.registerOnObject(this,pdkServer,PDKEventNames.USER_RECONNECT_TABLE_REP,this.onReconnectTableRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_GIVE_UP_GAME_REP,this.onGiveUpGameRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_ALMS_REP,this.onAlmsResponse,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_QUICK_JOIN_RESPONSE,this.onQuickJoinResponse,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_USER_INFO_IN_GAME_REP,this.onUserInfoInGameResponse,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_GAME_START_NTF,this.onGameStart,this,1e3),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_RECONNECT_REP,this.onReconnectRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_ADD_CARD,this.onAddCard,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_USE_CARD_NTF,this.onUseCard,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_SET_CARDS,this.onSetCards,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_ASK_MASTER,this.onAskMaster,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_SET_SCORE,this.onSetScore,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_SHOW_CARD,this.onShowCard,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_TABLE_INFO,this.onTableInfo,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_USER_ONLINE,this._onUserOnline,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_USER_OFFLINE,this._onUserOffline,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.SHOW_LOTTERY,this.showLaba,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_GIVECARDS,this.onPdkGiveCards,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_OUTCARD,this.onPdkOutcard,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_READY,this.onPdkReady,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_END,this.onPdkEnd,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_CARD_HOLDER,this.onPdkCardHolder,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_STC_PDK_RECONNECT,this.onPdkReconnect,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_GAME_END,this.onGameEnd,this,1e3),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_OPERATE_REP,this.onOperateRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_OPERATE_REP,this.onUserOperateRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_UPDATE_GAME_INFO,this.onUpdateGameInfo,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_ENTER_TABLE,this.onEnterTable,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_LEAVE_TABLE,this.onLeaveTable,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_ASK_READY,this.onAskReady,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_GET_READY_REP,this.onGetReadyRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_FRESH_MAN_REDCOIN_LOTTERY_CHANCEGOT,this.onFreshManRedcoinLotteryChanceGot,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this),n.registerOnObject(this,this.buttonBar,PDKEventNames.BUTTON_BAR_TAP,this.onButtonBarTap,this),n.registerOnObject(this,this.grpButton,egret.TouchEvent.TOUCH_TAP,this.onGrpButtonTap,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.SELECT_CARDS,this.onSelectCards,this),n.registerOnObject(this,this.grpBg,egret.TouchEvent.TOUCH_TAP,this.onTap,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.SHOW_GAME_EFFECT,this.onShowGameEffect,this),n.registerOnObject(this,pdkServer,PDKEventNames.QUIT_PGAME_REP,this.onQuitRoomRep,this),n.registerOnObject(this,this.seat0.userInfoView.gold,egret.TouchEvent.TOUCH_TAP,this._onClickGold,this),n.registerOnObject(this,this.seat0.userInfoView.diamond,egret.TouchEvent.TOUCH_TAP,this._onClickDiamond,this),n.registerOnObject(this,pdkServer,PDKEventNames.GAME_DISSOLVE,this.onGameDissolve,this),n.registerOnObject(this,pdkServer,PDKEventNames.START_PGAME_REP,this.onStartGameRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.QUERY_ROOMINFO_REP,this.onPGameRoomInfoRep,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_DiamondGame_REP,this.onRedNormalMoneyInfoRep,this),n.registerOnObject(this,this.btnShare,egret.TouchEvent.TOUCH_TAP,this.onShare,this),n.registerOnObject(this,this.btnStart,egret.TouchEvent.TOUCH_TAP,this.onStart,this),n.registerOnObject(this,this._mySeat.redBgImg,egret.TouchEvent.TOUCH_TAP,this.onGrpRedcoinClick,this),n.registerOnObject(this,this._mySeat.redExchangeImg,egret.TouchEvent.TOUCH_TAP,this._onClickExchageRed,this),n.registerOnObject(this,this.grpGuessCards,egret.TouchEvent.TOUCH_TAP,this.onCloseGrpGuessOp,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.MY_USER_INFO_UPDATE,this.myUserinfoUpdate,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.USER_RED_COUNT_CHANGE,this._onUserRedCountChange,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.HORN_TALK_RECORDS_CHANGE,this._onHornRecChange,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BAG_INFO_REFRESH,this._onBagRefresh,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.CLOSE_REVIVE_PANEL,this._onCloseRevivePanel,this),n.registerOnObject(this,PDKalien.Dispatcher,PDKEventNames.BUY_REVIVE_SUCC,this._onBuyReviveSucc,this),n.registerOnObject(this,pdkServer,PDKEventNames.USER_MatchOperate_REP,this._onRecvMatchOperateRep,this),this._mySeat.grpRecorder.visible=!1,this.grpGuessOp.y=-250,this.grpGuessOp.visible=!1,this.grpGuessResult.visible=!1,this.guessWrong.visible=!1,this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1;for(var i=0;6>i;++i)this["GCGold"+i].visible=!1,this["GCGold"+i].goldNum=0,n.registerOnObject(this,this["guess_option"+i],egret.TouchEvent.TOUCH_TAP,this.onGuessOptionClick,this);this.btnRecord.visible=!0},e.prototype.setBeforeWincnt=function(){if(!pdkServer.isMatch&&!pdkServer.isPersonalGame&&(this.beforewincnt=0,PDKMainLogic.instance.selfData.wincnt&&PDKMainLogic.instance.selfData.wincnt.length))for(var t=0;t<PDKMainLogic.instance.selfData.wincnt.length;t++)if(PDKMainLogic.instance.selfData.wincnt[t].roomid==this._roomInfo.roomID){this.beforewincnt=PDKMainLogic.instance.selfData.wincnt[t].cnt;break}},e.prototype._onUserOnline=function(t){var e=t.data;if(e&&e.seatid){var n=this.getSeatById(e.seatid);n&&n.setUserOffline(!1)}},e.prototype._onUserOffline=function(t){var e=t.data;if(e&&e.uid){var n=this.getSeatByUId(e.uid);n&&n.setUserOffline(!0)}},e.prototype._initGeneralHeadImgTouch=function(t){this.seat1.setHeadTouch(t),this.seat2.setHeadTouch(t),this._mySeat.setHeadTouch(t)},e.prototype._onPlayBrowInfo=function(t,e,n){this.getSeatById(t),this.getSeatById(e);return},e.prototype.recorderBubbleAnimate=function(){egret.Tween.removeTweens(this.recorderBubble),this.recorderBubbleAnimateReal()},e.prototype.recorderBubbleAnimateReal=function(){9e3!=this._roomInfo.roomID&&9001!=this._roomInfo.roomID&&9002!=this._roomInfo.roomID&&9003!=this._roomInfo.roomID&&9004!=this._roomInfo.roomID&&9005!=this._roomInfo.roomID&&egret.Tween.get(this.recorderBubble).set({visible:!0,loop:!0}).to({y:82},446).to({y:72},446).call(this.recorderBubbleAnimateReal,this)},e.prototype.refreshCardsRecorderAbout=function(){if(9e3!=this._roomInfo.roomID&&9001!=this._roomInfo.roomID&&9002!=this._roomInfo.roomID&&9003!=this._roomInfo.roomID&&9004!=this._roomInfo.roomID&&9005!=this._roomInfo.roomID){var t=PDKMainLogic.instance.selfData,e=egret.localStorage.getItem("cardsrecorderexpirenotice");t.recorderfirstrewardgot?t.cardsRecorder.length<1||t.cardsRecorder[6]<=0?(egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1,e||(this.recorderBubble.source="pdk_play_recorder_outofdate",this.recorderBubble.visible=!1,this.recorderBubbleAnimate()),this._mySeat.grpRecorder.visible=!1):(egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1):(this.recorderBubble.source="pdk_play_recorder_gift",this.recorderBubbleAnimate(),this._mySeat.grpRecorder.visible=!1)}},e.prototype._showRecorder=function(t){this._mySeat.grpRecorder.visible=!1},e.prototype.myUserinfoUpdate=function(t){var e=PDKMainLogic.instance.selfData;e.hasRecorder()&&(this.recorderBubble.visible&&(egret.Tween.removeTweens(this.recorderBubble),this._showRecorder(!1),"pdk_play_recorder_gift"==this.recorderBubble.source&&e.recorderfirstrewardgot&&PDKImgToast.instance.show(this,"领取成功"),this._showRecorder(!0),egret.localStorage.setItem("opencardsrecorder","1")),(!this.beforerecorderTime||this.beforerecorderTime<=0)&&pdkServer.playing&&pdkServer.sendPdkCardHolder()),this.refreshCardsRecorderAbout(),this.updateRedCoinInfo(),this._mySeat.userInfoView.updateGold(e.gold),this.setRedProcess()},e.prototype.switchRecorder=function(t){var e=PDKMainLogic.instance.selfData;e.recorderfirstrewardgot&&1==e.recorderfirstrewardgot?e.hasRecorder()?(this._mySeat.grpRecorder.visible=!this._mySeat.grpRecorder.visible,this._mySeat.grpRecorder.visible?(egret.localStorage.setItem("opencardsrecorder","1"),pdkServer.playing&&pdkServer.sendPdkCardHolder()):egret.localStorage.removeItem("opencardsrecorder")):PDKPanelBuyRecorder.instance.show():pdkServer.getCardsRecorderReward(),"pdk_play_recorder_outofdate"==this.recorderBubble.source&&this.recorderBubble.visible&&(egret.localStorage.setItem("cardsrecorderexpirenotice","1"),egret.Tween.removeTweens(this.recorderBubble),this.recorderBubble.visible=!1)},e.prototype.showGuessView=function(){egret.Tween.get(this.grpGuessOp).set({visible:!0,x:0,y:-250}).to({x:0,y:0},146),this.grpGuessCards.touchEnabled=!0},e.prototype.onBtnGuessClick=function(t){this.grpGuessOp.visible?this.onCloseGrpGuessOp(null):this.showGuessView()},e.prototype.onGuessOptionClick=function(t){var e=Number(t.currentTarget.name);this.guesscount[e]>=20?(PDKImgToast.instance.show(this,PDKlang.guessCardsNotice[1]),PDKImgToast.instance.enableTouch(!1)):(pdkServer.reqUserGuessNextCard(this._roomInfo.roomID,e+1),t.stopImmediatePropagation())},e.prototype._checkHasRedCanExchange=function(){var t=!1,e=PDKMainLogic.instance.selfData,n=PDKGameConfig.exchangeConfig.filter(function(t){if(1==t.goodsid){if(t.first){var n=e.rcminexcexpiretime,i=(new Date).getTime(),o=e.rcminexcchanceused;return 1e3*n>i&&!o?!0:!1}return!0}return!1});n.sort(function(t,e){return t.amount-e.amount});for(var i=Math.ceil(e.redcoin)/100,o=n.length,a=0;a<n.length;++a)if(n[a].amount>i){o=a;break}return o>0&&(t=!0),t},e.prototype.updateRedCoinInfo=function(){var t=PDKMainLogic.instance.selfData,e=PDKGameConfig.exchangeConfig.filter(function(e){if(4==e.goodsid){if(e.first){var n=t.rcminexcexpiretime,i=(new Date).getTime(),o=t.rcminexcchanceused;return 1e3*n>i&&!o?!0:!1}return!0}return!1});e.sort(function(t,e){return t.amount-e.amount});for(var n=Math.ceil(t.redcoin)/100,i=e.length,o=0;o<e.length;++o)if(e[o].amount>n){i=o;break}0==i?(this.grprn2.visible=!1,this.grprn1.visible=!0,this.lbremain1.text=""+Math.floor(100*e[i].amount-100*n)/100,this.lbrmb1.text=e[i].amount):i>0&&i<=e.length&&(this.grprn2.visible=!0,this.grprn1.visible=!1,this.lbrmb2.text=e[i-1].amount),this._mySeat.setRedcoin(null==n?"0.00":PDKUtils.exchangeRatio(n,!0),!0)},e.prototype._onClickExchageRed=function(){pdkServer._isInDDZ?this.openDDZShop(2):PDKPanelExchange2.instance.show(2)},e.prototype._shouldShowRedNotice=function(){var t=PDKalien.localStorage.getItem("redNoticeShowTime");t||(t="0");var e=parseInt(t);3>e&&(this._showExchangeRedAni(),e++,PDKalien.localStorage.setItem("redNoticeShowTime",e+""))},e.prototype._showExchangeRedAni=function(){this.grpRedNotice.visible=!1},e.prototype.onGrpRedcoinClick=function(t){return this._checkHasRedCanExchange()?void(pdkServer._isInDDZ?this.openDDZShop(2):PDKPanelExchange2.instance.show(2)):void this._showExchangeRedAni()},e.prototype.onGameDissolve=function(t){var e=t.data;if(PDKPanelPlayerInfo.remove(),e.players&&e.players.length>0){for(var n=0;n<e.players.length;++n)e.players[n].nickname=PDKBase64.decode(e.players[n].nickname);e.quitPlayer&&(e.quitPlayer=PDKBase64.decode(e.quitPlayer),e.quitPlayer.length>8&&(e.quitPlayer=e.quitPlayer.substring(0,8))),PDKPersonalDetail.instance.show(e.players,this.onAlertResult.bind(this,0),!0,e.quitPlayer)}else 2==e.reason&&PDKAlert.show("房主退出，牌局解散",0,this.onAlertResult.bind(this,0))},e.prototype.onQuitRoomRep=function(t){var e=t.data;if(0==e.result)if(e.uid==pdkServer.uid)PDKMainLogic.backToRoomScene();else if(pdkServer.playing){var n=this.getSeatByUId(e.uid);n&&n.setQuitFlagVisible(!0)}},e.prototype.onPGameRoomInfoRep=function(t){var e=t.data;this.setPGameView(e)},e.prototype.setStartPgameBtnVisible=function(t){this.btnStart.visible=t,this.imgStart.visible=t},e.prototype.onStartGameRep=function(t){var e=t.data;0!=e.result?PDKPanelAlert.instance.show("错误编号"+e.result,0):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!1,this.gamestarted=!0)},e.prototype.onCloseGrpGuessOp=function(t){egret.Tween.get(this.grpGuessOp).set({visible:!0}).to({x:0,y:-250,visible:!1},146),this.grpGuessCards.touchEnabled=!1},e.prototype._justSetShareParams=function(){PDKWxHelper.share(1,function(t){},[this.total_round,this.lbLimit.text,this.roomid])},e.prototype.onShare=function(t){this._justSetShareParams(),PDKalien.Native.instance.isNative?PDKWxHelper.shareForNative(1,null,[this.total_round,this.lbLimit.text,this.roomid]):PDKPanelShare.instance.sendGameToFriend()},e.prototype.onStart=function(t){pdkServer.StartPGameReq(this.roomid)},e.prototype.addListeners=function(){pdkServer.isMatch&&PDKMatchService.instance.addEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),PDKalien.PDKEventManager.instance.enableOnObject(this),PDKalien.Dispatcher.addEventListener(PDKEventNames.SHOW_PAYCHAT,this.showLaba,this),pdkServer.addEventListener(PDKEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this),pdkServer.addEventListener(PDKEventNames.USER_LOTTERY_RED_COIN_REP,this.onLotteryRedCoinRep,this)},e.prototype.removeListeners=function(){pdkServer.isMatch&&PDKMatchService.instance.removeEventListener(PDKEventNames.USER_MATCH_INFO_NTF,this.onMatchInfoNtf,this),PDKalien.PDKEventManager.instance.disableOnObject(this),PDKalien.Dispatcher.removeEventListener(PDKEventNames.SHOW_PAYCHAT,this.showLaba,this),pdkServer.removeEventListener(PDKEventNames.USER_BAG_INFO_REP,this.onBagInfoRep,this)},e.prototype.onBagInfoRep=function(t){var e=t.data;PDKBagService.instance.bagItemArray.forEach(function(t){t.count=0}),e.items.forEach(function(t){PDKBagService.instance.updateItemByData(t)}),PDKalien.Dispatcher.dispatch(PDKEventNames.BAG_INFO_REFRESH,!1)},e.prototype.showLaba=function(t){this.rollMsg.show()},e.prototype.onTap=function(t){var e=this._lastTap;(new Date).valueOf()-e.time<200&&PDKalien.MathUtils.distance(e.x,e.y,t.stageX,t.stageY)<50&&(this.doubleTap(t),e=this._lastTap={}),e.x=t.stageX,e.y=t.stageY,e.time=(new Date).valueOf()
},e.prototype.doubleTap=function(t){pdkServer.playing&&this._mySeat.cancelSelect()},e.prototype.initData=function(t){var e=this;void 0===t&&(t=!1),this.isPersonalGame?this._seats.forEach(function(t){t.initData({isMatch:!1,matchType:1})}):this._seats.forEach(function(n){var i={isMatch:pdkServer.isMatch,matchType:pdkServer.roomInfo.matchType,cleanUserInfo:!0,roomType:pdkServer.roomInfo.roomType,isSelf:!1};n==e._mySeat&&(i.isSelf=!0),t?(n==e._mySeat&&(i.cleanUserInfo=!1),n.initData(i)):n.initData(i)}),pdkServer.playing=!1,this.buttonBar.switchState("hidden"),this.btnContinue.visible=!1,this.btnHang.enabled=!1,this.labWaiting.visible=!1,this.showBoomEffect=!1,this.masterCards.initData();for(var n=0;3>n;++n)this._seats[n].setOwnerFlagVisible(!1),this._seats[n].setQuitFlagVisible(!1),this["labChange"+n].visible=!1;this.flygoldindex=0},e.prototype.setGuessCardsMultiple=function(t){for(var e=0;e<t.length;++e)this["lbguess"+(e+1)].text="(赢"+t[e]+"倍)"},e.prototype._clearRecorderInfo=function(t){var e=t,n=t;4==t&&(n=1),this.remainCards=[e,e,e,e,e,e,e,e,e,e,e,e,e,n,n];for(var i=0;i<this.remainCards.length;++i)this._mySeat["lb"+(i+1)].text=this.remainCards[i],this._mySeat["lb"+(i+1)].textColor=10329501,4==e&&(this._mySeat["lb"+(i+1)].textColor=15169538);1==n&&(this._mySeat.lb14.textColor=5341696,this._mySeat.lb15.textColor=5341696)},e.prototype._setRecorderCardAndNum=function(t,e){var n=e;if(!(0>t||t>14||0>n)){0>n&&(n=0);var i=t,o=t+1;this.remainCards[i]=n,this._mySeat["lb"+o].text=n,4==n?this._mySeat["lb"+o].textColor=15169538:0==n?this._mySeat["lb"+o].textColor=10329501:this._mySeat["lb"+o].textColor=5341696}},e.prototype._subOneRecorderByCard=function(t){if(!(10>t||t>150)){var e=""+t,n=0;n=100>t?Number(e.substr(0,1)):Number(e.substr(0,2));var i=-1+n,o=this.remainCards[i];o+=-1,0>o&&(o=0),this._setRecorderCardAndNum(i,o)}},e.prototype._updateRecorderByCards=function(t){if(PDKMainLogic.instance.selfData.hasRecorder()&&t&&t.length>0)for(var e=0;e<t.length;++e)this._subOneRecorderByCard(t[e])},e.prototype._setRecorderInfoByServerCard=function(t){if(t&&PDKMainLogic.instance.selfData.hasRecorder()){this._clearRecorderInfo(4);for(var e=0;e<t.length;++e)this._subOneRecorderByCard(t[e])}},e.prototype._setRecorderInfoByServerNum=function(t){if(t&&15==t.length&&PDKMainLogic.instance.selfData.hasRecorder()){this._clearRecorderInfo(0);for(var e=0;e<t.length;++e)this._setRecorderCardAndNum(e,t[e])}},e.prototype.newGame=function(){this._isOverFive=!1,this._isShowWZAni=!1,this.labWaiting.visible=!1,this._seats.forEach(function(t){t.reset(),t.setReady(!1)}),this._clearRecorderInfo(0);for(var t=0;3>t;t++)this["labChange"+t].visible=!1;pdkServer.playing=!0,this.btnContinue.visible=!1,this.btnHang.selected=!1,this.btnHang.enabled=!0,this.cdProgressBar.stop(),this.masterCards.initData(),pdkServer.roomInfo&&pdkServer.roomInfo.baseScore&&this.masterCards.updateScore(pdkServer.roomInfo.baseScore||0,1),PDKalien.PopUpManager.instance.removeAllPupUp(),pdkServer.isMatch&&PDKPanelMatchWaitingInner.instance.close(),egret.clearTimeout(this._timerClean),this._showResultTimeOutId&&egret.clearTimeout(this._showResultTimeOutId),this._showResultTimeOutId1&&egret.clearTimeout(this._showResultTimeOutId1),pdkServer.isMatch&&PDKMainLogic.instance.alms(),pdkServer.isMatch||pdkServer.isPersonalGame||this.initGuessCardsView()},e.prototype.getRedCoinLackCnt=function(){var t=0;if(PDKMainLogic.instance.selfData.wincnt&&PDKMainLogic.instance.selfData.wincnt.length)for(var e=0;e<PDKMainLogic.instance.selfData.wincnt.length;e++)if(PDKMainLogic.instance.selfData.wincnt[e].roomid==this._roomInfo.roomID){var n=PDKMainLogic.instance.selfData.wincnt[e].cnt;n||(n=0),t=n%5;break}return 5-t},e.prototype.testFunction=function(){this.recorderBubble.visible=!0,this.recorderBubble.source="pdk_play_recorder_gift",this.myUserinfoUpdate(null)},e.prototype._onClickChat=function(){},e.prototype._closeChatList=function(){},e.prototype.onGrpButtonTap=function(t){switch(t.target.name){case"chat":return void this._onClickChat();case"setting":pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:3}):PDKPanelSetting.instance.show();break;case"help":if(9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID){var e=9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID;PDKPanelRuleTip.getInstance().show(e)}else this._showRedNormalRule();PDKalien.localStorage.setItem("gameRuleFlag","1"),this.ruleReadedFlag.visible=!1;break;case"hang":pdkServer.hang(this.btnHang.selected);break;case"recorder":this.switchRecorder(null);break;case"back":pdkServer.isMatch?PDKAlert.show(PDKlang.match_cancel_alert,1,this.onAlertResult.bind(this,2)):this.isPersonalGame?PDKAlert.show("确认离开房间？",1,this.onAlertResult.bind(this,2)):this._showPlayGameGetCoin();break;case"continue":this._onClickReady();break;case"guessCards":this.grpGuessOp.visible?this.onCloseGrpGuessOp(null):(egret.Tween.get(this.grpGuessOp).set({visible:!0,x:0,y:-250}).to({x:0,y:0},146),this.grpGuessCards.touchEnabled=!0)}},e.prototype._showPlayGameGetCoin=function(){var t="确认离开房间？";PDKAlert.show(t,1,this.onAlertResult.bind(this,0))},e.prototype.sendQuickJoinWithFlag=function(){this._onSendQuickJoin();var t=2e3;1001==this.roomid?t=1200:1002==this.roomid?t=1600:1002==this.roomid&&(t=2e3),t=Math.ceil(Math.random()*t+200),this._timerDelayJoin=egret.setTimeout(function(){pdkServer.quickJoinWithFlag()},this,t)},e.prototype.sendQuickJoin=function(){this._onSendQuickJoin();var t=2e3;1001==this.roomid?t=1200:1002==this.roomid?t=1600:1002==this.roomid&&(t=2e3),t=Math.ceil(Math.random()*t+200),this._timerDelayJoin=egret.setTimeout(function(){pdkServer.quickJoin()},this,t)},e.prototype.test=function(){egret.setTimeout(this.delayShowChangeEffect.bind(this,0,100),this,1e3),egret.setTimeout(this.delayShowChangeEffect.bind(this,1,-100),this,1e3)},e.prototype.onButtonBarTap=function(t){switch(t.data.action){case"cancelSelect":this._mySeat.cancelSelect();break;case"pass":pdkServer.sendPdkOutcard([]),this._mySeat.cancelSelect();break;case"use":var e=this._mySeat.getSelectPokerIds();console.log("==============================>>> select plker ids = "+JSON.stringify(e)),pdkServer.sendPdkOutcard(e);break;case"setScore":pdkServer.answerMaster(t.data.score),this.buttonBar.switchState("hidden");break;case"help":this._mySeat.help()||(pdkServer.sendPdkOutcard([]),this._mySeat.cancelSelect(),this._mySeat.showNoMatchCards())}},e.prototype.onSelectCards=function(t){void 0===t&&(t=null),t&&(console.log(t.data),this._selectCardsCount=t.data.count),("useCard"==this.buttonBar.currentState||"useCard2"==this.buttonBar.currentState)&&this.buttonBar.modifyButton("cancelSelect",this._selectCardsCount>0),t&&(this._canUse=t.data.canUse),("useCard"==this.buttonBar.currentState||"useCard2"==this.buttonBar.currentState)&&this.buttonBar.modifyButton("use",this._canUse)},e.prototype.onBackResult=function(t){switch(t){case"confirm":pdkServer.giveUpGame(),PDKMainLogic.backToRoomScene();break;case"cancel":}},e.prototype.onAlertResult=function(t,e){switch(e){case"confirm":switch(t){case 0:if(1==pdkServer._isInDDZ)return pdkServer.isMatch||pdkServer.isPersonalGame||pdkServer.playing||(!this._roomInfo.style||"diamond"!=this._roomInfo.style&&"queue"!=this._roomInfo.style?pdkServer.giveUpGame():pdkServer.QuitWaitingQueueReq()),void this.quitGame();pdkServer.isMatch||pdkServer.isPersonalGame||pdkServer.playing||(5001==this._roomInfo.roomID||1003==this._roomInfo.roomID||this._roomInfo.style&&("diamond"==this._roomInfo.style||"queue"==this._roomInfo.style)?pdkServer.QuitWaitingQueueReq():pdkServer.giveUpGame()),PDKMainLogic.backToRoomScene();break;case 1:pdkServer.isMatch||pdkServer.isPersonalGame||(this.sendQuickJoin(),this.initData());break;case 2:this.isPersonalGame?pdkServer.QuitPGameReq(this.roomid):pdkServer.isMatch?100==this._roomInfo.matchId:pdkServer.playing&&pdkServer.giveUpGame(),pdkServer._isInDDZ?this.quitGame():PDKMainLogic.backToRoomScene();break;case 3:pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show();break;case 4:this.quitGame()}break;case"cancel":}},e.prototype.quitGame=function(){PDKSceneManager.show(PDKSceneNames.ROOM,{jump2pdk:!0},PDKalien.sceneEffect.Fade)},e.prototype.openDDZShop=function(t){void 0===t&&(t=0),pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:t})},e.prototype._onRecvMatchOperateRep=function(t){var e=t.data;if(e){if(1==e.optype)if(0==e.result)e.params&&e.params.length>=1&&this._mySeat.userInfoView.updateGold(e.params[0]),PDKPanelMatchRevive.remove(),this._clearMatchReviveInterval(),egret.clearTimeout(this._timerClean),this.setlabWaiting("复活成功,正在为您匹配对手,请稍等...");else{var n=(o={},o[3]="次数达到上限",o[4]="不支持复活",o[5]="金豆不足",o[7]="超时未复活",o[8]="决赛已经开始",o),i="复活失败";n[e.result]&&(i=n[e.result]),PDKAlert.show(i,0,function(){this._onMatchReviveTimeOut(e)}.bind(this))}var o}},e.prototype.onQuickJoinResponse=function(t){var e=t.data;switch(e.result){case 0:console.log("join success."),this.hideDeskCards();break;case 1:console.log("join failed.");break;case 2:9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?PDKMainLogic.instance.noDiamondGetNewDiamondRewOrBuyRevive(this._roomInfo.minScore,this._roomInfo.roomID):(this.initData(!0),PDKAlert.show("金豆不足，是否前往商城购买 ？",1,function(t){"confirm"==t&&(1==pdkServer._isInDDZ?pdkServer.ddzDispatchEvent(1,"",{type:2,shopFlag:0}):PDKPanelExchange2.instance.show(0))}),this.btnContinue.visible=!0);break;case 3:PDKAlert.show(PDKlang.no_more_desk,0,this.onAlertResult.bind(this,0));break;case 4:console.log("join failed.");break;case 7:PDKAlert.show("拥有金豆超过房间上限",0,function(){PDKMainLogic.backToRoomScene()})}},e.prototype.hideDeskCards=function(){this._seats.forEach(function(t){t.cleanDesk()})},e.prototype.onReconnectTableRep=function(t){var e=t.data;0!=e.result&&(1==e.result||2==e.result)&&PDKMainLogic.backToRoomScene()},e.prototype.onGiveUpGameRep=function(t){var e=t.data;switch(e.result){case 0:console.log("give up game success."),PDKMainLogic.backToRoomScene({roomInfo:this._roomInfo});break;case 1:console.log("give up game failed.")}},e.prototype.onUserInfoInGameResponse=function(t){var e=t.data,n=PDKMainLogic.instance.selfData;e.uid==n.uid&&e.gameprop>=0&&n.setFreeBrowCount(e.gameprop);var i=this.getSeatByUId(e.uid);i&&(e.offline?i.setUserOffline(!0):i.setUserOffline(!1),9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?(i.updateUserInfoData(e),i==this._mySeat?(i.userInfoView.updateGold(e.gold),e.diamond&&this._setDiamondUI(e.diamond)):e.diamond&&i.userInfoView.updateGold(e.diamond)):pdkServer.isMatch?(e.nickname="参赛玩家",i.isMaster?e.imageid="pdk_icon_head9":e.imageid="pdk_icon_head10",i==this._mySeat?(i.userInfoData.initData(e),i.userInfoView.updateGold(e.gold),i.userInfoView.updateHeadImage(e.imageid)):i.updateUserInfoData(e)):(this.setRedProcess(),i.updateUserInfoData(e)))},e.prototype.redNormalSubDiamond=function(){},e.prototype.onGameStart=function(t){var e=this;console.log("----------game start----------");var n=t.data;this.beforeGameStart(),this._reconnectIn=!1,this._showMatch9WaitOtherPlayerOver(!1),this.playersSeatDown(n.playerinfo),this._cache.length>0&&(this._cache.forEach(function(t){t.method.call(e)}),this._cache.splice(0)),this.isPersonalGame?this.lbRound.text=String(this.cur_round)+"/"+String(this.total_round):pdkServer.isMatch||this.isPersonalGame||(this.setRedCoin(),this.setBeforeWincnt()),n.cardsrecorderremain&&PDKMainLogic.instance.selfData.cardsRecorder&&(PDKMainLogic.instance.selfData.cardsRecorder[6]=n.cardsrecorderremain,this.refreshCardsRecorderAbout()),this._showNextMasterCardGuessBtn(!1)},e.prototype._shouldTipRedNormalRule=function(){var t=PDKalien.localStorage.getItem("redNormalRule");"1"!=t&&(this._showRedNormalRule(),PDKalien.localStorage.setItem("redNormalRule","1"))},e.prototype._shouldTipGameRule=function(){var t=PDKalien.localStorage.getItem("gameNormalRule");if("1"!=t&&5001!=this._roomInfo.roomID&&5101!=this._roomInfo.roomID){var e=3101==this._roomInfo.roomID||5101==this._roomInfo.roomID||3102==this._roomInfo.roomID;PDKPanelRuleTip.getInstance().show(e),PDKalien.localStorage.setItem("gameNormalRule","1")}},e.prototype._shouldShowRuleFlag=function(){var t=PDKalien.localStorage.getItem("gameRuleFlag");"1"!=t&&(this.ruleReadedFlag.visible=!0)},e.prototype.setRedCoin=function(){if(1!=PDKMainLogic.instance.selfData.freshmanredcoinsent){var t=PDKalien.localStorage.getItem("freshmanredcoinsent");"1"==t?this.showRedcoinDragon(!1):3006==this._roomInfo.roomID&&(pdkServer.startCache(),this.showRedcoinDragon(!0))}},e.prototype.onReconnectRep=function(t){var e=this;this.labWaiting.visible=!1;var n=t.data;this._reconnectIn=!0,this.beforeGameStart(),this.playersSeatDown(n.players),this._mySeat.addCards(n.params1,!this._reconnectIn),n.players.forEach(function(t){var n=e.getSeatById(t.seatid);if(n.setHang(1==t.params[1]),pdkServer.isMatch){var i={imageid:"pdk_icon_head10",nickname:"参赛玩家"};n.userInfoView.update(i)}1==t.params[2]&&n.setUserOffline(!0),2==t.params[3]&&n.showDoubleFlag(!0),e._mySeat.seatid!=n.seatid&&n.setCardCount(t.params[0])});var i=[],o=n.params2.length;if(n.params2[o-1]>0){for(var a=o-1;a>=o-3;a--)i.unshift(n.params2[a]);this.showMasterCards(i,!0)}if(null!=n.mastersid&&n.mastersid>=0){var r=this.getSeatById(n.mastersid);r.setMaster(!0,!1)}if(pdkServer.isMatch||this.isPersonalGame||(this.setBeforeWincnt(),this.setRedCoin()),pdkServer.hang(!1),n.params3)for(var s=0;s<n.params3.length;++s)n.params3[s]&&this.setGCGold(s,n.params3[s]);if(n.params4&&this._setRecorderInfoByServerNum(n.params4),this.autoOpenRecorder(),PDKBagService.instance.refreshBagInfo(),1==n.status||2==n.status){if(1==n.status){var h=new egret.Event("reconnect");h.data={seatid:n.cursid,time:n.time},this.onAskMaster(h)}else if(2==n.status){var c=-1,l=n.params2.slice(0,n.params2.length-3);if(n.params2.length>0){var p=this.getSeatById(n.presid);c=p.useCard(l,!1,!1)}l=PDKUtils.transformCards(l),this.onAskPlayCard({cardType:c,cardids:l,pseatid:n.presid,seatid:n.cursid,time:n.time})}}else{var d=n.params5[0];if(!d)return;var u=n.params5[1],_=this.getSeatById(d);_.setMaster(!0,!1),this.masterCards.updateScore(n.params5[0],u)}PDKMainLogic.instance.refreshSelfInfo()},e.prototype.showMasterCards=function(t,e){this.masterCards.showCards(t,e),this._seats.forEach(function(t){t.hideScore()})},e.prototype.playersSeatDown=function(t){var e=this;t.some(function(t){return t.uid==pdkServer.uid?(pdkServer.seatid=t.seatid,!0):void 0}),t.forEach(function(t){e.playerSeatDown(t)})},e.prototype.beforeGameStart=function(){this.newGame(),this._askPlayCardCount=0,pdkServer.isMatch&&this.updateMathTurnInfo()},e.prototype.onTableInfo=function(t){for(var e=t.data,n=0;n<e.players.length;++n)this.playerSeatDown(e.players[n])},e.prototype.onEnterTable=function(t){var e=t.data;this.playerSeatDown(e),this.hideDeskCards(),pdkServer.isPersonalGame&&this.setShareStart()},e.prototype.setlabWaiting=function(t){void 0===t&&(t=null),t?(this.labWaiting.text=t,this.labWaiting.visible=!0):this.labWaiting.visible=!1},e.prototype.setShareStart=function(){if(this.gamestarted)this.btnShare.visible=!1,this.setStartPgameBtnVisible(!1);else{var t=this.getPlayersAmount();t>=3?(this.btnShare.visible=!1,this.isowner?this.setStartPgameBtnVisible(!0):this.setlabWaiting("等待房主开始")):(this.setlabWaiting("房间ID:"+this.roomid),this.isowner&&this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0,this.setStartPgameBtnVisible(!1))}},e.prototype.onLeaveTable=function(t){var e=t.data;if(e.uid==pdkServer.uid)switch(e.reason){case 0:case 1:case 2:case 3:pdkServer.isMatch||pdkServer.isPersonalGame||this.playerStandUp(e.uid);break;case 4:}else this.playerStandUp(e.uid);this.isPersonalGame&&this.setShareStart()},e.prototype.onAskReady=function(t){var e=t.data;this.cdProgressBar.play(e.time)},e.prototype.onGetReadyRep=function(t){var e=t.data,n=this.getSeatById(e.seatid);n.userInfoData.uid==pdkServer.uid&&this.cdProgressBar.stop(),n.setReady(!0)},e.prototype.onAskMaster=function(t){var e=t.data;this._mySeat.seatid==e.seatid?this.buttonBar.switchState("askMaster",e.score):this.buttonBar.switchState("hidden");var n=this.getSeatById(e.seatid);n&&n.startCD(e.time)},e.prototype.autoOpenRecorder=function(){var t=egret.localStorage.getItem("opencardsrecorder"),e=PDKMainLogic.instance.selfData;e.hasRecorder()&&"1"==t&&this._showRecorder(!0)},e.prototype.onSetScore=function(t){var e=t.data,n=this.getSeatById(e.seatid);if(n&&(e.ismaster?(n.setMaster(e.ismaster,!this._reconnectIn),pdkServer.isMatch&&(e.imageid="pdk_icon_head9",e.nickname="参赛玩家",n==this._mySeat&&(e.uid=PDKMainLogic.instance.selfData.uid),n.userInfoView.update(e)),this.autoOpenRecorder()):this._mySeat.seatid==e.seatid&&this.buttonBar.switchState("hidden"),e.score>0&&this.masterCards.updateMultiple(e.score),n.stopCD(),n.showScore(e.ismaster?-1:e.score),e.ismaster&&!pdkServer.isPersonalGame&&!pdkServer.isMatch&&5001!=this._roomInfo.roomID&&5101!=this._roomInfo.roomID)){this._showDoubleNoDouble(!0),this.doubleCost_label.text="x"+this._roomInfo.doublediamond;var i=this._checkShowFailDouble();this._doubleRet=i,i.bShow?this._showFailDouble(!0,i.nReason):this._showFailDouble(!1),this._mySeat.startCD(5),this._clearAskDoubleTimeOut(),this._askDoubleTimeOutId=egret.setTimeout(this._onMyAskDoubleTimeOut,this,5e3)}},e.prototype._clearAskDoubleTimeOut=function(){0!=this._askDoubleTimeOutId&&egret.clearTimeout(this._askDoubleTimeOutId),this._askDoubleTimeOutId=0},e.prototype.onAddCard=function(t){var e=t.data;if(pdkServer.isMatch&&e.reshufflecnt&&e.reshufflecnt>0)for(var n=0;3>n;++n){var i=this.getSeatById(n+1);i.updateGold(-100,pdkServer.isMatch)}this._mySeat.cancelSelect(),this._setRecorderInfoByServerCard(e.cardids),pdkServer.playing?this.addCard(e):(this._cache.splice(0),this._cache.push({method:this.addCard.bind(this,e)}))},e.prototype.addCard=function(t){var e=this.getSeatById(t.seatid);e.cleanHand(),e.addCards(t.cardids,!0,!0),this.seat1.addCards([]),this.seat2.addCards([])},e.prototype.onUseCard=function(t){var e=t.data,n=this.getSeatById(e.seatid),i=-1;if(n&&(n.cleanDesk(),i=n.useCard(e.cardids),n.stopCD()),this._mySeat.seatid==e.seatid?(this.buttonBar.switchState("hidden"),this._mySeat.cancelSelect(),this._mySeat.hideNoMathCards(),this._mySeat.checkType([])):this._updateRecorderByCards(e.cardids),e.time&&e.cursid){var o=e.seatid;e.lastseatid==this._mySeat.seatid&&(o=0),e.lastcards=PDKUtils.transformCards(e.lastcards),this.onAskPlayCard({cardType:i,cardids:e.lastcards,pseatid:o,time:e.time,seatid:e.cursid})}},e.prototype.onSetCards=function(t){var e=t.data,n=this.getSeatById(e.seatid);n&&e.seatid!=pdkServer.seatid&&n.useCard(e.cardids,!0)},e.prototype.getGuessCardsType=function(t){if(!t||3!=t.length)return 0;t.sort(function(t,e){return t-e});var e=!0,n=!0,i=!1,o=!1,a=!1,r=!1;t.forEach(function(t,i){(140==t||150==t)&&(a=!0,n=e=!1),o||9!=Math.floor(t/10)&&10!=Math.floor(t/10)&&11!=Math.floor(t/10)||(o=!0),r||13!=Math.floor(t/10)||(r=!0)});for(var s=1;3>s;++s){Math.floor(t[s]/10);Math.floor(t[s]/10)==Math.floor(t[s-1]/10)&&(i=!0),a||(Math.floor(t[s]/10)-Math.floor(t[s-1]/10)!=1&&(e=!1),t[s]%10!=t[s-1]%10&&(n=!1))}return r&&e&&(e=!1),e||(1==Math.floor(t[0]/10)&&12==Math.floor(t[1]/10)&&13==Math.floor(t[2]/10)||1==Math.floor(t[0]/10)&&2==Math.floor(t[1]/10)&&13==Math.floor(t[2]/10))&&(e=!0),e&&n?6:e?5:n?4:a?3:i?2:o?1:0},e.prototype.setGCGold=function(t,e){0>t||t>5||!e||0>e||(++this.guesscount[t],this["GCGold"+t].goldNum+=e,this["GCGold"+t].visible=!0,this["GCGold"+t].setData(this["GCGold"+t].goldNum),this._mySeat.userInfoView.updateGold(PDKMainLogic.instance.selfData.gold),this._mySeat.userInfoView.avatar.setVipLevel(PDKMainLogic.instance.selfData.getCurVipLevel()))},e.prototype.hideGuessRight=function(){this.grpGuessRight.visible=!1,this.grpGRLight.visible=!1},e.prototype.goldfly=function(t,e,n,i,o){for(var a=this.flygoldindex;a<this.flygoldindex+5;++a)egret.setTimeout(this["flygold"+a].fly,this["flygold"+a],70*(a-this.flygoldindex),e,n,i,o,700);this.flygoldindex+=5,egret.setTimeout(this.hideGuessRight,this,2800)},e.prototype.playGuessRightAnimate=function(t,e){var n=this.getSeatById(t),i=n.getAvatarPos();if(n==this._mySeat)this.grpGuessRight.visible=!0,this.gwingold.text="x"+e,egret.Tween.get(this.gcgoldLight0).set({visible:!0,alpha:0,scaleX:.76,scaley:.55}).to({alpha:1,scaleX:3.16,scaley:1.6},146).to({alpha:0,scaleX:1.62,scaley:.22},292),egret.Tween.get(this.gcgoldLight1).set({visible:!0,alpha:0,scaleX:.76,scaley:.55}).wait(438).to({alpha:1,scaleX:3.16,scaley:1.6},146).to({alpha:0,scaleX:1.62,scaley:.22},292).call(this.goldfly,this,[n,this.grpGuessRight.x,this.grpGuessRight.y,i.x,i.y]);else{var o=this.localToGlobal(this.btnGuessCards.x,this.btnGuessCards.y);this.goldfly(n,o.x,o.y,i.x,i.y)}n&&(n!=this._mySeat?(n.playWinGoldAnimate(),this._roomInfo&&5001!=this._roomInfo.roomID&&!pdkServer.isMatch&&n.updateGold(e)):pdkServer.isMatch||n.updateGold(e))},e.prototype.playGuessWrongAnimate=function(){egret.Tween.get(this.guessWrong).set({visible:!0,alpha:0}).to({alpha:1},146).wait(1e3).to({alpha:0,visible:!1},1e3)},e.prototype._onServerBrowRep=function(t){if(null==t.result){if(t.params&&3==t.params.length){var e=t.params[0],n=t.params[1],i=t.params[2],o=PDKGameConfig.getBrowCfgById(i);if(o&&0==o.currency&&o.price&&e==this._mySeat.seatid){var a=PDKMainLogic.instance.selfData.getFreeBrowCount();a>0?PDKMainLogic.instance.selfData.addFreeBrowCount(-1):pdkServer.isMatch||this._mySeat.updateGold(-o.price,pdkServer.isMatch)}this._onPlayBrowInfo(e,n,i)}}else 3==t.result?(PDKImgToast.instance.show(this,PDKlang.browNoGold),PDKImgToast.instance.enableTouch(!1)):PDKLogUtil.info("_onServerBrowRep------------->error",t.result)},e.prototype._showGetDayShareRewSucc=function(){var t=PDKGameConfig,e=t.getShareRewCfg();if(e){var n=null,i=1,o="恭喜您分享成功获得以下奖励:\n";for(var a in e)n=t.getItemNameById(parseInt(a)),n&&(o+=i+"."+n+"x"+e[a]+"\n");PDKShareImageManager.instance.stop(!0,o)}},e.prototype.onUserOperateRep=function(t){var e=t.data;if(3==e.optype)null!=e.result?PDKImgToast.instance.show(this,PDKlang.guessCardsNotice[e.result-1]):this.setGCGold(e.params[0]-1,this._roomInfo.guessbet);else if(2==e.optype);else if(7==e.optype&&null==e.result){var n=PDKUtils.parseGoodsString(e.str),i=PDKUtils.goodsListToString(n);PDKAlert.show(i)}},e.prototype.onOperateRep=function(t){var e=t.data;if(4==e.optype)e.params&&e.params[0]?this.playGuessRightAnimate(e.seatid,e.params[0]):this.playGuessWrongAnimate();else if(5==e.optype)this._onServerBrowRep(e);else if(6==e.optype)this.beforerecorderTime=PDKMainLogic.instance.selfData.cardsRecorder[6],e.params&&(this._showRecorder(!0),this._setRecorderInfoByServerNum(e.params));else if(7==e.optype)this._onServerDoubleRep(e);else{var n=e.optype||0,i=this.getSeatById(e.seatid);i.setHang(1==n),this._mySeat.seatid==e.seatid&&(1==n&&this.double_group.visible&&this._onMyAskDoubleTimeOut(),this.btnHang.selected=1==n)}},e.prototype.setGuessCardsType=function(t){this.grpGuessResult.visible=!0,this.guessCardsType.source="guesscards_"+(925+t),this.gcardtype.source="guesscards_"+(925+t)},e.prototype.onShowCard=function(t){var e=t.data,n=this.getSeatById(e.seatid);if(pdkServer.playing){var i=this.getGuessCardsType(e.cardids);i>0&&this.setGuessCardsType(i),this.showMasterCards(e.cardids,this._reconnectIn),n.addCards(e.cardids),n==this._mySeat&&this._updateRecorderByCards(e.cardids),this._showExchangeRedAni()}},e.prototype.onAskPlayCard=function(t){var e=t.cardType,n=this.getSeatById(t.seatid);if(n){n.cleanDesk();var i=t.time,o=!0;if(this._mySeat.seatid==t.seatid){var a=3101==this._roomInfo.roomID||5101==this._roomInfo.roomID||3102==this._roomInfo.roomID;if(t.seatid==t.pseatid||0==t.pseatid)this.buttonBar.switchState(a?"useCard":"useCard2"),this.buttonBar.modifyButton(a?"pass":"pass2",!1),this.buttonBar.modifyButton("help",!1),this._mySeat.checkType([]);else{var r=this._mySeat.checkType(t.cardids);r?this.buttonBar.switchState(a?"useCard":"useCard2"):this.buttonBar.switchState(a?"pass":"pass2"),a?this.buttonBar.modifyButton("pass",!0):this.buttonBar.modifyButton("pass2",!r),this.buttonBar.modifyButton("help",!0),r||a||(i>2&&(i=1,o=!1),(e==PDKSHUANGWANG||e==PDKSANTIAOA)&&i>1&&(i=1,o=!1),this._mySeat.showNoMatchCards(1e3*i))}this.onSelectCards(),this._mySeat.checkCanUse()}i>0&&n.startCD(i,this.onCDComplete.bind(this,t.time>i),o)}},e.prototype.onCDComplete=function(t){t&&(pdkServer.sendPdkOutcard([]),this._mySeat.cancelSelect())},e.prototype.onPanelMatchResultClose=function(){PDKalien.PDKSceneManager.instance.currentSceneName!=PDKSceneNames.ROOM&&PDKalien.PDKSceneManager.show(PDKSceneNames.ROOM,null,PDKalien.sceneEffect.Fade,null,null,!1,PDKSceneNames.LOADING)},e.prototype._showMatchResult=function(t){var e=!1;return PDKSceneManager.instance.currentSceneName==PDKSceneNames.PLAY&&t.matchid==this._roomInfo.matchId&&t.params[0]>0&&6!=this._roomInfo.matchType&&(t.params[1]&&t.params[1]>0&&(PDKMatchService.instance.updateScoreGetOut(t.matchid,t.params[1]),this.updateMathTurnInfo()),PDKPanelMatchResult.instance.show(t,this.onPanelMatchResultClose.bind(this)),PDKBagService.instance.refreshBagInfo(),e=!0),PDKMatchService.instance.onMatchEndCheckRemoveMatchInfoNtf(t),e},e.prototype.onMatchInfoNtf=function(t){var e=t.data;switch(e.optype){case 101:break;case 102:this.labWaiting.visible=!1,this._showMatch9Rew(e),e.params&&e.params.length>=5&&e.params[2]>0?this._showMatchRevive(e):this._showMatchResult(e);break;case 103:this.updateMathTurnInfo();break;case 104:var n=this._tfMatchPlayInfo;n[0].text=e.params[0].toString(),n[2].text=e.params[1].toString(),this.labelMatchInfo.textFlow=this._tfMatchPlayInfo,pdkServer.isMatch&&6==pdkServer.roomInfo.matchType&&(this._match9Info=e.roundInfo,this._setMatch9CurRank(e.params[0]));break;case 105:this.updateMathTurnInfo();break;case 106:this.updateMathTurnInfo(),this._curMatch9Play=e.params[1]+1,this._curMatch9Play>=this._roomInfo.stage[0].handCount&&(this._curMatch9Play=this._roomInfo.stage[0].handCount),this._setMatch9Turn(this._curMatch9Play)}},e.prototype.updateMathTurnInfo=function(){var t,e=PDKMatchService.instance,n=e.currentMatchMode,i=1==this._roomInfo.stage.length?"":PDKlang.match_turn_name[n-1];switch(n){case 1:if(!e.scoreGetOut||void 0==e.scoreGetOut)return;t=PDKlang.format(PDKlang.id.match_top_info_1,e.currentPlay,PDKUtils.currencyRatio(e.scoreGetOut));break;case 2:0==e.countPromote?(i=PDKlang.match_turn_name[2],t=PDKlang.format(PDKlang.id.match_top_info_3,e.currentPlay)):(isNaN(e.currentTurn)&&(e.currentTurn=1),t=PDKlang.format(PDKlang.id.match_top_info_2,e.currentTurn,e.currentPlay,e.countPromote))}this.labMatchInfo.text=i+" "+t},e.prototype.playChangeEffect=function(t,e,n){if(void 0===n&&(n=0),this.seat2.visible||2!=t){var i=this["labChange"+t];egret.Tween.removeTweens(i),i.font=RES.getRes(e>=0?"pdk_font_num_1":"pdk_font_num_2");var o=PDKUtils.currencyRatio(Math.abs(e));i.text=e>=0?"+"+o:"-"+o,i.y+=50,i.alpha=0,i.visible=!0,egret.Tween.get(i).wait(n).to({y:i.y-50,alpha:1},1e3,egret.Ease.cubicOut)}},e.prototype.delayShowChangeEffect=function(t,e){this.playChangeEffect(t,e)},e.prototype.onGameEnd=function(t){var e=!1;pdkServer.playing=!1;var n=t.data,i=this._roomInfo.kickbacks;i||(i=0);var o;this.buttonBar.switchState("hidden"),this._mySeat.setHang(!1),this._mySeat.setStatus(null),this.seat1.setStatus(null),this.seat2.setStatus(null);for(var a,r,s=0;3>s;++s){a=n.chanage[s],r=null==n.realkickback[s]?0:n.realkickback[s];var h=this.getSeatById(s+1);if(h){a>0&&(o=h),this._mySeat==h&&(e=a>0);var c=0;this.seat1==h?c=1:this.seat2==h&&(c=2),this.playChangeEffect(c,a+r,0),9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?h!=this._mySeat?h.updateRednormalGold(a):h.updateRednormalGold(a,!0):h.updateGold(a,pdkServer.isMatch),h.stopCD()}}this.btnHang.enabled=!1,this._mySeat.grpRecorder.visible=!1,this.showResult(e),this._clearRecorderInfo(0),PDKPanelPlayerInfo.remove(),pdkServer.isPersonalGame?this.cur_round<this.total_round&&++this.cur_round:pdkServer.isMatch&&6==pdkServer.roomInfo.matchType&&(this._curMatch9Play+=1,this._curMatch9Play>this._roomInfo.stage[0].handCount?PDKPanelMatch9GetRew.getInstance().isShow()||this._showMatch9WaitOtherPlayerOver(!0):this._setMatch9Turn(this._curMatch9Play)),this.refreshCardsRecorderAbout()},e.prototype._showMatch9WaitOtherPlayerOver=function(t){this.match9WaitOther_img.visible=t},e.prototype.showResult1=function(t){if(5001==this._roomInfo.roomID)t&&this._showNormalRedImg(!0);else if(!t||pdkServer.isMatch||pdkServer.isPersonalGame){if(!pdkServer.isMatch&&!pdkServer.isPersonalGame){var e=this._roomInfo.roomID;(9e3==e||9001==this._roomInfo.roomID||9003==e&&PDKMainLogic.instance.selfData.gold<this._roomInfo.minScore)&&(PDKMainLogic.instance.alms(this._mySeat.userInfoData.gold)||PDKPanelRechargeTips.instance.show(this.onAlertResult.bind(this,0)))}}else if(t){var e=this._roomInfo.roomID;if(9e3==e||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID){this._isOverFive=!1;var n=PDKMainLogic.instance.selfData.getRoomWinCntInfo(e);n&&n.cnt<1&&n.chance>=1&&(this._isOverFive=!0),this._isOverFive&&!this._isShowWZAni&&this._onHasRedChance()}}this._timerClean=egret.setTimeout(this.cleanSeat,this,3e3,!0,!0)},e.prototype.showResult=function(t){this._showResultTimeOutId1=egret.setTimeout(this.showResult1,this,500,t)},e.prototype.onUpdateGameInfo=function(t){var e=t.data;if(e.tableid&&(this._roomInfo.tableId=e.tableid),console.log("onUpdateGameInfo------->",e),1==e.optype){if(e.params1&&e.params1.length>2){var n=e.params1[1],i=""+n;n>=1e4&&(i=i.substring(0,i.length-4)+"万"),this.setlabWaiting("当前底分为"+i),this._roomInfo.baseScore=i,this.setBaseScore(),egret.setTimeout(function(){this.setlabWaiting()},this,5e3),this.masterCards.updateScore(e.params1[1],e.params1[0])}}else e&&e.params1&&e.params1.length>=1&&250==e.params1[0]&&250==e.params1[1]?0==e.params1[3]||PDKAlert.show(PDKlang.noMoreGold3,1,this.onAlertResult.bind(this,1)):e.params1&&e.params1.length>=1?2==e.params1.length?(this._roomInfo.baseScore=e.params1[1],this.masterCards.updateScore(this._roomInfo.baseScore,e.params1[0]),this.setBaseScore()):this.masterCards.updateMultiple(e.params1[0]):e.params2&&e.params2.length>2},e.prototype.onAlmsResponse=function(t){var e=this,n=t.data;switch(n.result){case 0:var i=PDKMainLogic.instance.selfData.gold,o=PDKlang.format(PDKlang.id.alms_success,PDKUtils.currencyRatio(PDKGameConfig.almsConfig.gold),PDKGameConfig.almsConfig.count-n.usagecnt);if(pdkServer.isMatch||pdkServer.isPersonalGame)return void PDKAlert.show(o);i+PDKGameConfig.almsConfig.gold<this._roomInfo.minScore?PDKPanelRechargeTips.instance.show(this.onAlertResult.bind(this,0)):PDKAlert.show(o+PDKlang.alms_success_continue,1,function(t){"confirm"==t?(e.initData(),e.sendQuickJoin()):PDKMainLogic.backToRoomScene()});break;case 1:case 2:pdkServer.isMatch||PDKPanelRechargeTips.instance.show(this.onAlertResult.bind(this,0))}},e.prototype.onAlmsAlertResult=function(t){PDKMainLogic.instance.selfData.gold<pdkServer.roomInfo.minScore&&PDKMainLogic.backToRoomScene()},e.prototype.playerSeatDown=function(t){t.uid==pdkServer.uid&&(pdkServer.seatid=t.seatid);var e=this.getSeatById(t.seatid);t.viplv&&(t._vipLevel=t.viplv);var n=9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID,i=n?2:3;if((9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID)&&(this.grpBaseScore.visible=!0,this.setBaseScore()),e&&e.userInfoData&&e.userInfoData.uid==t.uid)e&&e.updateUserInfoData(t);else{var o=new PDKUserInfoData;o.initData(t),e=this._seats[(o.seatid+i-pdkServer.seatid)%i],e.userInfoData=o,e.seatid=t.seatid,e.setOwnerFlagVisible(!1),e.setQuitFlagVisible(!1),e.userInfoView.update(t)
}return pdkServer.getUserInfoInGame(t.uid),e&&pdkServer.isMatch&&(t.nickname="参赛玩家",e.isMaster?t.imageid="pdk_icon_head9":t.imageid="pdk_icon_head10",e.updateUserInfoData(t),e.userInfoView.update(t)),pdkServer.isMatch||t.viplv>=1&&e.userInfoView.avatar.setVipLevel(t.viplv),e},e.prototype.setBaseScore=function(){this.lblBaseScore.text="底分："+this._roomInfo.baseScore},e.prototype.playerStandUp=function(t){pdkServer.isMatch||t!=pdkServer.uid||(this.cdProgressBar.stop(),PDKMainLogic.backToRoomScene());var e=this.getSeatByUId(t);e&&(PDKPanelPlayerInfo.onPlayerLeave(e.seatid),e.cleanPlayer())},e.prototype.getPlayersAmount=function(){for(var t=0,e=0;e<this._seats.length;++e)this._seats&&null!=this._seats[e].userInfoData&&++t;return t},e.prototype.cleanSeat=function(t,e){var n=this;void 0===t&&(t=!1),void 0===e&&(e=!1);var i=0;this._seats.forEach(function(e){n["labChange"+i++].visible=!1,t?e!=n._mySeat?e.clean(t):e.cleanDesk():e.clean(t)}),egret.clearTimeout(this._timerClean),this.btnContinue.visible=!pdkServer.isPersonalGame&&!pdkServer.isMatch&&e,pdkServer.isMatch||pdkServer.isPersonalGame||(this.initGuessCardsView(),this.grpRedNotice.visible=!1)},e.prototype.getSeatById=function(t){var e=null;return this._seats.some(function(n){return n.userInfoData&&n.userInfoData.seatid==t?(e=n,!0):void 0}),e},e.prototype.getSeatByUId=function(t){var e=null;return this._seats.some(function(n){return n.userInfoData&&n.userInfoData.uid==t?(e=n,!0):void 0}),e},e.prototype.onLotteryRedCoinRep=function(t){if(0==t.data.result){this.setRedProcess(),this.updateRedCoinInfo();var e=t.data;switch(e.result){case 0:pdkServer.getRedcoinRankingListReq(),PDKAlert.show("恭喜获得"+PDKUtils.exchangeRatio(e.coin/100,!0)+"奖杯!");break;case 1:PDKAlert.show("配置不存在");break;case 2:PDKAlert.show("抽奖次数不足");break;case 3:PDKAlert.show("你有未完成的兑换")}}this.lotteryIndex=null},e.prototype.doChou=function(t){null==this.lotteryIndex&&(this.lotteryIndex=t,pdkServer.lotteryRedCoinReq(t))},e.prototype.setRedProcess=function(t){if(void 0===t&&(t=!1),!pdkServer.isMatch&&!pdkServer.isPersonalGame){var e=this._roomInfo.roomID,n=!1;if(n=9e3==e||9001==e||9002==e||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?!1:!0,1==n)return;var i=[0,0,0,0,0],o=[1,1,1,1,1],a=5,r="pdk_play_btn_chou";9001==e?(a=3,i=[0,0,0],o=[1,1,1],r="pdk_play_btn_chou2"):9002==e?(a=3,i=[0,0,0],o=[1,1,1],r="pdk_play_btn_chou4"):(9003==e||9004==e||9005==e)&&(i=[0],o=[1],a=1,r="pdk_play_btn_chou3"),this.mRed_img.source=r;var s=PDKMainLogic.instance;this.redListDataArr=i;var h=s.selfData.getRoomWinCntInfo(e),c=0,l=0;if(h&&(c=h.cnt,l=h.chance?Number(h.chance):0),this._isOverFive&&t&&!this._isShowWZAni)this.redListDataArr=o;else{c=c>a?a:c;for(var p=0;c>p;p++)this.redListDataArr[p]=1}console.log("setRedPro2cess---------->",this.redListDataArr,h,l),this.redCount.text=""+l,Number(l)>0?(this._onHasRedChance(),this._showNormalRedImg(!0),this._showRedCount(!0)):(this._showNormalRedImg(!1),this._showRedCount(!1)),this.redListDataProvider.source=this.redListDataArr,this.redListDataProvider.refresh()}},e.prototype.addRedProcess=function(){this._isOverFive=!1;var t=PDKMainLogic.instance,e=this._roomInfo.roomID,n=t.selfData.getRoomWinCntInfo(e),i=0;n&&(i=n.cnt);var o=5,a=i+1;1002==e?o=3:8001==e&&(o=1);for(var r=!1,s=PDKMainLogic.instance.selfData.wincnt,h=0;h<s.length;h++)s[h].roomid==e&&(r=!0,a==o?(this._isOverFive=!0,s[h].cnt=0,s[h].chance=n.chance+1):s[h].cnt=a);r||s.push({chance:0,cnt:a,roomid:e,getchance:null,time:(new Date).getTime()}),this.setRedProcess(!0)},e.prototype.onFreshManRedcoinLotteryChanceGot=function(t){PDKMainLogic.instance.selfData.freshmanredcoinsent=1},e.prototype.showRedcoinDragon=function(t){},e.prototype.ondragonHongBaoComplete=function(t){this.dragonHongBao.removeEventListener(egret.Event.COMPLETE,this.ondragonHongBaoComplete,this),pdkServer.stopCache()},e.prototype.showDragonZhaDan=function(){this.dragonZhaDan.parent||this.addChild(this.dragonZhaDan)},e.prototype.showSign=function(){this.dragonSign=new PDKDragonSign,this.dragonSign.parent||this.addChild(this.dragonSign)},e.prototype.showDragonFeiJi=function(){this.dragonFeiJi.parent||this.addChild(this.dragonFeiJi)},e.prototype.showDragonMyLianDui=function(){this.dragonMyLianDui.parent||(this.dragonMyLianDui.x=PDKalien.StageProxy.stage.stageWidth>>1,this.dragonMyLianDui.y=PDKalien.StageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMyLianDui))},e.prototype.showDragonRightLianDui=function(){this.dragonRightLianDui.parent||(this.dragonRightLianDui.x=this.seat1.x+200,this.dragonRightLianDui.y=this.seat1.y+92,this.addChild(this.dragonRightLianDui))},e.prototype.showDragonLeftLianDui=function(){this.dragonLeftLianDui.parent||(this.dragonLeftLianDui.x=this.seat2.x+230,this.dragonLeftLianDui.y=this.seat2.y+92,this.addChild(this.dragonLeftLianDui))},e.prototype.showDragonMyShunZi=function(){this.dragonMyShunZi.parent||(this.dragonMyShunZi.x=PDKalien.StageProxy.stage.stageWidth>>1,this.dragonMyShunZi.y=PDKalien.StageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMyShunZi))},e.prototype.showDragonRightShunZi=function(){this.dragonRightShunZi.parent||(this.dragonRightShunZi.x=this.seat1.x+200,this.dragonRightShunZi.y=this.seat1.y+92,this.addChild(this.dragonRightShunZi))},e.prototype.showDragonLeftShunZi=function(){this.dragonLeftShunZi.parent||(this.dragonLeftShunZi.x=this.seat2.x+230,this.dragonLeftShunZi.y=this.seat2.y+92,this.addChild(this.dragonLeftShunZi))},e.prototype.showDragonMySanDaiYi=function(){this.dragonMySanDaiYi.parent||(this.dragonMySanDaiYi.x=PDKalien.StageProxy.stage.stageWidth>>1,this.dragonMySanDaiYi.y=PDKalien.StageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMySanDaiYi))},e.prototype.showDragonRightSanDaiYi=function(){this.dragonRightSanDaiYi.parent||(this.dragonRightSanDaiYi.x=this.seat1.x+200,this.dragonRightSanDaiYi.y=this.seat1.y+92,this.addChild(this.dragonRightSanDaiYi))},e.prototype.showDragonLeftSanDaiYi=function(){this.dragonLeftSanDaiYi.parent||(this.dragonLeftSanDaiYi.x=this.seat2.x+230,this.dragonLeftSanDaiYi.y=this.seat2.y+92,this.addChild(this.dragonLeftSanDaiYi))},e.prototype.showDragonMySanDaiEr=function(){this.dragonMySanDaiEr.parent||(this.dragonMySanDaiEr.x=PDKalien.StageProxy.stage.stageWidth>>1,this.dragonMySanDaiEr.y=PDKalien.StageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMySanDaiEr))},e.prototype.showDragonRightSanDaiEr=function(){this.dragonRightSanDaiEr.parent||(this.dragonRightSanDaiEr.x=this.seat1.x+200,this.dragonRightSanDaiEr.y=this.seat1.y+92,this.addChild(this.dragonRightSanDaiEr))},e.prototype.showDragonLeftSanDaiEr=function(){this.dragonLeftSanDaiEr.parent||(this.dragonLeftSanDaiEr.x=this.seat2.x+230,this.dragonLeftSanDaiEr.y=this.seat2.y+92,this.addChild(this.dragonLeftSanDaiEr))},e.prototype.showDragonMySiDaiEr=function(){this.dragonMySiDaiEr.parent||(this.dragonMySiDaiEr.x=PDKalien.StageProxy.stage.stageWidth>>1,this.dragonMySiDaiEr.y=PDKalien.StageProxy.stage.stageHeight/2+20,this.addChild(this.dragonMySiDaiEr))},e.prototype.showDragonRightSiDaiEr=function(){this.dragonRightSiDaiEr.parent||(this.dragonRightSiDaiEr.x=this.seat1.x+200,this.dragonRightSiDaiEr.y=this.seat1.y+92,this.addChild(this.dragonRightSiDaiEr))},e.prototype.showDragonLeftSiDaiEr=function(){this.dragonLeftSiDaiEr.parent||(this.dragonLeftSiDaiEr.x=this.seat2.x+230,this.dragonLeftSiDaiEr.y=this.seat2.y+92,this.addChild(this.dragonLeftSiDaiEr))},e.prototype.onShowGameEffect=function(t){switch(t.data.cardType){case 1:break;case 2:case PDKSANTIAOA:this.showDragonZhaDan();break;case 9:this.showDragonFeiJi();break;case 11:case 12:"my"==t.data.state?this.showDragonMyLianDui():"right"==t.data.state?this.showDragonRightLianDui():"left"==t.data.state&&this.showDragonLeftLianDui();break;case 10:"my"==t.data.state?this.showDragonMyShunZi():"right"==t.data.state?this.showDragonRightShunZi():"left"==t.data.state&&this.showDragonLeftShunZi();break;case PDKSANDAIYI:"my"==t.data.state?this.showDragonMySanDaiYi():"right"==t.data.state?this.showDragonRightSanDaiYi():"left"==t.data.state&&this.showDragonLeftSanDaiYi();break;case PDKSANDAIER:"my"==t.data.state?this.showDragonMySanDaiEr():"right"==t.data.state?this.showDragonRightSanDaiEr():"left"==t.data.state&&this.showDragonLeftSanDaiEr();break;case PDKSIDAIERDUI:case PDKSIDAIER:case PDKSIDAISAN:"my"==t.data.state?this.showDragonMySiDaiEr():"right"==t.data.state?this.showDragonRightSiDaiEr():"left"==t.data.state&&this.showDragonLeftSiDaiEr()}},e.prototype._setInDayFuTime=function(t){this._inDayGetTime=t},e.prototype._onClickDayBuy=function(){this._inDayGetTime&&PDKToast.show("请整点领取")},e.prototype._onClickTwoRuleExplain=function(){this.grpTwoRuleExplain.visible=!this.grpTwoRuleExplain.visible},e.prototype._initDayBuy=function(){var t=this,e=pdkServer.serverDate,n=e.getMinutes(),i=e.getSeconds(),o=-59+n,a=-60+i,r=11;this.dayFuDaiTimeLabel.text=o+":"+a,this.dayFuDaiTimeLabel.textColor=16777215,this._setInDayFuTime(!1);egret.setInterval(function(){a-=1,-1==a&&(a=59,o-=1),0==o&&0==a&&(t.dayFuDaiTimeLabel.textColor=16711680,t._setInDayFuTime(!0),r-=1,0>r&&t._initDayBuy())},this,1e3)},e.prototype.beforeShow=function(t){var e=this;PDKalien.PopUpManager.removeAllPupUp(),this._showRedCount(!1),this.mRed_img.addClickListener(this._onClickRed,this),this.match9Rule_img.addClickListener(this._onClickMatch9Rule,this),this.matchInfo_img.addClickListener(this._onClickMatch9Info,this),this.match9RuleAniClose_btn.addClickListener(this._onCloseMatch9RuleAni,this),this.double_group.addClickListener(this._onClickDouble,this),this.noDouble_group.addClickListener(this._onClickNoDouble,this),this.redNormal_img.addClickListener(this._onClickRedNormal,this),this.redNormalHelp_img.addClickListener(this._onClickRedNormalHelp,this),this.dayBuyGroup.addClickListener(this._onClickDayBuy,this),this.btnTwoRuleExplain.addClickListener(this._onClickTwoRuleExplain,this),this._showNextMasterCardGuessBtn(!1),this._showMatch9WaitOtherPlayerOver(!1),this._showDoubleNoDouble(!1),this._showFailDouble(!1);var n=PDKBagService.instance.getItemCountById(3);if(this._setDiamondUI(n),this.rollMsg.visible=!0,this.rollMsg.enableSendHorn(!1),this._mySeat.grpRedcoin.visible=!1,this._showNormalRedImg(!1),t.personalgame)this._mySeat.showDiamond(!1),this.isPersonalGame=!0,pdkServer.isPersonalGame=!0,this.currentState="personalGame";else{this.isPersonalGame=!1,pdkServer.isPersonalGame=!1;var i=PDKGameConfig.getRoomConfig(t.roomID);if(!i)return void PDKMainLogic.backToRoomScene();pdkServer.roomInfo=this._roomInfo=i,pdkServer.isMatch=2==i.roomType,this.currentState=pdkServer.isMatch?"match":"normal",this.redList.visible=!0,9e3==pdkServer.roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?(this.redNormalHelp_img.visible=!1,this.grpRed.visible=!0,(5001==pdkServer.roomInfo.roomID||5101==pdkServer.roomInfo.roomID)&&(this.redList.visible=!1,this._shouldTipRedNormalRule())):(this.grpRed.visible=!0,this.redNormalHelp_img.visible=!1),pdkServer.isMatch?(this._mySeat.showDiamond(!1),6==pdkServer.roomInfo.matchType?(this._showMatchTurnAndRank(!1),this._showMatch9Bottom(!0),this._setMatch9Turn(1),this._setMatch9CurRank(-1)):(this._showMatchTurnAndRank(!0),this._showMatch9Bottom(!1),this._showMatch9RuleAniCloseBtn(!1)),this.labMatchInfo.text=""):(this._mySeat.grpRedcoin.visible=!0,this._mySeat.userInfoView.avatar.setVipLevel(PDKMainLogic.instance.selfData.getCurVipLevel()),this._mySeat.showDiamond(!0),this.initGuessCardsView(),this.setRedProcess(),this.updateRedCoinInfo())}this._initGeneralHeadImgTouch(!0),this.addListeners(),this._newTable=!0,this.initData();var o=PDKMainLogic.instance.selfData;pdkServer.isMatch||this._mySeat.userInfoView.updateGold(o.gold),egret.setTimeout(function(){e._mySeat.userInfoView.avatar.imageId=o.imageid,e._mySeat.userInfoView.updateNickname(o)},this,100),PDKalien.PDKSoundManager.instance.playMusic(PDKResNames.pdk_bgm),o&&o.cardsRecorder&&o.cardsRecorder.length>=7?this.beforerecorderTime=o.cardsRecorder[6]:this.beforerecorderTime=0,this.rollMsg.showLast(2),this._clearRecorderInfo(0),this.refreshCardsRecorderAbout(),this._shouldTipGameRule(),this._shouldShowRuleFlag(),this._shouldShowRedNotice(),this.grpTwoGame.visible=5101==pdkServer.roomInfo.roomID,this.grpTwoRuleExplain.visible=!1;var a=9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID;this.seat2.visible=!a,this.imgGameBG.source=a?"pdk_play_bg2":"pdk_play_bg",this.seat1.right=a?120:18,this.seat1.currentState=a?"right2":"right",this._mySeat.currentState=a?"my2":"my",this.btnRecord.visible=!a,this.btnHelp.right=a?160:237,this.ruleReadedFlag.right=a?155:229,a&&(this._showRecorder(!1),this.recorderBubble.visible=!1,egret.Tween.removeTweens(this.recorderBubble))},e.prototype.setPGameView=function(t){this.lbRoomID.text=String(t.roomid),t.maxodd||(t.maxodd="无"),this.lbLimit.text=String(t.maxodd),this.cur_round=null==t.playround?1:t.playround+1,this.lbRound.text=this.cur_round+"/"+String(t.maxround),this.isowner=t.owner==pdkServer.uid?!0:!1,this.owneruid=t.owner,this.roomid=t.roomid,this.total_round=t.maxround,this.masterCards.updateScore(t.bscore||0,1),this.gamestarted=t.gamestatus>1?!0:!1,PDKalien.Native.instance.isNative||this._justSetShareParams(),this.isowner?(t.players&&t.players.length>=3?(this.setStartPgameBtnVisible(!0),this.btnShare.visible=!1):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0),this.labWaiting.visible=!1):(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!0,t.players&&t.players.length>=3?(this.labWaiting.text="等待房主开始",this.labWaiting.visible=!0):this.labWaiting.visible=!1),(2==t.gamestatus||t.players&&t.players.length>=3)&&(this.setStartPgameBtnVisible(!1),this.btnShare.visible=!1),t.players&&this.playersSeatDown(t.players),this.setShareStart();var e=this.getSeatByUId(this.owneruid);e&&e.setOwnerFlagVisible(!0),pdkServer.roomInfo=this._roomInfo={roomID:t.roomid,maxOdds:t.maxodd,maxround:t.maxround,baseScore:t.bscore,kickbacks:0}},e.prototype.onShow=function(t,e){switch(void 0===t&&(t=null),void 0===e&&(e=!1),t.personalgame?(this.isPersonalGame=!0,pdkServer.isMatch=!1,pdkServer.isPersonalGame=!0,t.roomID&&pdkServer.QueryRoomInfoReq(t.roomID),this.btnShare.visible=!0):pdkServer.isPersonalGame=!1,console.log("----------onShow",t.action,pdkServer._isFirstFromDDZ),t.action){case"quick_join":this.sendQuickJoin();break;case"reconnect":pdkServer.reconnect(0),5001==t.roomID&&pdkServer.reqRedNormalTime();break;case"from_login":1==pdkServer._isFirstFromDDZ?(this.sendQuickJoin(),pdkServer._isFirstFromDDZ=!1):this.btnContinue.visible=!0}1==pdkServer._isFirstFromDDZ&&(pdkServer._isFirstFromDDZ=!1),pdkServer.isMatch?(pdkServer.enterMatch(this._roomInfo.matchId),"reconnect"!=t.action?this.setlabWaiting("比赛开始，正在为您匹配对手..."):this.setlabWaiting("正在为您匹配对手...")):pdkServer.roomInfo&&5001==pdkServer.roomInfo.roomID&&this._redNormalShowMatching(),PDKMainLogic.instance.refreshSelfInfo(),PDKBagService.instance.refreshBagInfo()},e.prototype._redNormalShowMatching=function(){this.labWaiting.visible=!0,this.labWaiting.text="正在为您匹配对手..."},e.prototype.beforeHide=function(){this.cleanSeat(),this.removeListeners(),this._timerClean&&egret.clearTimeout(this._timerClean),this._redProcessTimeOutId&&egret.clearTimeout(this._redProcessTimeOutId),this._showResultTimeOutId&&egret.clearTimeout(this._showResultTimeOutId),this._timerDelayJoin&&egret.clearTimeout(this._timerDelayJoin),this._showResultTimeOutId1&&egret.clearTimeout(this._showResultTimeOutId1),egret.Tween.removeTweens(this.recorderBubble),pdkServer.playing=!1,pdkServer.isMatch&&PDKPanelMatchWaitingInner.instance.close()},e.prototype.onHide=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!1),t.prototype.onHide.call(this,e,n),this._seats.forEach(function(t){t.stopCD()})},e.prototype._onClickRed=function(){var t=Number(this.redCount.text),e=PDKMainLogic.instance.selfData.getRoomCanGetRed(this._roomInfo.roomID);if(e)return void this.doChou(this._roomInfo.roomID);if(0>=t){var n=PDKMainLogic.instance.selfData.getRoomNeedWinCntGetRed(this._roomInfo.roomID);return void(9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?PDKToast.show("游戏再赢"+n+"局即可抽取"):9002==this._roomInfo.roomID&&PDKToast.show("游戏再玩"+n+"局即可抽取"))}this.doChou(this._roomInfo.roomID)},e.prototype._showRedCount=function(t){this.redCountBg_img.visible=t,this.redCount.visible=t},e.prototype._onUserRedCountChange=function(t){var e=t.data,n=!1;e.count>0&&(this.redCount.text=e.count,n=!0),this._showRedCount(n)},e.prototype._showMatch9RuleAniCloseBtn=function(t){this.match9RuleAniClose_btn.visible=t},e.prototype.onPlayMatch9RuleAni=function(){null==this._match9RuleAni&&(this._match9RuleAni=new PDKDragonMatch9Rule,this._showMatch9RuleAniCloseBtn(!0)),this.match9Rule_group.visible=!0,this.match9Rule_group.addChild(this._match9RuleAni),this._match9RuleAni.play(this._onCloseMatch9RuleAni.bind(this))},e.prototype._onCloseMatch9RuleAni=function(){null!=this._match9RuleAni&&(this._match9RuleAni.stop(),this.match9Rule_group.removeChild(this._match9RuleAni),this._match9RuleAni=null),this.match9Rule_group.visible=!1,this._showMatch9RuleAniCloseBtn(!1)},e.prototype._showMatchTurnAndRank=function(t){this.matchRank_group.visible=t,this.matchTurn_group.visible=t},e.prototype._onClickMatch9Rule=function(){this.onPlayMatch9RuleAni()},e.prototype._setMatch9Turn=function(t){var e=PDKGameConfig.getRoomConfigByMatchId(this._roomInfo.matchId);if(e.stage&&1==e.stage.length){var n=e.stage[0].handCount;this.match9Turn_label.textFlow=(new egret.HtmlTextParser).parser("<font color='#F0FF00'>"+t+"</font>/"+n)}},e.prototype._setMatch9CurRank=function(t){0>t?this.curRank_label.text="正在统计..":this.curRank_label.text=""+t},e.prototype._onClickMatch9Info=function(){PDKPanelMatch9Info.getInstance().show(this._match9Info)},e.prototype._showMatch9Bottom=function(t){this.match9_bottom_group.visible=t},e.prototype._showMatch9Rew=function(t){if(t){var e=t.matchid,n=PDKGameConfig.getRoomConfigByMatchId(e);n&&6==n.matchType&&PDKPanelMatch9GetRew.getInstance().show(n,t)}this._showMatch9WaitOtherPlayerOver(!1)},e.prototype._onHornRecChange=function(){this.rollMsg.show()},e.prototype._checkShowFailDouble=function(){var t=this._mySeat,e=this.seat1,n=this.seat2,i=n.userInfoData.getGold()||0,o=e.userInfoData.getGold()||0,a=PDKBagService.instance.getItemCountById(3),r=(PDKMainLogic.instance.selfData.getGold(),{bShow:!1,nReason:1,sReason:""});return a<this._roomInfo.doublediamond?(r.bShow=!0,r.sReason="钻石不足,无法加倍",r.nReason=4):t.isMaster?i<this._roomInfo.doublelimit&&o<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=3,r.sReason="农民金豆不足"+this._roomInfo.doublelimit+",无法加倍"):n.isMaster?i<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=1,r.sReason="地主金豆不足"+this._roomInfo.doublelimit+",无法加倍"):o<this._roomInfo.doublelimit&&(r.bShow=!0,r.nReason=1,r.sReason="地主金豆不足"+this._roomInfo.doublelimit+",无法加倍"),r},e.prototype._showDoubleNoDouble=function(t){this.double_group.visible=t,this.noDouble_group.visible=t},e.prototype._onClickDouble=function(){this._doubleRet&&this._doubleRet.bShow?PDKImgToast.instance.show(this,this._doubleRet.sReason):pdkServer.reqDouble()},e.prototype._onClickNoDouble=function(){pdkServer.reqNoDouble(),this._mySeat.stopCD(),this._clearAskDoubleTimeOut(),this._showDoubleNoDouble(!1),this._showFailDouble(!1)},e.prototype._onMyAskDoubleTimeOut=function(){this._mySeat.stopCD(),this._showDoubleNoDouble(!1),this._clearAskDoubleTimeOut(),this._showFailDouble(!1),this._mySeat.showDoubleTip(!0,!1)},e.prototype._onServerDoubleRep=function(t){if(t.params&&t.seatid&&t.params.length>=1){var e=t.params[0],n=this.getSeatById(t.seatid);1==e?(n.showDoubleTip(!0,!1),n.showDoubleFlag(!1)):(n.showDoubleTip(!0,!0),n.showDoubleFlag(!0),n==this._mySeat&&(this._clearAskDoubleTimeOut(),this._mySeat.stopCD(),this._showDoubleNoDouble(!1),this._showFailDouble(!1)))}},e.prototype._showFailDouble=function(t,e){if(void 0===e&&(e=null),t){if(!(e>=1&&4>=e))return;this.failDoubleDesc1_img.source="failDoublePre"+e}this.failDouble_group.visible=t},e.prototype._showNextMasterCardGuessBtn=function(t){t=!1,this.btnGuessCards.visible=t},e.prototype._shouldQuickJoinForRedRoom=function(){var t=PDKBagService.instance.getItemCountById(3);return console.log("_shouldQuickJoinForRedRoom---------->",this._roomInfo.kickScore),t<this._roomInfo.kickScore?(PDKMainLogic.instance.noDiamondGetNewDiamondRewOrBuyRevive(this._roomInfo.minScore,this._roomInfo.roomID),!1):(this._redNormalShowMatching(),!0)},e.prototype._onClickReady=function(){this.initData(!0),(9002!=this._roomInfo.roomID&&9004!=this._roomInfo.roomID&&9005!=this._roomInfo.roomID||this._shouldQuickJoinForRedRoom())&&(9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?this.sendQuickJoinWithFlag():this.sendQuickJoin(),this._showNextMasterCardGuessBtn(!1),this.onCloseGrpGuessOp(null))},e.prototype._setDiamondUI=function(t){var e=t;this._mySeat.updateDiamond(e)},e.prototype._onSendQuickJoin=function(){this.btnContinue.visible=!1,pdkServer.isMatch||this.setlabWaiting("正在为您匹配对手...")},e.prototype._onBagRefresh=function(){var t=PDKBagService.instance.getItemCountById(3);this._roomInfo&&5001==this._roomInfo.roomID&&pdkServer.playing||this._setDiamondUI(t)},e.prototype._onClickRedNormal=function(){5001==this._roomInfo.roomID||5101==this._roomInfo.roomID?this.doChou(this._roomInfo.roomID):pdkServer.isMatch||pdkServer.isPersonalGame||this.doChou(this._roomInfo.roomID),this._stopNewRedAni(),this._showNormalRedImg(!1)},e.prototype._clearRedNormalInterval=function(){-1!=this._redNormalNum&&(egret.clearInterval(this._redNormalNum),this._redNormalNum=-1)},e.prototype._showNormalRedImg=function(t){this.redNormal_img.visible=t},e.prototype._stopNewRedAni=function(){egret.Tween.removeTweens(this.redNormal_img),this.redNormal_img.rotation=0},e.prototype._onHasRedChance=function(){this._stopNewRedAni(),this._showNormalRedImg(!0);var t=null;(t=function(){egret.Tween.get(this.redNormal_img).to({rotation:20},100).to({rotation:-20},100).to({rotation:10},60).to({rotation:-10},60).to({rotation:0},30).wait(1e3).call(function(){t()}.bind(this))}.bind(this))()},e.prototype.onRedNormalMoneyInfoRep=function(t){var e=t.data;if(1==e.optype){if(null==e.result){this.fastRedValue=e.params;var n=PDKUtils.exchangeRatio(e.params/100,!0);PDKalien.Native.instance.isNative?PDKAlert.show("恭喜获得"+n+"奖杯!"):PDKAlert.show("恭喜获得"+n+"奖杯!")}}else if(2==e.optype)null==e.result&&e.params>0&&this._showNormalRedImg(!0);else if(3==e.optype&&null==e.result){var i="恭喜您，成功领取新手钻石奖励:"+e.params+"钻";PDKMainLogic.instance.selfData.setHasGetNewDiamond(),PDKAlert.show(i,0,function(){if(!pdkServer.playing&&this._roomInfo&&5001==this._roomInfo.roomID){var t=PDKBagService.instance.getItemCountById(3);if(this._roomInfo.minScore>t)return void PDKMainLogic.instance.ifBuyReviveMaxTipShop(this._roomInfo.minScore,this._roomInfo.roomID);this.sendQuickJoin()}}.bind(this))}},e.prototype.onAlertBtn=function(t,e){if("cancel"==t){var n=this.fastRedValue,i=PDKShareImageManager.instance.getShareScene(PDKShareImageManager.GAME_TYPE_FAST,n);PDKShareImageManager.instance.start(pdkServer.uid,i)}},e.prototype._onBuyReviveSucc=function(){if(9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID){if(!this._shouldQuickJoinForRedRoom())return;this.sendQuickJoin()}},e.prototype._showRedNormalRule=function(){var t="";if(5001==this._roomInfo.roomID)t="进入条件:"+this._roomInfo.minScore+"钻石。\n方式:赢一局请立即领取。\n奖杯:10随机奖杯。\n底牌:一张牌价格1颗钻石。\n关牌:被关的玩家要付出双倍钻石。\n收费:每局游戏每人需要支付4颗钻石。";else if(5101==this._roomInfo.roomID)t="进入条件:"+this._roomInfo.minScore+"金豆。\n方式:赢一局需要立即领取。\n胜利:胜利不获得金豆而获得大奖杯。\n奖杯:胜利即可获得，详细见右下角奖励说明。\n底牌:一张牌价格700金豆。\n关牌:被关的玩家要付出双倍金豆。\n收费:每局游戏每人需要支付5000金豆。";else{if(1003!=this._roomInfo.roomID)return;t="底分说明：\r\n三人中金豆最少的人满足以下区间，则底分动态变化。\r\n\r\n1、金豆<50万，底分3000\r\n2、50万<金豆<200万，底分5000\r\n3、200万<金豆<500万，底分10000\r\n4、金豆>500万，底分30000\r\n"}PDKAlert.show(t,0,null,"left")},e.prototype._onClickRedNormalHelp=function(){this._showRedNormalRule()},e.prototype._onCloseRevivePanel=function(){PDKMainLogic.backToRoomScene()},e.prototype._onClickGold=function(){1==pdkServer._isInDDZ?this.openDDZShop():PDKPanelExchange2.instance.show()},e.prototype._onClickDiamond=function(){1==pdkServer._isInDDZ?this.openDDZShop(1):PDKPanelExchange2.instance.show(1)},e.prototype.doReconnectToGame=function(t){this.onShow({action:"reconnect",personalgame:t.personalgame,roomID:t.roomid})},e.prototype._clearMatchReviveInterval=function(){0!=this._matchReviveIntervalId&&egret.clearInterval(this._matchReviveIntervalId),this._matchReviveIntervalId=0},e.prototype._onMatchReviveTimeOut=function(t){this._clearMatchReviveInterval(),pdkServer.giveUpMatch(this._roomInfo.matchId),PDKPanelMatchRevive.remove(),this._showMatchResult(t)||PDKMainLogic.backToRoomScene()},e.prototype._showMatchRevive=function(t){var e=(this._roomInfo.stage,t.params[4]);this._clearMatchReviveInterval();var n=t.params[3],i=PDKPanelMatchRevive.getInstance(),o=egret.setInterval(function(){n+=-1,0>n&&this._onMatchReviveTimeOut(t),i.updateCountDown(n)},this,1e3);this._matchReviveIntervalId=o;var a=function(){this._onMatchReviveTimeOut(t)},r=PDKMainLogic.instance.selfData.getGold(),s=function(){r<t.params[2]?PDKImgToast.instance.show(i,"金豆不足"):pdkServer.reqMatchRevive()};i.show(s.bind(this),a.bind(this)),i.setRankSub(e),i.setReviveCost(t.params[2]),i.updateCountDown(n)},e.prototype.onPdkGiveCards=function(t){var e=this;console.log("===================================>onPdkGiveCards:"+t.data);var n=t.data;n.cards=PDKUtils.transformCards(n.cards),n.last_out_cards||(n.last_out_cards=[]),n.last_out_cards=PDKUtils.transformCards(n.last_out_cards),this.beforeGameStart(),this._reconnectIn=!1,this._showMatch9WaitOtherPlayerOver(!1),this._cache.length>0&&(this._cache.forEach(function(t){t.method.call(e)}),this._cache.splice(0)),this.isPersonalGame?this.lbRound.text=String(this.cur_round)+"/"+String(this.total_round):pdkServer.isMatch||this.isPersonalGame||(this.setRedCoin(),this.setBeforeWincnt()),n.cardsrecorderremain&&PDKMainLogic.instance.selfData.cardsRecorder&&(PDKMainLogic.instance.selfData.cardsRecorder[6]=n.cardsrecorderremain,this.refreshCardsRecorderAbout()),this._showNextMasterCardGuessBtn(!1),n.cardids=n.cards,n.seatid=this._mySeat.seatid,this._mySeat.cancelSelect(),console.log("pdkServer.playing-----------?",pdkServer.playing),pdkServer.playing?this.addCard(n):(this._cache.splice(0),this._cache.push({method:this.addCard.bind(this,n)})),this.onAskPlayCard({cardType:0,cardids:n.last_out_cards,pseatid:0,time:n.time,seatid:n.curr_seatid}),pdkServer.getUserInfoInGame(PDKMainLogic.instance.selfData.uid)},e.prototype.onPdkOutcard=function(t){console.log("===================================>onPdkOutcard:"+t.data);var e=t.data;if(e.card=PDKUtils.transformCards(e.card),e.last_out_cards=PDKUtils.transformCards(e.last_out_cards),0==e.code){e.time=14,e.last_out_seatid<=0&&(e.time=20);var n=this.getSeatById(e.seatid),i=-1,o=(9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID,!1);if(this.showBoomEffect=!1,console.log("bomb_change_gold------------>data.bomb_change_gold=",e.bomb_change_gold),e.bomb_change_gold&&e.bomb_change_gold.length>0){var a=0;e.last_out_seatid!=this._mySeat.seatid&&(e.last_out_seatid==this.seat1.seatid?a=1:e.last_out_seatid==this.seat2.seatid&&(a=2)),console.log("onPdkOutcard----------->炸弹加分",e.last_out_seatid,this._mySeat.seatid,a),e.last_out_seatid!=this._mySeat.seatid&&(o=!0),this.showBoomEffect=!0,this.playChangeEffect(a,Math.abs(e.bomb_change_gold[a]),0),this.updateGoldByBoom(a,Math.abs(e.bomb_change_gold[a]));for(var r=0;3>r;r++)r!=a&&(this.playChangeEffect(r,-Math.abs(e.bomb_change_gold[r]),0),this.updateGoldByBoom(r,-Math.abs(e.bomb_change_gold[r])));this._timerClean=egret.setTimeout(function(t){for(var e=0;3>e;e++)pdkServer.playing&&(t["labChange"+e].visible=!1)},this,3e3,this)}if(n){n.cleanDesk();var s=!0;n.seatid==this._mySeat.seatid&&0==e.card.length&&1==o&&(s=!1);var h=!0,c=!0;0!=e.left_card&&(h=!1),1==h&&(c=!1);var l=e.card,p=PDKUtils.sortCardIds(l);console.log("useCards------>",l,"\norderIds------>",p),p||(p=[]),i=n.useCard(p,h,c,s),console.log("onPdkOutcard----------->要我出牌了",p,h,s),n.stopCD()}if(this._mySeat.seatid==e.seatid&&(this.buttonBar.switchState("hidden"),this._mySeat.cancelSelect(),this._mySeat.hideNoMathCards(),this._mySeat.checkType([])),e.curr_seatid){var d=e.seatid;e.last_out_seatid==this._mySeat.seatid&&(d=0),0!=e.card.length&&0==e.last_out_cards.length&&0!=d&&(e.last_out_cards=e.card),this.onAskPlayCard({cardType:i,cardids:0==e.card.length?e.last_out_cards:e.card,pseatid:d,time:e.time,seatid:e.curr_seatid})}}else{this.buttonBar.switchState("hidden"),this._mySeat.cancelSelect(),this._mySeat.hideNoMathCards(),this._mySeat.checkType([]);var u=PDKCardsType.GetType(e.last_out_cards);if(e.curr_seatid){var d=e.seatid;e.last_out_seatid==this._mySeat.seatid&&(d=0),0!=e.card.length&&0==e.last_out_cards.length&&0!=d&&(e.last_out_cards=e.card),this.onAskPlayCard({cardType:u,cardids:e.last_out_cards,pseatid:d,time:0,seatid:e.curr_seatid})}}},e.prototype.updateGoldByBoom=function(t,e){(this.seat2.visible||2!=t)&&(console.log("playChangeEffect-----updateGold------>",t,this._mySeat.seatid,e),0==t?9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?this._mySeat.updateDiamondNum(e,!0):this._mySeat.updateGold(e):9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?this.seat1.updateDiamondNum(e,!1):this.seat1.updateGold(e))},e.prototype.onPdkReady=function(t){console.log("===================================>onPdkReady:"+t.data)},e.prototype.onPdkEnd=function(t){console.log("===================================>onPdkEnd:"+t.data);var e=!1;pdkServer.playing=!1;var n=t.data,i=this._roomInfo.kickbacks;i||(i=0);var o;this.buttonBar.switchState("hidden"),this._mySeat.setHang(!1),this._mySeat.setStatus(null),this.seat1.setStatus(null),this.seat2.setStatus(null);for(var a,r=0,s=9e3==this._roomInfo.roomID||9001==this._roomInfo.roomID||9002==this._roomInfo.roomID||9003==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID,h=s?2:3,c=0;h>c;++c){a=n.users[c].score;var l=this.getSeatById(n.users[c].seatid);if(l){a>0&&(o=l),this._mySeat==l&&(e=n.users[c].left_card<=0);var p=0;if(this.seat1==l?p=1:this.seat2==l&&(p=2),1==this.showBoomEffect){var d=p,u=a+r;egret.setTimeout(this.delayShowChangeEffect.bind(this,d,u),this,1e3)}else this.playChangeEffect(p,a+r,0);9002==this._roomInfo.roomID||9004==this._roomInfo.roomID||9005==this._roomInfo.roomID?l!=this._mySeat?l.updateRednormalGold(a):l.updateRednormalGold(a,!0):l.updateGold(a-n.users[c].table_fee,pdkServer.isMatch),l.stopCD(),n.users[c].ncards.length>0&&(n.users[c].ncards=PDKUtils.transformCards(n.users[c].ncards),n.users[c].ncards.sort(function(t,e){return e-t}),l.useCard(n.users[c].ncards,!0))}}if(0==e)for(var c=0;h>c;++c){var l=this.getSeatById(n.users[c].seatid);l&&this._mySeat!=l&&l.setCardCount(0)}this.btnHang.enabled=!1,this.btnContinue.visible=!0,this._mySeat.grpRecorder.visible=!1,this._clearRecorderInfo(0),PDKPanelPlayerInfo.remove()},e.prototype.onPdkCardHolder=function(t){console.log("===================================>onPdkCardHolder:"+t.data),this.beforerecorderTime=PDKMainLogic.instance.selfData.cardsRecorder[6];var e=t.data;if(e.card_infos&&e.card_infos.length>0){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,o=e.card_infos.length;o>i;i++)e.card_infos[i].card_value>=3?n[e.card_infos[i].card_value-3]=e.card_infos[i].card_num:n[10+e.card_infos[i].card_value]=e.card_infos[i].card_num;this._showRecorder(!0),this._setRecorderInfoByServerNum(n)
}},e.prototype.onPdkReconnect=function(t){var e=this;console.log("===================================>onPdkReconnect:"+t.data);var n=t.data;this.labWaiting.visible=!1,this._reconnectIn=!0,this.beforeGameStart(),this.playersSeatDown(n.players),n.cards=PDKUtils.transformCards(n.cards),n.last_out_cards=PDKUtils.transformCards(n.last_out_cards),this._mySeat.addCards(n.cards,!this._reconnectIn),n.players.forEach(function(t){var n=e.getSeatById(t.seatid);if(n.setHang(1==t.is_deposit),pdkServer.isMatch){var i={imageid:"pdk_icon_head10",nickname:"参赛玩家"};n.userInfoView.update(i)}1==t.is_offline&&n.setUserOffline(!0),e._mySeat.seatid!=n.seatid&&n.setCardCount(t.left_card)}),pdkServer.isMatch||this.isPersonalGame||(this.setBeforeWincnt(),this.setRedCoin()),pdkServer.hang(!1),this.autoOpenRecorder(),PDKBagService.instance.refreshBagInfo(),PDKalien.PDKSoundManager.instance.playMusic(PDKResNames.pdk_bgm);var i=-1,o=n.last_out_cards;if(n.last_out_cards.length>0){var a=this.getSeatById(n.last_out_seatid);i=a.useCard(o,!1,!1)}this.onAskPlayCard({cardType:i,cardids:o,pseatid:n.last_out_seatid,seatid:n.curr_seatid,time:14})},e}(PDKalien.SceneBase);__reflect(ScenePDKPlay.prototype,"ScenePDKPlay");